function OO(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hk={exports:{}},hh={},zk={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qu=Symbol.for("react.element"),RO=Symbol.for("react.portal"),MO=Symbol.for("react.fragment"),$O=Symbol.for("react.strict_mode"),DO=Symbol.for("react.profiler"),LO=Symbol.for("react.provider"),UO=Symbol.for("react.context"),FO=Symbol.for("react.forward_ref"),BO=Symbol.for("react.suspense"),qO=Symbol.for("react.memo"),VO=Symbol.for("react.lazy"),Eb=Symbol.iterator;function GO(t){return t===null||typeof t!="object"?null:(t=Eb&&t[Eb]||t["@@iterator"],typeof t=="function"?t:null)}var Wk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kk=Object.assign,Jk={};function ks(t,e,r){this.props=t,this.context=e,this.refs=Jk,this.updater=r||Wk}ks.prototype.isReactComponent={};ks.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ks.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Yk(){}Yk.prototype=ks.prototype;function z0(t,e,r){this.props=t,this.context=e,this.refs=Jk,this.updater=r||Wk}var W0=z0.prototype=new Yk;W0.constructor=z0;Kk(W0,ks.prototype);W0.isPureReactComponent=!0;var kb=Array.isArray,Xk=Object.prototype.hasOwnProperty,K0={current:null},Qk={key:!0,ref:!0,__self:!0,__source:!0};function Zk(t,e,r){var n,i={},o=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Xk.call(e,n)&&!Qk.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:Qu,type:t,key:o,ref:a,props:i,_owner:K0.current}}function HO(t,e){return{$$typeof:Qu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function J0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qu}function zO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Tb=/\/+/g;function Lp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zO(""+t.key):e.toString(36)}function ud(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Qu:case RO:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+Lp(a,0):n,kb(i)?(r="",t!=null&&(r=t.replace(Tb,"$&/")+"/"),ud(i,e,r,"",function(c){return c})):i!=null&&(J0(i)&&(i=HO(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Tb,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",kb(t))for(var s=0;s<t.length;s++){o=t[s];var u=n+Lp(o,s);a+=ud(o,e,r,u,i)}else if(u=GO(t),typeof u=="function")for(t=u.call(t),s=0;!(o=t.next()).done;)o=o.value,u=n+Lp(o,s++),a+=ud(o,e,r,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function _c(t,e,r){if(t==null)return t;var n=[],i=0;return ud(t,n,"","",function(o){return e.call(r,o,i++)}),n}function WO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fr={current:null},cd={transition:null},KO={ReactCurrentDispatcher:fr,ReactCurrentBatchConfig:cd,ReactCurrentOwner:K0};function eT(){throw Error("act(...) is not supported in production builds of React.")}Ue.Children={map:_c,forEach:function(t,e,r){_c(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return _c(t,function(){e++}),e},toArray:function(t){return _c(t,function(e){return e})||[]},only:function(t){if(!J0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ue.Component=ks;Ue.Fragment=MO;Ue.Profiler=DO;Ue.PureComponent=z0;Ue.StrictMode=$O;Ue.Suspense=BO;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KO;Ue.act=eT;Ue.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Kk({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=K0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in e)Xk.call(e,u)&&!Qk.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&s!==void 0?s[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){s=Array(u);for(var c=0;c<u;c++)s[c]=arguments[c+2];n.children=s}return{$$typeof:Qu,type:t.type,key:i,ref:o,props:n,_owner:a}};Ue.createContext=function(t){return t={$$typeof:UO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:LO,_context:t},t.Consumer=t};Ue.createElement=Zk;Ue.createFactory=function(t){var e=Zk.bind(null,t);return e.type=t,e};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(t){return{$$typeof:FO,render:t}};Ue.isValidElement=J0;Ue.lazy=function(t){return{$$typeof:VO,_payload:{_status:-1,_result:t},_init:WO}};Ue.memo=function(t,e){return{$$typeof:qO,type:t,compare:e===void 0?null:e}};Ue.startTransition=function(t){var e=cd.transition;cd.transition={};try{t()}finally{cd.transition=e}};Ue.unstable_act=eT;Ue.useCallback=function(t,e){return fr.current.useCallback(t,e)};Ue.useContext=function(t){return fr.current.useContext(t)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(t){return fr.current.useDeferredValue(t)};Ue.useEffect=function(t,e){return fr.current.useEffect(t,e)};Ue.useId=function(){return fr.current.useId()};Ue.useImperativeHandle=function(t,e,r){return fr.current.useImperativeHandle(t,e,r)};Ue.useInsertionEffect=function(t,e){return fr.current.useInsertionEffect(t,e)};Ue.useLayoutEffect=function(t,e){return fr.current.useLayoutEffect(t,e)};Ue.useMemo=function(t,e){return fr.current.useMemo(t,e)};Ue.useReducer=function(t,e,r){return fr.current.useReducer(t,e,r)};Ue.useRef=function(t){return fr.current.useRef(t)};Ue.useState=function(t){return fr.current.useState(t)};Ue.useSyncExternalStore=function(t,e,r){return fr.current.useSyncExternalStore(t,e,r)};Ue.useTransition=function(){return fr.current.useTransition()};Ue.version="18.3.1";zk.exports=Ue;var T=zk.exports;const G=Qe(T),JO=OO({__proto__:null,default:G},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YO=T,XO=Symbol.for("react.element"),QO=Symbol.for("react.fragment"),ZO=Object.prototype.hasOwnProperty,eR=YO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tR={key:!0,ref:!0,__self:!0,__source:!0};function tT(t,e,r){var n,i={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)ZO.call(e,n)&&!tR.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:XO,type:t,key:o,ref:a,props:i,_owner:eR.current}}hh.Fragment=QO;hh.jsx=tT;hh.jsxs=tT;Hk.exports=hh;var l=Hk.exports,Qm={},rT={exports:{}},Mr={},nT={exports:{}},iT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,W){var K=U.length;U.push(W);e:for(;0<K;){var re=K-1>>>1,Y=U[re];if(0<i(Y,W))U[re]=W,U[K]=Y,K=re;else break e}}function r(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var W=U[0],K=U.pop();if(K!==W){U[0]=K;e:for(var re=0,Y=U.length,ye=Y>>>1;re<ye;){var I=2*(re+1)-1,Z=U[I],ce=I+1,ve=U[ce];if(0>i(Z,K))ce<Y&&0>i(ve,Z)?(U[re]=ve,U[ce]=K,re=ce):(U[re]=Z,U[I]=K,re=I);else if(ce<Y&&0>i(ve,K))U[re]=ve,U[ce]=K,re=ce;else break e}}return W}function i(U,W){var K=U.sortIndex-W.sortIndex;return K!==0?K:U.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var u=[],c=[],d=1,f=null,h=3,g=!1,b=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(U){for(var W=r(c);W!==null;){if(W.callback===null)n(c);else if(W.startTime<=U)n(c),W.sortIndex=W.expirationTime,e(u,W);else break;W=r(c)}}function E(U){if(v=!1,w(U),!b)if(r(u)!==null)b=!0,D(S);else{var W=r(c);W!==null&&B(E,W.startTime-U)}}function S(U,W){b=!1,v&&(v=!1,x(A),A=-1),g=!0;var K=h;try{for(w(W),f=r(u);f!==null&&(!(f.expirationTime>W)||U&&!$());){var re=f.callback;if(typeof re=="function"){f.callback=null,h=f.priorityLevel;var Y=re(f.expirationTime<=W);W=t.unstable_now(),typeof Y=="function"?f.callback=Y:f===r(u)&&n(u),w(W)}else n(u);f=r(u)}if(f!==null)var ye=!0;else{var I=r(c);I!==null&&B(E,I.startTime-W),ye=!1}return ye}finally{f=null,h=K,g=!1}}var N=!1,k=null,A=-1,C=5,R=-1;function $(){return!(t.unstable_now()-R<C)}function L(){if(k!==null){var U=t.unstable_now();R=U;var W=!0;try{W=k(!0,U)}finally{W?M():(N=!1,k=null)}}else N=!1}var M;if(typeof _=="function")M=function(){_(L)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,P=O.port2;O.port1.onmessage=L,M=function(){P.postMessage(null)}}else M=function(){y(L,0)};function D(U){k=U,N||(N=!0,M())}function B(U,W){A=y(function(){U(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){b||g||(b=!0,D(S))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(U){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var K=h;h=W;try{return U()}finally{h=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var K=h;h=U;try{return W()}finally{h=K}},t.unstable_scheduleCallback=function(U,W,K){var re=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?re+K:re):K=re,U){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=K+Y,U={id:d++,callback:W,priorityLevel:U,startTime:K,expirationTime:Y,sortIndex:-1},K>re?(U.sortIndex=K,e(c,U),r(u)===null&&U===r(c)&&(v?(x(A),A=-1):v=!0,B(E,K-re))):(U.sortIndex=Y,e(u,U),b||g||(b=!0,D(S))),U},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(U){var W=h;return function(){var K=h;h=W;try{return U.apply(this,arguments)}finally{h=K}}}})(iT);nT.exports=iT;var rR=nT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nR=T,Or=rR;function ue(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oT=new Set,Gl={};function Bo(t,e){za(t,e),za(t+"Capture",e)}function za(t,e){for(Gl[t]=e,t=0;t<e.length;t++)oT.add(e[t])}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zm=Object.prototype.hasOwnProperty,iR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cb={},Ab={};function oR(t){return Zm.call(Ab,t)?!0:Zm.call(Cb,t)?!1:iR.test(t)?Ab[t]=!0:(Cb[t]=!0,!1)}function aR(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function sR(t,e,r,n){if(e===null||typeof e>"u"||aR(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hr(t,e,r,n,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yt[t]=new hr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Yt[e]=new hr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yt[t]=new hr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yt[t]=new hr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yt[t]=new hr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yt[t]=new hr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yt[t]=new hr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yt[t]=new hr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yt[t]=new hr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Y0=/[\-:]([a-z])/g;function X0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Y0,X0);Yt[e]=new hr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Y0,X0);Yt[e]=new hr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Y0,X0);Yt[e]=new hr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yt[t]=new hr(t,1,!1,t.toLowerCase(),null,!1,!1)});Yt.xlinkHref=new hr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yt[t]=new hr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Q0(t,e,r,n){var i=Yt.hasOwnProperty(e)?Yt[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(sR(e,r,i,n)&&(r=null),n||i===null?oR(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var di=nR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sc=Symbol.for("react.element"),ma=Symbol.for("react.portal"),ga=Symbol.for("react.fragment"),Z0=Symbol.for("react.strict_mode"),eg=Symbol.for("react.profiler"),aT=Symbol.for("react.provider"),sT=Symbol.for("react.context"),ev=Symbol.for("react.forward_ref"),tg=Symbol.for("react.suspense"),rg=Symbol.for("react.suspense_list"),tv=Symbol.for("react.memo"),bi=Symbol.for("react.lazy"),lT=Symbol.for("react.offscreen"),jb=Symbol.iterator;function Xs(t){return t===null||typeof t!="object"?null:(t=jb&&t[jb]||t["@@iterator"],typeof t=="function"?t:null)}var pt=Object.assign,Up;function yl(t){if(Up===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Up=e&&e[1]||""}return`
`+Up+t}var Fp=!1;function Bp(t,e){if(!t||Fp)return"";Fp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=s);break}}}finally{Fp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?yl(t):""}function lR(t){switch(t.tag){case 5:return yl(t.type);case 16:return yl("Lazy");case 13:return yl("Suspense");case 19:return yl("SuspenseList");case 0:case 2:case 15:return t=Bp(t.type,!1),t;case 11:return t=Bp(t.type.render,!1),t;case 1:return t=Bp(t.type,!0),t;default:return""}}function ng(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ga:return"Fragment";case ma:return"Portal";case eg:return"Profiler";case Z0:return"StrictMode";case tg:return"Suspense";case rg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sT:return(t.displayName||"Context")+".Consumer";case aT:return(t._context.displayName||"Context")+".Provider";case ev:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tv:return e=t.displayName||null,e!==null?e:ng(t.type)||"Memo";case bi:e=t._payload,t=t._init;try{return ng(t(e))}catch{}}return null}function uR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ng(e);case 8:return e===Z0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cR(t){var e=uT(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nc(t){t._valueTracker||(t._valueTracker=cR(t))}function cT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=uT(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Sd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ig(t,e){var r=e.checked;return pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Pb(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Vi(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dT(t,e){e=e.checked,e!=null&&Q0(t,"checked",e,!1)}function og(t,e){dT(t,e);var r=Vi(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ag(t,e.type,r):e.hasOwnProperty("defaultValue")&&ag(t,e.type,Vi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ib(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function ag(t,e,r){(e!=="number"||Sd(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var vl=Array.isArray;function Oa(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Vi(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function sg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ue(91));return pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ob(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ue(92));if(vl(r)){if(1<r.length)throw Error(ue(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Vi(r)}}function fT(t,e){var r=Vi(e.value),n=Vi(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Rb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function hT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?hT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ec,pT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ec=Ec||document.createElement("div"),Ec.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ec.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Hl(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Nl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dR=["Webkit","ms","Moz","O"];Object.keys(Nl).forEach(function(t){dR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Nl[e]=Nl[t]})});function mT(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Nl.hasOwnProperty(t)&&Nl[t]?(""+e).trim():e+"px"}function gT(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=mT(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var fR=pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ug(t,e){if(e){if(fR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ue(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ue(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ue(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ue(62))}}function cg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dg=null;function rv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fg=null,Ra=null,Ma=null;function Mb(t){if(t=tc(t)){if(typeof fg!="function")throw Error(ue(280));var e=t.stateNode;e&&(e=vh(e),fg(t.stateNode,t.type,e))}}function yT(t){Ra?Ma?Ma.push(t):Ma=[t]:Ra=t}function vT(){if(Ra){var t=Ra,e=Ma;if(Ma=Ra=null,Mb(t),e)for(t=0;t<e.length;t++)Mb(e[t])}}function xT(t,e){return t(e)}function bT(){}var qp=!1;function wT(t,e,r){if(qp)return t(e,r);qp=!0;try{return xT(t,e,r)}finally{qp=!1,(Ra!==null||Ma!==null)&&(bT(),vT())}}function zl(t,e){var r=t.stateNode;if(r===null)return null;var n=vh(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ue(231,e,typeof r));return r}var hg=!1;if(ri)try{var Qs={};Object.defineProperty(Qs,"passive",{get:function(){hg=!0}}),window.addEventListener("test",Qs,Qs),window.removeEventListener("test",Qs,Qs)}catch{hg=!1}function hR(t,e,r,n,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var El=!1,Nd=null,Ed=!1,pg=null,pR={onError:function(t){El=!0,Nd=t}};function mR(t,e,r,n,i,o,a,s,u){El=!1,Nd=null,hR.apply(pR,arguments)}function gR(t,e,r,n,i,o,a,s,u){if(mR.apply(this,arguments),El){if(El){var c=Nd;El=!1,Nd=null}else throw Error(ue(198));Ed||(Ed=!0,pg=c)}}function qo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function _T(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $b(t){if(qo(t)!==t)throw Error(ue(188))}function yR(t){var e=t.alternate;if(!e){if(e=qo(t),e===null)throw Error(ue(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return $b(i),t;if(o===n)return $b(i),e;o=o.sibling}throw Error(ue(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a)throw Error(ue(189))}}if(r.alternate!==n)throw Error(ue(190))}if(r.tag!==3)throw Error(ue(188));return r.stateNode.current===r?t:e}function ST(t){return t=yR(t),t!==null?NT(t):null}function NT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=NT(t);if(e!==null)return e;t=t.sibling}return null}var ET=Or.unstable_scheduleCallback,Db=Or.unstable_cancelCallback,vR=Or.unstable_shouldYield,xR=Or.unstable_requestPaint,wt=Or.unstable_now,bR=Or.unstable_getCurrentPriorityLevel,nv=Or.unstable_ImmediatePriority,kT=Or.unstable_UserBlockingPriority,kd=Or.unstable_NormalPriority,wR=Or.unstable_LowPriority,TT=Or.unstable_IdlePriority,ph=null,$n=null;function _R(t){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(ph,t,void 0,(t.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:ER,SR=Math.log,NR=Math.LN2;function ER(t){return t>>>=0,t===0?32:31-(SR(t)/NR|0)|0}var kc=64,Tc=4194304;function xl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Td(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,o=t.pingedLanes,a=r&268435455;if(a!==0){var s=a&~i;s!==0?n=xl(s):(o&=a,o!==0&&(n=xl(o)))}else a=r&~i,a!==0?n=xl(a):o!==0&&(n=xl(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-bn(e),i=1<<r,n|=t[r],e&=~i;return n}function kR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TR(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-bn(o),s=1<<a,u=i[a];u===-1?(!(s&r)||s&n)&&(i[a]=kR(s,e)):u<=e&&(t.expiredLanes|=s),o&=~s}}function mg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function CT(){var t=kc;return kc<<=1,!(kc&4194240)&&(kc=64),t}function Vp(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Zu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bn(e),t[e]=r}function CR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-bn(r),o=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~o}}function iv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-bn(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Ke=0;function AT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jT,ov,PT,IT,OT,gg=!1,Cc=[],Oi=null,Ri=null,Mi=null,Wl=new Map,Kl=new Map,Ni=[],AR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lb(t,e){switch(t){case"focusin":case"focusout":Oi=null;break;case"dragenter":case"dragleave":Ri=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":Wl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(e.pointerId)}}function Zs(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},e!==null&&(e=tc(e),e!==null&&ov(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function jR(t,e,r,n,i){switch(e){case"focusin":return Oi=Zs(Oi,t,e,r,n,i),!0;case"dragenter":return Ri=Zs(Ri,t,e,r,n,i),!0;case"mouseover":return Mi=Zs(Mi,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return Wl.set(o,Zs(Wl.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Kl.set(o,Zs(Kl.get(o)||null,t,e,r,n,i)),!0}return!1}function RT(t){var e=mo(t.target);if(e!==null){var r=qo(e);if(r!==null){if(e=r.tag,e===13){if(e=_T(r),e!==null){t.blockedOn=e,OT(t.priority,function(){PT(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function dd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=yg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);dg=n,r.target.dispatchEvent(n),dg=null}else return e=tc(r),e!==null&&ov(e),t.blockedOn=r,!1;e.shift()}return!0}function Ub(t,e,r){dd(t)&&r.delete(e)}function PR(){gg=!1,Oi!==null&&dd(Oi)&&(Oi=null),Ri!==null&&dd(Ri)&&(Ri=null),Mi!==null&&dd(Mi)&&(Mi=null),Wl.forEach(Ub),Kl.forEach(Ub)}function el(t,e){t.blockedOn===e&&(t.blockedOn=null,gg||(gg=!0,Or.unstable_scheduleCallback(Or.unstable_NormalPriority,PR)))}function Jl(t){function e(i){return el(i,t)}if(0<Cc.length){el(Cc[0],t);for(var r=1;r<Cc.length;r++){var n=Cc[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Oi!==null&&el(Oi,t),Ri!==null&&el(Ri,t),Mi!==null&&el(Mi,t),Wl.forEach(e),Kl.forEach(e),r=0;r<Ni.length;r++)n=Ni[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ni.length&&(r=Ni[0],r.blockedOn===null);)RT(r),r.blockedOn===null&&Ni.shift()}var $a=di.ReactCurrentBatchConfig,Cd=!0;function IR(t,e,r,n){var i=Ke,o=$a.transition;$a.transition=null;try{Ke=1,av(t,e,r,n)}finally{Ke=i,$a.transition=o}}function OR(t,e,r,n){var i=Ke,o=$a.transition;$a.transition=null;try{Ke=4,av(t,e,r,n)}finally{Ke=i,$a.transition=o}}function av(t,e,r,n){if(Cd){var i=yg(t,e,r,n);if(i===null)Zp(t,e,n,Ad,r),Lb(t,n);else if(jR(i,t,e,r,n))n.stopPropagation();else if(Lb(t,n),e&4&&-1<AR.indexOf(t)){for(;i!==null;){var o=tc(i);if(o!==null&&jT(o),o=yg(t,e,r,n),o===null&&Zp(t,e,n,Ad,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else Zp(t,e,n,null,r)}}var Ad=null;function yg(t,e,r,n){if(Ad=null,t=rv(n),t=mo(t),t!==null)if(e=qo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=_T(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ad=t,null}function MT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bR()){case nv:return 1;case kT:return 4;case kd:case wR:return 16;case TT:return 536870912;default:return 16}default:return 16}}var Ci=null,sv=null,fd=null;function $T(){if(fd)return fd;var t,e=sv,r=e.length,n,i="value"in Ci?Ci.value:Ci.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[o-n];n++);return fd=i.slice(t,1<n?1-n:void 0)}function hd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ac(){return!0}function Fb(){return!1}function $r(t){function e(r,n,i,o,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ac:Fb,this.isPropagationStopped=Fb,this}return pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ac)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ac)},persist:function(){},isPersistent:Ac}),e}var Ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lv=$r(Ts),ec=pt({},Ts,{view:0,detail:0}),RR=$r(ec),Gp,Hp,tl,mh=pt({},ec,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==tl&&(tl&&t.type==="mousemove"?(Gp=t.screenX-tl.screenX,Hp=t.screenY-tl.screenY):Hp=Gp=0,tl=t),Gp)},movementY:function(t){return"movementY"in t?t.movementY:Hp}}),Bb=$r(mh),MR=pt({},mh,{dataTransfer:0}),$R=$r(MR),DR=pt({},ec,{relatedTarget:0}),zp=$r(DR),LR=pt({},Ts,{animationName:0,elapsedTime:0,pseudoElement:0}),UR=$r(LR),FR=pt({},Ts,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),BR=$r(FR),qR=pt({},Ts,{data:0}),qb=$r(qR),VR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HR[t])?!!e[t]:!1}function uv(){return zR}var WR=pt({},ec,{key:function(t){if(t.key){var e=VR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=hd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uv,charCode:function(t){return t.type==="keypress"?hd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?hd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),KR=$r(WR),JR=pt({},mh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vb=$r(JR),YR=pt({},ec,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uv}),XR=$r(YR),QR=pt({},Ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZR=$r(QR),eM=pt({},mh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tM=$r(eM),rM=[9,13,27,32],cv=ri&&"CompositionEvent"in window,kl=null;ri&&"documentMode"in document&&(kl=document.documentMode);var nM=ri&&"TextEvent"in window&&!kl,DT=ri&&(!cv||kl&&8<kl&&11>=kl),Gb=" ",Hb=!1;function LT(t,e){switch(t){case"keyup":return rM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ya=!1;function iM(t,e){switch(t){case"compositionend":return UT(e);case"keypress":return e.which!==32?null:(Hb=!0,Gb);case"textInput":return t=e.data,t===Gb&&Hb?null:t;default:return null}}function oM(t,e){if(ya)return t==="compositionend"||!cv&&LT(t,e)?(t=$T(),fd=sv=Ci=null,ya=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DT&&e.locale!=="ko"?null:e.data;default:return null}}var aM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!aM[t.type]:e==="textarea"}function FT(t,e,r,n){yT(n),e=jd(e,"onChange"),0<e.length&&(r=new lv("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Tl=null,Yl=null;function sM(t){XT(t,0)}function gh(t){var e=ba(t);if(cT(e))return t}function lM(t,e){if(t==="change")return e}var BT=!1;if(ri){var Wp;if(ri){var Kp="oninput"in document;if(!Kp){var Wb=document.createElement("div");Wb.setAttribute("oninput","return;"),Kp=typeof Wb.oninput=="function"}Wp=Kp}else Wp=!1;BT=Wp&&(!document.documentMode||9<document.documentMode)}function Kb(){Tl&&(Tl.detachEvent("onpropertychange",qT),Yl=Tl=null)}function qT(t){if(t.propertyName==="value"&&gh(Yl)){var e=[];FT(e,Yl,t,rv(t)),wT(sM,e)}}function uM(t,e,r){t==="focusin"?(Kb(),Tl=e,Yl=r,Tl.attachEvent("onpropertychange",qT)):t==="focusout"&&Kb()}function cM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gh(Yl)}function dM(t,e){if(t==="click")return gh(e)}function fM(t,e){if(t==="input"||t==="change")return gh(e)}function hM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nn=typeof Object.is=="function"?Object.is:hM;function Xl(t,e){if(Nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Zm.call(e,i)||!Nn(t[i],e[i]))return!1}return!0}function Jb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yb(t,e){var r=Jb(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jb(r)}}function VT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?VT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GT(){for(var t=window,e=Sd();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Sd(t.document)}return e}function dv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pM(t){var e=GT(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&VT(r.ownerDocument.documentElement,r)){if(n!==null&&dv(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!t.extend&&o>n&&(i=n,n=o,o=i),i=Yb(r,o);var a=Yb(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mM=ri&&"documentMode"in document&&11>=document.documentMode,va=null,vg=null,Cl=null,xg=!1;function Xb(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;xg||va==null||va!==Sd(n)||(n=va,"selectionStart"in n&&dv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Cl&&Xl(Cl,n)||(Cl=n,n=jd(vg,"onSelect"),0<n.length&&(e=new lv("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=va)))}function jc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var xa={animationend:jc("Animation","AnimationEnd"),animationiteration:jc("Animation","AnimationIteration"),animationstart:jc("Animation","AnimationStart"),transitionend:jc("Transition","TransitionEnd")},Jp={},HT={};ri&&(HT=document.createElement("div").style,"AnimationEvent"in window||(delete xa.animationend.animation,delete xa.animationiteration.animation,delete xa.animationstart.animation),"TransitionEvent"in window||delete xa.transitionend.transition);function yh(t){if(Jp[t])return Jp[t];if(!xa[t])return t;var e=xa[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in HT)return Jp[t]=e[r];return t}var zT=yh("animationend"),WT=yh("animationiteration"),KT=yh("animationstart"),JT=yh("transitionend"),YT=new Map,Qb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zi(t,e){YT.set(t,e),Bo(e,[t])}for(var Yp=0;Yp<Qb.length;Yp++){var Xp=Qb[Yp],gM=Xp.toLowerCase(),yM=Xp[0].toUpperCase()+Xp.slice(1);zi(gM,"on"+yM)}zi(zT,"onAnimationEnd");zi(WT,"onAnimationIteration");zi(KT,"onAnimationStart");zi("dblclick","onDoubleClick");zi("focusin","onFocus");zi("focusout","onBlur");zi(JT,"onTransitionEnd");za("onMouseEnter",["mouseout","mouseover"]);za("onMouseLeave",["mouseout","mouseover"]);za("onPointerEnter",["pointerout","pointerover"]);za("onPointerLeave",["pointerout","pointerover"]);Bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vM=new Set("cancel close invalid load scroll toggle".split(" ").concat(bl));function Zb(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,gR(n,e,void 0,t),t.currentTarget=null}function XT(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var a=n.length-1;0<=a;a--){var s=n[a],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Zb(i,s,c),o=u}else for(a=0;a<n.length;a++){if(s=n[a],u=s.instance,c=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Zb(i,s,c),o=u}}}if(Ed)throw t=pg,Ed=!1,pg=null,t}function rt(t,e){var r=e[Ng];r===void 0&&(r=e[Ng]=new Set);var n=t+"__bubble";r.has(n)||(QT(e,t,2,!1),r.add(n))}function Qp(t,e,r){var n=0;e&&(n|=4),QT(r,t,n,e)}var Pc="_reactListening"+Math.random().toString(36).slice(2);function Ql(t){if(!t[Pc]){t[Pc]=!0,oT.forEach(function(r){r!=="selectionchange"&&(vM.has(r)||Qp(r,!1,t),Qp(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pc]||(e[Pc]=!0,Qp("selectionchange",!1,e))}}function QT(t,e,r,n){switch(MT(e)){case 1:var i=IR;break;case 4:i=OR;break;default:i=av}r=i.bind(null,e,r,t),i=void 0,!hg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Zp(t,e,r,n,i){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;s!==null;){if(a=mo(s),a===null)return;if(u=a.tag,u===5||u===6){n=o=a;continue e}s=s.parentNode}}n=n.return}wT(function(){var c=o,d=rv(r),f=[];e:{var h=YT.get(t);if(h!==void 0){var g=lv,b=t;switch(t){case"keypress":if(hd(r)===0)break e;case"keydown":case"keyup":g=KR;break;case"focusin":b="focus",g=zp;break;case"focusout":b="blur",g=zp;break;case"beforeblur":case"afterblur":g=zp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Bb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=$R;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=XR;break;case zT:case WT:case KT:g=UR;break;case JT:g=ZR;break;case"scroll":g=RR;break;case"wheel":g=tM;break;case"copy":case"cut":case"paste":g=BR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Vb}var v=(e&4)!==0,y=!v&&t==="scroll",x=v?h!==null?h+"Capture":null:h;v=[];for(var _=c,w;_!==null;){w=_;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,x!==null&&(E=zl(_,x),E!=null&&v.push(Zl(_,E,w)))),y)break;_=_.return}0<v.length&&(h=new g(h,b,null,r,d),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&r!==dg&&(b=r.relatedTarget||r.fromElement)&&(mo(b)||b[ni]))break e;if((g||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,g?(b=r.relatedTarget||r.toElement,g=c,b=b?mo(b):null,b!==null&&(y=qo(b),b!==y||b.tag!==5&&b.tag!==6)&&(b=null)):(g=null,b=c),g!==b)){if(v=Bb,E="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(v=Vb,E="onPointerLeave",x="onPointerEnter",_="pointer"),y=g==null?h:ba(g),w=b==null?h:ba(b),h=new v(E,_+"leave",g,r,d),h.target=y,h.relatedTarget=w,E=null,mo(d)===c&&(v=new v(x,_+"enter",b,r,d),v.target=w,v.relatedTarget=y,E=v),y=E,g&&b)t:{for(v=g,x=b,_=0,w=v;w;w=ea(w))_++;for(w=0,E=x;E;E=ea(E))w++;for(;0<_-w;)v=ea(v),_--;for(;0<w-_;)x=ea(x),w--;for(;_--;){if(v===x||x!==null&&v===x.alternate)break t;v=ea(v),x=ea(x)}v=null}else v=null;g!==null&&ew(f,h,g,v,!1),b!==null&&y!==null&&ew(f,y,b,v,!0)}}e:{if(h=c?ba(c):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var S=lM;else if(zb(h))if(BT)S=fM;else{S=cM;var N=uM}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=dM);if(S&&(S=S(t,c))){FT(f,S,r,d);break e}N&&N(t,h,c),t==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&ag(h,"number",h.value)}switch(N=c?ba(c):window,t){case"focusin":(zb(N)||N.contentEditable==="true")&&(va=N,vg=c,Cl=null);break;case"focusout":Cl=vg=va=null;break;case"mousedown":xg=!0;break;case"contextmenu":case"mouseup":case"dragend":xg=!1,Xb(f,r,d);break;case"selectionchange":if(mM)break;case"keydown":case"keyup":Xb(f,r,d)}var k;if(cv)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ya?LT(t,r)&&(A="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(DT&&r.locale!=="ko"&&(ya||A!=="onCompositionStart"?A==="onCompositionEnd"&&ya&&(k=$T()):(Ci=d,sv="value"in Ci?Ci.value:Ci.textContent,ya=!0)),N=jd(c,A),0<N.length&&(A=new qb(A,t,null,r,d),f.push({event:A,listeners:N}),k?A.data=k:(k=UT(r),k!==null&&(A.data=k)))),(k=nM?iM(t,r):oM(t,r))&&(c=jd(c,"onBeforeInput"),0<c.length&&(d=new qb("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:c}),d.data=k))}XT(f,e)})}function Zl(t,e,r){return{instance:t,listener:e,currentTarget:r}}function jd(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=zl(t,r),o!=null&&n.unshift(Zl(t,o,i)),o=zl(t,e),o!=null&&n.push(Zl(t,o,i))),t=t.return}return n}function ea(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ew(t,e,r,n,i){for(var o=e._reactName,a=[];r!==null&&r!==n;){var s=r,u=s.alternate,c=s.stateNode;if(u!==null&&u===n)break;s.tag===5&&c!==null&&(s=c,i?(u=zl(r,o),u!=null&&a.unshift(Zl(r,u,s))):i||(u=zl(r,o),u!=null&&a.push(Zl(r,u,s)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var xM=/\r\n?/g,bM=/\u0000|\uFFFD/g;function tw(t){return(typeof t=="string"?t:""+t).replace(xM,`
`).replace(bM,"")}function Ic(t,e,r){if(e=tw(e),tw(t)!==e&&r)throw Error(ue(425))}function Pd(){}var bg=null,wg=null;function _g(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sg=typeof setTimeout=="function"?setTimeout:void 0,wM=typeof clearTimeout=="function"?clearTimeout:void 0,rw=typeof Promise=="function"?Promise:void 0,_M=typeof queueMicrotask=="function"?queueMicrotask:typeof rw<"u"?function(t){return rw.resolve(null).then(t).catch(SM)}:Sg;function SM(t){setTimeout(function(){throw t})}function em(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Jl(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Jl(e)}function $i(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Cs=Math.random().toString(36).slice(2),On="__reactFiber$"+Cs,eu="__reactProps$"+Cs,ni="__reactContainer$"+Cs,Ng="__reactEvents$"+Cs,NM="__reactListeners$"+Cs,EM="__reactHandles$"+Cs;function mo(t){var e=t[On];if(e)return e;for(var r=t.parentNode;r;){if(e=r[ni]||r[On]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=nw(t);t!==null;){if(r=t[On])return r;t=nw(t)}return e}t=r,r=t.parentNode}return null}function tc(t){return t=t[On]||t[ni],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ba(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ue(33))}function vh(t){return t[eu]||null}var Eg=[],wa=-1;function Wi(t){return{current:t}}function ot(t){0>wa||(t.current=Eg[wa],Eg[wa]=null,wa--)}function tt(t,e){wa++,Eg[wa]=t.current,t.current=e}var Gi={},ar=Wi(Gi),vr=Wi(!1),Co=Gi;function Wa(t,e){var r=t.type.contextTypes;if(!r)return Gi;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function xr(t){return t=t.childContextTypes,t!=null}function Id(){ot(vr),ot(ar)}function iw(t,e,r){if(ar.current!==Gi)throw Error(ue(168));tt(ar,e),tt(vr,r)}function ZT(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(ue(108,uR(t)||"Unknown",i));return pt({},r,n)}function Od(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gi,Co=ar.current,tt(ar,t),tt(vr,vr.current),!0}function ow(t,e,r){var n=t.stateNode;if(!n)throw Error(ue(169));r?(t=ZT(t,e,Co),n.__reactInternalMemoizedMergedChildContext=t,ot(vr),ot(ar),tt(ar,t)):ot(vr),tt(vr,r)}var Hn=null,xh=!1,tm=!1;function eC(t){Hn===null?Hn=[t]:Hn.push(t)}function kM(t){xh=!0,eC(t)}function Ki(){if(!tm&&Hn!==null){tm=!0;var t=0,e=Ke;try{var r=Hn;for(Ke=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Hn=null,xh=!1}catch(i){throw Hn!==null&&(Hn=Hn.slice(t+1)),ET(nv,Ki),i}finally{Ke=e,tm=!1}}return null}var _a=[],Sa=0,Rd=null,Md=0,Vr=[],Gr=0,Ao=null,zn=1,Wn="";function oo(t,e){_a[Sa++]=Md,_a[Sa++]=Rd,Rd=t,Md=e}function tC(t,e,r){Vr[Gr++]=zn,Vr[Gr++]=Wn,Vr[Gr++]=Ao,Ao=t;var n=zn;t=Wn;var i=32-bn(n)-1;n&=~(1<<i),r+=1;var o=32-bn(e)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,zn=1<<32-bn(e)+i|r<<i|n,Wn=o+t}else zn=1<<o|r<<i|n,Wn=t}function fv(t){t.return!==null&&(oo(t,1),tC(t,1,0))}function hv(t){for(;t===Rd;)Rd=_a[--Sa],_a[Sa]=null,Md=_a[--Sa],_a[Sa]=null;for(;t===Ao;)Ao=Vr[--Gr],Vr[Gr]=null,Wn=Vr[--Gr],Vr[Gr]=null,zn=Vr[--Gr],Vr[Gr]=null}var Ir=null,Pr=null,st=!1,gn=null;function rC(t,e){var r=zr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function aw(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ir=t,Pr=$i(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ir=t,Pr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ao!==null?{id:zn,overflow:Wn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=zr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ir=t,Pr=null,!0):!1;default:return!1}}function kg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tg(t){if(st){var e=Pr;if(e){var r=e;if(!aw(t,e)){if(kg(t))throw Error(ue(418));e=$i(r.nextSibling);var n=Ir;e&&aw(t,e)?rC(n,r):(t.flags=t.flags&-4097|2,st=!1,Ir=t)}}else{if(kg(t))throw Error(ue(418));t.flags=t.flags&-4097|2,st=!1,Ir=t}}}function sw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ir=t}function Oc(t){if(t!==Ir)return!1;if(!st)return sw(t),st=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_g(t.type,t.memoizedProps)),e&&(e=Pr)){if(kg(t))throw nC(),Error(ue(418));for(;e;)rC(t,e),e=$i(e.nextSibling)}if(sw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ue(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Pr=$i(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Pr=null}}else Pr=Ir?$i(t.stateNode.nextSibling):null;return!0}function nC(){for(var t=Pr;t;)t=$i(t.nextSibling)}function Ka(){Pr=Ir=null,st=!1}function pv(t){gn===null?gn=[t]:gn.push(t)}var TM=di.ReactCurrentBatchConfig;function rl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ue(309));var n=r.stateNode}if(!n)throw Error(ue(147,t));var i=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(ue(284));if(!r._owner)throw Error(ue(290,t))}return t}function Rc(t,e){throw t=Object.prototype.toString.call(e),Error(ue(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lw(t){var e=t._init;return e(t._payload)}function iC(t){function e(x,_){if(t){var w=x.deletions;w===null?(x.deletions=[_],x.flags|=16):w.push(_)}}function r(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function n(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function i(x,_){return x=Fi(x,_),x.index=0,x.sibling=null,x}function o(x,_,w){return x.index=w,t?(w=x.alternate,w!==null?(w=w.index,w<_?(x.flags|=2,_):w):(x.flags|=2,_)):(x.flags|=1048576,_)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function s(x,_,w,E){return _===null||_.tag!==6?(_=lm(w,x.mode,E),_.return=x,_):(_=i(_,w),_.return=x,_)}function u(x,_,w,E){var S=w.type;return S===ga?d(x,_,w.props.children,E,w.key):_!==null&&(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===bi&&lw(S)===_.type)?(E=i(_,w.props),E.ref=rl(x,_,w),E.return=x,E):(E=bd(w.type,w.key,w.props,null,x.mode,E),E.ref=rl(x,_,w),E.return=x,E)}function c(x,_,w,E){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=um(w,x.mode,E),_.return=x,_):(_=i(_,w.children||[]),_.return=x,_)}function d(x,_,w,E,S){return _===null||_.tag!==7?(_=No(w,x.mode,E,S),_.return=x,_):(_=i(_,w),_.return=x,_)}function f(x,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=lm(""+_,x.mode,w),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Sc:return w=bd(_.type,_.key,_.props,null,x.mode,w),w.ref=rl(x,null,_),w.return=x,w;case ma:return _=um(_,x.mode,w),_.return=x,_;case bi:var E=_._init;return f(x,E(_._payload),w)}if(vl(_)||Xs(_))return _=No(_,x.mode,w,null),_.return=x,_;Rc(x,_)}return null}function h(x,_,w,E){var S=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:s(x,_,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Sc:return w.key===S?u(x,_,w,E):null;case ma:return w.key===S?c(x,_,w,E):null;case bi:return S=w._init,h(x,_,S(w._payload),E)}if(vl(w)||Xs(w))return S!==null?null:d(x,_,w,E,null);Rc(x,w)}return null}function g(x,_,w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(w)||null,s(_,x,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Sc:return x=x.get(E.key===null?w:E.key)||null,u(_,x,E,S);case ma:return x=x.get(E.key===null?w:E.key)||null,c(_,x,E,S);case bi:var N=E._init;return g(x,_,w,N(E._payload),S)}if(vl(E)||Xs(E))return x=x.get(w)||null,d(_,x,E,S,null);Rc(_,E)}return null}function b(x,_,w,E){for(var S=null,N=null,k=_,A=_=0,C=null;k!==null&&A<w.length;A++){k.index>A?(C=k,k=null):C=k.sibling;var R=h(x,k,w[A],E);if(R===null){k===null&&(k=C);break}t&&k&&R.alternate===null&&e(x,k),_=o(R,_,A),N===null?S=R:N.sibling=R,N=R,k=C}if(A===w.length)return r(x,k),st&&oo(x,A),S;if(k===null){for(;A<w.length;A++)k=f(x,w[A],E),k!==null&&(_=o(k,_,A),N===null?S=k:N.sibling=k,N=k);return st&&oo(x,A),S}for(k=n(x,k);A<w.length;A++)C=g(k,x,A,w[A],E),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?A:C.key),_=o(C,_,A),N===null?S=C:N.sibling=C,N=C);return t&&k.forEach(function($){return e(x,$)}),st&&oo(x,A),S}function v(x,_,w,E){var S=Xs(w);if(typeof S!="function")throw Error(ue(150));if(w=S.call(w),w==null)throw Error(ue(151));for(var N=S=null,k=_,A=_=0,C=null,R=w.next();k!==null&&!R.done;A++,R=w.next()){k.index>A?(C=k,k=null):C=k.sibling;var $=h(x,k,R.value,E);if($===null){k===null&&(k=C);break}t&&k&&$.alternate===null&&e(x,k),_=o($,_,A),N===null?S=$:N.sibling=$,N=$,k=C}if(R.done)return r(x,k),st&&oo(x,A),S;if(k===null){for(;!R.done;A++,R=w.next())R=f(x,R.value,E),R!==null&&(_=o(R,_,A),N===null?S=R:N.sibling=R,N=R);return st&&oo(x,A),S}for(k=n(x,k);!R.done;A++,R=w.next())R=g(k,x,A,R.value,E),R!==null&&(t&&R.alternate!==null&&k.delete(R.key===null?A:R.key),_=o(R,_,A),N===null?S=R:N.sibling=R,N=R);return t&&k.forEach(function(L){return e(x,L)}),st&&oo(x,A),S}function y(x,_,w,E){if(typeof w=="object"&&w!==null&&w.type===ga&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Sc:e:{for(var S=w.key,N=_;N!==null;){if(N.key===S){if(S=w.type,S===ga){if(N.tag===7){r(x,N.sibling),_=i(N,w.props.children),_.return=x,x=_;break e}}else if(N.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===bi&&lw(S)===N.type){r(x,N.sibling),_=i(N,w.props),_.ref=rl(x,N,w),_.return=x,x=_;break e}r(x,N);break}else e(x,N);N=N.sibling}w.type===ga?(_=No(w.props.children,x.mode,E,w.key),_.return=x,x=_):(E=bd(w.type,w.key,w.props,null,x.mode,E),E.ref=rl(x,_,w),E.return=x,x=E)}return a(x);case ma:e:{for(N=w.key;_!==null;){if(_.key===N)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){r(x,_.sibling),_=i(_,w.children||[]),_.return=x,x=_;break e}else{r(x,_);break}else e(x,_);_=_.sibling}_=um(w,x.mode,E),_.return=x,x=_}return a(x);case bi:return N=w._init,y(x,_,N(w._payload),E)}if(vl(w))return b(x,_,w,E);if(Xs(w))return v(x,_,w,E);Rc(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(r(x,_.sibling),_=i(_,w),_.return=x,x=_):(r(x,_),_=lm(w,x.mode,E),_.return=x,x=_),a(x)):r(x,_)}return y}var Ja=iC(!0),oC=iC(!1),$d=Wi(null),Dd=null,Na=null,mv=null;function gv(){mv=Na=Dd=null}function yv(t){var e=$d.current;ot($d),t._currentValue=e}function Cg(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Da(t,e){Dd=t,mv=Na=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mr=!0),t.firstContext=null)}function Qr(t){var e=t._currentValue;if(mv!==t)if(t={context:t,memoizedValue:e,next:null},Na===null){if(Dd===null)throw Error(ue(308));Na=t,Dd.dependencies={lanes:0,firstContext:t}}else Na=Na.next=t;return e}var go=null;function vv(t){go===null?go=[t]:go.push(t)}function aC(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,vv(e)):(r.next=i.next,i.next=r),e.interleaved=r,ii(t,n)}function ii(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var wi=!1;function xv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sC(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Di(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ve&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,ii(t,r)}return i=n.interleaved,i===null?(e.next=e,vv(n)):(e.next=i.next,i.next=e),n.interleaved=e,ii(t,r)}function pd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,iv(t,r)}}function uw(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ld(t,e,r,n){var i=t.updateQueue;wi=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var u=s,c=u.next;u.next=null,a===null?o=c:a.next=c,a=u;var d=t.alternate;d!==null&&(d=d.updateQueue,s=d.lastBaseUpdate,s!==a&&(s===null?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=u))}if(o!==null){var f=i.baseState;a=0,d=c=u=null,s=o;do{var h=s.lane,g=s.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:g,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var b=t,v=s;switch(h=e,g=r,v.tag){case 1:if(b=v.payload,typeof b=="function"){f=b.call(g,f,h);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,h=typeof b=="function"?b.call(g,f,h):b,h==null)break e;f=pt({},f,h);break e;case 2:wi=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else g={eventTime:g,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},d===null?(c=d=g,u=f):d=d.next=g,a|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Po|=a,t.lanes=a,t.memoizedState=f}}function cw(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ue(191,i));i.call(n)}}}var rc={},Dn=Wi(rc),tu=Wi(rc),ru=Wi(rc);function yo(t){if(t===rc)throw Error(ue(174));return t}function bv(t,e){switch(tt(ru,e),tt(tu,t),tt(Dn,rc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=lg(e,t)}ot(Dn),tt(Dn,e)}function Ya(){ot(Dn),ot(tu),ot(ru)}function lC(t){yo(ru.current);var e=yo(Dn.current),r=lg(e,t.type);e!==r&&(tt(tu,t),tt(Dn,r))}function wv(t){tu.current===t&&(ot(Dn),ot(tu))}var dt=Wi(0);function Ud(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rm=[];function _v(){for(var t=0;t<rm.length;t++)rm[t]._workInProgressVersionPrimary=null;rm.length=0}var md=di.ReactCurrentDispatcher,nm=di.ReactCurrentBatchConfig,jo=0,ft=null,Rt=null,Ut=null,Fd=!1,Al=!1,nu=0,CM=0;function Qt(){throw Error(ue(321))}function Sv(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Nn(t[r],e[r]))return!1;return!0}function Nv(t,e,r,n,i,o){if(jo=o,ft=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,md.current=t===null||t.memoizedState===null?IM:OM,t=r(n,i),Al){o=0;do{if(Al=!1,nu=0,25<=o)throw Error(ue(301));o+=1,Ut=Rt=null,e.updateQueue=null,md.current=RM,t=r(n,i)}while(Al)}if(md.current=Bd,e=Rt!==null&&Rt.next!==null,jo=0,Ut=Rt=ft=null,Fd=!1,e)throw Error(ue(300));return t}function Ev(){var t=nu!==0;return nu=0,t}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?ft.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function Zr(){if(Rt===null){var t=ft.alternate;t=t!==null?t.memoizedState:null}else t=Rt.next;var e=Ut===null?ft.memoizedState:Ut.next;if(e!==null)Ut=e,Rt=t;else{if(t===null)throw Error(ue(310));Rt=t,t={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Ut===null?ft.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function iu(t,e){return typeof e=="function"?e(t):e}function im(t){var e=Zr(),r=e.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=t;var n=Rt,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var s=a=null,u=null,c=o;do{var d=c.lane;if((jo&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(s=u=f,a=n):u=u.next=f,ft.lanes|=d,Po|=d}c=c.next}while(c!==null&&c!==o);u===null?a=n:u.next=s,Nn(n,e.memoizedState)||(mr=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do o=i.lane,ft.lanes|=o,Po|=o,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function om(t){var e=Zr(),r=e.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Nn(o,e.memoizedState)||(mr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function uC(){}function cC(t,e){var r=ft,n=Zr(),i=e(),o=!Nn(n.memoizedState,i);if(o&&(n.memoizedState=i,mr=!0),n=n.queue,kv(hC.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||Ut!==null&&Ut.memoizedState.tag&1){if(r.flags|=2048,ou(9,fC.bind(null,r,n,i,e),void 0,null),Ft===null)throw Error(ue(349));jo&30||dC(r,e,i)}return i}function dC(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ft.updateQueue,e===null?(e={lastEffect:null,stores:null},ft.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function fC(t,e,r,n){e.value=r,e.getSnapshot=n,pC(e)&&mC(t)}function hC(t,e,r){return r(function(){pC(e)&&mC(t)})}function pC(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Nn(t,r)}catch{return!0}}function mC(t){var e=ii(t,1);e!==null&&wn(e,t,1,-1)}function dw(t){var e=In();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:iu,lastRenderedState:t},e.queue=t,t=t.dispatch=PM.bind(null,ft,t),[e.memoizedState,t]}function ou(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ft.updateQueue,e===null?(e={lastEffect:null,stores:null},ft.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function gC(){return Zr().memoizedState}function gd(t,e,r,n){var i=In();ft.flags|=t,i.memoizedState=ou(1|e,r,void 0,n===void 0?null:n)}function bh(t,e,r,n){var i=Zr();n=n===void 0?null:n;var o=void 0;if(Rt!==null){var a=Rt.memoizedState;if(o=a.destroy,n!==null&&Sv(n,a.deps)){i.memoizedState=ou(e,r,o,n);return}}ft.flags|=t,i.memoizedState=ou(1|e,r,o,n)}function fw(t,e){return gd(8390656,8,t,e)}function kv(t,e){return bh(2048,8,t,e)}function yC(t,e){return bh(4,2,t,e)}function vC(t,e){return bh(4,4,t,e)}function xC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bC(t,e,r){return r=r!=null?r.concat([t]):null,bh(4,4,xC.bind(null,e,t),r)}function Tv(){}function wC(t,e){var r=Zr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Sv(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function _C(t,e){var r=Zr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Sv(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function SC(t,e,r){return jo&21?(Nn(r,e)||(r=CT(),ft.lanes|=r,Po|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mr=!0),t.memoizedState=r)}function AM(t,e){var r=Ke;Ke=r!==0&&4>r?r:4,t(!0);var n=nm.transition;nm.transition={};try{t(!1),e()}finally{Ke=r,nm.transition=n}}function NC(){return Zr().memoizedState}function jM(t,e,r){var n=Ui(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},EC(t))kC(e,r);else if(r=aC(t,e,r,n),r!==null){var i=cr();wn(r,t,n,i),TC(r,e,n)}}function PM(t,e,r){var n=Ui(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(EC(t))kC(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,Nn(s,a)){var u=e.interleaved;u===null?(i.next=i,vv(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}r=aC(t,e,i,n),r!==null&&(i=cr(),wn(r,t,n,i),TC(r,e,n))}}function EC(t){var e=t.alternate;return t===ft||e!==null&&e===ft}function kC(t,e){Al=Fd=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function TC(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,iv(t,r)}}var Bd={readContext:Qr,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},IM={readContext:Qr,useCallback:function(t,e){return In().memoizedState=[t,e===void 0?null:e],t},useContext:Qr,useEffect:fw,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,gd(4194308,4,xC.bind(null,e,t),r)},useLayoutEffect:function(t,e){return gd(4194308,4,t,e)},useInsertionEffect:function(t,e){return gd(4,2,t,e)},useMemo:function(t,e){var r=In();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=In();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=jM.bind(null,ft,t),[n.memoizedState,t]},useRef:function(t){var e=In();return t={current:t},e.memoizedState=t},useState:dw,useDebugValue:Tv,useDeferredValue:function(t){return In().memoizedState=t},useTransition:function(){var t=dw(!1),e=t[0];return t=AM.bind(null,t[1]),In().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ft,i=In();if(st){if(r===void 0)throw Error(ue(407));r=r()}else{if(r=e(),Ft===null)throw Error(ue(349));jo&30||dC(n,e,r)}i.memoizedState=r;var o={value:r,getSnapshot:e};return i.queue=o,fw(hC.bind(null,n,o,t),[t]),n.flags|=2048,ou(9,fC.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=In(),e=Ft.identifierPrefix;if(st){var r=Wn,n=zn;r=(n&~(1<<32-bn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=nu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=CM++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},OM={readContext:Qr,useCallback:wC,useContext:Qr,useEffect:kv,useImperativeHandle:bC,useInsertionEffect:yC,useLayoutEffect:vC,useMemo:_C,useReducer:im,useRef:gC,useState:function(){return im(iu)},useDebugValue:Tv,useDeferredValue:function(t){var e=Zr();return SC(e,Rt.memoizedState,t)},useTransition:function(){var t=im(iu)[0],e=Zr().memoizedState;return[t,e]},useMutableSource:uC,useSyncExternalStore:cC,useId:NC,unstable_isNewReconciler:!1},RM={readContext:Qr,useCallback:wC,useContext:Qr,useEffect:kv,useImperativeHandle:bC,useInsertionEffect:yC,useLayoutEffect:vC,useMemo:_C,useReducer:om,useRef:gC,useState:function(){return om(iu)},useDebugValue:Tv,useDeferredValue:function(t){var e=Zr();return Rt===null?e.memoizedState=t:SC(e,Rt.memoizedState,t)},useTransition:function(){var t=om(iu)[0],e=Zr().memoizedState;return[t,e]},useMutableSource:uC,useSyncExternalStore:cC,useId:NC,unstable_isNewReconciler:!1};function cn(t,e){if(t&&t.defaultProps){e=pt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Ag(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:pt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var wh={isMounted:function(t){return(t=t._reactInternals)?qo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=cr(),i=Ui(t),o=Xn(n,i);o.payload=e,r!=null&&(o.callback=r),e=Di(t,o,i),e!==null&&(wn(e,t,i,n),pd(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=cr(),i=Ui(t),o=Xn(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Di(t,o,i),e!==null&&(wn(e,t,i,n),pd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=cr(),n=Ui(t),i=Xn(r,n);i.tag=2,e!=null&&(i.callback=e),e=Di(t,i,n),e!==null&&(wn(e,t,n,r),pd(e,t,n))}};function hw(t,e,r,n,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,a):e.prototype&&e.prototype.isPureReactComponent?!Xl(r,n)||!Xl(i,o):!0}function CC(t,e,r){var n=!1,i=Gi,o=e.contextType;return typeof o=="object"&&o!==null?o=Qr(o):(i=xr(e)?Co:ar.current,n=e.contextTypes,o=(n=n!=null)?Wa(t,i):Gi),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wh,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function pw(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&wh.enqueueReplaceState(e,e.state,null)}function jg(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},xv(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Qr(o):(o=xr(e)?Co:ar.current,i.context=Wa(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Ag(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&wh.enqueueReplaceState(i,i.state,null),Ld(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Xa(t,e){try{var r="",n=e;do r+=lR(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function am(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Pg(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var MM=typeof WeakMap=="function"?WeakMap:Map;function AC(t,e,r){r=Xn(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Vd||(Vd=!0,Bg=n),Pg(t,e)},r}function jC(t,e,r){r=Xn(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Pg(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Pg(t,e),typeof n!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function mw(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new MM;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=JM.bind(null,t,e,r),e.then(t,t))}function gw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yw(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Xn(-1,1),e.tag=2,Di(r,e,1))),r.lanes|=1),t)}var $M=di.ReactCurrentOwner,mr=!1;function lr(t,e,r,n){e.child=t===null?oC(e,null,r,n):Ja(e,t.child,r,n)}function vw(t,e,r,n,i){r=r.render;var o=e.ref;return Da(e,i),n=Nv(t,e,r,n,o,i),r=Ev(),t!==null&&!mr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,oi(t,e,i)):(st&&r&&fv(e),e.flags|=1,lr(t,e,n,i),e.child)}function xw(t,e,r,n,i){if(t===null){var o=r.type;return typeof o=="function"&&!Mv(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,PC(t,e,o,n,i)):(t=bd(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:Xl,r(a,n)&&t.ref===e.ref)return oi(t,e,i)}return e.flags|=1,t=Fi(o,n),t.ref=e.ref,t.return=e,e.child=t}function PC(t,e,r,n,i){if(t!==null){var o=t.memoizedProps;if(Xl(o,n)&&t.ref===e.ref)if(mr=!1,e.pendingProps=n=o,(t.lanes&i)!==0)t.flags&131072&&(mr=!0);else return e.lanes=t.lanes,oi(t,e,i)}return Ig(t,e,r,n,i)}function IC(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(ka,kr),kr|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,tt(ka,kr),kr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,tt(ka,kr),kr|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,tt(ka,kr),kr|=n;return lr(t,e,i,r),e.child}function OC(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Ig(t,e,r,n,i){var o=xr(r)?Co:ar.current;return o=Wa(e,o),Da(e,i),r=Nv(t,e,r,n,o,i),n=Ev(),t!==null&&!mr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,oi(t,e,i)):(st&&n&&fv(e),e.flags|=1,lr(t,e,r,i),e.child)}function bw(t,e,r,n,i){if(xr(r)){var o=!0;Od(e)}else o=!1;if(Da(e,i),e.stateNode===null)yd(t,e),CC(e,r,n),jg(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Qr(c):(c=xr(r)?Co:ar.current,c=Wa(e,c));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==n||u!==c)&&pw(e,a,n,c),wi=!1;var h=e.memoizedState;a.state=h,Ld(e,n,a,i),u=e.memoizedState,s!==n||h!==u||vr.current||wi?(typeof d=="function"&&(Ag(e,r,d,n),u=e.memoizedState),(s=wi||hw(e,r,s,n,h,u,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),a.props=n,a.state=u,a.context=c,n=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,sC(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:cn(e.type,s),a.props=c,f=e.pendingProps,h=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=Qr(u):(u=xr(r)?Co:ar.current,u=Wa(e,u));var g=r.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==f||h!==u)&&pw(e,a,n,u),wi=!1,h=e.memoizedState,a.state=h,Ld(e,n,a,i);var b=e.memoizedState;s!==f||h!==b||vr.current||wi?(typeof g=="function"&&(Ag(e,r,g,n),b=e.memoizedState),(c=wi||hw(e,r,c,n,h,b,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,b,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,b,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=b),a.props=n,a.state=b,a.context=u,n=c):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return Og(t,e,r,n,o,i)}function Og(t,e,r,n,i,o){OC(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&ow(e,r,!1),oi(t,e,o);n=e.stateNode,$M.current=e;var s=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Ja(e,t.child,null,o),e.child=Ja(e,null,s,o)):lr(t,e,s,o),e.memoizedState=n.state,i&&ow(e,r,!0),e.child}function RC(t){var e=t.stateNode;e.pendingContext?iw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&iw(t,e.context,!1),bv(t,e.containerInfo)}function ww(t,e,r,n,i){return Ka(),pv(i),e.flags|=256,lr(t,e,r,n),e.child}var Rg={dehydrated:null,treeContext:null,retryLane:0};function Mg(t){return{baseLanes:t,cachePool:null,transitions:null}}function MC(t,e,r){var n=e.pendingProps,i=dt.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),tt(dt,i&1),t===null)return Tg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,o?(n=e.mode,o=e.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Nh(a,n,0,null),t=No(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Mg(r),e.memoizedState=Rg,t):Cv(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return DM(t,e,a,n,s,i,r);if(o){o=n.fallback,a=e.mode,i=t.child,s=i.sibling;var u={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=Fi(i,u),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=Fi(s,o):(o=No(o,a,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,a=t.child.memoizedState,a=a===null?Mg(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~r,e.memoizedState=Rg,n}return o=t.child,t=o.sibling,n=Fi(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Cv(t,e){return e=Nh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mc(t,e,r,n){return n!==null&&pv(n),Ja(e,t.child,null,r),t=Cv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DM(t,e,r,n,i,o,a){if(r)return e.flags&256?(e.flags&=-257,n=am(Error(ue(422))),Mc(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,i=e.mode,n=Nh({mode:"visible",children:n.children},i,0,null),o=No(o,i,a,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&Ja(e,t.child,null,a),e.child.memoizedState=Mg(a),e.memoizedState=Rg,o);if(!(e.mode&1))return Mc(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,o=Error(ue(419)),n=am(o,n,void 0),Mc(t,e,a,n)}if(s=(a&t.childLanes)!==0,mr||s){if(n=Ft,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ii(t,i),wn(n,t,i,-1))}return Rv(),n=am(Error(ue(421))),Mc(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=YM.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Pr=$i(i.nextSibling),Ir=e,st=!0,gn=null,t!==null&&(Vr[Gr++]=zn,Vr[Gr++]=Wn,Vr[Gr++]=Ao,zn=t.id,Wn=t.overflow,Ao=e),e=Cv(e,n.children),e.flags|=4096,e)}function _w(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Cg(t.return,e,r)}function sm(t,e,r,n,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function $C(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(lr(t,e,n.children,r),n=dt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_w(t,r,e);else if(t.tag===19)_w(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(tt(dt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Ud(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),sm(e,!1,i,r,o);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ud(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}sm(e,!0,r,null,o);break;case"together":sm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function oi(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Po|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ue(153));if(e.child!==null){for(t=e.child,r=Fi(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Fi(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function LM(t,e,r){switch(e.tag){case 3:RC(e),Ka();break;case 5:lC(e);break;case 1:xr(e.type)&&Od(e);break;case 4:bv(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;tt($d,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(tt(dt,dt.current&1),e.flags|=128,null):r&e.child.childLanes?MC(t,e,r):(tt(dt,dt.current&1),t=oi(t,e,r),t!==null?t.sibling:null);tt(dt,dt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return $C(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),tt(dt,dt.current),n)break;return null;case 22:case 23:return e.lanes=0,IC(t,e,r)}return oi(t,e,r)}var DC,$g,LC,UC;DC=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};$g=function(){};LC=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,yo(Dn.current);var o=null;switch(r){case"input":i=ig(t,i),n=ig(t,n),o=[];break;case"select":i=pt({},i,{value:void 0}),n=pt({},n,{value:void 0}),o=[];break;case"textarea":i=sg(t,i),n=sg(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Pd)}ug(r,n);var a;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(a in s)s.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Gl.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in n){var u=n[c];if(s=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&u!==s&&(u!=null||s!=null))if(c==="style")if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(o||(o=[]),o.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Gl.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&rt("scroll",t),o||s===u||(o=[])):(o=o||[]).push(c,u))}r&&(o=o||[]).push("style",r);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};UC=function(t,e,r,n){r!==n&&(e.flags|=4)};function nl(t,e){if(!st)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function UM(t,e,r){var n=e.pendingProps;switch(hv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return xr(e.type)&&Id(),Zt(e),null;case 3:return n=e.stateNode,Ya(),ot(vr),ot(ar),_v(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Oc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gn!==null&&(Gg(gn),gn=null))),$g(t,e),Zt(e),null;case 5:wv(e);var i=yo(ru.current);if(r=e.type,t!==null&&e.stateNode!=null)LC(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ue(166));return Zt(e),null}if(t=yo(Dn.current),Oc(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[On]=e,n[eu]=o,t=(e.mode&1)!==0,r){case"dialog":rt("cancel",n),rt("close",n);break;case"iframe":case"object":case"embed":rt("load",n);break;case"video":case"audio":for(i=0;i<bl.length;i++)rt(bl[i],n);break;case"source":rt("error",n);break;case"img":case"image":case"link":rt("error",n),rt("load",n);break;case"details":rt("toggle",n);break;case"input":Pb(n,o),rt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},rt("invalid",n);break;case"textarea":Ob(n,o),rt("invalid",n)}ug(r,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?n.textContent!==s&&(o.suppressHydrationWarning!==!0&&Ic(n.textContent,s,t),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Ic(n.textContent,s,t),i=["children",""+s]):Gl.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&rt("scroll",n)}switch(r){case"input":Nc(n),Ib(n,o,!0);break;case"textarea":Nc(n),Rb(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Pd)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hT(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[On]=e,t[eu]=n,DC(t,e,!1,!1),e.stateNode=t;e:{switch(a=cg(r,n),r){case"dialog":rt("cancel",t),rt("close",t),i=n;break;case"iframe":case"object":case"embed":rt("load",t),i=n;break;case"video":case"audio":for(i=0;i<bl.length;i++)rt(bl[i],t);i=n;break;case"source":rt("error",t),i=n;break;case"img":case"image":case"link":rt("error",t),rt("load",t),i=n;break;case"details":rt("toggle",t),i=n;break;case"input":Pb(t,n),i=ig(t,n),rt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=pt({},n,{value:void 0}),rt("invalid",t);break;case"textarea":Ob(t,n),i=sg(t,n),rt("invalid",t);break;default:i=n}ug(r,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="style"?gT(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&pT(t,u)):o==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Hl(t,u):typeof u=="number"&&Hl(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Gl.hasOwnProperty(o)?u!=null&&o==="onScroll"&&rt("scroll",t):u!=null&&Q0(t,o,u,a))}switch(r){case"input":Nc(t),Ib(t,n,!1);break;case"textarea":Nc(t),Rb(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Vi(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Oa(t,!!n.multiple,o,!1):n.defaultValue!=null&&Oa(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Pd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(t&&e.stateNode!=null)UC(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ue(166));if(r=yo(ru.current),yo(Dn.current),Oc(e)){if(n=e.stateNode,r=e.memoizedProps,n[On]=e,(o=n.nodeValue!==r)&&(t=Ir,t!==null))switch(t.tag){case 3:Ic(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ic(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[On]=e,e.stateNode=n}return Zt(e),null;case 13:if(ot(dt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&Pr!==null&&e.mode&1&&!(e.flags&128))nC(),Ka(),e.flags|=98560,o=!1;else if(o=Oc(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(ue(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ue(317));o[On]=e}else Ka(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),o=!1}else gn!==null&&(Gg(gn),gn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||dt.current&1?Mt===0&&(Mt=3):Rv())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return Ya(),$g(t,e),t===null&&Ql(e.stateNode.containerInfo),Zt(e),null;case 10:return yv(e.type._context),Zt(e),null;case 17:return xr(e.type)&&Id(),Zt(e),null;case 19:if(ot(dt),o=e.memoizedState,o===null)return Zt(e),null;if(n=(e.flags&128)!==0,a=o.rendering,a===null)if(n)nl(o,!1);else{if(Mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ud(t),a!==null){for(e.flags|=128,nl(o,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return tt(dt,dt.current&1|2),e.child}t=t.sibling}o.tail!==null&&wt()>Qa&&(e.flags|=128,n=!0,nl(o,!1),e.lanes=4194304)}else{if(!n)if(t=Ud(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),nl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!st)return Zt(e),null}else 2*wt()-o.renderingStartTime>Qa&&r!==1073741824&&(e.flags|=128,n=!0,nl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=wt(),e.sibling=null,r=dt.current,tt(dt,n?r&1|2:r&1),e):(Zt(e),null);case 22:case 23:return Ov(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?kr&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(ue(156,e.tag))}function FM(t,e){switch(hv(e),e.tag){case 1:return xr(e.type)&&Id(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ya(),ot(vr),ot(ar),_v(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wv(e),null;case 13:if(ot(dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ue(340));Ka()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ot(dt),null;case 4:return Ya(),null;case 10:return yv(e.type._context),null;case 22:case 23:return Ov(),null;case 24:return null;default:return null}}var $c=!1,tr=!1,BM=typeof WeakSet=="function"?WeakSet:Set,be=null;function Ea(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){vt(t,e,n)}else r.current=null}function Dg(t,e,r){try{r()}catch(n){vt(t,e,n)}}var Sw=!1;function qM(t,e){if(bg=Cd,t=GT(),dv(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,s=-1,u=-1,c=0,d=0,f=t,h=null;t:for(;;){for(var g;f!==r||i!==0&&f.nodeType!==3||(s=a+i),f!==o||n!==0&&f.nodeType!==3||(u=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(g=f.firstChild)!==null;)h=f,f=g;for(;;){if(f===t)break t;if(h===r&&++c===i&&(s=a),h===o&&++d===n&&(u=a),(g=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=g}r=s===-1||u===-1?null:{start:s,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(wg={focusedElem:t,selectionRange:r},Cd=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,y=b.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:cn(e.type,v),y);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(E){vt(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return b=Sw,Sw=!1,b}function jl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Dg(e,r,o)}i=i.next}while(i!==n)}}function _h(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Lg(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function FC(t){var e=t.alternate;e!==null&&(t.alternate=null,FC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[On],delete e[eu],delete e[Ng],delete e[NM],delete e[EM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function BC(t){return t.tag===5||t.tag===3||t.tag===4}function Nw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||BC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ug(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Pd));else if(n!==4&&(t=t.child,t!==null))for(Ug(t,e,r),t=t.sibling;t!==null;)Ug(t,e,r),t=t.sibling}function Fg(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Fg(t,e,r),t=t.sibling;t!==null;)Fg(t,e,r),t=t.sibling}var Wt=null,fn=!1;function xi(t,e,r){for(r=r.child;r!==null;)qC(t,e,r),r=r.sibling}function qC(t,e,r){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(ph,r)}catch{}switch(r.tag){case 5:tr||Ea(r,e);case 6:var n=Wt,i=fn;Wt=null,xi(t,e,r),Wt=n,fn=i,Wt!==null&&(fn?(t=Wt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Wt.removeChild(r.stateNode));break;case 18:Wt!==null&&(fn?(t=Wt,r=r.stateNode,t.nodeType===8?em(t.parentNode,r):t.nodeType===1&&em(t,r),Jl(t)):em(Wt,r.stateNode));break;case 4:n=Wt,i=fn,Wt=r.stateNode.containerInfo,fn=!0,xi(t,e,r),Wt=n,fn=i;break;case 0:case 11:case 14:case 15:if(!tr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Dg(r,e,a),i=i.next}while(i!==n)}xi(t,e,r);break;case 1:if(!tr&&(Ea(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){vt(r,e,s)}xi(t,e,r);break;case 21:xi(t,e,r);break;case 22:r.mode&1?(tr=(n=tr)||r.memoizedState!==null,xi(t,e,r),tr=n):xi(t,e,r);break;default:xi(t,e,r)}}function Ew(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new BM),e.forEach(function(n){var i=XM.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function an(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:Wt=s.stateNode,fn=!1;break e;case 3:Wt=s.stateNode.containerInfo,fn=!0;break e;case 4:Wt=s.stateNode.containerInfo,fn=!0;break e}s=s.return}if(Wt===null)throw Error(ue(160));qC(o,a,i),Wt=null,fn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){vt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VC(e,t),e=e.sibling}function VC(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(an(e,t),Pn(t),n&4){try{jl(3,t,t.return),_h(3,t)}catch(v){vt(t,t.return,v)}try{jl(5,t,t.return)}catch(v){vt(t,t.return,v)}}break;case 1:an(e,t),Pn(t),n&512&&r!==null&&Ea(r,r.return);break;case 5:if(an(e,t),Pn(t),n&512&&r!==null&&Ea(r,r.return),t.flags&32){var i=t.stateNode;try{Hl(i,"")}catch(v){vt(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=r!==null?r.memoizedProps:o,s=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&dT(i,o),cg(s,a);var c=cg(s,o);for(a=0;a<u.length;a+=2){var d=u[a],f=u[a+1];d==="style"?gT(i,f):d==="dangerouslySetInnerHTML"?pT(i,f):d==="children"?Hl(i,f):Q0(i,d,f,c)}switch(s){case"input":og(i,o);break;case"textarea":fT(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Oa(i,!!o.multiple,g,!1):h!==!!o.multiple&&(o.defaultValue!=null?Oa(i,!!o.multiple,o.defaultValue,!0):Oa(i,!!o.multiple,o.multiple?[]:"",!1))}i[eu]=o}catch(v){vt(t,t.return,v)}}break;case 6:if(an(e,t),Pn(t),n&4){if(t.stateNode===null)throw Error(ue(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(v){vt(t,t.return,v)}}break;case 3:if(an(e,t),Pn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Jl(e.containerInfo)}catch(v){vt(t,t.return,v)}break;case 4:an(e,t),Pn(t);break;case 13:an(e,t),Pn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Pv=wt())),n&4&&Ew(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(tr=(c=tr)||d,an(e,t),tr=c):an(e,t),Pn(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(be=t,d=t.child;d!==null;){for(f=be=d;be!==null;){switch(h=be,g=h.child,h.tag){case 0:case 11:case 14:case 15:jl(4,h,h.return);break;case 1:Ea(h,h.return);var b=h.stateNode;if(typeof b.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(v){vt(n,r,v)}}break;case 5:Ea(h,h.return);break;case 22:if(h.memoizedState!==null){Tw(f);continue}}g!==null?(g.return=h,be=g):Tw(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=mT("display",a))}catch(v){vt(t,t.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){vt(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:an(e,t),Pn(t),n&4&&Ew(t);break;case 21:break;default:an(e,t),Pn(t)}}function Pn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(BC(r)){var n=r;break e}r=r.return}throw Error(ue(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Hl(i,""),n.flags&=-33);var o=Nw(t);Fg(t,o,i);break;case 3:case 4:var a=n.stateNode.containerInfo,s=Nw(t);Ug(t,s,a);break;default:throw Error(ue(161))}}catch(u){vt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function VM(t,e,r){be=t,GC(t)}function GC(t,e,r){for(var n=(t.mode&1)!==0;be!==null;){var i=be,o=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||$c;if(!a){var s=i.alternate,u=s!==null&&s.memoizedState!==null||tr;s=$c;var c=tr;if($c=a,(tr=u)&&!c)for(be=i;be!==null;)a=be,u=a.child,a.tag===22&&a.memoizedState!==null?Cw(i):u!==null?(u.return=a,be=u):Cw(i);for(;o!==null;)be=o,GC(o),o=o.sibling;be=i,$c=s,tr=c}kw(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,be=o):kw(t)}}function kw(t){for(;be!==null;){var e=be;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tr||_h(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!tr)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:cn(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&cw(e,o,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}cw(e,a,r)}break;case 5:var s=e.stateNode;if(r===null&&e.flags&4){r=s;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Jl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}tr||e.flags&512&&Lg(e)}catch(h){vt(e,e.return,h)}}if(e===t){be=null;break}if(r=e.sibling,r!==null){r.return=e.return,be=r;break}be=e.return}}function Tw(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var r=e.sibling;if(r!==null){r.return=e.return,be=r;break}be=e.return}}function Cw(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{_h(4,e)}catch(u){vt(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(u){vt(e,i,u)}}var o=e.return;try{Lg(e)}catch(u){vt(e,o,u)}break;case 5:var a=e.return;try{Lg(e)}catch(u){vt(e,a,u)}}}catch(u){vt(e,e.return,u)}if(e===t){be=null;break}var s=e.sibling;if(s!==null){s.return=e.return,be=s;break}be=e.return}}var GM=Math.ceil,qd=di.ReactCurrentDispatcher,Av=di.ReactCurrentOwner,Kr=di.ReactCurrentBatchConfig,Ve=0,Ft=null,kt=null,Jt=0,kr=0,ka=Wi(0),Mt=0,au=null,Po=0,Sh=0,jv=0,Pl=null,pr=null,Pv=0,Qa=1/0,Vn=null,Vd=!1,Bg=null,Li=null,Dc=!1,Ai=null,Gd=0,Il=0,qg=null,vd=-1,xd=0;function cr(){return Ve&6?wt():vd!==-1?vd:vd=wt()}function Ui(t){return t.mode&1?Ve&2&&Jt!==0?Jt&-Jt:TM.transition!==null?(xd===0&&(xd=CT()),xd):(t=Ke,t!==0||(t=window.event,t=t===void 0?16:MT(t.type)),t):1}function wn(t,e,r,n){if(50<Il)throw Il=0,qg=null,Error(ue(185));Zu(t,r,n),(!(Ve&2)||t!==Ft)&&(t===Ft&&(!(Ve&2)&&(Sh|=r),Mt===4&&Ei(t,Jt)),br(t,n),r===1&&Ve===0&&!(e.mode&1)&&(Qa=wt()+500,xh&&Ki()))}function br(t,e){var r=t.callbackNode;TR(t,e);var n=Td(t,t===Ft?Jt:0);if(n===0)r!==null&&Db(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Db(r),e===1)t.tag===0?kM(Aw.bind(null,t)):eC(Aw.bind(null,t)),_M(function(){!(Ve&6)&&Ki()}),r=null;else{switch(AT(n)){case 1:r=nv;break;case 4:r=kT;break;case 16:r=kd;break;case 536870912:r=TT;break;default:r=kd}r=QC(r,HC.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function HC(t,e){if(vd=-1,xd=0,Ve&6)throw Error(ue(327));var r=t.callbackNode;if(La()&&t.callbackNode!==r)return null;var n=Td(t,t===Ft?Jt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Hd(t,n);else{e=n;var i=Ve;Ve|=2;var o=WC();(Ft!==t||Jt!==e)&&(Vn=null,Qa=wt()+500,So(t,e));do try{WM();break}catch(s){zC(t,s)}while(!0);gv(),qd.current=o,Ve=i,kt!==null?e=0:(Ft=null,Jt=0,e=Mt)}if(e!==0){if(e===2&&(i=mg(t),i!==0&&(n=i,e=Vg(t,i))),e===1)throw r=au,So(t,0),Ei(t,n),br(t,wt()),r;if(e===6)Ei(t,n);else{if(i=t.current.alternate,!(n&30)&&!HM(i)&&(e=Hd(t,n),e===2&&(o=mg(t),o!==0&&(n=o,e=Vg(t,o))),e===1))throw r=au,So(t,0),Ei(t,n),br(t,wt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(ue(345));case 2:ao(t,pr,Vn);break;case 3:if(Ei(t,n),(n&130023424)===n&&(e=Pv+500-wt(),10<e)){if(Td(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){cr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Sg(ao.bind(null,t,pr,Vn),e);break}ao(t,pr,Vn);break;case 4:if(Ei(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-bn(n);o=1<<a,a=e[a],a>i&&(i=a),n&=~o}if(n=i,n=wt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*GM(n/1960))-n,10<n){t.timeoutHandle=Sg(ao.bind(null,t,pr,Vn),n);break}ao(t,pr,Vn);break;case 5:ao(t,pr,Vn);break;default:throw Error(ue(329))}}}return br(t,wt()),t.callbackNode===r?HC.bind(null,t):null}function Vg(t,e){var r=Pl;return t.current.memoizedState.isDehydrated&&(So(t,e).flags|=256),t=Hd(t,e),t!==2&&(e=pr,pr=r,e!==null&&Gg(e)),t}function Gg(t){pr===null?pr=t:pr.push.apply(pr,t)}function HM(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!Nn(o(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ei(t,e){for(e&=~jv,e&=~Sh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-bn(e),n=1<<r;t[r]=-1,e&=~n}}function Aw(t){if(Ve&6)throw Error(ue(327));La();var e=Td(t,0);if(!(e&1))return br(t,wt()),null;var r=Hd(t,e);if(t.tag!==0&&r===2){var n=mg(t);n!==0&&(e=n,r=Vg(t,n))}if(r===1)throw r=au,So(t,0),Ei(t,e),br(t,wt()),r;if(r===6)throw Error(ue(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ao(t,pr,Vn),br(t,wt()),null}function Iv(t,e){var r=Ve;Ve|=1;try{return t(e)}finally{Ve=r,Ve===0&&(Qa=wt()+500,xh&&Ki())}}function Io(t){Ai!==null&&Ai.tag===0&&!(Ve&6)&&La();var e=Ve;Ve|=1;var r=Kr.transition,n=Ke;try{if(Kr.transition=null,Ke=1,t)return t()}finally{Ke=n,Kr.transition=r,Ve=e,!(Ve&6)&&Ki()}}function Ov(){kr=ka.current,ot(ka)}function So(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,wM(r)),kt!==null)for(r=kt.return;r!==null;){var n=r;switch(hv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Id();break;case 3:Ya(),ot(vr),ot(ar),_v();break;case 5:wv(n);break;case 4:Ya();break;case 13:ot(dt);break;case 19:ot(dt);break;case 10:yv(n.type._context);break;case 22:case 23:Ov()}r=r.return}if(Ft=t,kt=t=Fi(t.current,null),Jt=kr=e,Mt=0,au=null,jv=Sh=Po=0,pr=Pl=null,go!==null){for(e=0;e<go.length;e++)if(r=go[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=i,n.next=a}r.pending=n}go=null}return t}function zC(t,e){do{var r=kt;try{if(gv(),md.current=Bd,Fd){for(var n=ft.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Fd=!1}if(jo=0,Ut=Rt=ft=null,Al=!1,nu=0,Av.current=null,r===null||r.return===null){Mt=1,au=e,kt=null;break}e:{var o=t,a=r.return,s=r,u=e;if(e=Jt,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=s,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=gw(a);if(g!==null){g.flags&=-257,yw(g,a,s,o,e),g.mode&1&&mw(o,c,e),e=g,u=c;var b=e.updateQueue;if(b===null){var v=new Set;v.add(u),e.updateQueue=v}else b.add(u);break e}else{if(!(e&1)){mw(o,c,e),Rv();break e}u=Error(ue(426))}}else if(st&&s.mode&1){var y=gw(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),yw(y,a,s,o,e),pv(Xa(u,s));break e}}o=u=Xa(u,s),Mt!==4&&(Mt=2),Pl===null?Pl=[o]:Pl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var x=AC(o,u,e);uw(o,x);break e;case 1:s=u;var _=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Li===null||!Li.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=jC(o,s,e);uw(o,E);break e}}o=o.return}while(o!==null)}JC(r)}catch(S){e=S,kt===r&&r!==null&&(kt=r=r.return);continue}break}while(!0)}function WC(){var t=qd.current;return qd.current=Bd,t===null?Bd:t}function Rv(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),Ft===null||!(Po&268435455)&&!(Sh&268435455)||Ei(Ft,Jt)}function Hd(t,e){var r=Ve;Ve|=2;var n=WC();(Ft!==t||Jt!==e)&&(Vn=null,So(t,e));do try{zM();break}catch(i){zC(t,i)}while(!0);if(gv(),Ve=r,qd.current=n,kt!==null)throw Error(ue(261));return Ft=null,Jt=0,Mt}function zM(){for(;kt!==null;)KC(kt)}function WM(){for(;kt!==null&&!vR();)KC(kt)}function KC(t){var e=XC(t.alternate,t,kr);t.memoizedProps=t.pendingProps,e===null?JC(t):kt=e,Av.current=null}function JC(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=FM(r,e),r!==null){r.flags&=32767,kt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mt=6,kt=null;return}}else if(r=UM(r,e,kr),r!==null){kt=r;return}if(e=e.sibling,e!==null){kt=e;return}kt=e=t}while(e!==null);Mt===0&&(Mt=5)}function ao(t,e,r){var n=Ke,i=Kr.transition;try{Kr.transition=null,Ke=1,KM(t,e,r,n)}finally{Kr.transition=i,Ke=n}return null}function KM(t,e,r,n){do La();while(Ai!==null);if(Ve&6)throw Error(ue(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ue(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(CR(t,o),t===Ft&&(kt=Ft=null,Jt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Dc||(Dc=!0,QC(kd,function(){return La(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Kr.transition,Kr.transition=null;var a=Ke;Ke=1;var s=Ve;Ve|=4,Av.current=null,qM(t,r),VC(r,t),pM(wg),Cd=!!bg,wg=bg=null,t.current=r,VM(r),xR(),Ve=s,Ke=a,Kr.transition=o}else t.current=r;if(Dc&&(Dc=!1,Ai=t,Gd=i),o=t.pendingLanes,o===0&&(Li=null),_R(r.stateNode),br(t,wt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Vd)throw Vd=!1,t=Bg,Bg=null,t;return Gd&1&&t.tag!==0&&La(),o=t.pendingLanes,o&1?t===qg?Il++:(Il=0,qg=t):Il=0,Ki(),null}function La(){if(Ai!==null){var t=AT(Gd),e=Kr.transition,r=Ke;try{if(Kr.transition=null,Ke=16>t?16:t,Ai===null)var n=!1;else{if(t=Ai,Ai=null,Gd=0,Ve&6)throw Error(ue(331));var i=Ve;for(Ve|=4,be=t.current;be!==null;){var o=be,a=o.child;if(be.flags&16){var s=o.deletions;if(s!==null){for(var u=0;u<s.length;u++){var c=s[u];for(be=c;be!==null;){var d=be;switch(d.tag){case 0:case 11:case 15:jl(8,d,o)}var f=d.child;if(f!==null)f.return=d,be=f;else for(;be!==null;){d=be;var h=d.sibling,g=d.return;if(FC(d),d===c){be=null;break}if(h!==null){h.return=g,be=h;break}be=g}}}var b=o.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}be=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,be=a;else e:for(;be!==null;){if(o=be,o.flags&2048)switch(o.tag){case 0:case 11:case 15:jl(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,be=x;break e}be=o.return}}var _=t.current;for(be=_;be!==null;){a=be;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,be=w;else e:for(a=_;be!==null;){if(s=be,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:_h(9,s)}}catch(S){vt(s,s.return,S)}if(s===a){be=null;break e}var E=s.sibling;if(E!==null){E.return=s.return,be=E;break e}be=s.return}}if(Ve=i,Ki(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(ph,t)}catch{}n=!0}return n}finally{Ke=r,Kr.transition=e}}return!1}function jw(t,e,r){e=Xa(r,e),e=AC(t,e,1),t=Di(t,e,1),e=cr(),t!==null&&(Zu(t,1,e),br(t,e))}function vt(t,e,r){if(t.tag===3)jw(t,t,r);else for(;e!==null;){if(e.tag===3){jw(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Li===null||!Li.has(n))){t=Xa(r,t),t=jC(e,t,1),e=Di(e,t,1),t=cr(),e!==null&&(Zu(e,1,t),br(e,t));break}}e=e.return}}function JM(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=cr(),t.pingedLanes|=t.suspendedLanes&r,Ft===t&&(Jt&r)===r&&(Mt===4||Mt===3&&(Jt&130023424)===Jt&&500>wt()-Pv?So(t,0):jv|=r),br(t,e)}function YC(t,e){e===0&&(t.mode&1?(e=Tc,Tc<<=1,!(Tc&130023424)&&(Tc=4194304)):e=1);var r=cr();t=ii(t,e),t!==null&&(Zu(t,e,r),br(t,r))}function YM(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),YC(t,r)}function XM(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ue(314))}n!==null&&n.delete(e),YC(t,r)}var XC;XC=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||vr.current)mr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return mr=!1,LM(t,e,r);mr=!!(t.flags&131072)}else mr=!1,st&&e.flags&1048576&&tC(e,Md,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;yd(t,e),t=e.pendingProps;var i=Wa(e,ar.current);Da(e,r),i=Nv(null,e,n,t,i,r);var o=Ev();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xr(n)?(o=!0,Od(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,xv(e),i.updater=wh,e.stateNode=i,i._reactInternals=e,jg(e,n,t,r),e=Og(null,e,n,!0,o,r)):(e.tag=0,st&&o&&fv(e),lr(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(yd(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=ZM(n),t=cn(n,t),i){case 0:e=Ig(null,e,n,t,r);break e;case 1:e=bw(null,e,n,t,r);break e;case 11:e=vw(null,e,n,t,r);break e;case 14:e=xw(null,e,n,cn(n.type,t),r);break e}throw Error(ue(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:cn(n,i),Ig(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:cn(n,i),bw(t,e,n,i,r);case 3:e:{if(RC(e),t===null)throw Error(ue(387));n=e.pendingProps,o=e.memoizedState,i=o.element,sC(t,e),Ld(e,n,null,r);var a=e.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Xa(Error(ue(423)),e),e=ww(t,e,n,r,i);break e}else if(n!==i){i=Xa(Error(ue(424)),e),e=ww(t,e,n,r,i);break e}else for(Pr=$i(e.stateNode.containerInfo.firstChild),Ir=e,st=!0,gn=null,r=oC(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ka(),n===i){e=oi(t,e,r);break e}lr(t,e,n,r)}e=e.child}return e;case 5:return lC(e),t===null&&Tg(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,_g(n,i)?a=null:o!==null&&_g(n,o)&&(e.flags|=32),OC(t,e),lr(t,e,a,r),e.child;case 6:return t===null&&Tg(e),null;case 13:return MC(t,e,r);case 4:return bv(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ja(e,null,n,r):lr(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:cn(n,i),vw(t,e,n,i,r);case 7:return lr(t,e,e.pendingProps,r),e.child;case 8:return lr(t,e,e.pendingProps.children,r),e.child;case 12:return lr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,tt($d,n._currentValue),n._currentValue=a,o!==null)if(Nn(o.value,a)){if(o.children===i.children&&!vr.current){e=oi(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var u=s.firstContext;u!==null;){if(u.context===n){if(o.tag===1){u=Xn(-1,r&-r),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),Cg(o.return,r,e),s.lanes|=r;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ue(341));a.lanes|=r,s=a.alternate,s!==null&&(s.lanes|=r),Cg(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}lr(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Da(e,r),i=Qr(i),n=n(i),e.flags|=1,lr(t,e,n,r),e.child;case 14:return n=e.type,i=cn(n,e.pendingProps),i=cn(n.type,i),xw(t,e,n,i,r);case 15:return PC(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:cn(n,i),yd(t,e),e.tag=1,xr(n)?(t=!0,Od(e)):t=!1,Da(e,r),CC(e,n,i),jg(e,n,i,r),Og(null,e,n,!0,t,r);case 19:return $C(t,e,r);case 22:return IC(t,e,r)}throw Error(ue(156,e.tag))};function QC(t,e){return ET(t,e)}function QM(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(t,e,r,n){return new QM(t,e,r,n)}function Mv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ZM(t){if(typeof t=="function")return Mv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ev)return 11;if(t===tv)return 14}return 2}function Fi(t,e){var r=t.alternate;return r===null?(r=zr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function bd(t,e,r,n,i,o){var a=2;if(n=t,typeof t=="function")Mv(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ga:return No(r.children,i,o,e);case Z0:a=8,i|=8;break;case eg:return t=zr(12,r,e,i|2),t.elementType=eg,t.lanes=o,t;case tg:return t=zr(13,r,e,i),t.elementType=tg,t.lanes=o,t;case rg:return t=zr(19,r,e,i),t.elementType=rg,t.lanes=o,t;case lT:return Nh(r,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case aT:a=10;break e;case sT:a=9;break e;case ev:a=11;break e;case tv:a=14;break e;case bi:a=16,n=null;break e}throw Error(ue(130,t==null?t:typeof t,""))}return e=zr(a,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function No(t,e,r,n){return t=zr(7,t,n,e),t.lanes=r,t}function Nh(t,e,r,n){return t=zr(22,t,n,e),t.elementType=lT,t.lanes=r,t.stateNode={isHidden:!1},t}function lm(t,e,r){return t=zr(6,t,null,e),t.lanes=r,t}function um(t,e,r){return e=zr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function e$(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vp(0),this.expirationTimes=Vp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vp(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $v(t,e,r,n,i,o,a,s,u){return t=new e$(t,e,r,s,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=zr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},xv(o),t}function t$(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ma,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function ZC(t){if(!t)return Gi;t=t._reactInternals;e:{if(qo(t)!==t||t.tag!==1)throw Error(ue(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ue(171))}if(t.tag===1){var r=t.type;if(xr(r))return ZT(t,r,e)}return e}function eA(t,e,r,n,i,o,a,s,u){return t=$v(r,n,!0,t,i,o,a,s,u),t.context=ZC(null),r=t.current,n=cr(),i=Ui(r),o=Xn(n,i),o.callback=e??null,Di(r,o,i),t.current.lanes=i,Zu(t,i,n),br(t,n),t}function Eh(t,e,r,n){var i=e.current,o=cr(),a=Ui(i);return r=ZC(r),e.context===null?e.context=r:e.pendingContext=r,e=Xn(o,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Di(i,e,a),t!==null&&(wn(t,i,a,o),pd(t,i,a)),a}function zd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Pw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Dv(t,e){Pw(t,e),(t=t.alternate)&&Pw(t,e)}function r$(){return null}var tA=typeof reportError=="function"?reportError:function(t){console.error(t)};function Lv(t){this._internalRoot=t}kh.prototype.render=Lv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ue(409));Eh(t,e,null,null)};kh.prototype.unmount=Lv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Io(function(){Eh(null,t,null,null)}),e[ni]=null}};function kh(t){this._internalRoot=t}kh.prototype.unstable_scheduleHydration=function(t){if(t){var e=IT();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ni.length&&e!==0&&e<Ni[r].priority;r++);Ni.splice(r,0,t),r===0&&RT(t)}};function Uv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Th(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Iw(){}function n$(t,e,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var c=zd(a);o.call(c)}}var a=eA(e,n,t,0,null,!1,!1,"",Iw);return t._reactRootContainer=a,t[ni]=a.current,Ql(t.nodeType===8?t.parentNode:t),Io(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var c=zd(u);s.call(c)}}var u=$v(t,0,!1,null,null,!1,!1,"",Iw);return t._reactRootContainer=u,t[ni]=u.current,Ql(t.nodeType===8?t.parentNode:t),Io(function(){Eh(e,u,r,n)}),u}function Ch(t,e,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var u=zd(a);s.call(u)}}Eh(e,a,t,i)}else a=n$(r,e,t,i,n);return zd(a)}jT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=xl(e.pendingLanes);r!==0&&(iv(e,r|1),br(e,wt()),!(Ve&6)&&(Qa=wt()+500,Ki()))}break;case 13:Io(function(){var n=ii(t,1);if(n!==null){var i=cr();wn(n,t,1,i)}}),Dv(t,1)}};ov=function(t){if(t.tag===13){var e=ii(t,134217728);if(e!==null){var r=cr();wn(e,t,134217728,r)}Dv(t,134217728)}};PT=function(t){if(t.tag===13){var e=Ui(t),r=ii(t,e);if(r!==null){var n=cr();wn(r,t,e,n)}Dv(t,e)}};IT=function(){return Ke};OT=function(t,e){var r=Ke;try{return Ke=t,e()}finally{Ke=r}};fg=function(t,e,r){switch(e){case"input":if(og(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=vh(n);if(!i)throw Error(ue(90));cT(n),og(n,i)}}}break;case"textarea":fT(t,r);break;case"select":e=r.value,e!=null&&Oa(t,!!r.multiple,e,!1)}};xT=Iv;bT=Io;var i$={usingClientEntryPoint:!1,Events:[tc,ba,vh,yT,vT,Iv]},il={findFiberByHostInstance:mo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},o$={bundleType:il.bundleType,version:il.version,rendererPackageName:il.rendererPackageName,rendererConfig:il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:di.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ST(t),t===null?null:t.stateNode},findFiberByHostInstance:il.findFiberByHostInstance||r$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lc.isDisabled&&Lc.supportsFiber)try{ph=Lc.inject(o$),$n=Lc}catch{}}Mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i$;Mr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uv(e))throw Error(ue(200));return t$(t,e,null,r)};Mr.createRoot=function(t,e){if(!Uv(t))throw Error(ue(299));var r=!1,n="",i=tA;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=$v(t,1,!1,null,null,r,!1,n,i),t[ni]=e.current,Ql(t.nodeType===8?t.parentNode:t),new Lv(e)};Mr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ue(188)):(t=Object.keys(t).join(","),Error(ue(268,t)));return t=ST(e),t=t===null?null:t.stateNode,t};Mr.flushSync=function(t){return Io(t)};Mr.hydrate=function(t,e,r){if(!Th(e))throw Error(ue(200));return Ch(null,t,e,!0,r)};Mr.hydrateRoot=function(t,e,r){if(!Uv(t))throw Error(ue(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",a=tA;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=eA(e,null,t,1,r??null,i,!1,o,a),t[ni]=e.current,Ql(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new kh(e)};Mr.render=function(t,e,r){if(!Th(e))throw Error(ue(200));return Ch(null,t,e,!1,r)};Mr.unmountComponentAtNode=function(t){if(!Th(t))throw Error(ue(40));return t._reactRootContainer?(Io(function(){Ch(null,null,t,!1,function(){t._reactRootContainer=null,t[ni]=null})}),!0):!1};Mr.unstable_batchedUpdates=Iv;Mr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Th(r))throw Error(ue(200));if(t==null||t._reactInternals===void 0)throw Error(ue(38));return Ch(t,e,r,!1,n)};Mr.version="18.3.1-next-f1338f8080-20240426";function rA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rA)}catch(t){console.error(t)}}rA(),rT.exports=Mr;var a$=rT.exports,Ow=a$;Qm.createRoot=Ow.createRoot,Qm.hydrateRoot=Ow.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function su(){return su=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},su.apply(this,arguments)}var ji;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ji||(ji={}));const Rw="popstate";function s$(t){t===void 0&&(t={});function e(i,o){let{pathname:a="/",search:s="",hash:u=""}=Vo(i.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Hg("",{pathname:a,search:s,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(i,o){let a=i.document.querySelector("base"),s="";if(a&&a.getAttribute("href")){let u=i.location.href,c=u.indexOf("#");s=c===-1?u:u.slice(0,c)}return s+"#"+(typeof o=="string"?o:nA(o))}function n(i,o){Ah(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return u$(e,r,n,t)}function Tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ah(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function l$(){return Math.random().toString(36).substr(2,8)}function Mw(t,e){return{usr:t.state,key:t.key,idx:e}}function Hg(t,e,r,n){return r===void 0&&(r=null),su({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vo(e):e,{state:r,key:e&&e.key||n||l$()})}function nA(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Vo(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function u$(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,s=ji.Pop,u=null,c=d();c==null&&(c=0,a.replaceState(su({},a.state,{idx:c}),""));function d(){return(a.state||{idx:null}).idx}function f(){s=ji.Pop;let y=d(),x=y==null?null:y-c;c=y,u&&u({action:s,location:v.location,delta:x})}function h(y,x){s=ji.Push;let _=Hg(v.location,y,x);r&&r(_,y),c=d()+1;let w=Mw(_,c),E=v.createHref(_);try{a.pushState(w,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(E)}o&&u&&u({action:s,location:v.location,delta:1})}function g(y,x){s=ji.Replace;let _=Hg(v.location,y,x);r&&r(_,y),c=d();let w=Mw(_,c),E=v.createHref(_);a.replaceState(w,"",E),o&&u&&u({action:s,location:v.location,delta:0})}function b(y){let x=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof y=="string"?y:nA(y);return _=_.replace(/ $/,"%20"),Tt(x,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,x)}let v={get action(){return s},get location(){return t(i,a)},listen(y){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Rw,f),u=y,()=>{i.removeEventListener(Rw,f),u=null}},createHref(y){return e(i,y)},createURL:b,encodeLocation(y){let x=b(y);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:g,go(y){return a.go(y)}};return v}var $w;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($w||($w={}));function c$(t,e,r){return r===void 0&&(r="/"),d$(t,e,r)}function d$(t,e,r,n){let i=typeof e=="string"?Vo(e):e,o=aA(i.pathname||"/",r);if(o==null)return null;let a=iA(t);f$(a);let s=null;for(let u=0;s==null&&u<a.length;++u){let c=N$(o);s=w$(a[u],c)}return s}function iA(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(o,a,s)=>{let u={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(Tt(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let c=Eo([n,u.relativePath]),d=r.concat(u);o.children&&o.children.length>0&&(Tt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),iA(o.children,e,d,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:x$(c,o.index),routesMeta:d})};return t.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let u of oA(o.path))i(o,a,u)}),e}function oA(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let a=oA(n.join("/")),s=[];return s.push(...a.map(u=>u===""?o:[o,u].join("/"))),i&&s.push(...a),s.map(u=>t.startsWith("/")&&u===""?"/":u)}function f$(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:b$(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const h$=/^:[\w-]+$/,p$=3,m$=2,g$=1,y$=10,v$=-2,Dw=t=>t==="*";function x$(t,e){let r=t.split("/"),n=r.length;return r.some(Dw)&&(n+=v$),e&&(n+=m$),r.filter(i=>!Dw(i)).reduce((i,o)=>i+(h$.test(o)?p$:o===""?g$:y$),n)}function b$(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function w$(t,e,r){let{routesMeta:n}=t,i={},o="/",a=[];for(let s=0;s<n.length;++s){let u=n[s],c=s===n.length-1,d=o==="/"?e:e.slice(o.length)||"/",f=_$({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),h=u.route;if(!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:Eo([o,f.pathname]),pathnameBase:A$(Eo([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=Eo([o,f.pathnameBase]))}return a}function _$(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=S$(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((c,d,f)=>{let{paramName:h,isOptional:g}=d;if(h==="*"){let v=s[f]||"";a=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const b=s[f];return g&&!b?c[h]=void 0:c[h]=(b||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:t}}function S$(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Ah(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,u)=>(n.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function N$(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ah(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function aA(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const E$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,k$=t=>E$.test(t);function T$(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Vo(t):t,o;if(r)if(k$(r))o=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),Ah(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?o=Lw(r.substring(1),"/"):o=Lw(r,e)}else o=e;return{pathname:o,search:j$(n),hash:P$(i)}}function Lw(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function cm(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function C$(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function sA(t,e){let r=C$(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function lA(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Vo(t):(i=su({},t),Tt(!i.pathname||!i.pathname.includes("?"),cm("?","pathname","search",i)),Tt(!i.pathname||!i.pathname.includes("#"),cm("#","pathname","hash",i)),Tt(!i.search||!i.search.includes("#"),cm("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=r;else{let f=e.length-1;if(!n&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}s=f>=0?e[f]:"/"}let u=T$(i,s),c=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const Eo=t=>t.join("/").replace(/\/\/+/g,"/"),A$=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),j$=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,P$=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function I$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const uA=["post","put","patch","delete"];new Set(uA);const O$=["get",...uA];new Set(O$);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lu(){return lu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lu.apply(this,arguments)}const Fv=T.createContext(null),R$=T.createContext(null),nc=T.createContext(null),jh=T.createContext(null),Go=T.createContext({outlet:null,matches:[],isDataRoute:!1}),cA=T.createContext(null);function ic(){return T.useContext(jh)!=null}function Ph(){return ic()||Tt(!1),T.useContext(jh).location}function dA(t){T.useContext(nc).static||T.useLayoutEffect(t)}function As(){let{isDataRoute:t}=T.useContext(Go);return t?W$():M$()}function M$(){ic()||Tt(!1);let t=T.useContext(Fv),{basename:e,future:r,navigator:n}=T.useContext(nc),{matches:i}=T.useContext(Go),{pathname:o}=Ph(),a=JSON.stringify(sA(i,r.v7_relativeSplatPath)),s=T.useRef(!1);return dA(()=>{s.current=!0}),T.useCallback(function(c,d){if(d===void 0&&(d={}),!s.current)return;if(typeof c=="number"){n.go(c);return}let f=lA(c,JSON.parse(a),o,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Eo([e,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[e,n,a,o,t])}function $$(t,e){return D$(t,e)}function D$(t,e,r,n){ic()||Tt(!1);let{navigator:i}=T.useContext(nc),{matches:o}=T.useContext(Go),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=Ph(),d;if(e){var f;let y=typeof e=="string"?Vo(e):e;u==="/"||(f=y.pathname)!=null&&f.startsWith(u)||Tt(!1),d=y}else d=c;let h=d.pathname||"/",g=h;if(u!=="/"){let y=u.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let b=c$(t,{pathname:g}),v=q$(b&&b.map(y=>Object.assign({},y,{params:Object.assign({},s,y.params),pathname:Eo([u,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:Eo([u,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,r,n);return e&&v?T.createElement(jh.Provider,{value:{location:lu({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ji.Pop}},v):v}function L$(){let t=z$(),e=I$(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),r?T.createElement("pre",{style:i},r):null,null)}const U$=T.createElement(L$,null);class F$ extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?T.createElement(Go.Provider,{value:this.props.routeContext},T.createElement(cA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function B$(t){let{routeContext:e,match:r,children:n}=t,i=T.useContext(Fv);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),T.createElement(Go.Provider,{value:e},n)}function q$(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,s=(i=r)==null?void 0:i.errors;if(s!=null){let d=a.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);d>=0||Tt(!1),a=a.slice(0,Math.min(a.length,d+1))}let u=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:h,errors:g}=r,b=f.route.loader&&h[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||b){u=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,f,h)=>{let g,b=!1,v=null,y=null;r&&(g=s&&f.route.id?s[f.route.id]:void 0,v=f.route.errorElement||U$,u&&(c<0&&h===0?(K$("route-fallback"),b=!0,y=null):c===h&&(b=!0,y=f.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,h+1)),_=()=>{let w;return g?w=v:b?w=y:f.route.Component?w=T.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,T.createElement(B$,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?T.createElement(F$,{location:r.location,revalidation:r.revalidation,component:v,error:g,children:_(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):_()},null)}var fA=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(fA||{}),hA=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hA||{});function V$(t){let e=T.useContext(Fv);return e||Tt(!1),e}function G$(t){let e=T.useContext(R$);return e||Tt(!1),e}function H$(t){let e=T.useContext(Go);return e||Tt(!1),e}function pA(t){let e=H$(),r=e.matches[e.matches.length-1];return r.route.id||Tt(!1),r.route.id}function z$(){var t;let e=T.useContext(cA),r=G$(),n=pA();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function W$(){let{router:t}=V$(fA.UseNavigateStable),e=pA(hA.UseNavigateStable),r=T.useRef(!1);return dA(()=>{r.current=!0}),T.useCallback(function(i,o){o===void 0&&(o={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,lu({fromRouteId:e},o)))},[t,e])}const Uw={};function K$(t,e,r){Uw[t]||(Uw[t]=!0)}function J$(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function bt(t){let{to:e,replace:r,state:n,relative:i}=t;ic()||Tt(!1);let{future:o,static:a}=T.useContext(nc),{matches:s}=T.useContext(Go),{pathname:u}=Ph(),c=As(),d=lA(e,sA(s,o.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(d);return T.useEffect(()=>c(JSON.parse(f),{replace:r,state:n,relative:i}),[c,f,i,r,n]),null}function gt(t){Tt(!1)}function Y$(t){let{basename:e="/",children:r=null,location:n,navigationType:i=ji.Pop,navigator:o,static:a=!1,future:s}=t;ic()&&Tt(!1);let u=e.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:u,navigator:o,static:a,future:lu({v7_relativeSplatPath:!1},s)}),[u,s,o,a]);typeof n=="string"&&(n=Vo(n));let{pathname:d="/",search:f="",hash:h="",state:g=null,key:b="default"}=n,v=T.useMemo(()=>{let y=aA(d,u);return y==null?null:{location:{pathname:y,search:f,hash:h,state:g,key:b},navigationType:i}},[u,d,f,h,g,b,i]);return v==null?null:T.createElement(nc.Provider,{value:c},T.createElement(jh.Provider,{children:r,value:v}))}function X$(t){let{children:e,location:r}=t;return $$(zg(e),r)}new Promise(()=>{});function zg(t,e){e===void 0&&(e=[]);let r=[];return T.Children.forEach(t,(n,i)=>{if(!T.isValidElement(n))return;let o=[...e,i];if(n.type===T.Fragment){r.push.apply(r,zg(n.props.children,o));return}n.type!==gt&&Tt(!1),!n.props.index||!n.props.children||Tt(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=zg(n.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Q$="6";try{window.__reactRouterVersion=Q$}catch{}const Z$="startTransition",Fw=JO[Z$];function eD(t){let{basename:e,children:r,future:n,window:i}=t,o=T.useRef();o.current==null&&(o.current=s$({window:i,v5Compat:!0}));let a=o.current,[s,u]=T.useState({action:a.action,location:a.location}),{v7_startTransition:c}=n||{},d=T.useCallback(f=>{c&&Fw?Fw(()=>u(f)):u(f)},[u,c]);return T.useLayoutEffect(()=>a.listen(d),[a,d]),T.useEffect(()=>J$(n),[n]),T.createElement(Y$,{basename:e,children:r,location:s.location,navigationType:s.action,navigator:a,future:n})}var Bw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Bw||(Bw={}));var qw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(qw||(qw={}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),le=(t,e)=>{const r=T.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:s="",children:u,...c},d)=>T.createElement("svg",{ref:d,...tD,width:i,height:i,stroke:n,strokeWidth:a?Number(o)*24/Number(i):o,className:["lucide",`lucide-${rD(t)}`,s].join(" "),...c},[...e.map(([f,h])=>T.createElement(f,h)),...Array.isArray(u)?u:[u]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=le("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=le("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=le("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=le("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=le("ArrowDownUp",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"m21 8-4-4-4 4",key:"1c9v7m"}],["path",{d:"M17 4v16",key:"7dpous"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=le("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=le("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=le("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=le("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=le("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=le("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=le("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=le("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=le("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=le("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=le("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=le("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=le("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=le("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=le("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=le("Disc",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=le("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=le("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=le("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=le("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=le("FilePenLine",[["path",{d:"m18 5-3-3H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"h0fsxq"}],["path",{d:"M8 18h1",key:"13wk12"}],["path",{d:"M18.4 9.6a2 2 0 1 1 3 3L17 17l-4 1 1-4Z",key:"dyo8mm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=le("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=le("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=le("Files",[["path",{d:"M20 7h-3a2 2 0 0 1-2-2V2",key:"x099mo"}],["path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z",key:"18t6ie"}],["path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8",key:"1nja0z"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=le("GitMerge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=le("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=le("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=le("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=le("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=le("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=le("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=le("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=le("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=le("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=le("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=le("Magnet",[["path",{d:"m6 15-4-4 6.75-6.77a7.79 7.79 0 0 1 11 11L13 22l-4-4 6.39-6.36a2.14 2.14 0 0 0-3-3L6 15",key:"1i3lhw"}],["path",{d:"m5 8 4 4",key:"j6kj7e"}],["path",{d:"m12 15 4 4",key:"lnac28"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=le("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=le("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=le("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=le("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=le("PanelRightClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=le("PanelRightOpen",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m10 15-3-3 3-3",key:"1pgupc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=le("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=le("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=le("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=le("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=le("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=le("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=le("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=le("Recycle",[["path",{d:"M7 19H4.815a1.83 1.83 0 0 1-1.57-.881 1.785 1.785 0 0 1-.004-1.784L7.196 9.5",key:"x6z5xu"}],["path",{d:"M11 19h8.203a1.83 1.83 0 0 0 1.556-.89 1.784 1.784 0 0 0 0-1.775l-1.226-2.12",key:"1x4zh5"}],["path",{d:"m14 16-3 3 3 3",key:"f6jyew"}],["path",{d:"M8.293 13.596 7.196 9.5 3.1 10.598",key:"wf1obh"}],["path",{d:"m9.344 5.811 1.093-1.892A1.83 1.83 0 0 1 11.985 3a1.784 1.784 0 0 1 1.546.888l3.943 6.843",key:"9tzpgr"}],["path",{d:"m13.378 9.633 4.096 1.098 1.097-4.096",key:"1oe83g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=le("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=le("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=le("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=le("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=le("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=le("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=le("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=le("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=le("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=le("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=le("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=le("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=le("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=le("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=le("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=le("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),WD="2.5.0",dm=[{id:"dashboard",title:"",icon:lD,path:"/"},{id:"reports-group",title:"",icon:xD,path:"#",submenu:[{id:"shiftreport",title:" ",icon:Wg,path:"/shift-report"},{id:"reports",title:"",icon:SA,path:"/reports"}]},{id:"inbox",title:" ",icon:Xd,path:"/inbox"},{id:"messages",title:"",icon:_A,path:"/messages"},{id:"notes",title:" ",icon:TA,path:"/notes"},{id:"workorders",title:" ",icon:CA,path:"/work-orders"},{id:"projects",title:"",icon:Wd,path:"/projects"},{id:"performance",title:" ",icon:Bv,path:"/performance"},{id:"partrequest",title:" ",icon:Ml,path:"/part-requests"},{id:"inspections",title:" ",icon:vA,path:"/inspections"},{id:"documents",title:" ",icon:Ol,path:"/documents"},{id:"meetings",title:"",icon:Jd,path:"/meetings"},{id:"suggestions",title:" ",icon:Qd,path:"/suggestions"},{id:"purchases",title:" ",icon:ef,path:"/purchases"},{id:"workflow",title:" ",icon:bA,path:"/workflow-designer",role:"ADMIN"},{id:"admin",title:"  ",icon:Is,path:"/admin",role:"ADMIN"},{id:"settings",title:"",icon:Gv,path:"/settings"}],KD=[{name:"",value:400},{name:"",value:300},{name:"",value:300},{name:"",value:200}],JD=[{name:"",uv:400,pv:2400},{name:"",uv:300,pv:1398},{name:"",uv:200,pv:9800},{name:"",uv:278,pv:3908},{name:"",uv:189,pv:4800},{name:"",uv:239,pv:3800}];var gr=(t=>(t.ADMIN="ADMIN",t.USER="USER",t.STOREKEEPER="STOREKEEPER",t.INSPECTOR="INSPECTOR",t.MANAGER="MANAGER",t.EXPERT="EXPERT",t))(gr||{});const $l=()=>Math.random().toString(36).substring(2,9),AA=(t,e,r)=>{let n=t>979?1600:621;t-=t>979?979:0;let i=365*t+Math.floor(t/33)*8+Math.floor((t%33+3)/4)+78+r+(e<7?(e-1)*31:(e-7)*30+186);n+=400*Math.floor(i/146097),i%=146097,i>36524&&(n+=100*Math.floor(--i/36524),i%=36524,i>=365&&i++),n+=4*Math.floor(i/1461),i%=1461,i>365&&(n+=Math.floor((i-1)/365),i=(i-1)%365);let o=i+1;const a=[0,31,n%4===0&&n%100!==0||n%400===0?29:28,31,30,31,30,31,31,30,31,30,31];let s;for(s=0;s<13;s++){const u=a[s];if(o<=u)break;o-=u}return{gy:n,gm:s,gd:o}},$h=(t,e,r)=>{const n=[0,31,59,90,120,151,181,212,243,273,304,334];let i=t<=1600?0:979;t-=t<=1600?621:1600;const o=e>2?t+1:t;let a=365*t+Math.floor((o+3)/4)-Math.floor((o+99)/100)+Math.floor((o+399)/400)-80+r+n[e-1];i+=33*Math.floor(a/12053),a%=12053,i+=4*Math.floor(a/1461),a%=1461,a>365&&(i+=Math.floor((a-1)/365),a=(a-1)%365);const s=a<186?1+Math.floor(a/31):7+Math.floor((a-186)/30),u=1+(a<186?a%31:(a-186)%30);return{jy:i,jm:s,jd:u}},at=()=>{const t=new Date,e=$h(t.getFullYear(),t.getMonth()+1,t.getDate());return`${e.jy}/${String(e.jm).padStart(2,"0")}/${String(e.jd).padStart(2,"0")}`},rs=()=>{const t=new Date;return`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`},jA=t=>{const e=new Date,r=$h(e.getFullYear(),e.getMonth()+1,e.getDate()),n=String(r.jy).substring(2),i=String(r.jm).padStart(2,"0");if(t==="T"){const a=Math.floor(Math.random()*9e4+1e4).toString();return`${t}${n}${i}${a}`}const o=Math.floor(Math.random()*9999).toString().padStart(4,"0");return`${t}${n}${i}${o}`},ns=t=>{try{const e=t.split("/");if(e.length!==3)return null;const{gy:r,gm:n,gd:i}=AA(parseInt(e[0]),parseInt(e[1]),parseInt(e[2]));return new Date(r,n-1,i)}catch{return null}},YD=(t,e,r,n)=>{const i=ns(t),o=ns(r);if(!i||!o)return 0;const[a,s]=e.split(":").map(Number),[u,c]=n.split(":").map(Number);return i.setHours(a||0,s||0,0,0),o.setHours(u||0,c||0,0,0),i.getTime()<o.getTime()?-1:i.getTime()>o.getTime()?1:0},XD=(t,e,r,n)=>{const i=ns(t),o=ns(r);if(!i||!o)return 0;const[a,s]=e.split(":").map(Number),[u,c]=n.split(":").map(Number);i.setHours(a||0,s||0,0,0),o.setHours(u||0,c||0,0,0);const d=o.getTime()-i.getTime();return Math.max(0,Math.floor(d/6e4))},tf=t=>{const e=ns(t);if(!e)return!1;const r=new Date;return r.setHours(0,0,0,0),e.getTime()>r.getTime()},Hw=async()=>{try{const t=await fetch("https://api.ipify.org?format=json");if(!t.ok)throw new Error("Network response was not ok");return(await t.json()).ip}catch(t){return console.warn("Could not fetch public IP:",t),"Unknown / Offline"}};function Dh(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function QD(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(d){try{c(n.next(d))}catch(f){a(f)}}function u(d){try{c(n.throw(d))}catch(f){a(f)}}function c(d){d.done?o(d.value):i(d.value).then(s,u)}c((n=n.apply(t,e||[])).next())})}const ZD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class zv extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class eL extends zv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class zw extends zv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ww extends zv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Jg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Jg||(Jg={}));class tL{constructor(e,{headers:r={},customFetch:n,region:i=Jg.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=ZD(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return QD(this,arguments,void 0,function*(r,n={}){var i;let o,a;try{const{headers:s,method:u,body:c,signal:d,timeout:f}=n;let h={},{region:g}=n;g||(g=this.region);const b=new URL(`${this.url}/${r}`);g&&g!=="any"&&(h["x-region"]=g,b.searchParams.set("forceFunctionRegion",g));let v;c&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=c):typeof c=="string"?(h["Content-Type"]="text/plain",v=c):typeof FormData<"u"&&c instanceof FormData?v=c:(h["Content-Type"]="application/json",v=JSON.stringify(c)):v=c;let y=d;f&&(a=new AbortController,o=setTimeout(()=>a.abort(),f),d?(y=a.signal,d.addEventListener("abort",()=>a.abort())):y=a.signal);const x=yield this.fetch(b.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:v,signal:y}).catch(S=>{throw new eL(S)}),_=x.headers.get("x-relay-error");if(_&&_==="true")throw new zw(x);if(!x.ok)throw new Ww(x);let w=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),E;return w==="application/json"?E=yield x.json():w==="application/octet-stream"||w==="application/pdf"?E=yield x.blob():w==="text/event-stream"?E=x:w==="multipart/form-data"?E=yield x.formData():E=yield x.text(),{data:E,error:null,response:x}}catch(s){return{data:null,error:s,response:s instanceof Ww||s instanceof zw?s.context:void 0}}finally{o&&clearTimeout(o)}})}}var rL=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},nL=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let a=null,s=null,u=null,c=o.status,d=o.statusText;if(o.ok){var f,h;if(r.method!=="HEAD"){var g;const x=await o.text();x===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((g=r.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?s=x:s=JSON.parse(x))}const v=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),y=(h=o.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");v&&y&&y.length>1&&(u=parseInt(y[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(s)&&(s.length>1?(a={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,u=null,c=406,d="Not Acceptable"):s.length===1?s=s[0]:s=null)}else{var b;const v=await o.text();try{a=JSON.parse(v),Array.isArray(a)&&o.status===404&&(s=[],a=null,c=200,d="OK")}catch{o.status===404&&v===""?(c=204,d="No Content"):a={message:v}}if(a&&r.isMaybeSingle&&(!(a==null||(b=a.details)===null||b===void 0)&&b.includes("0 rows"))&&(a=null,c=200,d="OK"),a&&r.shouldThrowOnError)throw new rL(a)}return{error:a,data:s,count:u,status:c,statusText:d}});return this.shouldThrowOnError||(i=i.catch(o=>{var a;let s="";const u=o==null?void 0:o.cause;if(u){var c,d,f,h;const b=(c=u==null?void 0:u.message)!==null&&c!==void 0?c:"",v=(d=u==null?void 0:u.code)!==null&&d!==void 0?d:"";s=`${(f=o==null?void 0:o.name)!==null&&f!==void 0?f:"FetchError"}: ${o==null?void 0:o.message}`,s+=`

Caused by: ${(h=u==null?void 0:u.name)!==null&&h!==void 0?h:"Error"}: ${b}`,v&&(s+=` (${v})`),u!=null&&u.stack&&(s+=`
${u.stack}`)}else{var g;s=(g=o==null?void 0:o.stack)!==null&&g!==void 0?g:""}return{error:{message:`${(a=o==null?void 0:o.name)!==null&&a!==void 0?a:"FetchError"}: ${o==null?void 0:o.message}`,details:s,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},iL=class extends nL{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var a;const s=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${s};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Kw=new RegExp("[,()]");var da=class extends iL{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&Kw.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&Kw.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},oL=class{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=n}select(t,e){const{head:r=!1,count:n}=e??{},i=r?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(s=>/\s/.test(s)&&!o?"":(s==='"'&&(o=!o),s)).join("");return this.url.searchParams.set("select",a),n&&this.headers.append("Prefer",`count=${n}`),new da({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var n;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((a,s)=>a.concat(Object.keys(s)),[]);if(o.length>0){const a=[...new Set(o)].map(s=>`"${s}"`);this.url.searchParams.set("columns",a.join(","))}}return new da({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),n&&this.headers.append("Prefer",`count=${n}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(s.length>0){const u=[...new Set(s)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new da({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var r;const n="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new da({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new da({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},aL=class PA{constructor(e,{headers:r={},schema:n,fetch:i}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new oL(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new PA(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:i=!1,count:o}={}){var a;let s;const u=new URL(`${this.url}/rpc/${e}`);let c;n||i?(s=n?"HEAD":"GET",Object.entries(r).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{u.searchParams.append(f,h)})):(s="POST",c=r);const d=new Headers(this.headers);return o&&d.set("Prefer",`count=${o}`),new da({method:s,url:u,headers:d,schema:this.schemaName,body:c,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class sL{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const lL="2.89.0",uL=`realtime-js/${lL}`,IA="1.0.0",cL="2.0.0",Jw=IA,Yg=1e4,dL=1e3,fL=100;var _i;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(_i||(_i={}));var Ot;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ot||(Ot={}));var hn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(hn||(hn={}));var Xg;(function(t){t.websocket="websocket"})(Xg||(Xg={}));var ho;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ho||(ho={}));class hL{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,r,n){var i,o;const a=e.topic,s=(i=e.ref)!==null&&i!==void 0?i:"",u=(o=e.join_ref)!==null&&o!==void 0?o:"",c=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+s.length+a.length+c.length+f.length,g=new ArrayBuffer(this.HEADER_LENGTH+h);let b=new DataView(g),v=0;b.setUint8(v++,this.KINDS.userBroadcastPush),b.setUint8(v++,u.length),b.setUint8(v++,s.length),b.setUint8(v++,a.length),b.setUint8(v++,c.length),b.setUint8(v++,f.length),b.setUint8(v++,r),Array.from(u,x=>b.setUint8(v++,x.charCodeAt(0))),Array.from(s,x=>b.setUint8(v++,x.charCodeAt(0))),Array.from(a,x=>b.setUint8(v++,x.charCodeAt(0))),Array.from(c,x=>b.setUint8(v++,x.charCodeAt(0))),Array.from(f,x=>b.setUint8(v++,x.charCodeAt(0)));var y=new Uint8Array(g.byteLength+n.byteLength);return y.set(new Uint8Array(g),0),y.set(new Uint8Array(n),g.byteLength),y.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,o,a,s,u]=n;return r({join_ref:i,ref:o,topic:a,event:s,payload:u})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,i)}}_decodeUserBroadcast(e,r,n){const i=r.getUint8(1),o=r.getUint8(2),a=r.getUint8(3),s=r.getUint8(4);let u=this.HEADER_LENGTH+4;const c=n.decode(e.slice(u,u+i));u=u+i;const d=n.decode(e.slice(u,u+o));u=u+o;const f=n.decode(e.slice(u,u+a));u=u+a;const h=e.slice(u,e.byteLength),g=s===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,b={type:this.BROADCAST_EVENT,event:d,payload:g};return a>0&&(b.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class OA{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ze||(Ze={}));const Yw=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=pL(a,t,e,i),o),{}):{}},pL=(t,e,r,n)=>{const i=e.find(s=>s.name===t),o=i==null?void 0:i.type,a=r[t];return o&&!n.includes(o)?RA(o,a):Qg(a)},RA=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return vL(e,r)}switch(t){case Ze.bool:return mL(e);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return gL(e);case Ze.json:case Ze.jsonb:return yL(e);case Ze.timestamp:return xL(e);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return Qg(e);default:return Qg(e)}},Qg=t=>t,mL=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},gL=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},yL=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},vL=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let o;const a=t.slice(1,r);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(s=>RA(e,s))}return t},xL=t=>typeof t=="string"?t.replace(" ","T"):t,MA=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class fm{constructor(e,r,n={},i=Yg){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Xw;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Xw||(Xw={}));class Dl{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Dl.syncState(this.state,i,o,a),this.pendingDiffs.forEach(u=>{this.state=Dl.syncDiff(this.state,u,o,a)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Dl.syncDiff(this.state,i,o,a),s())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const o=this.cloneDeep(e),a=this.transformState(r),s={},u={};return this.map(o,(c,d)=>{a[c]||(u[c]=d)}),this.map(a,(c,d)=>{const f=o[c];if(f){const h=d.map(y=>y.presence_ref),g=f.map(y=>y.presence_ref),b=d.filter(y=>g.indexOf(y.presence_ref)<0),v=f.filter(y=>h.indexOf(y.presence_ref)<0);b.length>0&&(s[c]=b),v.length>0&&(u[c]=v)}else s[c]=d}),this.syncDiff(o,{joins:s,leaves:u},n,i)}static syncDiff(e,r,n,i){const{joins:o,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(o,(s,u)=>{var c;const d=(c=e[s])!==null&&c!==void 0?c:[];if(e[s]=this.cloneDeep(u),d.length>0){const f=e[s].map(g=>g.presence_ref),h=d.filter(g=>f.indexOf(g.presence_ref)<0);e[s].unshift(...h)}n(s,d,u)}),this.map(a,(s,u)=>{let c=e[s];if(!c)return;const d=u.map(f=>f.presence_ref);c=c.filter(f=>d.indexOf(f.presence_ref)<0),e[s]=c,i(s,c,u),c.length===0&&delete e[s]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Qw;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Qw||(Qw={}));var Ll;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ll||(Ll={}));var Gn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Gn||(Gn={}));class Ta{constructor(e,r={config:{}},n){var i,o;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Ot.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new fm(this,hn.join,this.params,this.timeout),this.rejoinTimer=new OA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ot.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ot.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this._on(hn.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new Dl(this),this.broadcastEndpointURL=MA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ot.closed){const{config:{broadcast:a,presence:s,private:u}}=this.params,c=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(g=>g.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[Ll.PRESENCE]&&this.bindings[Ll.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,f={},h={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:d}),postgres_changes:c,private:u};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(Gn.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(Gn.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:g})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){e==null||e(Gn.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,y=(b=v==null?void 0:v.length)!==null&&b!==void 0?b:0,x=[];for(let _=0;_<y;_++){const w=v[_],{filter:{event:E,schema:S,table:N,filter:k}}=w,A=g&&g[_];if(A&&A.event===E&&Ta.isFilterValueEqual(A.schema,S)&&Ta.isFilterValueEqual(A.table,N)&&Ta.isFilterValueEqual(A.filter,k))x.push(Object.assign(Object.assign({},w),{id:A.id}));else{this.unsubscribe(),this.state=Ot.errored,e==null||e(Gn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Gn.SUBSCRIBED);return}}).receive("error",g=>{this.state=Ot.errored,e==null||e(Gn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Gn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Ot.joined&&e===Ll.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;if(r==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let u=s.statusText;try{const c=await s.json();u=c.error||c.message||u}catch{}return Promise.reject(new Error(u))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,s,u;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(s=(a=this.params)===null||a===void 0?void 0:a.config)===null||s===void 0?void 0:s.broadcast)===null||u===void 0)&&u.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("error",()=>o("error")),c.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ot.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(hn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new fm(this,hn.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ot.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,o=setTimeout(()=>i.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(o),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new fm(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>fL){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,o;const a=e.toLocaleLowerCase(),{close:s,error:u,leave:c,join:d}=hn;if(n&&[s,u,c,d].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var b,v,y;return((b=g.filter)===null||b===void 0?void 0:b.event)==="*"||((y=(v=g.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===a}).map(g=>g.callback(h,n)):(o=this.bindings[a])===null||o===void 0||o.filter(g=>{var b,v,y,x,_,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const E=g.id,S=(b=g.filter)===null||b===void 0?void 0:b.event;return E&&((v=r.ids)===null||v===void 0?void 0:v.includes(E))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const E=(_=(x=g==null?void 0:g.filter)===null||x===void 0?void 0:x.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return E==="*"||E===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof h=="object"&&"ids"in h){const b=h.data,{schema:v,table:y,commit_timestamp:x,type:_,errors:w}=b;h=Object.assign(Object.assign({},{schema:v,table:y,commit_timestamp:x,eventType:_,new:{},old:{},errors:w}),this._getPayloadRecords(b))}g.callback(h,n)})}_isClosed(){return this.state===Ot.closed}_isJoined(){return this.state===Ot.joined}_isJoining(){return this.state===Ot.joining}_isLeaving(){return this.state===Ot.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),o={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Ta.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(hn.close,{},e)}_onError(e){this._on(hn.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ot.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Yw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Yw(e.columns,e.old_record)),r}}const hm=()=>{},Fc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},bL=[1e3,2e3,5e3,1e4],wL=1e4,_L=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class SL{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yg,this.transport=null,this.heartbeatIntervalMs=Fc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=hm,this.ref=0,this.reconnectTimer=null,this.vsn=Jw,this.logger=hm,this.conn=null,this.sendBuffer=[],this.serializer=new hL,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Xg.websocket}`,this.httpEndpoint=MA(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=sL.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case _i.connecting:return ho.Connecting;case _i.open:return ho.Open;case _i.closing:return ho.Closing;default:return ho.Closed}}isConnected(){return this.connectionState()===ho.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===n);if(i)return i;{const o=new Ta(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:n,payload:i,ref:o}=e,a=()=>{this.encode(e,s=>{var u;(u=this.conn)===null||u===void 0||u.send(s)})};this.log("push",`${r} ${n} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(dL,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Fc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:o,ref:a}=r,s=a?`(${a})`:"",u=o.status||"";this.log("receive",`${u} ${n} ${i} ${s}`.trim(),o),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(i,o,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===_i.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===_i.open||this.conn.readyState===_i.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(hn.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([_L],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const o={access_token:r,version:uL};r&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(hn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new OA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,o,a,s,u,c,d,f,h,g;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Yg,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Fc.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(s=e==null?void 0:e.heartbeatCallback)!==null&&s!==void 0?s:hm,this.vsn=(u=e==null?void 0:e.vsn)!==null&&u!==void 0?u:Jw,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:b=>bL[b-1]||wL,this.vsn){case IA:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(b,v)=>v(JSON.stringify(b)),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:(b,v)=>v(JSON.parse(b));break;case cL:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var cu=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function NL(t,e,r){const n=new URL(e,t);if(r)for(const[i,o]of Object.entries(r))o!==void 0&&n.searchParams.set(i,o);return n.toString()}async function EL(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function kL(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:o,headers:a}){const s=NL(t.baseUrl,n,i),u=await EL(t.auth),c=await e(s,{method:r,headers:{...o?{"Content-Type":"application/json"}:{},...u,...a},body:o?JSON.stringify(o):void 0}),d=await c.text(),f=(c.headers.get("content-type")||"").includes("application/json"),h=f&&d?JSON.parse(d):d;if(!c.ok){const g=f?h:void 0,b=g==null?void 0:g.error;throw new cu((b==null?void 0:b.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:g})}return{status:c.status,headers:c.headers,data:h}}}}function Bc(t){return t.join("")}var TL=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Bc(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Bc(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Bc(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Bc(t.namespace)}`}),!0}catch(e){if(e instanceof cu&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof cu&&r.status===409)return;throw r}}};function ta(t){return t.join("")}var CL=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ta(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ta(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ta(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ta(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ta(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ta(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof cu&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof cu&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},AL=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=kL({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new TL(this.client,e),this.tableOps=new CL(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Lh=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function ct(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var jL=class extends Lh{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Zg=class extends Lh{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const Wv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),PL=()=>Response,ey=t=>{if(Array.isArray(t))return t.map(r=>ey(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=ey(n)}),e},IL=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},OL=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function du(t){"@babel/helpers - typeof";return du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},du(t)}function RL(t,e){if(du(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ML(t){var e=RL(t,"string");return du(e)=="symbol"?e:e+""}function $L(t,e,r){return(e=ML(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Pe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zw(Object(r),!0).forEach(function(n){$L(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const pm=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},DL=async(t,e,r)=>{t instanceof await PL()&&!(r!=null&&r.noResolveJson)?t.json().then(n=>{const i=t.status||500,o=(n==null?void 0:n.statusCode)||i+"";e(new jL(pm(n),i,o))}).catch(n=>{e(new Zg(pm(n),n))}):e(new Zg(pm(t),t))},LL=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(IL(n)?(i.headers=Pe({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Pe(Pe({},i),r))};async function ac(t,e,r,n,i,o){return new Promise((a,s)=>{t(r,LL(e,n,i,o)).then(u=>{if(!u.ok)throw u;return n!=null&&n.noResolveJson?u:u.json()}).then(u=>a(u)).catch(u=>DL(u,s,n))})}async function fu(t,e,r,n){return ac(t,"GET",e,r,n)}async function dn(t,e,r,n,i){return ac(t,"POST",e,n,i,r)}async function ty(t,e,r,n,i){return ac(t,"PUT",e,n,i,r)}async function UL(t,e,r,n){return ac(t,"HEAD",e,Pe(Pe({},r),{},{noResolveJson:!0}),n)}async function Kv(t,e,r,n,i){return ac(t,"DELETE",e,n,i,r)}var FL=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(ct(e))return{data:null,error:e};throw e}}};let $A;$A=Symbol.toStringTag;var BL=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[$A]="BlobDownloadBuilder",this.promise=null}asStream(){return new FL(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(ct(e))return{data:null,error:e};throw e}}};const qL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},e_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var VL=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=Wv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,r,n){var i=this;try{let o;const a=Pe(Pe({},e_),n);let s=Pe(Pe({},i.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),u&&o.append("metadata",i.encodeMetadata(u)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),u&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(u))):(o=r,s["cache-control"]=`max-age=${a.cacheControl}`,s["content-type"]=a.contentType,u&&(s["x-metadata"]=i.toBase64(i.encodeMetadata(u))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),n!=null&&n.headers&&(s=Pe(Pe({},s),n.headers));const c=i._removeEmptyFolders(e),d=i._getFinalPath(c),f=await(t=="PUT"?ty:dn)(i.fetch,`${i.url}/object/${d}`,o,Pe({headers:s},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:f.Id,fullPath:f.Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(ct(o))return{data:null,error:o};throw o}}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,n){var i=this;const o=i._removeEmptyFolders(t),a=i._getFinalPath(o),s=new URL(i.url+`/object/upload/sign/${a}`);s.searchParams.set("token",e);try{let u;const c=Pe({upsert:e_.upsert},n),d=Pe(Pe({},i.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",c.cacheControl)):(u=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType),{data:{path:o,fullPath:(await ty(i.fetch,s.toString(),u,{headers:d})).Key},error:null}}catch(u){if(i.shouldThrowOnError)throw u;if(ct(u))return{data:null,error:u};throw u}}async createSignedUploadUrl(t,e){var r=this;try{let n=r._getFinalPath(t);const i=Pe({},r.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const o=await dn(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:i}),a=new URL(r.url+o.url),s=a.searchParams.get("token");if(!s)throw new Lh("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:s},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var n=this;try{return{data:await dn(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ct(i))return{data:null,error:i};throw i}}async copy(t,e,r){var n=this;try{return{data:{path:(await dn(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ct(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,r){var n=this;try{let i=n._getFinalPath(t),o=await dn(n.fetch,`${n.url}/object/sign/${i}`,Pe({expiresIn:e},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${n.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ct(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,r){var n=this;try{const i=await dn(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:t},{headers:n.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Pe(Pe({},a),{},{signedUrl:a.signedURL?encodeURI(`${n.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ct(i))return{data:null,error:i};throw i}}download(t,e){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=n?`?${n}`:"",o=this._getFinalPath(t),a=()=>fu(this.fetch,`${this.url}/${r}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new BL(a,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);try{return{data:ey(await fu(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await UL(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(ct(n)&&n instanceof Zg){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&n.push(i);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});a!==""&&n.push(a);let s=n.join("&");return s!==""&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${s}`)}}}async remove(t){var e=this;try{return{data:await Kv(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async list(t,e,r){var n=this;try{const i=Pe(Pe(Pe({},qL),e),{},{prefix:t||""});return{data:await dn(n.fetch,`${n.url}/object/list/${n.bucketId}`,i,{headers:n.headers},r),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(ct(i))return{data:null,error:i};throw i}}async listV2(t,e){var r=this;try{const n=Pe({},t);return{data:await dn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},e),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const DA="2.89.0",LA={"X-Client-Info":`storage-js/${DA}`};var GL=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1;const i=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Pe(Pe({},LA),e),this.fetch=Wv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const r=e.listBucketOptionsToQueryString(t);return{data:await fu(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await fu(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async createBucket(t,e={public:!1}){var r=this;try{return{data:await dn(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}}async updateBucket(t,e){var r=this;try{return{data:await ty(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}}async emptyBucket(t){var e=this;try{return{data:await dn(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await Kv(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},HL=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Pe(Pe({},LA),e),this.fetch=Wv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await dn(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async listBuckets(t){var e=this;try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),i=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return{data:await fu(e.fetch,i,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await Kv(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}}from(t){var e=this;if(!OL(t))throw new Lh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new AL({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(i,o){const a=i[o];return typeof a!="function"?a:async(...s)=>{try{return{data:await a.apply(i,s),error:null}}catch(u){if(n)throw u;return{data:null,error:u}}}}})}};const Jv={"X-Client-Info":`storage-js/${DA}`,"Content-Type":"application/json"};var UA=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Cr(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var mm=class extends UA{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},zL=class extends UA{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Yv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),WL=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},t_=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),KL=async(t,e,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const n=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||n+"";e(new mm(t_(o),n,a))}).catch(()=>{const o=n+"";e(new mm(i.statusText||`HTTP ${n} error`,n,o))});else{const o=n+"";e(new mm(i.statusText||`HTTP ${n} error`,n,o))}}else e(new zL(t_(t),t))},JL=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(WL(n)?(i.headers=Pe({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,Pe(Pe({},i),r)):i};async function YL(t,e,r,n,i,o){return new Promise((a,s)=>{t(r,JL(e,n,i,o)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;const c=u.headers.get("content-type");return!c||!c.includes("application/json")?{}:u.json()}).then(u=>a(u)).catch(u=>KL(u,s,n))})}async function Ar(t,e,r,n,i){return YL(t,"POST",e,n,i,r)}var XL=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Pe(Pe({},Jv),e),this.fetch=Yv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Ar(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}}async getIndex(t,e){var r=this;try{return{data:await Ar(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Cr(n))return{data:null,error:n};throw n}}async listIndexes(t){var e=this;try{return{data:await Ar(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}}async deleteIndex(t,e){var r=this;try{return{data:await Ar(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Cr(n))return{data:null,error:n};throw n}}},QL=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Pe(Pe({},Jv),e),this.fetch=Yv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Ar(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}}async getVectors(t){var e=this;try{return{data:await Ar(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Ar(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}}async queryVectors(t){var e=this;try{return{data:await Ar(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Ar(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}}},ZL=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Pe(Pe({},Jv),e),this.fetch=Yv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Ar(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await Ar(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}}async listBuckets(t={}){var e=this;try{return{data:await Ar(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await Ar(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Cr(r))return{data:null,error:r};throw r}}},e4=class extends ZL{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new t4(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},t4=class extends XL{constructor(t,e,r,n){super(t,e,n),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,Pe(Pe({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,Pe(Pe({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new r4(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},r4=class extends QL{constructor(t,e,r,n,i){super(t,e,i),this.vectorBucketName=r,this.indexName=n}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,Pe(Pe({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,Pe(Pe({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,Pe(Pe({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,Pe(Pe({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,Pe(Pe({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},n4=class extends GL{constructor(t,e={},r,n){super(t,e,r,n)}from(t){return new VL(this.url,this.headers,t,this.fetch)}get vectors(){return new e4(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new HL(this.url+"/iceberg",this.headers,this.fetch)}};const FA="2.89.0",fa=30*1e3,ry=3,gm=ry*fa,i4="http://localhost:9999",o4="supabase.auth.token",a4={"X-Client-Info":`gotrue-js/${FA}`},ny="X-Supabase-Api-Version",BA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},s4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,l4=10*60*1e3;class hu extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ee(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class u4 extends hu{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function c4(t){return Ee(t)&&t.name==="AuthApiError"}class po extends hu{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class fi extends hu{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class Sr extends fi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function d4(t){return Ee(t)&&t.name==="AuthSessionMissingError"}class ra extends fi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qc extends fi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Vc extends fi{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function f4(t){return Ee(t)&&t.name==="AuthImplicitGrantRedirectError"}class r_ extends fi{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class h4 extends fi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class iy extends fi{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function ym(t){return Ee(t)&&t.name==="AuthRetryableFetchError"}class n_ extends fi{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class oy extends fi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const rf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),i_=` 	
\r=`.split(""),p4=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<i_.length;e+=1)t[i_[e].charCodeAt(0)]=-2;for(let e=0;e<rf.length;e+=1)t[rf[e].charCodeAt(0)]=e;return t})();function o_(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(rf[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(rf[n]),e.queuedBits-=6}}function qA(t,e,r){const n=p4[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function a_(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{y4(a,n,r)};for(let a=0;a<t.length;a+=1)qA(t.charCodeAt(a),i,o);return e.join("")}function m4(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function g4(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}m4(n,e)}}function y4(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Ua(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)qA(t.charCodeAt(i),r,n);return new Uint8Array(e)}function v4(t){const e=[];return g4(t,r=>e.push(r)),new Uint8Array(e)}function vo(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>o_(i,r,n)),o_(null,r,n),e.join("")}function x4(t){return Math.round(Date.now()/1e3)+t}function b4(){return Symbol("auth-callback")}const Ht=()=>typeof window<"u"&&typeof document<"u",ro={tested:!1,writable:!1},VA=()=>{if(!Ht())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ro.tested)return ro.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ro.tested=!0,ro.writable=!0}catch{ro.tested=!0,ro.writable=!1}return ro.writable};function w4(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const GA=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),_4=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ha=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},no=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Gt=async(t,e)=>{await t.removeItem(e)};class Uh{constructor(){this.promise=new Uh.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Uh.promiseConstructor=Promise;function vm(t){const e=t.split(".");if(e.length!==3)throw new oy("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!s4.test(e[n]))throw new oy("JWT not in base64url format");return{header:JSON.parse(a_(e[0])),payload:JSON.parse(a_(e[1])),signature:Ua(e[2]),raw:{header:e[0],payload:e[1]}}}async function S4(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function N4(t,e){return new Promise((n,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){n(a);return}}catch(a){if(!e(o,a)){i(a);return}}})()})}function E4(t){return("0"+t.toString(16)).substr(-2)}function k4(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let o=0;o<56;o++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,E4).join("")}async function T4(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function C4(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await T4(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function na(t,e,r=!1){const n=k4();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await ha(t,`${e}-code-verifier`,i);const o=await C4(n);return[o,n===o?"plain":"s256"]}const A4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function j4(t){const e=t.headers.get(ny);if(!e||!e.match(A4))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function P4(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function I4(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const O4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ia(t){if(!O4.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xm(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function R4(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function s_(t){return JSON.parse(JSON.stringify(t))}const so=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),M4=[502,503,504];async function l_(t){var e;if(!_4(t))throw new iy(so(t),0);if(M4.includes(t.status))throw new iy(so(t),t.status);let r;try{r=await t.json()}catch(o){throw new po(so(o),o)}let n;const i=j4(t);if(i&&i.getTime()>=BA["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new n_(so(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Sr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new n_(so(r),t.status,r.weak_password.reasons);throw new u4(so(r),t.status||500,n)}const $4=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function je(t,e,r,n){var i;const o=Object.assign({},n==null?void 0:n.headers);o[ny]||(o[ny]=BA["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const a=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await D4(t,e,r+s,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(u):{data:Object.assign({},u),error:null}}async function D4(t,e,r,n,i,o){const a=$4(e,n,i,o);let s;try{s=await t(r,Object.assign({},a))}catch(u){throw console.error(u),new iy(so(u),0)}if(s.ok||await l_(s),n!=null&&n.noResolveJson)return s;try{return await s.json()}catch(u){await l_(u)}}function un(t){var e;let r=null;F4(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=x4(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function u_(t){const e=un(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ki(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function L4(t){return{data:t,error:null}}function U4(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:o}=t,a=Dh(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:o},u=Object.assign({},a);return{data:{properties:s,user:u},error:null}}function c_(t){return t}function F4(t){return t.access_token&&t.refresh_token&&t.expires_in}const bm=["global","local","others"];class B4{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=GA(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=bm[0]){if(bm.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bm.join(", ")}`);try{return await je(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await je(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ki})}catch(n){if(Ee(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Dh(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:U4,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ee(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await je(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ki})}catch(r){if(Ee(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,o,a,s,u;try{const c={nextPage:null,lastPage:0,total:0},d=await je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:c_});if(d.error)throw d.error;const f=await d.json(),h=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(u=(s=d.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&u!==void 0?u:[];return g.length>0&&(g.forEach(b=>{const v=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(b.split(";")[1].split("=")[1]);c[`${y}Page`]=v}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(Ee(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){ia(e);try{return await je(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ki})}catch(r){if(Ee(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){ia(e);try{return await je(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:ki})}catch(n){if(Ee(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){ia(e);try{return await je(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:ki})}catch(n){if(Ee(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){ia(e.userId);try{const{data:r,error:n}=await je(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async _deleteFactor(e){ia(e.userId),ia(e.id);try{return{data:await je(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,o,a,s,u;try{const c={nextPage:null,lastPage:0,total:0},d=await je(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:c_});if(d.error)throw d.error;const f=await d.json(),h=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(u=(s=d.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&u!==void 0?u:[];return g.length>0&&(g.forEach(b=>{const v=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(b.split(";")[1].split("=")[1]);c[`${y}Page`]=v}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(Ee(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await je(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await je(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await je(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await je(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await je(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ee(r))return{data:null,error:r};throw r}}}function d_(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const oa={debug:!!(globalThis&&VA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class HA extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class q4 extends HA{}async function V4(t,e,r){oa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),oa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){oa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{oa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw oa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new q4(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(oa.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function G4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function zA(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function H4(t){return parseInt(t,16)}function z4(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function W4(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:s,requestId:u,resources:c,scheme:d,uri:f,version:h}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=zA(t.address),b=d?`${d}://${n}`:n,v=t.statement?`${t.statement}
`:"",y=`${b} wants you to sign in with your Ethereum account:
${g}

${v}`;let x=`URI: ${f}
Version: ${h}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(x+=`
Expiration Time: ${i.toISOString()}`),s&&(x+=`
Not Before: ${s.toISOString()}`),u&&(x+=`
Request ID: ${u}`),c){let _=`
Resources:`;for(const w of c){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);_+=`
- ${w}`}x+=_}return`${y}
${x}`}class Nt extends Error{constructor({message:e,code:r,cause:n,name:i}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=i??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class nf extends Nt{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function K4({error:t,options:e}){var r,n,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Nt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Nt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Nt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Nt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Nt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Nt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new Nt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Nt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(WA(a)){if(o.rp.id!==a)return new Nt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Nt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function J4({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Nt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Nt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(WA(n)){if(r.rpId!==n)return new Nt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Y4{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const X4=new Y4;function Q4(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=Dh(t,["challenge","user","excludeCredentials"]),o=Ua(e).buffer,a=Object.assign(Object.assign({},r),{id:Ua(r.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:o,user:a});if(n&&n.length>0){s.excludeCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const c=n[u];s.excludeCredentials[u]=Object.assign(Object.assign({},c),{id:Ua(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return s}function Z4(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Dh(t,["challenge","allowCredentials"]),i=Ua(e).buffer,o=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const s=r[a];o.allowCredentials[a]=Object.assign(Object.assign({},s),{id:Ua(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return o}function e5(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:vo(new Uint8Array(t.response.attestationObject)),clientDataJSON:vo(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function t5(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:vo(new Uint8Array(i.authenticatorData)),clientDataJSON:vo(new Uint8Array(i.clientDataJSON)),signature:vo(new Uint8Array(i.signature)),userHandle:i.userHandle?vo(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function WA(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function f_(){var t,e;return!!(Ht()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function r5(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new nf("Browser returned unexpected credential type",e)}:{data:null,error:new nf("Empty credential response",e)}}catch(e){return{data:null,error:K4({error:e,options:t})}}}async function n5(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new nf("Browser returned unexpected credential type",e)}:{data:null,error:new nf("Empty credential response",e)}}catch(e){return{data:null,error:J4({error:e,options:t})}}}const i5={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},o5={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function of(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))n[o]=a;else if(r(a))n[o]=a;else if(e(a)){const s=n[o];e(s)?n[o]=of(s,a):n[o]=of(a)}else n[o]=a}return n}function a5(t,e){return of(i5,t,e||{})}function s5(t,e){return of(o5,t,e||{})}class l5{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},o){try{const{data:a,error:s}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!a)return{data:null,error:s};const u=i??X4.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=a5(a.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:d,error:f}=await r5({publicKey:c,signal:u});return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const c=s5(a.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:d,error:f}=await n5(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:u}));return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(a){return Ee(a)?{data:null,error:a}:{data:null,error:new po("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!r)return{data:null,error:new hu("rpId is required for WebAuthn authentication")};try{if(!f_())return{data:null,error:new po("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:o});if(!a)return{data:null,error:s};const{webauthn:u}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:u.type,rpId:r,rpOrigins:n,credential_response:u.credential_response}})}catch(a){return Ee(a)?{data:null,error:a}:{data:null,error:new po("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!r)return{data:null,error:new hu("rpId is required for WebAuthn registration")};try{if(!f_())return{data:null,error:new po("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:s};const{data:u,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:o});return u?this._verify({factorId:a.id,challengeId:u.challengeId,webauthn:{rpId:r,rpOrigins:n,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:c}}catch(a){return Ee(a)?{data:null,error:a}:{data:null,error:new po("Unexpected error in register",a)}}}}G4();const u5={url:i4,storageKey:o4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:a4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function h_(t,e,r){return await r()}const aa={};class pu{get jwks(){var e,r;return(r=(e=aa[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){aa[this.storageKey]=Object.assign(Object.assign({},aa[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=aa[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){aa[this.storageKey]=Object.assign(Object.assign({},aa[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},u5),e);if(this.storageKey=o.storageKey,this.instanceID=(r=pu.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,pu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Ht()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new B4({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=GA(o.fetch),this.lock=o.lock||h_,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&Ht()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=V4:this.lock=h_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new l5(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:VA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=d_(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=d_(this.memoryStorage)),Ht()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${FA}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(Ht()&&(r=w4(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Ht()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),f4(o)){const u=(e=o.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",s),await this._saveSession(a),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ee(r)?this._returnResult({error:r}):this._returnResult({error:new po("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const o=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:un}),{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const u=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:c,session:u},error:null})}catch(o){if(Ee(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var r,n,i;try{let o;if("email"in e){const{email:d,password:f,options:h}=e;let g=null,b=null;this.flowType==="pkce"&&([g,b]=await na(this.storage,this.storageKey)),o=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:g,code_challenge_method:b},xform:un})}else if("phone"in e){const{phone:d,password:f,options:h}=e;o=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:un})}else throw new qc("You must provide either an email or phone number and a password");const{data:a,error:s}=o;if(s||!a)return await Gt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:s});const u=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:c,session:u},error:null})}catch(o){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),Ee(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:a,options:s}=e;r=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:u_})}else if("phone"in e){const{phone:o,password:a,options:s}=e;r=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:u_})}else throw new qc("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const o=new ra;return this._returnResult({data:{user:null,session:null},error:o})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(Ee(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,o,a,s,u,c,d,f,h;let g,b;if("message"in e)g=e.message,b=e.signature;else{const{chain:v,wallet:y,statement:x,options:_}=e;let w;if(Ht())if(typeof y=="object")w=y;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")w=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=y}const E=new URL((r=_==null?void 0:_.url)!==null&&r!==void 0?r:window.location.href),S=await w.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=zA(S[0]);let k=(n=_==null?void 0:_.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!k){const C=await w.request({method:"eth_chainId"});k=H4(C)}const A={domain:E.host,address:N,statement:x,uri:E.href,version:"1",chainId:k,nonce:(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=_==null?void 0:_.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(s=_==null?void 0:_.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(u=_==null?void 0:_.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(c=_==null?void 0:_.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=_==null?void 0:_.signInWithEthereum)===null||d===void 0?void 0:d.resources};g=W4(A),b=await w.request({method:"personal_sign",params:[z4(g),N]})}try{const{data:v,error:y}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:b},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:un});if(y)throw y;if(!v||!v.session||!v.user){const x=new ra;return this._returnResult({data:{user:null,session:null},error:x})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:y})}catch(v){if(Ee(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var r,n,i,o,a,s,u,c,d,f,h,g;let b,v;if("message"in e)b=e.message,v=e.signature;else{const{chain:y,wallet:x,statement:_,options:w}=e;let E;if(Ht())if(typeof x=="object")E=x;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))E=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=x}const S=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in E&&E.signIn){const N=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),_?{statement:_}:null));let k;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")k=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)k=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)b=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),v=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${S.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(i=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const N=await E.signMessage(new TextEncoder().encode(b),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=N}}try{const{data:y,error:x}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:vo(v)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:un});if(x)throw x;if(!y||!y.session||!y.user){const _=new ra;return this._returnResult({data:{user:null,session:null},error:_})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:x})}catch(y){if(Ee(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(e){const r=await no(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new h4;const{data:o,error:a}=await je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:un});if(await Gt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const s=new ra;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),Ee(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:o,nonce:a}=e,s=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:un}),{data:u,error:c}=s;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!u||!u.session||!u.user){const d=new ra;return this._returnResult({data:{user:null,session:null},error:d})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:c})}catch(r){if(Ee(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,o,a;try{if("email"in e){const{email:s,options:u}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await na(this.storage,this.storageKey));const{error:f}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},create_user:(n=u==null?void 0:u.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:s,options:u}=e,{data:c,error:d}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=u==null?void 0:u.data)!==null&&i!==void 0?i:{},create_user:(o=u==null?void 0:u.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(a=u==null?void 0:u.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new qc("You must provide either an email or phone number.")}catch(s){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),Ee(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var r,n;try{let i,o;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:s}=await je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:un});if(s)throw s;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,c=a.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:c,session:u},error:null})}catch(i){if(Ee(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i,o,a;try{let s=null,u=null;this.flowType==="pkce"&&([s,u]=await na(this.storage,this.storageKey));const c=await je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:u}),headers:this.headers,xform:L4});return!((o=c.data)===null||o===void 0)&&o.url&&Ht()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(s){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),Ee(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Sr;const{error:i}=await je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Ee(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:o}=e,{error:a}=await je(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:n,type:i,options:o}=e,{data:a,error:s}=await je(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:s})}throw new qc("You must provide either an email or phone number and a type")}catch(r){if(Ee(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await no(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<gm:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await no(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=xm()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=R4(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ki}):await this._useSession(async r=>{var n,i,o;const{data:a,error:s}=r;if(s)throw s;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Sr}:await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:ki})})}catch(r){if(Ee(r))return d4(r)&&(await this._removeSession(),await Gt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:o}=n;if(o)throw o;if(!i.session)throw new Sr;const a=i.session;let s=null,u=null;this.flowType==="pkce"&&e.email!=null&&([s,u]=await na(this.storage,this.storageKey));const{data:c,error:d}=await je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:u}),jwt:a.access_token,xform:ki});if(d)throw d;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),Ee(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Sr;const r=Date.now()/1e3;let n=r,i=!0,o=null;const{payload:a}=vm(e.access_token);if(a.exp&&(n=a.exp,i=n<=r),i){const{data:s,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!s)return{data:{user:null,session:null},error:null};o=s}else{const{data:s,error:u}=await this._getUser(e.access_token);if(u)throw u;o={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(Ee(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:s}=r;if(s)throw s;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Sr;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Ee(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Ht())throw new Vc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Vc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new r_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Vc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new r_("No code detected.");const{data:_,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:s,expires_at:u,token_type:c}=e;if(!o||!s||!a||!c)throw new Vc("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(s);let h=d+f;u&&(h=parseInt(u));const g=h-d;g*1e3<=fa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const b=h-f;d-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,h,d):d-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,h,d);const{data:v,error:y}=await this._getUser(o);if(y)throw y;const x={provider_token:n,provider_refresh_token:i,access_token:o,expires_in:f,expires_at:h,refresh_token:a,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:e.type},error:null})}catch(n){if(Ee(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await no(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:o}=r;if(o)return this._returnResult({error:o});const a=(n=i.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:s}=await this.admin.signOut(a,e);if(s&&!(c4(s)&&(s.status===404||s.status===401||s.status===403)))return this._returnResult({error:s})}return e!=="others"&&(await this._removeSession(),await Gt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=b4(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:o},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await na(this.storage,this.storageKey,!0));try{return await je(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),Ee(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(Ee(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async o=>{var a,s,u,c,d;const{data:f,error:h}=o;if(h)throw h;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await je(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Ht()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Ee(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:o}}=r;if(i)throw i;const{options:a,provider:s,token:u,access_token:c,nonce:d}=e,f=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o==null?void 0:o.access_token)!==null&&n!==void 0?n:void 0,body:{provider:s,id_token:u,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:un}),{data:h,error:g}=f;return g?this._returnResult({data:{user:null,session:null},error:g}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new ra}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:g}))}catch(i){if(await Gt(this.storage,`${this.storageKey}-code-verifier`),Ee(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:o,error:a}=r;if(a)throw a;return await je(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(Ee(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await N4(async i=>(i>0&&await S4(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:un})),(i,o)=>{const a=200*Math.pow(2,i);return o&&ym(o)&&Date.now()+a-n<fa})}catch(n){if(this._debug(r,"error",n),Ee(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Ht()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await no(this.storage,this.storageKey);if(i&&this.userStorage){let a=await no(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await ha(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:xm()}else if(i&&!i.user&&!i.user){const a=await no(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await Gt(this.storage,this.storageKey+"-user"),await ha(this.storage,this.storageKey,i)):i.user=xm()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const o=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<gm;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${gm}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),ym(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:s}=await this._getUser(i.access_token);!s&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Sr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Uh;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new Sr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const s={data:o.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(o){if(this._debug(i,"error",o),Ee(o)){const a={data:null,error:o};return ym(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,r)}catch(u){o.push(u)}});if(await Promise.all(a),o.length>0){for(let s=0;s<o.length;s+=1)console.error(o[s]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Gt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await ha(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const o=s_(i);await ha(this.storage,this.storageKey,o)}else{const i=s_(r);await ha(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Gt(this.storage,this.storageKey),await Gt(this.storage,this.storageKey+"-code-verifier"),await Gt(this.storage,this.storageKey+"-user"),this.userStorage&&await Gt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ht()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),fa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/fa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${fa}ms, refresh threshold is ${ry} ticks`),i<=ry&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof HA)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ht()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,a]=await na(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(s.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);i.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:o}=r;return o?this._returnResult({data:null,error:o}):await je(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ee(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:u,error:c}=await je(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&u.type==="totp"&&(!((i=u==null?void 0:u.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(r){if(Ee(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?e5(e.webauthn.credential_response):t5(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:u}=await je(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:u}))})}catch(r){if(Ee(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=await je(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:s}=a;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:Q4(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:Z4(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ee(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=vm(n.access_token);let a=null;o.aal&&(a=o.aal);let s=a;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(s="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:s,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await je(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Sr})})}catch(r){if(Ee(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Sr});const a=await je(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&Ht()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(Ee(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Sr});const a=await je(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&Ht()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(Ee(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await je(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Sr})})}catch(e){if(Ee(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await je(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Sr})})}catch(r){if(Ee(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(s=>s.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(s=>s.kid===e),n&&this.jwks_cached_at+l4>i)return n;const{data:o,error:a}=await je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,n=o.keys.find(s=>s.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:g,error:b}=await this.getSession();if(b||!g.session)return this._returnResult({data:null,error:b});n=g.session.access_token}const{header:i,payload:o,signature:a,raw:{header:s,payload:u}}=vm(n);r!=null&&r.allowExpired||P4(o.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:o,header:i,signature:a},error:null}}const d=I4(i.alg),f=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,a,v4(`${s}.${u}`)))throw new oy("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(n){if(Ee(n))return this._returnResult({data:null,error:n});throw n}}}pu.nextInstanceID={};const c5=pu,d5="2.89.0";let wl="";typeof Deno<"u"?wl="deno":typeof document<"u"?wl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wl="react-native":wl="node";const f5={"X-Client-Info":`supabase-js-${wl}/${d5}`},h5={headers:f5},p5={schema:"public"},m5={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},g5={};function mu(t){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mu(t)}function y5(t,e){if(mu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function v5(t){var e=y5(t,"string");return mu(e)=="symbol"?e:e+""}function x5(t,e,r){return(e=v5(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?p_(Object(r),!0).forEach(function(n){x5(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p_(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const b5=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),w5=()=>Headers,_5=(t,e,r)=>{const n=b5(r),i=w5();return async(o,a)=>{var s;const u=(s=await e())!==null&&s!==void 0?s:t;let c=new i(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),n(o,yt(yt({},a),{},{headers:c}))}};function S5(t){return t.endsWith("/")?t:t+"/"}function N5(t,e){var r,n;const{db:i,auth:o,realtime:a,global:s}=t,{db:u,auth:c,realtime:d,global:f}=e,h={db:yt(yt({},u),i),auth:yt(yt({},c),o),realtime:yt(yt({},d),a),storage:{},global:yt(yt(yt({},f),s),{},{headers:yt(yt({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=s==null?void 0:s.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function E5(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(S5(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var k5=class extends c5{constructor(t){super(t)}},T5=class{constructor(t,e,r){var n,i;this.supabaseUrl=t,this.supabaseKey=e;const o=E5(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const a=`sb-${o.hostname.split(".")[0]}-auth-token`,s={db:p5,realtime:g5,auth:yt(yt({},m5),{},{storageKey:a}),global:h5},u=N5(r??{},s);if(this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=u.auth)!==null&&c!==void 0?c:{},this.headers,u.global.fetch)}this.fetch=_5(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(yt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new aL(new URL("rest/v1",o).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new n4(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new tL(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:n}=await t.auth.getSession();return(e=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:o,flowType:a,lock:s,debug:u,throwOnError:c},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new k5({url:this.authUrl.href,headers:yt(yt({},h),d),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:i,flowType:a,lock:s,debug:u,throwOnError:c,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new SL(this.realtimeUrl.href,yt(yt({},t),{},{params:yt(yt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const C5=(t,e,r)=>new T5(t,e,r);function A5(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}A5()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const m_={BASE_URL:"/net/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},j5="https://krgznynrljnvxwhvsdxj.supabase.co",P5="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtyZ3pueW5ybGpudnh3aHZzZHhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYzMzI3MzMsImV4cCI6MjA4MTkwODczM30.OUjiO0YpbSHSfD9gQ6T6RugFNdGPvJPhMzTQBkbgI5c";function KA(t){try{if(typeof import.meta<"u"&&import.meta&&m_)return m_[t]}catch(e){console.warn(`Error accessing environment variable ${t}:`,e)}}const I5=KA("VITE_SUPABASE_URL"),O5=KA("VITE_SUPABASE_ANON_KEY"),JA=I5||j5,R5=O5||P5;JA.includes("placeholder")&&console.warn("Supabase Client Warning: Missing or invalid URL/Key. Connection may fail.");const Oe=C5(JA,R5),sc=()=>{try{const t=localStorage.getItem("workflows");return t?JSON.parse(t):[]}catch{return[]}},YA=t=>{localStorage.setItem("workflows",JSON.stringify(t))},lc=()=>{try{const t=localStorage.getItem("cartable");return t?JSON.parse(t):[]}catch{return[]}},XA=t=>{localStorage.setItem("cartable",JSON.stringify(t))},QA=async(t,e)=>{try{const{data:r,error:n}=await Oe.from("messages").select("*").order("created_at",{ascending:!1});if(n)throw n;const o=(r||[]).map(u=>({id:u.id,senderId:u.sender_id,senderName:u.sender_name,receiverId:u.receiver_id,receiverType:u.receiver_type,subject:u.subject,body:u.body,createdAt:u.created_at,readBy:u.read_by||[],attachments:u.attachments||[]})),a=o.filter(u=>u.receiverType==="USER"&&u.receiverId===t||u.receiverType==="ALL"||u.receiverType==="GROUP"&&u.receiverId===e),s=o.filter(u=>u.senderId===t);return{inbox:a,sent:s}}catch(r){return console.error("Error fetching messages:",r),{inbox:[],sent:[]}}},M5=async(t,e)=>{try{const{inbox:r}=await QA(t,e);return r.filter(n=>!n.readBy.includes(t)).length}catch{return 0}},$5=async(t,e,r,n,i,o=[])=>{const a=`${at()} ${rs()}`,s=[];if(r==="USER"&&Array.isArray(e))e.forEach(c=>{s.push({sender_id:t.id,sender_name:t.fullName,receiver_id:c,receiver_type:"USER",subject:n,body:i,created_at:a,read_by:[],attachments:o})});else{const c=Array.isArray(e)?e[0]:e;s.push({sender_id:t.id,sender_name:t.fullName,receiver_id:c,receiver_type:r,subject:n,body:i,created_at:a,read_by:[],attachments:o})}const{error:u}=await Oe.from("messages").insert(s);if(u)throw u},D5=async(t,e)=>{if(!t.readBy.includes(e)){const r=[...t.readBy,e];await Oe.from("messages").update({read_by:r}).eq("id",t.id)}},Fe=async t=>{try{const{data:e,error:r}=await Oe.from(t).select("*");if(!r&&e&&!(t==="measurement_units"&&e.length===0))return e}catch{console.warn(`Failed to fetch ${t} from Supabase, falling back to defaults.`)}return t==="measurement_units"?[{id:"1",title:""},{id:"2",title:""},{id:"3",title:""},{id:"4",title:""},{id:"5",title:""},{id:"6",title:""},{id:"7",title:""},{id:"8",title:""}]:[]},L5=async()=>{try{const{data:t,error:e}=await Oe.from("shift_reports").select("id, tracking_code, shift_date, shift_name, shift_type, supervisor_name, total_production_a, total_production_b, full_data").order("created_at",{ascending:!1});if(e)throw e;return t||[]}catch(t){return console.error("Error fetching shift reports:",t),[]}},U5=async t=>{try{const e={tracking_code:t.code,shift_date:t.shiftInfo.date,shift_name:t.shiftInfo.name,shift_type:t.shiftInfo.type,shift_duration:t.shiftInfo.shiftDuration,supervisor_id:t.shiftInfo.supervisor,supervisor_name:t.shiftInfo.supervisorName,total_production_a:t.totalA,total_production_b:t.totalB,full_data:t},{error:r}=await Oe.from("shift_reports").insert([e]);if(r)throw r;return!0}catch(e){throw console.error("Error saving shift report:",e),e}},Ho=async t=>{try{const{data:e,error:r}=await Oe.rpc("get_next_tracking_code",{prefix_input:t});return r?(console.error("RPC Error:",r),t+Math.floor(Math.random()*9e3+1e3)):e}catch(e){return console.error("Fetch Code Error:",e),t+Math.floor(Math.random()*9e3+1e3)}},F5=()=>{let t=sc();if(!t.find(e=>e.module==="WORK_ORDER")){const e={id:"default-wo-flow",module:"WORK_ORDER",title:"  ",isActive:!0,steps:[{id:"step-request",title:"",assigneeRole:"INITIATOR",description:"   ",actions:[{id:"act-submit",label:"  ",nextStepId:"step-inprogress",style:"primary"}]},{id:"step-inprogress",title:"  ",assigneeRole:gr.USER,description:"    ",actions:[{id:"act-finish",label:"     ",nextStepId:"step-verify",style:"success"}]},{id:"step-verify",title:"",assigneeRole:gr.MANAGER,description:"    ",actions:[{id:"act-approve",label:" ",nextStepId:"step-finish",style:"success"},{id:"act-reject",label:"  (  )",nextStepId:"step-inprogress",style:"danger"}]},{id:"step-finish",title:"",assigneeRole:gr.ADMIN,description:" ",actions:[{id:"act-close",label:" ",nextStepId:"FINISH",style:"neutral"}]}]};t.push(e),YA(t)}};F5();const gu=()=>sc(),B5=t=>{const e=sc(),r=e.findIndex(n=>n.id===t.id);r>=0?e[r]=t:e.push(t),YA(e)},Hi=(t,e,r,n,i)=>{let a=sc().find(d=>d.module===t&&d.isActive);a||(a={id:`dummy-${t}`,module:t,title:" ",isActive:!0,steps:[{id:"step-start",title:" ",assigneeRole:"INITIATOR",actions:[]}]});const s=a.steps[0],u={id:$l(),workflowId:a.id,trackingCode:n,module:t,title:i,description:`   ${r.fullName}`,currentStepId:s.id,initiatorId:r.id,assigneeRole:s.assigneeRole==="INITIATOR"?r.role:s.assigneeRole,status:"PENDING",createdAt:at(),updatedAt:at(),data:{...e,status:"REQUEST"}},c=lc();return c.push(u),XA(c),u},q5=(t,e,r,n)=>{const i=lc(),o=i.findIndex(f=>f.id===t);if(o===-1)return;const a=i[o],u=sc().find(f=>f.id===a.workflowId);if(!u)return;const c=u.steps.find(f=>f.id===a.currentStepId);if(!c)return;const d=c.actions.find(f=>f.id===e);if(d){if(d.nextStepId==="FINISH")a.status="DONE",a.assigneeRole=gr.ADMIN,a.description=`   ${r.fullName}`,a.data&&(a.data.status="FINISHED");else{const f=u.steps.find(h=>h.id===d.nextStepId);if(f){a.currentStepId=f.id;const h=f.assigneeRole;h==="INITIATOR"?a.assigneeRole="INITIATOR":a.assigneeRole=h,a.updatedAt=at(),a.description=`   ${f.assigneeRole}  ${r.fullName}`,a.module==="WORK_ORDER"&&(f.title===""?a.data.status="REQUEST":f.title==="  "?a.data.status="IN_PROGRESS":f.title===""?a.data.status="VERIFICATION":f.title===""&&(a.data.status="FINISHED"))}}i[o]=a,XA(i)}},g_=t=>lc().filter(r=>r.status==="PENDING"&&(r.assigneeRole===t.role||r.assigneeRole==="INITIATOR"&&r.initiatorId===t.id||r.assigneeId===t.id)),V5=()=>lc().filter(e=>e.module==="WORK_ORDER"),Fh=t=>lc().filter(r=>r.module===t),G5=({children:t,user:e,onLogout:r,darkMode:n,toggleDarkMode:i})=>{var A;const[o,a]=T.useState(!1),[s,u]=T.useState(!1),[c,d]=T.useState([]),[f,h]=T.useState(0),[g,b]=T.useState(null),v=As(),y=Ph(),x=y.pathname==="/login";T.useEffect(()=>{dm.forEach(C=>{C.submenu&&C.submenu.some($=>$.path===y.pathname)&&!c.includes(C.id)&&d($=>[...$,C.id])})},[y.pathname]),T.useEffect(()=>{if(!e)return;const C=async()=>{const L=await M5(e.id,e.role);h(L),R()},R=async()=>{try{const{data:L}=await Oe.from("personal_notes").select("*").eq("user_id",e.id).eq("is_completed",!1).not("reminder_date","is",null).not("reminder_time","is",null);if(L&&L.length>0){const M=new Date,O=at(),P=rs(),D=L.find(B=>{if(B.reminderSeen)return!1;const U=B.reminderDate<O,W=B.reminderDate===O,K=B.reminderTime<=P;return U||W&&K});D&&(b(D),new Audio("https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3").play().catch(()=>{}))}}catch(L){console.error("Reminder check failed",L)}};C();const $=setInterval(C,3e4);return()=>clearInterval($)},[e]);const _=async()=>{g&&b(null)},w=async()=>{if(g)try{await Oe.from("personal_notes").update({is_completed:!0}).eq("id",g.id),b(null),alert("  .")}catch(C){console.error(C)}};if(x)return l.jsx(l.Fragment,{children:t});const E=()=>{v(-1)},S=y.pathname==="/",N=C=>{s?(u(!1),d([C])):d(R=>R.includes(C)?R.filter($=>$!==C):[...R,C])},k=C=>{C.submenu?N(C.id):(v(C.path),a(!1))};return l.jsxs("div",{className:`flex h-screen w-full overflow-hidden ${n?"dark":""}`,children:[g&&l.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fadeIn",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden transform transition-all scale-100 border-t-4 border-red-500",children:[l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 text-red-500 mb-4",children:[l.jsx("div",{className:"bg-red-100 dark:bg-red-900/20 p-3 rounded-full animate-bounce",children:l.jsx(uD,{className:"w-6 h-6"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:""})]}),l.jsx("h4",{className:"font-bold text-lg mb-2",children:g.title}),l.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm leading-relaxed mb-4",children:g.content||"      ."}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[l.jsx(Ps,{className:"w-3 h-3"}),l.jsxs("span",{children:[g.reminderTime," - ",g.reminderDate]})]})]}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 flex gap-3",children:[l.jsx("button",{onClick:_,className:"flex-1 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition",children:"  "}),l.jsxs("button",{onClick:w,className:"flex-1 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition flex items-center justify-center gap-2",children:[l.jsx(js,{className:"w-4 h-4"}),"  "]})]})]})}),o&&l.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 md:hidden",onClick:()=>a(!1)}),l.jsx("aside",{className:`
        fixed top-0 right-0 z-50 h-full bg-white dark:bg-gray-800 shadow-xl transition-all duration-300 ease-in-out border-l dark:border-gray-700
        ${o?"translate-x-0 w-64":"translate-x-full w-64"}
        md:relative md:translate-x-0 md:flex-shrink-0
        ${s?"md:w-20":"md:w-64"}
      `,children:l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:`p-4 border-b border-gray-200 dark:border-gray-700 flex items-center ${s?"justify-center":"justify-between"}`,children:[!s&&l.jsx("h2",{className:"text-xl font-bold text-primary dark:text-red-400 whitespace-nowrap",children:""}),l.jsx("button",{onClick:()=>a(!1),className:"md:hidden",children:l.jsx(ht,{className:"w-6 h-6"})}),l.jsx("button",{onClick:()=>u(!s),className:"hidden md:block p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 transition-colors",title:s?"  ":" ",children:s?l.jsx(ID,{className:"w-5 h-5"}):l.jsx(PD,{className:"w-5 h-5"})})]}),l.jsxs("div",{onClick:()=>{v("/settings"),a(!1)},className:`
              p-4 border-b border-gray-100 dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors group relative flex items-center gap-3
              ${s?"justify-center":""}
            `,title:s?e==null?void 0:e.fullName:" ",children:[l.jsx("div",{className:"w-10 h-10 min-w-[2.5rem] rounded-full bg-primary text-white flex items-center justify-center overflow-hidden border-2 border-transparent group-hover:border-primary transition-all shadow-sm",children:e!=null&&e.avatar?l.jsx("img",{src:e.avatar,alt:"User",className:"w-full h-full object-cover"}):l.jsx(ts,{className:"w-5 h-5"})}),!s&&l.jsxs("div",{className:"overflow-hidden",children:[l.jsx("p",{className:"font-medium truncate text-sm group-hover:text-primary transition-colors",children:e==null?void 0:e.fullName}),l.jsx("p",{className:"text-[10px] text-gray-500 dark:text-gray-400 truncate",children:e==null?void 0:e.role})]})]}),l.jsx("nav",{className:"flex-1 overflow-y-auto py-4 overflow-x-hidden no-scrollbar",children:dm.map(C=>{var P,D;if(C.id==="settings"||C.role&&(e==null?void 0:e.role)!==C.role&&(e==null?void 0:e.role)!=="ADMIN")return null;const R=!!C.submenu,$=c.includes(C.id),L=R&&((P=C.submenu)==null?void 0:P.some(B=>B.path===y.pathname)),M=!R&&y.pathname===C.path,O=C.id==="messages"&&f>0;return l.jsxs("div",{children:[l.jsxs("button",{onClick:()=>k(C),title:s?C.title:"",className:`
                      w-full flex items-center gap-3 py-3 transition-colors relative group
                      ${s?"justify-center px-2":"px-6 text-right justify-between"}
                      ${M||L?"text-primary dark:text-red-400 bg-primary/5 dark:bg-primary/10":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}
                    `,children:[l.jsxs("div",{className:"flex items-center gap-3 relative",children:[l.jsxs("div",{className:"relative",children:[l.jsx(C.icon,{className:`w-5 h-5 flex-shrink-0 transition-transform ${O?"animate-pulse":""} ${(M||L)&&!s?"scale-110":""}`}),O&&s&&l.jsx("span",{className:"absolute -top-1 -left-1 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white dark:border-gray-800"})]}),!s&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`text-sm truncate ${M||L?"font-bold":"font-medium"}`,children:C.title}),O&&l.jsx("span",{className:"bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded-full animate-bounce",children:f})]})]}),!s&&R&&l.jsx(Ih,{className:`w-4 h-4 transition-transform duration-200 ${$?"rotate-180":""}`}),s&&l.jsxs("div",{className:"absolute right-full mr-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50 shadow-lg flex items-center gap-2",children:[C.title,O&&l.jsx("span",{className:"bg-red-500 text-white px-1.5 rounded-full text-[9px]",children:f})]})]}),!s&&R&&$&&l.jsx("div",{className:"bg-gray-50 dark:bg-black/20 overflow-hidden transition-all",children:(D=C.submenu)==null?void 0:D.map(B=>{const U=y.pathname===B.path;return l.jsxs("button",{onClick:()=>{v(B.path),a(!1)},className:`
                                    w-full flex items-center gap-3 py-2.5 px-6 pr-12 text-right transition-colors
                                    ${U?"text-primary dark:text-red-400 font-bold":"text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"}
                                  `,children:[l.jsx(B.icon,{className:"w-4 h-4"}),l.jsx("span",{className:"text-xs",children:B.title})]},B.id)})})]},C.id)})}),l.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[l.jsxs("button",{onClick:i,title:s?n?" ":" ":"",className:`w-full flex items-center gap-3 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors ${s?"justify-center px-2":"px-4"}`,children:[n?l.jsx(qD,{className:"w-5 h-5"}):l.jsx(jD,{className:"w-5 h-5"}),!s&&l.jsx("span",{className:"text-sm",children:n?" ":" "})]}),l.jsxs("button",{onClick:r,title:s?"":"",className:`w-full flex items-center gap-3 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors ${s?"justify-center px-2":"px-4"}`,children:[l.jsx(TD,{className:"w-5 h-5"}),!s&&l.jsx("span",{className:"text-sm",children:""})]})]})]})}),l.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden bg-gray-50 dark:bg-gray-900 transition-all duration-300",children:[l.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm z-10 px-4 h-16 flex items-center justify-between flex-shrink-0 transition-all",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>a(!0),className:"md:hidden p-2 text-gray-600 dark:text-gray-300",children:l.jsx(AD,{className:"w-6 h-6"})}),!S&&l.jsx("button",{onClick:E,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:l.jsx(oc,{className:"w-6 h-6 text-gray-500"})}),l.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white truncate",children:((A=dm.flatMap(C=>C.submenu?C.submenu:C).find(C=>C.path===y.pathname))==null?void 0:A.title)||(y.pathname==="/settings"?"":"")})]}),l.jsx("div",{className:"flex items-center gap-2"})]}),l.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 no-scrollbar pb-20 md:pb-6 relative",children:t})]})]})},H5={BASE_URL:"/net/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Xv=({className:t})=>{const e=()=>{try{return`${H5&&"/net/"||"/"}logo.svg`.replace(/\/\//g,"/")}catch{return"/logo.svg"}};return l.jsx("img",{src:e(),className:t,alt:"Company Logo",onError:r=>{console.warn("Logo load failed"),r.currentTarget.style.display="none"}})},y_=`--      SQL Editor  Supabase  

-- 1.  
create table if not exists personnel (
  id uuid default gen_random_uuid() primary key,
  personnel_code text unique not null,
  full_name text,
  unit text,
  mobile text,
  email text,
  profile_picture text,
  created_at timestamptz default now()
);

create table if not exists app_users (
  id uuid default gen_random_uuid() primary key,
  username text unique not null,
  password text,
  role text not null,
  personnel_id uuid references personnel(id),
  is_default_password boolean default true,
  avatar text,
  created_at timestamptz default now()
);

--   
create table if not exists system_logs (
  id uuid default gen_random_uuid() primary key,
  user_id text,
  user_name text,
  personnel_code text,
  action text,
  ip_address text,
  details text,
  created_at timestamptz default now()
);

--   
create table if not exists messages (
  id uuid default gen_random_uuid() primary key,
  sender_id text,
  sender_name text,
  receiver_id text,
  receiver_type text,
  subject text,
  body text,
  read_by jsonb default '[]'::jsonb,
  created_at text,
  attachments jsonb default '[]'::jsonb
);

-- 2.   
create table if not exists locations ( id uuid default gen_random_uuid() primary key, code text unique, name text not null, parent_id uuid references locations(id), created_at timestamptz default now() );
create table if not exists measurement_units ( id uuid default gen_random_uuid() primary key, title text not null, created_at timestamptz default now() );
create table if not exists equipment_classes ( id uuid default gen_random_uuid() primary key, name text not null, created_at timestamptz default now() );
create table if not exists equipment_groups ( id uuid default gen_random_uuid() primary key, name text not null, class_id uuid references equipment_classes(id), created_at timestamptz default now() );

--   
create table if not exists part_categories ( 
  id uuid default gen_random_uuid() primary key, 
  code text unique not null, 
  name text unique not null, 
  parent_id uuid references part_categories(id), 
  level_type text not null, 
  created_at timestamptz default now() 
);

create table if not exists equipment (
  id uuid default gen_random_uuid() primary key,
  code text unique,
  name text not null,
  class_id uuid references equipment_classes(id),
  group_id uuid references equipment_groups(id),
  location_id uuid references locations(id),
  description text,
  created_at timestamptz default now()
);

create table if not exists equipment_local_names (
  id uuid default gen_random_uuid() primary key,
  local_name text not null,
  class_id uuid references equipment_classes(id),
  group_id uuid references equipment_groups(id),
  created_at timestamptz default now()
);

-- 3.     (Cartable)
create table if not exists cartable_items (
  id uuid default gen_random_uuid() primary key,
  workflow_id text,
  tracking_code text unique,
  module text not null,
  title text,
  description text,
  current_step_id text,
  initiator_id uuid references app_users(id),
  assignee_role text,
  assignee_id uuid references app_users(id),
  status text,
  data jsonb,
  created_at timestamptz default now(),
  updated_at timestamptz default now()
);

-- 4.   
create table if not exists projects (
  id uuid default gen_random_uuid() primary key,
  tracking_code text unique not null,
  title text not null,
  manager_id uuid references personnel(id),
  manager_name text,
  budget numeric default 0,
  start_date text,
  end_date text,
  status text default 'PLANNED',
  progress integer default 0,
  description text,
  created_at timestamptz default now(),
  updated_at timestamptz default now()
);

create table if not exists project_objectives (
  id uuid default gen_random_uuid() primary key,
  project_id uuid references projects(id) on delete cascade,
  objective_text text not null,
  created_at timestamptz default now()
);

create table if not exists project_milestones (
  id uuid default gen_random_uuid() primary key,
  project_id uuid references projects(id) on delete cascade,
  title text not null,
  weight_percent integer not null,
  progress_percent integer default 0,
  created_at timestamptz default now()
);

create table if not exists project_attachments (
  id uuid default gen_random_uuid() primary key,
  project_id uuid references projects(id) on delete cascade,
  file_name text not null,
  file_path text,
  file_size integer,
  file_type text,
  uploaded_at timestamptz default now()
);

--   
create table if not exists shift_reports (
  id uuid default gen_random_uuid() primary key,
  tracking_code text unique not null,
  shift_date text,
  shift_name text,
  shift_type text,
  shift_duration text,
  supervisor_id uuid,
  supervisor_name text,
  total_production_a numeric default 0,
  total_production_b numeric default 0,
  full_data jsonb,
  created_at timestamptz default now()
);

-- 5.   
create table if not exists performance_evaluations (
  id uuid default gen_random_uuid() primary key,
  tracking_code text unique not null,
  personnel_id uuid references personnel(id),
  personnel_name text,
  unit text,
  period text,
  total_score numeric,
  criteria_data jsonb,
  evaluator_id uuid references app_users(id),
  status text default 'PENDING',
  description text,
  created_at timestamptz default now()
);

--   
create table if not exists user_groups ( id uuid default gen_random_uuid() primary key, code text, name text, created_at timestamptz default now() );
create table if not exists org_chart ( id uuid default gen_random_uuid() primary key, code text, name text, manager_name text, created_at timestamptz default now() );
create table if not exists evaluation_periods ( id uuid default gen_random_uuid() primary key, code text, title text, created_at timestamptz default now() );
create table if not exists evaluation_criteria ( id uuid default gen_random_uuid() primary key, title text, max_score numeric, created_at timestamptz default now() );
create table if not exists equipment_tree ( id uuid default gen_random_uuid() primary key, equipment_id uuid references equipment(id), code text, name text, parent_id uuid references equipment_tree(id), created_at timestamptz default now() );
create table if not exists activity_cards ( id uuid default gen_random_uuid() primary key, code text, name text, created_at timestamptz default now() );
create table if not exists checklist_items ( id uuid default gen_random_uuid() primary key, activity_card_id uuid references activity_cards(id), sort_order int, description text, created_at timestamptz default now() );
create table if not exists maintenance_plans ( id uuid default gen_random_uuid() primary key, code text, name text, equipment_id uuid references equipment(id), created_at timestamptz default now() );

--   (    )
create table if not exists parts ( 
  id uuid default gen_random_uuid() primary key, 
  code text, 
  name text not null, 
  category_id uuid references part_categories(id), 
  stock_unit_id uuid references measurement_units(id), 
  consumption_unit_id uuid references measurement_units(id), 
  created_at timestamptz default now() 
);

-- 6.    (  )
create table if not exists part_requests (
  id uuid default gen_random_uuid() primary key,
  tracking_code text unique not null,
  requester_id uuid references app_users(id),
  requester_name text,
  work_order_id uuid references cartable_items(id), --    
  work_order_code text,
  request_date text,
  status text default 'PENDING',
  description text,
  created_at timestamptz default now()
);

create table if not exists part_request_items (
  id uuid default gen_random_uuid() primary key,
  request_id uuid references part_requests(id) on delete cascade,
  part_id uuid references parts(id),
  part_name text,
  qty numeric,
  unit text,
  note text,
  created_at timestamptz default now()
);

-- 7.   
create table if not exists technical_documents (
  id uuid default gen_random_uuid() primary key,
  code text not null,
  title text not null,
  type text,
  file_name text,
  created_at timestamptz default now()
);

-- 8.  
create table if not exists meeting_minutes (
  id uuid default gen_random_uuid() primary key,
  tracking_code text unique not null,
  subject text not null,
  location text,
  meeting_date text,
  start_time text,
  end_time text,
  attendees jsonb default '[]'::jsonb,
  decisions jsonb default '[]'::jsonb,
  attached_files jsonb default '[]'::jsonb,
  creator_id uuid references app_users(id),
  status text default 'PENDING',
  created_at timestamptz default now()
);

-- 9.   
create table if not exists technical_suggestions (
  id uuid default gen_random_uuid() primary key,
  tracking_code text unique not null,
  user_id uuid references app_users(id),
  user_name text,
  description text not null,
  attached_files jsonb default '[]'::jsonb,
  status text default 'PENDING',
  created_at timestamptz default now()
);

-- 10.    ()
create table if not exists purchase_requests (
  id uuid default gen_random_uuid() primary key,
  tracking_code text unique not null,
  request_number text not null,
  requester_id uuid references app_users(id),
  requester_name text,
  request_date text,
  description text not null,
  qty numeric default 1,
  unit text,
  location text,
  priority text,
  status text default 'PENDING',
  created_at timestamptz default now()
);

-- 11.    ()
create table if not exists personal_notes (
  id uuid default gen_random_uuid() primary key,
  user_id uuid references app_users(id),
  title text not null,
  content text,
  tags jsonb default '[]'::jsonb,
  reminder_date text,
  reminder_time text,
  is_completed boolean default false,
  attachments jsonb default '[]'::jsonb,
  created_at timestamptz default now()
);

--   
ALTER TABLE app_users ADD COLUMN IF NOT EXISTS password text;
ALTER TABLE app_users ADD COLUMN IF NOT EXISTS personnel_id uuid REFERENCES personnel(id);
ALTER TABLE org_chart ADD COLUMN IF NOT EXISTS parent_id uuid REFERENCES org_chart(id);
ALTER TABLE org_chart ADD COLUMN IF NOT EXISTS manager_id uuid REFERENCES personnel(id);
ALTER TABLE personnel ADD COLUMN IF NOT EXISTS org_unit_id uuid REFERENCES org_chart(id);
ALTER TABLE locations ADD COLUMN IF NOT EXISTS parent_id uuid REFERENCES locations(id);
ALTER TABLE equipment_classes ADD COLUMN IF NOT EXISTS code text;
ALTER TABLE equipment_groups ADD COLUMN IF NOT EXISTS code text;
ALTER TABLE evaluation_criteria ADD COLUMN IF NOT EXISTS org_unit_id uuid REFERENCES org_chart(id);

-- Constraints
ALTER TABLE equipment_classes DROP CONSTRAINT IF EXISTS equipment_classes_code_key;
ALTER TABLE equipment_classes ADD CONSTRAINT equipment_classes_code_key UNIQUE (code);
ALTER TABLE equipment_classes DROP CONSTRAINT IF EXISTS equipment_classes_name_key;
ALTER TABLE equipment_classes ADD CONSTRAINT equipment_classes_name_key UNIQUE (name);
ALTER TABLE equipment_groups DROP CONSTRAINT IF EXISTS equipment_groups_code_key;
ALTER TABLE equipment_groups ADD CONSTRAINT equipment_groups_code_key UNIQUE (code);
ALTER TABLE equipment ALTER COLUMN code SET NOT NULL;

-- RLS Policies (Simplified for development - allow all)
alter table personnel enable row level security; drop policy if exists "Allow all personnel" on personnel; create policy "Allow all personnel" on personnel for all using (true) with check (true);
alter table app_users enable row level security; drop policy if exists "Allow all users" on app_users; create policy "Allow all users" on app_users for all using (true) with check (true);
alter table shift_reports enable row level security; drop policy if exists "Allow all reports" on shift_reports; create policy "Allow all reports" on shift_reports for all using (true) with check (true);
alter table locations enable row level security; drop policy if exists "Allow all loc" on locations; create policy "Allow all loc" on locations for all using (true) with check (true);
alter table cartable_items enable row level security; drop policy if exists "Allow all cartable" on cartable_items; create policy "Allow all cartable" on cartable_items for all using (true) with check (true);
alter table messages enable row level security; drop policy if exists "Allow all messages" on messages; create policy "Allow all messages" on messages for all using (true) with check (true);
alter table projects enable row level security; drop policy if exists "Allow all projects" on projects; create policy "Allow all projects" on projects for all using (true) with check (true);
alter table project_objectives enable row level security; drop policy if exists "Allow all project_obj" on project_objectives; create policy "Allow all project_obj" on project_objectives for all using (true) with check (true);
alter table project_milestones enable row level security; drop policy if exists "Allow all project_mil" on project_milestones; create policy "Allow all project_mil" on project_milestones for all using (true) with check (true);
alter table project_attachments enable row level security; drop policy if exists "Allow all project_att" on project_attachments; create policy "Allow all project_att" on project_attachments for all using (true) with check (true);
alter table performance_evaluations enable row level security; drop policy if exists "Allow all evaluations" on performance_evaluations; create policy "Allow all evaluations" on performance_evaluations for all using (true) with check (true);
alter table parts enable row level security; drop policy if exists "Allow all parts" on parts; create policy "Allow all parts" on parts for all using (true) with check (true);
alter table part_categories enable row level security; drop policy if exists "Allow all part_cats" on part_categories; create policy "Allow all part_cats" on part_categories for all using (true) with check (true);
alter table part_requests enable row level security; drop policy if exists "Allow all part_req" on part_requests; create policy "Allow all part_req" on part_requests for all using (true) with check (true);
alter table part_request_items enable row level security; drop policy if exists "Allow all part_req_items" on part_request_items; create policy "Allow all part_req_items" on part_request_items for all using (true) with check (true);
alter table technical_documents enable row level security; drop policy if exists "Allow all docs" on technical_documents; create policy "Allow all docs" on technical_documents for all using (true) with check (true);
alter table meeting_minutes enable row level security; drop policy if exists "Allow all meetings" on meeting_minutes; create policy "Allow all meetings" on meeting_minutes for all using (true) with check (true);
alter table technical_suggestions enable row level security; drop policy if exists "Allow all suggestions" on technical_suggestions; create policy "Allow all suggestions" on technical_suggestions for all using (true) with check (true);
alter table purchase_requests enable row level security; drop policy if exists "Allow all purchase requests" on purchase_requests; create policy "Allow all purchase requests" on purchase_requests for all using (true) with check (true);
alter table personal_notes enable row level security; drop policy if exists "Allow user notes" on personal_notes; create policy "Allow user notes" on personal_notes for all using (true) with check (true);
alter table system_logs enable row level security; drop policy if exists "Allow logs" on system_logs; create policy "Allow logs" on system_logs for all using (true) with check (true);

--        
create or replace function get_next_tracking_code(prefix_input text)
returns text
language plpgsql
as $$
declare
  last_code text;
  next_num integer;
  new_code text;
begin
  select tracking_code into last_code
  from cartable_items
  where tracking_code like prefix_input || '%'
  order by tracking_code desc
  limit 1;

  if last_code is null then
    next_num := 1;
  else
    begin
        next_num := to_number(right(last_code, 4), '9999') + 1;
    exception when others then
        next_num := 1;
    end;
  end if;

  new_code := prefix_input || lpad(next_num::text, 4, '0');
  
  return new_code;
end;
$$;
`,z5=({onLogin:t})=>{const[e,r]=T.useState(""),[n,i]=T.useState(""),[o,a]=T.useState(""),[s,u]=T.useState(!1),[c,d]=T.useState(!1),[f,h]=T.useState(!1),[g,b]=T.useState(null),[v,y]=T.useState(""),[x,_]=T.useState(""),[w,E]=T.useState(""),[S,N]=T.useState(!1),[k,A]=T.useState("checking"),[C,R]=T.useState(""),[$,L]=T.useState(!1),[M,O]=T.useState(!1);T.useEffect(()=>{P()},[]);const P=async()=>{A("checking");try{const{data:re,error:Y}=await Oe.from("app_users").select("count",{count:"exact",head:!0});if(Y)throw Y;A("connected"),R("    ")}catch(re){console.error("Supabase Connection Error:",re),A("error");let Y="   ";typeof re=="string"?Y=re:(re==null?void 0:re.code)==="42P01"?Y="   ":re!=null&&re.message&&(Y=re.message),R(Y)}},D=()=>{navigator.clipboard.writeText(y_),O(!0),setTimeout(()=>O(!1),2e3)},B={id:"1",username:"admin",fullName:" ",role:gr.ADMIN,passwordHash:"12381",isDefaultPassword:!1},U=async re=>{var Y,ye,I;if(re.preventDefault(),a(""),u(!0),e.toLowerCase()==="admin"&&n==="12381"){if(B.isDefaultPassword){h(!0),b(B),u(!1);return}t(B),u(!1);return}try{const{data:Z,error:ce}=await Oe.from("app_users").select(`
                *,
                personnel (
                    full_name,
                    personnel_code,
                    profile_picture,
                    unit
                )
            `).eq("username",e).single();if(ce||!Z)throw ce&&ce.code!=="PGRST116"&&console.error("Auth DB Error:",ce),new Error("      ");if(Z.password!==n)throw new Error("      ");const ve={id:Z.id,username:Z.username,fullName:((Y=Z.personnel)==null?void 0:Y.full_name)||Z.username,role:Z.role,passwordHash:"***",isDefaultPassword:Z.is_default_password,personnelCode:(ye=Z.personnel)==null?void 0:ye.personnel_code,avatar:Z.avatar||((I=Z.personnel)==null?void 0:I.profile_picture)};if(ve.isDefaultPassword){h(!0),b(ve),u(!1);return}t(ve)}catch(Z){console.warn("Login Failed:",Z.message),a("      ")}finally{u(!1)}},W=async re=>{if(re.preventDefault(),x!==w){a("    ");return}if(v!==n){a("    ");return}if(x===n){a("       () ");return}if(u(!0),a(""),(g==null?void 0:g.username)==="admin")N(!0),setTimeout(()=>{h(!1),N(!1),y(""),_(""),E(""),i("")},2e3),u(!1);else if(g)try{const{error:Y}=await Oe.from("app_users").update({password:x,is_default_password:!1}).eq("id",g.id);if(Y)throw Y;N(!0),setTimeout(()=>{h(!1),N(!1),y(""),_(""),E(""),i("")},2e3)}catch(Y){a("    : "+Y.message)}finally{u(!1)}},K=x&&w&&x===w;return l.jsxs("div",{className:"min-h-[100dvh] flex flex-col items-center justify-center bg-gray-50 dark:bg-gray-900 p-4 relative overflow-hidden font-sans",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute -top-[20%] -right-[10%] w-[70vw] h-[70vw] rounded-full bg-[#800020]/5 blur-3xl"}),l.jsx("div",{className:"absolute top-[40%] -left-[10%] w-[50vw] h-[50vw] rounded-full bg-blue-500/5 blur-3xl"})]}),l.jsxs("div",{className:"w-full max-w-sm z-10 flex flex-col gap-6",children:[l.jsxs("div",{className:"text-center flex flex-col items-center animate-fadeIn",children:[l.jsx("h1",{className:"text-lg md:text-xl font-black text-[#800020] dark:text-red-400 leading-tight mb-2 px-4 whitespace-nowrap",children:"     "}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 font-bold tracking-wide",children:"    "})]}),l.jsx("div",{className:"flex justify-center mb-6 relative z-20 animate-fadeIn delay-100",children:l.jsx("div",{className:"w-36 h-36 flex items-center justify-center transform hover:scale-105 transition duration-700",children:l.jsx(Xv,{className:"w-full h-full drop-shadow-2xl"})})}),l.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-3xl shadow-xl p-6 md:p-8 animate-slideUp border border-white/50 dark:border-gray-700/50 pt-10 relative",children:[l.jsxs("div",{className:"absolute top-4 right-4",children:[k==="checking"&&l.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse",title:"   "}),k==="connected"&&l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full",title:"  "}),k==="error"&&l.jsx("button",{onClick:()=>L(!0),className:"text-red-500 hover:text-red-700 transition",title:"   -  ",children:l.jsx(_D,{className:"w-5 h-5"})})]}),f?l.jsx("form",{onSubmit:W,className:"space-y-5",children:S?l.jsxs("div",{className:"flex flex-col items-center justify-center py-10 space-y-4 animate-fadeIn",children:[l.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-2",children:l.jsx(js,{className:"w-10 h-10 text-green-600"})}),l.jsx("h3",{className:"text-xl font-bold text-green-700",children:"   "}),l.jsx("p",{className:"text-sm text-gray-500",children:"     ..."})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"text-center mb-4",children:[l.jsx("div",{className:"mx-auto w-12 h-12 bg-red-100 text-[#800020] rounded-full flex items-center justify-center mb-3",children:l.jsx(LD,{className:"w-7 h-7"})}),l.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"   "}),l.jsx("p",{className:"text-xs text-gray-500 mt-1 px-4 leading-relaxed",children:"          ."})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 mr-1",children:"  "}),l.jsxs("div",{className:"relative",children:[l.jsx(Uc,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),l.jsx("input",{type:"text",placeholder:" ...",value:v,onChange:re=>y(re.target.value),className:"w-full pr-10 pl-4 h-12 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-[#800020] focus:border-transparent outline-none text-sm transition-all",required:!0})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 mr-1",children:"  "}),l.jsxs("div",{className:"relative",children:[l.jsx(Uc,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),l.jsx("input",{type:"password",placeholder:" ...",value:x,onChange:re=>_(re.target.value),className:"w-full pr-10 pl-4 h-12 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-[#800020] focus:border-transparent outline-none text-sm transition-all",required:!0})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 mr-1",children:"   "}),l.jsxs("div",{className:"relative",children:[l.jsx(Uc,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),l.jsx("input",{type:"password",placeholder:"  ...",value:w,onChange:re=>E(re.target.value),className:`w-full pr-10 pl-4 h-12 bg-gray-50 dark:bg-gray-900/50 border rounded-xl focus:ring-2 focus:ring-[#800020] focus:border-transparent outline-none text-sm transition-all ${w&&!K?"border-red-500":"border-gray-200 dark:border-gray-600"}`,required:!0}),w&&l.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:K?l.jsx(es,{className:"w-4 h-4 text-green-500"}):l.jsx(ht,{className:"w-4 h-4 text-red-500"})})]}),w&&!K&&l.jsx("p",{className:"text-[10px] text-red-500 mr-1 animate-pulse",children:"    "})]})]}),o&&l.jsxs("div",{className:"text-red-500 text-xs text-center bg-red-50 dark:bg-red-900/10 p-2 rounded-lg border border-red-100 flex items-center justify-center gap-1",children:[l.jsx(gA,{className:"w-3 h-3"})," ",o]}),l.jsx("button",{type:"submit",disabled:s||!K||!x,className:"w-full bg-[#b91c1c] hover:bg-[#991b1b] text-white h-12 rounded-xl font-bold text-sm transition-all transform active:scale-95 shadow-lg shadow-red-900/20 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:s?l.jsx(Ct,{className:"w-5 h-5 animate-spin"}):"  "})]})}):l.jsxs("form",{onSubmit:U,className:"space-y-5",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:"   "}),l.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"         "})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 mr-1",children:" "}),l.jsxs("div",{className:"relative group",children:[l.jsx(ts,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-[#800020] transition-colors"}),l.jsx("input",{type:"text",placeholder:"     ",value:e,onChange:re=>r(re.target.value),className:"w-full pr-12 pl-4 h-14 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-600 rounded-2xl focus:ring-2 focus:ring-[#800020] focus:border-transparent outline-none transition-all text-gray-800 dark:text-gray-100",required:!0,autoComplete:"username"})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{className:"text-xs font-bold text-gray-500 mr-1",children:" "}),l.jsxs("div",{className:"relative group",children:[l.jsx(Uc,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-[#800020] transition-colors"}),l.jsx("input",{type:c?"text":"password",placeholder:"",value:n,onChange:re=>i(re.target.value),className:"w-full pr-12 pl-12 h-14 bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-600 rounded-2xl focus:ring-2 focus:ring-[#800020] focus:border-transparent outline-none transition-all text-gray-800 dark:text-gray-100 tracking-wider",style:{fontFamily:c?"inherit":"Verdana, sans-serif"},required:!0,autoComplete:"current-password"}),l.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute left-0 top-0 bottom-0 px-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 flex items-center justify-center",children:c?l.jsx(gD,{className:"w-5 h-5"}):l.jsx(Vv,{className:"w-5 h-5"})})]})]})]}),o&&l.jsxs("div",{className:"text-red-500 text-sm text-center bg-red-50 dark:bg-red-900/10 p-3 rounded-xl border border-red-100 dark:border-red-900/20 flex items-center justify-center gap-2 animate-shake",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),o]}),l.jsx("button",{type:"submit",disabled:s,className:"w-full bg-[#b91c1c] hover:bg-[#991b1b] text-white h-14 rounded-2xl font-bold text-lg transition-all transform active:scale-[0.98] shadow-xl shadow-red-900/20 flex items-center justify-center gap-2 mt-2 disabled:opacity-70 disabled:cursor-wait",children:s?l.jsx(Ct,{className:"w-5 h-5 animate-spin"}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:"  "}),l.jsx(kD,{className:"w-5 h-5"})]})})]})]}),l.jsxs("div",{className:"text-center space-y-2 pb-6",children:[l.jsx("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-400 dark:text-gray-500 font-light opacity-80",children:l.jsxs("span",{children:[" ",WD]})}),l.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-[10px] font-medium tracking-widest uppercase opacity-80",children:"DESIGNED & DEVELOPED BY H.PARSA"})]}),$&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[80vh]",children:[l.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-800",children:[l.jsxs("h3",{className:"font-bold flex items-center gap-2 text-gray-700 dark:text-gray-200",children:[l.jsx(hD,{className:"w-5 h-5 text-blue-600"}),"  "]}),l.jsx("button",{onClick:()=>L(!1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition",children:l.jsx(ht,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/10 border-b border-yellow-100 dark:border-yellow-900/30 text-sm text-yellow-800 dark:text-yellow-200",children:["        ",l.jsx("b",{children:"Supabase"}),"  ",l.jsx("b",{children:"SQL Editor"}),"        ."]}),l.jsxs("div",{className:"flex-1 overflow-auto p-4 bg-gray-900 text-gray-300 font-mono text-xs relative",children:[l.jsx("pre",{children:y_}),l.jsxs("button",{onClick:D,className:"absolute top-4 left-4 bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-lg text-xs font-bold flex items-center gap-2 shadow-lg transition",children:[M?l.jsx(es,{className:"w-4 h-4"}):l.jsx(fD,{className:"w-4 h-4"}),M?" ":" "]})]})]})})]})]})};function ZA(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=ZA(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Ge(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=ZA(t))&&(n&&(n+=" "),n+=e);return n}var W5=Array.isArray,wr=W5,K5=typeof wc=="object"&&wc&&wc.Object===Object&&wc,ej=K5,J5=ej,Y5=typeof self=="object"&&self&&self.Object===Object&&self,X5=J5||Y5||Function("return this")(),Bn=X5,Q5=Bn,Z5=Q5.Symbol,uc=Z5,v_=uc,tj=Object.prototype,e3=tj.hasOwnProperty,t3=tj.toString,ol=v_?v_.toStringTag:void 0;function r3(t){var e=e3.call(t,ol),r=t[ol];try{t[ol]=void 0;var n=!0}catch{}var i=t3.call(t);return n&&(e?t[ol]=r:delete t[ol]),i}var n3=r3,i3=Object.prototype,o3=i3.toString;function a3(t){return o3.call(t)}var s3=a3,x_=uc,l3=n3,u3=s3,c3="[object Null]",d3="[object Undefined]",b_=x_?x_.toStringTag:void 0;function f3(t){return t==null?t===void 0?d3:c3:b_&&b_ in Object(t)?l3(t):u3(t)}var hi=f3;function h3(t){return t!=null&&typeof t=="object"}var pi=h3,p3=hi,m3=pi,g3="[object Symbol]";function y3(t){return typeof t=="symbol"||m3(t)&&p3(t)==g3}var Os=y3,v3=wr,x3=Os,b3=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,w3=/^\w*$/;function _3(t,e){if(v3(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||x3(t)?!0:w3.test(t)||!b3.test(t)||e!=null&&t in Object(e)}var Qv=_3;function S3(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ji=S3;const Rs=Qe(Ji);var N3=hi,E3=Ji,k3="[object AsyncFunction]",T3="[object Function]",C3="[object GeneratorFunction]",A3="[object Proxy]";function j3(t){if(!E3(t))return!1;var e=N3(t);return e==T3||e==C3||e==k3||e==A3}var Zv=j3;const $e=Qe(Zv);var P3=Bn,I3=P3["__core-js_shared__"],O3=I3,wm=O3,w_=function(){var t=/[^.]+$/.exec(wm&&wm.keys&&wm.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function R3(t){return!!w_&&w_ in t}var M3=R3,$3=Function.prototype,D3=$3.toString;function L3(t){if(t!=null){try{return D3.call(t)}catch{}try{return t+""}catch{}}return""}var rj=L3,U3=Zv,F3=M3,B3=Ji,q3=rj,V3=/[\\^$.*+?()[\]{}|]/g,G3=/^\[object .+?Constructor\]$/,H3=Function.prototype,z3=Object.prototype,W3=H3.toString,K3=z3.hasOwnProperty,J3=RegExp("^"+W3.call(K3).replace(V3,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Y3(t){if(!B3(t)||F3(t))return!1;var e=U3(t)?J3:G3;return e.test(q3(t))}var X3=Y3;function Q3(t,e){return t==null?void 0:t[e]}var Z3=Q3,eU=X3,tU=Z3;function rU(t,e){var r=tU(t,e);return eU(r)?r:void 0}var zo=rU,nU=zo,iU=nU(Object,"create"),Bh=iU,__=Bh;function oU(){this.__data__=__?__(null):{},this.size=0}var aU=oU;function sU(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var lU=sU,uU=Bh,cU="__lodash_hash_undefined__",dU=Object.prototype,fU=dU.hasOwnProperty;function hU(t){var e=this.__data__;if(uU){var r=e[t];return r===cU?void 0:r}return fU.call(e,t)?e[t]:void 0}var pU=hU,mU=Bh,gU=Object.prototype,yU=gU.hasOwnProperty;function vU(t){var e=this.__data__;return mU?e[t]!==void 0:yU.call(e,t)}var xU=vU,bU=Bh,wU="__lodash_hash_undefined__";function _U(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=bU&&e===void 0?wU:e,this}var SU=_U,NU=aU,EU=lU,kU=pU,TU=xU,CU=SU;function Ms(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ms.prototype.clear=NU;Ms.prototype.delete=EU;Ms.prototype.get=kU;Ms.prototype.has=TU;Ms.prototype.set=CU;var AU=Ms;function jU(){this.__data__=[],this.size=0}var PU=jU;function IU(t,e){return t===e||t!==t&&e!==e}var ex=IU,OU=ex;function RU(t,e){for(var r=t.length;r--;)if(OU(t[r][0],e))return r;return-1}var qh=RU,MU=qh,$U=Array.prototype,DU=$U.splice;function LU(t){var e=this.__data__,r=MU(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():DU.call(e,r,1),--this.size,!0}var UU=LU,FU=qh;function BU(t){var e=this.__data__,r=FU(e,t);return r<0?void 0:e[r][1]}var qU=BU,VU=qh;function GU(t){return VU(this.__data__,t)>-1}var HU=GU,zU=qh;function WU(t,e){var r=this.__data__,n=zU(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var KU=WU,JU=PU,YU=UU,XU=qU,QU=HU,ZU=KU;function $s(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}$s.prototype.clear=JU;$s.prototype.delete=YU;$s.prototype.get=XU;$s.prototype.has=QU;$s.prototype.set=ZU;var Vh=$s,eF=zo,tF=Bn,rF=eF(tF,"Map"),tx=rF,S_=AU,nF=Vh,iF=tx;function oF(){this.size=0,this.__data__={hash:new S_,map:new(iF||nF),string:new S_}}var aF=oF;function sF(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var lF=sF,uF=lF;function cF(t,e){var r=t.__data__;return uF(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Gh=cF,dF=Gh;function fF(t){var e=dF(this,t).delete(t);return this.size-=e?1:0,e}var hF=fF,pF=Gh;function mF(t){return pF(this,t).get(t)}var gF=mF,yF=Gh;function vF(t){return yF(this,t).has(t)}var xF=vF,bF=Gh;function wF(t,e){var r=bF(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var _F=wF,SF=aF,NF=hF,EF=gF,kF=xF,TF=_F;function Ds(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ds.prototype.clear=SF;Ds.prototype.delete=NF;Ds.prototype.get=EF;Ds.prototype.has=kF;Ds.prototype.set=TF;var rx=Ds,nj=rx,CF="Expected a function";function nx(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(CF);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(nx.Cache||nj),r}nx.Cache=nj;var ij=nx;const AF=Qe(ij);var jF=ij,PF=500;function IF(t){var e=jF(t,function(n){return r.size===PF&&r.clear(),n}),r=e.cache;return e}var OF=IF,RF=OF,MF=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$F=/\\(\\)?/g,DF=RF(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(MF,function(r,n,i,o){e.push(i?o.replace($F,"$1"):n||r)}),e}),LF=DF;function UF(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var ix=UF,N_=uc,FF=ix,BF=wr,qF=Os,E_=N_?N_.prototype:void 0,k_=E_?E_.toString:void 0;function oj(t){if(typeof t=="string")return t;if(BF(t))return FF(t,oj)+"";if(qF(t))return k_?k_.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var VF=oj,GF=VF;function HF(t){return t==null?"":GF(t)}var aj=HF,zF=wr,WF=Qv,KF=LF,JF=aj;function YF(t,e){return zF(t)?t:WF(t,e)?[t]:KF(JF(t))}var sj=YF,XF=Os;function QF(t){if(typeof t=="string"||XF(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Hh=QF,ZF=sj,eB=Hh;function tB(t,e){e=ZF(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[eB(e[r++])];return r&&r==n?t:void 0}var ox=tB,rB=ox;function nB(t,e,r){var n=t==null?void 0:rB(t,e);return n===void 0?r:n}var lj=nB;const Jr=Qe(lj);function iB(t){return t==null}var oB=iB;const Le=Qe(oB);var aB=hi,sB=wr,lB=pi,uB="[object String]";function cB(t){return typeof t=="string"||!sB(t)&&lB(t)&&aB(t)==uB}var dB=cB;const Ro=Qe(dB);var uj={exports:{}},Je={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ax=Symbol.for("react.element"),sx=Symbol.for("react.portal"),zh=Symbol.for("react.fragment"),Wh=Symbol.for("react.strict_mode"),Kh=Symbol.for("react.profiler"),Jh=Symbol.for("react.provider"),Yh=Symbol.for("react.context"),fB=Symbol.for("react.server_context"),Xh=Symbol.for("react.forward_ref"),Qh=Symbol.for("react.suspense"),Zh=Symbol.for("react.suspense_list"),ep=Symbol.for("react.memo"),tp=Symbol.for("react.lazy"),hB=Symbol.for("react.offscreen"),cj;cj=Symbol.for("react.module.reference");function rn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case ax:switch(t=t.type,t){case zh:case Kh:case Wh:case Qh:case Zh:return t;default:switch(t=t&&t.$$typeof,t){case fB:case Yh:case Xh:case tp:case ep:case Jh:return t;default:return e}}case sx:return e}}}Je.ContextConsumer=Yh;Je.ContextProvider=Jh;Je.Element=ax;Je.ForwardRef=Xh;Je.Fragment=zh;Je.Lazy=tp;Je.Memo=ep;Je.Portal=sx;Je.Profiler=Kh;Je.StrictMode=Wh;Je.Suspense=Qh;Je.SuspenseList=Zh;Je.isAsyncMode=function(){return!1};Je.isConcurrentMode=function(){return!1};Je.isContextConsumer=function(t){return rn(t)===Yh};Je.isContextProvider=function(t){return rn(t)===Jh};Je.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===ax};Je.isForwardRef=function(t){return rn(t)===Xh};Je.isFragment=function(t){return rn(t)===zh};Je.isLazy=function(t){return rn(t)===tp};Je.isMemo=function(t){return rn(t)===ep};Je.isPortal=function(t){return rn(t)===sx};Je.isProfiler=function(t){return rn(t)===Kh};Je.isStrictMode=function(t){return rn(t)===Wh};Je.isSuspense=function(t){return rn(t)===Qh};Je.isSuspenseList=function(t){return rn(t)===Zh};Je.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===zh||t===Kh||t===Wh||t===Qh||t===Zh||t===hB||typeof t=="object"&&t!==null&&(t.$$typeof===tp||t.$$typeof===ep||t.$$typeof===Jh||t.$$typeof===Yh||t.$$typeof===Xh||t.$$typeof===cj||t.getModuleId!==void 0)};Je.typeOf=rn;uj.exports=Je;var pB=uj.exports,mB=hi,gB=pi,yB="[object Number]";function vB(t){return typeof t=="number"||gB(t)&&mB(t)==yB}var dj=vB;const xB=Qe(dj);var bB=dj;function wB(t){return bB(t)&&t!=+t}var _B=wB;const cc=Qe(_B);var xn=function(e){return e===0?0:e>0?1:-1},xo=function(e){return Ro(e)&&e.indexOf("%")===e.length-1},pe=function(e){return xB(e)&&!cc(e)},SB=function(e){return Le(e)},$t=function(e){return pe(e)||Ro(e)},NB=0,dc=function(e){var r=++NB;return"".concat(e||"").concat(r)},Mo=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!pe(e)&&!Ro(e))return n;var o;if(xo(e)){var a=e.indexOf("%");o=r*parseFloat(e.slice(0,a))/100}else o=+e;return cc(o)&&(o=n),i&&o>r&&(o=r),o},Ti=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},EB=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},yn=function(e,r){return pe(e)&&pe(r)?function(n){return e+n*(r-e)}:function(){return r}};function af(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Jr(n,e))===r})}var kB=function(e,r){return pe(e)&&pe(r)?e-r:Ro(e)&&Ro(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Fa(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function ay(t){"@babel/helpers - typeof";return ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ay(t)}var TB=["viewBox","children"],CB=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],T_=["points","pathLength"],_m={svg:TB,polygon:T_,polyline:T_},lx=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],sf=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(T.isValidElement(e)&&(n=e.props),!Rs(n))return null;var i={};return Object.keys(n).forEach(function(o){lx.includes(o)&&(i[o]=r||function(a){return n[o](n,a)})}),i},AB=function(e,r,n){return function(i){return e(r,n,i),null}},lf=function(e,r,n){if(!Rs(e)||ay(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var a=e[o];lx.includes(o)&&typeof a=="function"&&(i||(i={}),i[o]=AB(a,r,n))}),i},jB=["children"],PB=["children"];function C_(t,e){if(t==null)return{};var r=IB(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function IB(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function sy(t){"@babel/helpers - typeof";return sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sy(t)}var A_={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Zn=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},j_=null,Sm=null,ux=function t(e){if(e===j_&&Array.isArray(Sm))return Sm;var r=[];return T.Children.forEach(e,function(n){Le(n)||(pB.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),Sm=r,j_=e,r};function Yr(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return Zn(i)}):n=[Zn(e)],ux(t).forEach(function(i){var o=Jr(i,"type.displayName")||Jr(i,"type.name");n.indexOf(o)!==-1&&r.push(i)}),r}function Tr(t,e){var r=Yr(t,e);return r&&r[0]}var P_=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!pe(n)||n<=0||!pe(i)||i<=0)},OB=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],RB=function(e){return e&&e.type&&Ro(e.type)&&OB.indexOf(e.type)>=0},MB=function(e){return e&&sy(e)==="object"&&"clipDot"in e},$B=function(e,r,n,i){var o,a=(o=_m==null?void 0:_m[i])!==null&&o!==void 0?o:[];return r.startsWith("data-")||!$e(e)&&(i&&a.includes(r)||CB.includes(r))||n&&lx.includes(r)},Be=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(T.isValidElement(e)&&(i=e.props),!Rs(i))return null;var o={};return Object.keys(i).forEach(function(a){var s;$B((s=i)===null||s===void 0?void 0:s[a],a,r,n)&&(o[a]=i[a])}),o},ly=function t(e,r){if(e===r)return!0;var n=T.Children.count(e);if(n!==T.Children.count(r))return!1;if(n===0)return!0;if(n===1)return I_(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var o=e[i],a=r[i];if(Array.isArray(o)||Array.isArray(a)){if(!t(o,a))return!1}else if(!I_(o,a))return!1}return!0},I_=function(e,r){if(Le(e)&&Le(r))return!0;if(!Le(e)&&!Le(r)){var n=e.props||{},i=n.children,o=C_(n,jB),a=r.props||{},s=a.children,u=C_(a,PB);return i&&s?Fa(o,u)&&ly(i,s):!i&&!s?Fa(o,u):!1}return!1},O_=function(e,r){var n=[],i={};return ux(e).forEach(function(o,a){if(RB(o))n.push(o);else if(o){var s=Zn(o.type),u=r[s]||{},c=u.handler,d=u.once;if(c&&(!d||!i[s])){var f=c(o,s,a);n.push(f),i[s]=!0}}}),n},DB=function(e){var r=e&&e.type;return r&&A_[r]?A_[r]:null},LB=function(e,r){return ux(r).indexOf(e)},UB=["children","width","height","viewBox","className","style","title","desc"];function uy(){return uy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},uy.apply(this,arguments)}function FB(t,e){if(t==null)return{};var r=BB(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function BB(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function cy(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,o=t.className,a=t.style,s=t.title,u=t.desc,c=FB(t,UB),d=i||{width:r,height:n,x:0,y:0},f=Ge("recharts-surface",o);return G.createElement("svg",uy({},Be(c,!0,"svg"),{className:f,width:r,height:n,style:a,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),G.createElement("title",null,s),G.createElement("desc",null,u),e)}var qB=["children","className"];function dy(){return dy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dy.apply(this,arguments)}function VB(t,e){if(t==null)return{};var r=GB(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function GB(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var _t=G.forwardRef(function(t,e){var r=t.children,n=t.className,i=VB(t,qB),o=Ge("recharts-layer",n);return G.createElement("g",dy({className:o},Be(i,!0),{ref:e}),r)}),ei=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o]};function HB(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}var zB=HB,WB=zB;function KB(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:WB(t,e,r)}var JB=KB,YB="\\ud800-\\udfff",XB="\\u0300-\\u036f",QB="\\ufe20-\\ufe2f",ZB="\\u20d0-\\u20ff",e6=XB+QB+ZB,t6="\\ufe0e\\ufe0f",r6="\\u200d",n6=RegExp("["+r6+YB+e6+t6+"]");function i6(t){return n6.test(t)}var fj=i6;function o6(t){return t.split("")}var a6=o6,hj="\\ud800-\\udfff",s6="\\u0300-\\u036f",l6="\\ufe20-\\ufe2f",u6="\\u20d0-\\u20ff",c6=s6+l6+u6,d6="\\ufe0e\\ufe0f",f6="["+hj+"]",fy="["+c6+"]",hy="\\ud83c[\\udffb-\\udfff]",h6="(?:"+fy+"|"+hy+")",pj="[^"+hj+"]",mj="(?:\\ud83c[\\udde6-\\uddff]){2}",gj="[\\ud800-\\udbff][\\udc00-\\udfff]",p6="\\u200d",yj=h6+"?",vj="["+d6+"]?",m6="(?:"+p6+"(?:"+[pj,mj,gj].join("|")+")"+vj+yj+")*",g6=vj+yj+m6,y6="(?:"+[pj+fy+"?",fy,mj,gj,f6].join("|")+")",v6=RegExp(hy+"(?="+hy+")|"+y6+g6,"g");function x6(t){return t.match(v6)||[]}var b6=x6,w6=a6,_6=fj,S6=b6;function N6(t){return _6(t)?S6(t):w6(t)}var E6=N6,k6=JB,T6=fj,C6=E6,A6=aj;function j6(t){return function(e){e=A6(e);var r=T6(e)?C6(e):void 0,n=r?r[0]:e.charAt(0),i=r?k6(r,1).join(""):e.slice(1);return n[t]()+i}}var P6=j6,I6=P6,O6=I6("toUpperCase"),R6=O6;const rp=Qe(R6);function et(t){return function(){return t}}const xj=Math.cos,uf=Math.sin,kn=Math.sqrt,cf=Math.PI,np=2*cf,py=Math.PI,my=2*py,lo=1e-6,M6=my-lo;function bj(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function $6(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return bj;const r=10**e;return function(n){this._+=n[0];for(let i=1,o=n.length;i<o;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class D6{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?bj:$6(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,o,a){this._append`C${+e},${+r},${+n},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,r,n,i,o){if(e=+e,r=+r,n=+n,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,u=n-e,c=i-r,d=a-e,f=s-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(h>lo)if(!(Math.abs(f*u-c*d)>lo)||!o)this._append`L${this._x1=e},${this._y1=r}`;else{let g=n-a,b=i-s,v=u*u+c*c,y=g*g+b*b,x=Math.sqrt(v),_=Math.sqrt(h),w=o*Math.tan((py-Math.acos((v+h-y)/(2*x*_)))/2),E=w/_,S=w/x;Math.abs(E-1)>lo&&this._append`L${e+E*d},${r+E*f}`,this._append`A${o},${o},0,0,${+(f*g>d*b)},${this._x1=e+S*u},${this._y1=r+S*c}`}}arc(e,r,n,i,o,a){if(e=+e,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(i),u=n*Math.sin(i),c=e+s,d=r+u,f=1^a,h=a?i-o:o-i;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>lo||Math.abs(this._y1-d)>lo)&&this._append`L${c},${d}`,n&&(h<0&&(h=h%my+my),h>M6?this._append`A${n},${n},0,1,${f},${e-s},${r-u}A${n},${n},0,1,${f},${this._x1=c},${this._y1=d}`:h>lo&&this._append`A${n},${n},0,${+(h>=py)},${f},${this._x1=e+n*Math.cos(o)},${this._y1=r+n*Math.sin(o)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function cx(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new D6(e)}function dx(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function wj(t){this._context=t}wj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ip(t){return new wj(t)}function _j(t){return t[0]}function Sj(t){return t[1]}function Nj(t,e){var r=et(!0),n=null,i=ip,o=null,a=cx(s);t=typeof t=="function"?t:t===void 0?_j:et(t),e=typeof e=="function"?e:e===void 0?Sj:et(e);function s(u){var c,d=(u=dx(u)).length,f,h=!1,g;for(n==null&&(o=i(g=a())),c=0;c<=d;++c)!(c<d&&r(f=u[c],c,u))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(f,c,u),+e(f,c,u));if(g)return o=null,g+""||null}return s.x=function(u){return arguments.length?(t=typeof u=="function"?u:et(+u),s):t},s.y=function(u){return arguments.length?(e=typeof u=="function"?u:et(+u),s):e},s.defined=function(u){return arguments.length?(r=typeof u=="function"?u:et(!!u),s):r},s.curve=function(u){return arguments.length?(i=u,n!=null&&(o=i(n)),s):i},s.context=function(u){return arguments.length?(u==null?n=o=null:o=i(n=u),s):n},s}function Gc(t,e,r){var n=null,i=et(!0),o=null,a=ip,s=null,u=cx(c);t=typeof t=="function"?t:t===void 0?_j:et(+t),e=typeof e=="function"?e:et(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Sj:et(+r);function c(f){var h,g,b,v=(f=dx(f)).length,y,x=!1,_,w=new Array(v),E=new Array(v);for(o==null&&(s=a(_=u())),h=0;h<=v;++h){if(!(h<v&&i(y=f[h],h,f))===x)if(x=!x)g=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),b=h-1;b>=g;--b)s.point(w[b],E[b]);s.lineEnd(),s.areaEnd()}x&&(w[h]=+t(y,h,f),E[h]=+e(y,h,f),s.point(n?+n(y,h,f):w[h],r?+r(y,h,f):E[h]))}if(_)return s=null,_+""||null}function d(){return Nj().defined(i).curve(a).context(o)}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:et(+f),n=null,c):t},c.x0=function(f){return arguments.length?(t=typeof f=="function"?f:et(+f),c):t},c.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:et(+f),c):n},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:et(+f),r=null,c):e},c.y0=function(f){return arguments.length?(e=typeof f=="function"?f:et(+f),c):e},c.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:et(+f),c):r},c.lineX0=c.lineY0=function(){return d().x(t).y(e)},c.lineY1=function(){return d().x(t).y(r)},c.lineX1=function(){return d().x(n).y(e)},c.defined=function(f){return arguments.length?(i=typeof f=="function"?f:et(!!f),c):i},c.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),c):a},c.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),c):o},c}class Ej{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function L6(t){return new Ej(t,!0)}function U6(t){return new Ej(t,!1)}const fx={draw(t,e){const r=kn(e/cf);t.moveTo(r,0),t.arc(0,0,r,0,np)}},F6={draw(t,e){const r=kn(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},kj=kn(1/3),B6=kj*2,q6={draw(t,e){const r=kn(e/B6),n=r*kj;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},V6={draw(t,e){const r=kn(e),n=-r/2;t.rect(n,n,r,r)}},G6=.8908130915292852,Tj=uf(cf/10)/uf(7*cf/10),H6=uf(np/10)*Tj,z6=-xj(np/10)*Tj,W6={draw(t,e){const r=kn(e*G6),n=H6*r,i=z6*r;t.moveTo(0,-r),t.lineTo(n,i);for(let o=1;o<5;++o){const a=np*o/5,s=xj(a),u=uf(a);t.lineTo(u*r,-s*r),t.lineTo(s*n-u*i,u*n+s*i)}t.closePath()}},Nm=kn(3),K6={draw(t,e){const r=-kn(e/(Nm*3));t.moveTo(0,r*2),t.lineTo(-Nm*r,-r),t.lineTo(Nm*r,-r),t.closePath()}},Lr=-.5,Ur=kn(3)/2,gy=1/kn(12),J6=(gy/2+1)*3,Y6={draw(t,e){const r=kn(e/J6),n=r/2,i=r*gy,o=n,a=r*gy+r,s=-o,u=a;t.moveTo(n,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(Lr*n-Ur*i,Ur*n+Lr*i),t.lineTo(Lr*o-Ur*a,Ur*o+Lr*a),t.lineTo(Lr*s-Ur*u,Ur*s+Lr*u),t.lineTo(Lr*n+Ur*i,Lr*i-Ur*n),t.lineTo(Lr*o+Ur*a,Lr*a-Ur*o),t.lineTo(Lr*s+Ur*u,Lr*u-Ur*s),t.closePath()}};function X6(t,e){let r=null,n=cx(i);t=typeof t=="function"?t:et(t||fx),e=typeof e=="function"?e:et(e===void 0?64:+e);function i(){let o;if(r||(r=o=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),o)return r=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:et(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:et(+o),i):e},i.context=function(o){return arguments.length?(r=o??null,i):r},i}function df(){}function ff(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Cj(t){this._context=t}Cj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ff(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ff(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Q6(t){return new Cj(t)}function Aj(t){this._context=t}Aj.prototype={areaStart:df,areaEnd:df,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ff(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Z6(t){return new Aj(t)}function jj(t){this._context=t}jj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:ff(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function e8(t){return new jj(t)}function Pj(t){this._context=t}Pj.prototype={areaStart:df,areaEnd:df,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function t8(t){return new Pj(t)}function R_(t){return t<0?-1:1}function M_(t,e,r){var n=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(n||i<0&&-0),a=(r-t._y1)/(i||n<0&&-0),s=(o*i+a*n)/(n+i);return(R_(o)+R_(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function $_(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Em(t,e,r){var n=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-n)/3;t._context.bezierCurveTo(n+s,i+s*e,o-s,a-s*r,o,a)}function hf(t){this._context=t}hf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Em(this,this._t0,$_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Em(this,$_(this,r=M_(this,t,e)),r);break;default:Em(this,this._t0,r=M_(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function Ij(t){this._context=new Oj(t)}(Ij.prototype=Object.create(hf.prototype)).point=function(t,e){hf.prototype.point.call(this,e,t)};function Oj(t){this._context=t}Oj.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,o){this._context.bezierCurveTo(e,t,n,r,o,i)}};function r8(t){return new hf(t)}function n8(t){return new Ij(t)}function Rj(t){this._context=t}Rj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=D_(t),i=D_(e),o=0,a=1;a<r;++o,++a)this._context.bezierCurveTo(n[0][o],i[0][o],n[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function D_(t){var e,r=t.length-1,n,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function i8(t){return new Rj(t)}function op(t,e){this._context=t,this._t=e}op.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function o8(t){return new op(t,.5)}function a8(t){return new op(t,0)}function s8(t){return new op(t,1)}function is(t,e){if((a=t.length)>1)for(var r=1,n,i,o=t[e[0]],a,s=o.length;r<a;++r)for(i=o,o=t[e[r]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function yy(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function l8(t,e){return t[e]}function u8(t){const e=[];return e.key=t,e}function c8(){var t=et([]),e=yy,r=is,n=l8;function i(o){var a=Array.from(t.apply(this,arguments),u8),s,u=a.length,c=-1,d;for(const f of o)for(s=0,++c;s<u;++s)(a[s][c]=[0,+n(f,a[s].key,c,o)]).data=f;for(s=0,d=dx(e(a));s<u;++s)a[d[s]].index=s;return r(a,d),a}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:et(Array.from(o)),i):t},i.value=function(o){return arguments.length?(n=typeof o=="function"?o:et(+o),i):n},i.order=function(o){return arguments.length?(e=o==null?yy:typeof o=="function"?o:et(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(r=o??is,i):r},i}function d8(t,e){if((n=t.length)>0){for(var r,n,i=0,o=t[0].length,a;i<o;++i){for(a=r=0;r<n;++r)a+=t[r][i][1]||0;if(a)for(r=0;r<n;++r)t[r][i][1]/=a}is(t,e)}}function f8(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,o=n.length;r<o;++r){for(var a=0,s=0;a<i;++a)s+=t[a][r][1]||0;n[r][1]+=n[r][0]=-s/2}is(t,e)}}function h8(t,e){if(!(!((a=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,o,a;n<o;++n){for(var s=0,u=0,c=0;s<a;++s){for(var d=t[e[s]],f=d[n][1]||0,h=d[n-1][1]||0,g=(f-h)/2,b=0;b<s;++b){var v=t[e[b]],y=v[n][1]||0,x=v[n-1][1]||0;g+=y-x}u+=f,c+=g*f}i[n-1][1]+=i[n-1][0]=r,u&&(r-=c/u)}i[n-1][1]+=i[n-1][0]=r,is(t,e)}}function yu(t){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yu(t)}var p8=["type","size","sizeType"];function vy(){return vy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vy.apply(this,arguments)}function L_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function U_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?L_(Object(r),!0).forEach(function(n){m8(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L_(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function m8(t,e,r){return e=g8(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g8(t){var e=y8(t,"string");return yu(e)=="symbol"?e:e+""}function y8(t,e){if(yu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function v8(t,e){if(t==null)return{};var r=x8(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function x8(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Mj={symbolCircle:fx,symbolCross:F6,symbolDiamond:q6,symbolSquare:V6,symbolStar:W6,symbolTriangle:K6,symbolWye:Y6},b8=Math.PI/180,w8=function(e){var r="symbol".concat(rp(e));return Mj[r]||fx},_8=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*b8;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},S8=function(e,r){Mj["symbol".concat(rp(e))]=r},hx=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,o=i===void 0?64:i,a=e.sizeType,s=a===void 0?"area":a,u=v8(e,p8),c=U_(U_({},u),{},{type:n,size:o,sizeType:s}),d=function(){var y=w8(n),x=X6().type(y).size(_8(o,s,n));return x()},f=c.className,h=c.cx,g=c.cy,b=Be(c,!0);return h===+h&&g===+g&&o===+o?G.createElement("path",vy({},b,{className:Ge("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(g,")"),d:d()})):null};hx.registerSymbol=S8;function os(t){"@babel/helpers - typeof";return os=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},os(t)}function xy(){return xy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xy.apply(this,arguments)}function F_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function N8(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?F_(Object(r),!0).forEach(function(n){vu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F_(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function E8(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Dj(n.key),n)}}function T8(t,e,r){return e&&k8(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function C8(t,e,r){return e=pf(e),A8(t,$j()?Reflect.construct(e,r||[],pf(t).constructor):e.apply(t,r))}function A8(t,e){if(e&&(os(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j8(t)}function j8(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $j(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($j=function(){return!!t})()}function pf(t){return pf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pf(t)}function P8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&by(t,e)}function by(t,e){return by=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},by(t,e)}function vu(t,e,r){return e=Dj(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dj(t){var e=I8(t,"string");return os(e)=="symbol"?e:e+""}function I8(t,e){if(os(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(os(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fr=32,px=function(t){function e(){return E8(this,e),C8(this,e,arguments)}return P8(e,t),T8(e,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,o=Fr/2,a=Fr/6,s=Fr/3,u=n.inactive?i:n.color;if(n.type==="plainline")return G.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:o,x2:Fr,y2:o,className:"recharts-legend-icon"});if(n.type==="line")return G.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(o,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(o,`
            H`).concat(Fr,"M").concat(2*s,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(o),className:"recharts-legend-icon"});if(n.type==="rect")return G.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Fr/8,"h").concat(Fr,"v").concat(Fr*3/4,"h").concat(-Fr,"z"),className:"recharts-legend-icon"});if(G.isValidElement(n.legendIcon)){var c=N8({},n);return delete c.legendIcon,G.cloneElement(n.legendIcon,c)}return G.createElement(hx,{fill:u,cx:o,cy:o,size:Fr,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,o=i.payload,a=i.iconSize,s=i.layout,u=i.formatter,c=i.inactiveColor,d={x:0,y:0,width:Fr,height:Fr},f={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(g,b){var v=g.formatter||u,y=Ge(vu(vu({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",g.inactive));if(g.type==="none")return null;var x=$e(g.value)?null:g.value;ei(!$e(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var _=g.inactive?c:g.color;return G.createElement("li",xy({className:y,style:f,key:"legend-item-".concat(b)},lf(n.props,g,b)),G.createElement(cy,{width:a,height:a,viewBox:d,style:h},n.renderIcon(g)),G.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},v?v(x,g,b):x))})}},{key:"render",value:function(){var n=this.props,i=n.payload,o=n.layout,a=n.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return G.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(T.PureComponent);vu(px,"displayName","Legend");vu(px,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var O8=Vh;function R8(){this.__data__=new O8,this.size=0}var M8=R8;function $8(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var D8=$8;function L8(t){return this.__data__.get(t)}var U8=L8;function F8(t){return this.__data__.has(t)}var B8=F8,q8=Vh,V8=tx,G8=rx,H8=200;function z8(t,e){var r=this.__data__;if(r instanceof q8){var n=r.__data__;if(!V8||n.length<H8-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new G8(n)}return r.set(t,e),this.size=r.size,this}var W8=z8,K8=Vh,J8=M8,Y8=D8,X8=U8,Q8=B8,Z8=W8;function Ls(t){var e=this.__data__=new K8(t);this.size=e.size}Ls.prototype.clear=J8;Ls.prototype.delete=Y8;Ls.prototype.get=X8;Ls.prototype.has=Q8;Ls.prototype.set=Z8;var Lj=Ls,eq="__lodash_hash_undefined__";function tq(t){return this.__data__.set(t,eq),this}var rq=tq;function nq(t){return this.__data__.has(t)}var iq=nq,oq=rx,aq=rq,sq=iq;function mf(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new oq;++e<r;)this.add(t[e])}mf.prototype.add=mf.prototype.push=aq;mf.prototype.has=sq;var Uj=mf;function lq(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var Fj=lq;function uq(t,e){return t.has(e)}var Bj=uq,cq=Uj,dq=Fj,fq=Bj,hq=1,pq=2;function mq(t,e,r,n,i,o){var a=r&hq,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t),d=o.get(e);if(c&&d)return c==e&&d==t;var f=-1,h=!0,g=r&pq?new cq:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var b=t[f],v=e[f];if(n)var y=a?n(v,b,f,e,t,o):n(b,v,f,t,e,o);if(y!==void 0){if(y)continue;h=!1;break}if(g){if(!dq(e,function(x,_){if(!fq(g,_)&&(b===x||i(b,x,r,n,o)))return g.push(_)})){h=!1;break}}else if(!(b===v||i(b,v,r,n,o))){h=!1;break}}return o.delete(t),o.delete(e),h}var qj=mq,gq=Bn,yq=gq.Uint8Array,vq=yq;function xq(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var bq=xq;function wq(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var mx=wq,B_=uc,q_=vq,_q=ex,Sq=qj,Nq=bq,Eq=mx,kq=1,Tq=2,Cq="[object Boolean]",Aq="[object Date]",jq="[object Error]",Pq="[object Map]",Iq="[object Number]",Oq="[object RegExp]",Rq="[object Set]",Mq="[object String]",$q="[object Symbol]",Dq="[object ArrayBuffer]",Lq="[object DataView]",V_=B_?B_.prototype:void 0,km=V_?V_.valueOf:void 0;function Uq(t,e,r,n,i,o,a){switch(r){case Lq:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Dq:return!(t.byteLength!=e.byteLength||!o(new q_(t),new q_(e)));case Cq:case Aq:case Iq:return _q(+t,+e);case jq:return t.name==e.name&&t.message==e.message;case Oq:case Mq:return t==e+"";case Pq:var s=Nq;case Rq:var u=n&kq;if(s||(s=Eq),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;n|=Tq,a.set(t,e);var d=Sq(s(t),s(e),n,i,o,a);return a.delete(t),d;case $q:if(km)return km.call(t)==km.call(e)}return!1}var Fq=Uq;function Bq(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var Vj=Bq,qq=Vj,Vq=wr;function Gq(t,e,r){var n=e(t);return Vq(t)?n:qq(n,r(t))}var Hq=Gq;function zq(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[i++]=a)}return o}var Wq=zq;function Kq(){return[]}var Jq=Kq,Yq=Wq,Xq=Jq,Qq=Object.prototype,Zq=Qq.propertyIsEnumerable,G_=Object.getOwnPropertySymbols,e7=G_?function(t){return t==null?[]:(t=Object(t),Yq(G_(t),function(e){return Zq.call(t,e)}))}:Xq,t7=e7;function r7(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var n7=r7,i7=hi,o7=pi,a7="[object Arguments]";function s7(t){return o7(t)&&i7(t)==a7}var l7=s7,H_=l7,u7=pi,Gj=Object.prototype,c7=Gj.hasOwnProperty,d7=Gj.propertyIsEnumerable,f7=H_(function(){return arguments}())?H_:function(t){return u7(t)&&c7.call(t,"callee")&&!d7.call(t,"callee")},gx=f7,gf={exports:{}};function h7(){return!1}var p7=h7;gf.exports;(function(t,e){var r=Bn,n=p7,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?r.Buffer:void 0,u=s?s.isBuffer:void 0,c=u||n;t.exports=c})(gf,gf.exports);var Hj=gf.exports,m7=9007199254740991,g7=/^(?:0|[1-9]\d*)$/;function y7(t,e){var r=typeof t;return e=e??m7,!!e&&(r=="number"||r!="symbol"&&g7.test(t))&&t>-1&&t%1==0&&t<e}var yx=y7,v7=9007199254740991;function x7(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=v7}var vx=x7,b7=hi,w7=vx,_7=pi,S7="[object Arguments]",N7="[object Array]",E7="[object Boolean]",k7="[object Date]",T7="[object Error]",C7="[object Function]",A7="[object Map]",j7="[object Number]",P7="[object Object]",I7="[object RegExp]",O7="[object Set]",R7="[object String]",M7="[object WeakMap]",$7="[object ArrayBuffer]",D7="[object DataView]",L7="[object Float32Array]",U7="[object Float64Array]",F7="[object Int8Array]",B7="[object Int16Array]",q7="[object Int32Array]",V7="[object Uint8Array]",G7="[object Uint8ClampedArray]",H7="[object Uint16Array]",z7="[object Uint32Array]",nt={};nt[L7]=nt[U7]=nt[F7]=nt[B7]=nt[q7]=nt[V7]=nt[G7]=nt[H7]=nt[z7]=!0;nt[S7]=nt[N7]=nt[$7]=nt[E7]=nt[D7]=nt[k7]=nt[T7]=nt[C7]=nt[A7]=nt[j7]=nt[P7]=nt[I7]=nt[O7]=nt[R7]=nt[M7]=!1;function W7(t){return _7(t)&&w7(t.length)&&!!nt[b7(t)]}var K7=W7;function J7(t){return function(e){return t(e)}}var zj=J7,yf={exports:{}};yf.exports;(function(t,e){var r=ej,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===n,a=o&&r.process,s=function(){try{var u=i&&i.require&&i.require("util").types;return u||a&&a.binding&&a.binding("util")}catch{}}();t.exports=s})(yf,yf.exports);var Y7=yf.exports,X7=K7,Q7=zj,z_=Y7,W_=z_&&z_.isTypedArray,Z7=W_?Q7(W_):X7,Wj=Z7,eV=n7,tV=gx,rV=wr,nV=Hj,iV=yx,oV=Wj,aV=Object.prototype,sV=aV.hasOwnProperty;function lV(t,e){var r=rV(t),n=!r&&tV(t),i=!r&&!n&&nV(t),o=!r&&!n&&!i&&oV(t),a=r||n||i||o,s=a?eV(t.length,String):[],u=s.length;for(var c in t)(e||sV.call(t,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||iV(c,u)))&&s.push(c);return s}var uV=lV,cV=Object.prototype;function dV(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||cV;return t===r}var fV=dV;function hV(t,e){return function(r){return t(e(r))}}var Kj=hV,pV=Kj,mV=pV(Object.keys,Object),gV=mV,yV=fV,vV=gV,xV=Object.prototype,bV=xV.hasOwnProperty;function wV(t){if(!yV(t))return vV(t);var e=[];for(var r in Object(t))bV.call(t,r)&&r!="constructor"&&e.push(r);return e}var _V=wV,SV=Zv,NV=vx;function EV(t){return t!=null&&NV(t.length)&&!SV(t)}var fc=EV,kV=uV,TV=_V,CV=fc;function AV(t){return CV(t)?kV(t):TV(t)}var ap=AV,jV=Hq,PV=t7,IV=ap;function OV(t){return jV(t,IV,PV)}var RV=OV,K_=RV,MV=1,$V=Object.prototype,DV=$V.hasOwnProperty;function LV(t,e,r,n,i,o){var a=r&MV,s=K_(t),u=s.length,c=K_(e),d=c.length;if(u!=d&&!a)return!1;for(var f=u;f--;){var h=s[f];if(!(a?h in e:DV.call(e,h)))return!1}var g=o.get(t),b=o.get(e);if(g&&b)return g==e&&b==t;var v=!0;o.set(t,e),o.set(e,t);for(var y=a;++f<u;){h=s[f];var x=t[h],_=e[h];if(n)var w=a?n(_,x,h,e,t,o):n(x,_,h,t,e,o);if(!(w===void 0?x===_||i(x,_,r,n,o):w)){v=!1;break}y||(y=h=="constructor")}if(v&&!y){var E=t.constructor,S=e.constructor;E!=S&&"constructor"in t&&"constructor"in e&&!(typeof E=="function"&&E instanceof E&&typeof S=="function"&&S instanceof S)&&(v=!1)}return o.delete(t),o.delete(e),v}var UV=LV,FV=zo,BV=Bn,qV=FV(BV,"DataView"),VV=qV,GV=zo,HV=Bn,zV=GV(HV,"Promise"),WV=zV,KV=zo,JV=Bn,YV=KV(JV,"Set"),Jj=YV,XV=zo,QV=Bn,ZV=XV(QV,"WeakMap"),eG=ZV,wy=VV,_y=tx,Sy=WV,Ny=Jj,Ey=eG,Yj=hi,Us=rj,J_="[object Map]",tG="[object Object]",Y_="[object Promise]",X_="[object Set]",Q_="[object WeakMap]",Z_="[object DataView]",rG=Us(wy),nG=Us(_y),iG=Us(Sy),oG=Us(Ny),aG=Us(Ey),uo=Yj;(wy&&uo(new wy(new ArrayBuffer(1)))!=Z_||_y&&uo(new _y)!=J_||Sy&&uo(Sy.resolve())!=Y_||Ny&&uo(new Ny)!=X_||Ey&&uo(new Ey)!=Q_)&&(uo=function(t){var e=Yj(t),r=e==tG?t.constructor:void 0,n=r?Us(r):"";if(n)switch(n){case rG:return Z_;case nG:return J_;case iG:return Y_;case oG:return X_;case aG:return Q_}return e});var sG=uo,Tm=Lj,lG=qj,uG=Fq,cG=UV,e1=sG,t1=wr,r1=Hj,dG=Wj,fG=1,n1="[object Arguments]",i1="[object Array]",Hc="[object Object]",hG=Object.prototype,o1=hG.hasOwnProperty;function pG(t,e,r,n,i,o){var a=t1(t),s=t1(e),u=a?i1:e1(t),c=s?i1:e1(e);u=u==n1?Hc:u,c=c==n1?Hc:c;var d=u==Hc,f=c==Hc,h=u==c;if(h&&r1(t)){if(!r1(e))return!1;a=!0,d=!1}if(h&&!d)return o||(o=new Tm),a||dG(t)?lG(t,e,r,n,i,o):uG(t,e,u,r,n,i,o);if(!(r&fG)){var g=d&&o1.call(t,"__wrapped__"),b=f&&o1.call(e,"__wrapped__");if(g||b){var v=g?t.value():t,y=b?e.value():e;return o||(o=new Tm),i(v,y,r,n,o)}}return h?(o||(o=new Tm),cG(t,e,r,n,i,o)):!1}var mG=pG,gG=mG,a1=pi;function Xj(t,e,r,n,i){return t===e?!0:t==null||e==null||!a1(t)&&!a1(e)?t!==t&&e!==e:gG(t,e,r,n,Xj,i)}var xx=Xj,yG=Lj,vG=xx,xG=1,bG=2;function wG(t,e,r,n){var i=r.length,o=i,a=!n;if(t==null)return!o;for(t=Object(t);i--;){var s=r[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=r[i];var u=s[0],c=t[u],d=s[1];if(a&&s[2]){if(c===void 0&&!(u in t))return!1}else{var f=new yG;if(n)var h=n(c,d,u,t,e,f);if(!(h===void 0?vG(d,c,xG|bG,n,f):h))return!1}}return!0}var _G=wG,SG=Ji;function NG(t){return t===t&&!SG(t)}var Qj=NG,EG=Qj,kG=ap;function TG(t){for(var e=kG(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,EG(i)]}return e}var CG=TG;function AG(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var Zj=AG,jG=_G,PG=CG,IG=Zj;function OG(t){var e=PG(t);return e.length==1&&e[0][2]?IG(e[0][0],e[0][1]):function(r){return r===t||jG(r,t,e)}}var RG=OG;function MG(t,e){return t!=null&&e in Object(t)}var $G=MG,DG=sj,LG=gx,UG=wr,FG=yx,BG=vx,qG=Hh;function VG(t,e,r){e=DG(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var a=qG(e[n]);if(!(o=t!=null&&r(t,a)))break;t=t[a]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&BG(i)&&FG(a,i)&&(UG(t)||LG(t)))}var GG=VG,HG=$G,zG=GG;function WG(t,e){return t!=null&&zG(t,e,HG)}var KG=WG,JG=xx,YG=lj,XG=KG,QG=Qv,ZG=Qj,eH=Zj,tH=Hh,rH=1,nH=2;function iH(t,e){return QG(t)&&ZG(e)?eH(tH(t),e):function(r){var n=YG(r,t);return n===void 0&&n===e?XG(r,t):JG(e,n,rH|nH)}}var oH=iH;function aH(t){return t}var Fs=aH;function sH(t){return function(e){return e==null?void 0:e[t]}}var lH=sH,uH=ox;function cH(t){return function(e){return uH(e,t)}}var dH=cH,fH=lH,hH=dH,pH=Qv,mH=Hh;function gH(t){return pH(t)?fH(mH(t)):hH(t)}var yH=gH,vH=RG,xH=oH,bH=Fs,wH=wr,_H=yH;function SH(t){return typeof t=="function"?t:t==null?bH:typeof t=="object"?wH(t)?xH(t[0],t[1]):vH(t):_H(t)}var Yi=SH;function NH(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var e2=NH;function EH(t){return t!==t}var kH=EH;function TH(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var CH=TH,AH=e2,jH=kH,PH=CH;function IH(t,e,r){return e===e?PH(t,e,r):AH(t,jH,r)}var OH=IH,RH=OH;function MH(t,e){var r=t==null?0:t.length;return!!r&&RH(t,e,0)>-1}var $H=MH;function DH(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var LH=DH;function UH(){}var FH=UH,Cm=Jj,BH=FH,qH=mx,VH=1/0,GH=Cm&&1/qH(new Cm([,-0]))[1]==VH?function(t){return new Cm(t)}:BH,HH=GH,zH=Uj,WH=$H,KH=LH,JH=Bj,YH=HH,XH=mx,QH=200;function ZH(t,e,r){var n=-1,i=WH,o=t.length,a=!0,s=[],u=s;if(r)a=!1,i=KH;else if(o>=QH){var c=e?null:YH(t);if(c)return XH(c);a=!1,i=JH,u=new zH}else u=e?[]:s;e:for(;++n<o;){var d=t[n],f=e?e(d):d;if(d=r||d!==0?d:0,a&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;e&&u.push(f),s.push(d)}else i(u,f,r)||(u!==s&&u.push(f),s.push(d))}return s}var ez=ZH,tz=Yi,rz=ez;function nz(t,e){return t&&t.length?rz(t,tz(e)):[]}var iz=nz;const s1=Qe(iz);function t2(t,e,r){return e===!0?s1(t,r):$e(e)?s1(t,e):t}function as(t){"@babel/helpers - typeof";return as=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},as(t)}var oz=["ref"];function l1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?l1(Object(r),!0).forEach(function(n){sp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function az(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n2(n.key),n)}}function sz(t,e,r){return e&&u1(t.prototype,e),r&&u1(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function lz(t,e,r){return e=vf(e),uz(t,r2()?Reflect.construct(e,r||[],vf(t).constructor):e.apply(t,r))}function uz(t,e){if(e&&(as(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cz(t)}function cz(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r2(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r2=function(){return!!t})()}function vf(t){return vf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vf(t)}function dz(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ky(t,e)}function ky(t,e){return ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ky(t,e)}function sp(t,e,r){return e=n2(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n2(t){var e=fz(t,"string");return as(e)=="symbol"?e:e+""}function fz(t,e){if(as(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(as(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function hz(t,e){if(t==null)return{};var r=pz(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function pz(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function mz(t){return t.value}function gz(t,e){if(G.isValidElement(t))return G.cloneElement(t,e);if(typeof t=="function")return G.createElement(t,e);e.ref;var r=hz(e,oz);return G.createElement(px,r)}var c1=1,Ba=function(t){function e(){var r;az(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=lz(this,e,[].concat(i)),sp(r,"lastBoundingBox",{width:-1,height:-1}),r}return dz(e,t),sz(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>c1||Math.abs(i.height-this.lastBoundingBox.height)>c1)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?qn({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,o=i.layout,a=i.align,s=i.verticalAlign,u=i.margin,c=i.chartWidth,d=i.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(a==="center"&&o==="vertical"){var g=this.getBBoxSnapshot();f={left:((c||0)-g.width)/2}}else f=a==="right"?{right:u&&u.right||0}:{left:u&&u.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(s==="middle"){var b=this.getBBoxSnapshot();h={top:((d||0)-b.height)/2}}else h=s==="bottom"?{bottom:u&&u.bottom||0}:{top:u&&u.top||0};return qn(qn({},f),h)}},{key:"render",value:function(){var n=this,i=this.props,o=i.content,a=i.width,s=i.height,u=i.wrapperStyle,c=i.payloadUniqBy,d=i.payload,f=qn(qn({position:"absolute",width:a||"auto",height:s||"auto"},this.getDefaultPosition(u)),u);return G.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(g){n.wrapperNode=g}},gz(o,qn(qn({},this.props),{},{payload:t2(d,c,mz)})))}}],[{key:"getWithHeight",value:function(n,i){var o=qn(qn({},this.defaultProps),n.props),a=o.layout;return a==="vertical"&&pe(n.props.height)?{height:n.props.height}:a==="horizontal"?{width:n.props.width||i}:null}}])}(T.PureComponent);sp(Ba,"displayName","Legend");sp(Ba,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var d1=uc,yz=gx,vz=wr,f1=d1?d1.isConcatSpreadable:void 0;function xz(t){return vz(t)||yz(t)||!!(f1&&t&&t[f1])}var bz=xz,wz=Vj,_z=bz;function i2(t,e,r,n,i){var o=-1,a=t.length;for(r||(r=_z),i||(i=[]);++o<a;){var s=t[o];e>0&&r(s)?e>1?i2(s,e-1,r,n,i):wz(i,s):n||(i[i.length]=s)}return i}var o2=i2;function Sz(t){return function(e,r,n){for(var i=-1,o=Object(e),a=n(e),s=a.length;s--;){var u=a[t?s:++i];if(r(o[u],u,o)===!1)break}return e}}var Nz=Sz,Ez=Nz,kz=Ez(),Tz=kz,Cz=Tz,Az=ap;function jz(t,e){return t&&Cz(t,e,Az)}var a2=jz,Pz=fc;function Iz(t,e){return function(r,n){if(r==null)return r;if(!Pz(r))return t(r,n);for(var i=r.length,o=e?i:-1,a=Object(r);(e?o--:++o<i)&&n(a[o],o,a)!==!1;);return r}}var Oz=Iz,Rz=a2,Mz=Oz,$z=Mz(Rz),bx=$z,Dz=bx,Lz=fc;function Uz(t,e){var r=-1,n=Lz(t)?Array(t.length):[];return Dz(t,function(i,o,a){n[++r]=e(i,o,a)}),n}var s2=Uz;function Fz(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var Bz=Fz,h1=Os;function qz(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=h1(t),a=e!==void 0,s=e===null,u=e===e,c=h1(e);if(!s&&!c&&!o&&t>e||o&&a&&u&&!s&&!c||n&&a&&u||!r&&u||!i)return 1;if(!n&&!o&&!c&&t<e||c&&r&&i&&!n&&!o||s&&r&&i||!a&&i||!u)return-1}return 0}var Vz=qz,Gz=Vz;function Hz(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,a=i.length,s=r.length;++n<a;){var u=Gz(i[n],o[n]);if(u){if(n>=s)return u;var c=r[n];return u*(c=="desc"?-1:1)}}return t.index-e.index}var zz=Hz,Am=ix,Wz=ox,Kz=Yi,Jz=s2,Yz=Bz,Xz=zj,Qz=zz,Zz=Fs,eW=wr;function tW(t,e,r){e.length?e=Am(e,function(o){return eW(o)?function(a){return Wz(a,o.length===1?o[0]:o)}:o}):e=[Zz];var n=-1;e=Am(e,Xz(Kz));var i=Jz(t,function(o,a,s){var u=Am(e,function(c){return c(o)});return{criteria:u,index:++n,value:o}});return Yz(i,function(o,a){return Qz(o,a,r)})}var rW=tW;function nW(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var iW=nW,oW=iW,p1=Math.max;function aW(t,e,r){return e=p1(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=p1(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=n[i];return s[e]=r(a),oW(t,this,s)}}var sW=aW;function lW(t){return function(){return t}}var uW=lW,cW=zo,dW=function(){try{var t=cW(Object,"defineProperty");return t({},"",{}),t}catch{}}(),l2=dW,fW=uW,m1=l2,hW=Fs,pW=m1?function(t,e){return m1(t,"toString",{configurable:!0,enumerable:!1,value:fW(e),writable:!0})}:hW,mW=pW,gW=800,yW=16,vW=Date.now;function xW(t){var e=0,r=0;return function(){var n=vW(),i=yW-(n-r);if(r=n,i>0){if(++e>=gW)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var bW=xW,wW=mW,_W=bW,SW=_W(wW),NW=SW,EW=Fs,kW=sW,TW=NW;function CW(t,e){return TW(kW(t,e,EW),t+"")}var AW=CW,jW=ex,PW=fc,IW=yx,OW=Ji;function RW(t,e,r){if(!OW(r))return!1;var n=typeof e;return(n=="number"?PW(r)&&IW(e,r.length):n=="string"&&e in r)?jW(r[e],t):!1}var lp=RW,MW=o2,$W=rW,DW=AW,g1=lp,LW=DW(function(t,e){if(t==null)return[];var r=e.length;return r>1&&g1(t,e[0],e[1])?e=[]:r>2&&g1(e[0],e[1],e[2])&&(e=[e[0]]),$W(t,MW(e,1),[])}),UW=LW;const wx=Qe(UW);function xu(t){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xu(t)}function Ty(){return Ty=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ty.apply(this,arguments)}function FW(t,e){return GW(t)||VW(t,e)||qW(t,e)||BW()}function BW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qW(t,e){if(t){if(typeof t=="string")return y1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y1(t,e)}}function y1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function VW(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(d){c=!0,i=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function GW(t){if(Array.isArray(t))return t}function v1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function jm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?v1(Object(r),!0).forEach(function(n){HW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function HW(t,e,r){return e=zW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zW(t){var e=WW(t,"string");return xu(e)=="symbol"?e:e+""}function WW(t,e){if(xu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KW(t){return Array.isArray(t)&&$t(t[0])&&$t(t[1])?t.join(" ~ "):t}var JW=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,o=i===void 0?{}:i,a=e.itemStyle,s=a===void 0?{}:a,u=e.labelStyle,c=u===void 0?{}:u,d=e.payload,f=e.formatter,h=e.itemSorter,g=e.wrapperClassName,b=e.labelClassName,v=e.label,y=e.labelFormatter,x=e.accessibilityLayer,_=x===void 0?!1:x,w=function(){if(d&&d.length){var L={padding:0,margin:0},M=(h?wx(d,h):d).map(function(O,P){if(O.type==="none")return null;var D=jm({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},s),B=O.formatter||f||KW,U=O.value,W=O.name,K=U,re=W;if(B&&K!=null&&re!=null){var Y=B(U,W,O,P,d);if(Array.isArray(Y)){var ye=FW(Y,2);K=ye[0],re=ye[1]}else K=Y}return G.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:D},$t(re)?G.createElement("span",{className:"recharts-tooltip-item-name"},re):null,$t(re)?G.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,G.createElement("span",{className:"recharts-tooltip-item-value"},K),G.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return G.createElement("ul",{className:"recharts-tooltip-item-list",style:L},M)}return null},E=jm({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),S=jm({margin:0},c),N=!Le(v),k=N?v:"",A=Ge("recharts-default-tooltip",g),C=Ge("recharts-tooltip-label",b);N&&y&&d!==void 0&&d!==null&&(k=y(v,d));var R=_?{role:"status","aria-live":"assertive"}:{};return G.createElement("div",Ty({className:A,style:E},R),G.createElement("p",{className:C,style:S},G.isValidElement(k)?k:"".concat(k)),w())};function bu(t){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bu(t)}function zc(t,e,r){return e=YW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YW(t){var e=XW(t,"string");return bu(e)=="symbol"?e:e+""}function XW(t,e){if(bu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var al="recharts-tooltip-wrapper",QW={visibility:"hidden"};function ZW(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return Ge(al,zc(zc(zc(zc({},"".concat(al,"-right"),pe(r)&&e&&pe(e.x)&&r>=e.x),"".concat(al,"-left"),pe(r)&&e&&pe(e.x)&&r<e.x),"".concat(al,"-bottom"),pe(n)&&e&&pe(e.y)&&n>=e.y),"".concat(al,"-top"),pe(n)&&e&&pe(e.y)&&n<e.y))}function x1(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,o=t.position,a=t.reverseDirection,s=t.tooltipDimension,u=t.viewBox,c=t.viewBoxDimension;if(o&&pe(o[n]))return o[n];var d=r[n]-s-i,f=r[n]+i;if(e[n])return a[n]?d:f;if(a[n]){var h=d,g=u[n];return h<g?Math.max(f,u[n]):Math.max(d,u[n])}var b=f+s,v=u[n]+c;return b>v?Math.max(d,u[n]):Math.max(f,u[n])}function e9(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function t9(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipBox,s=t.useTranslate3d,u=t.viewBox,c,d,f;return a.height>0&&a.width>0&&r?(d=x1({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:u,viewBoxDimension:u.width}),f=x1({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:u,viewBoxDimension:u.height}),c=e9({translateX:d,translateY:f,useTranslate3d:s})):c=QW,{cssProperties:c,cssClasses:ZW({translateX:d,translateY:f,coordinate:r})}}function ss(t){"@babel/helpers - typeof";return ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ss(t)}function b1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function w1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?b1(Object(r),!0).forEach(function(n){Ay(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function r9(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c2(n.key),n)}}function i9(t,e,r){return e&&n9(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function o9(t,e,r){return e=xf(e),a9(t,u2()?Reflect.construct(e,r||[],xf(t).constructor):e.apply(t,r))}function a9(t,e){if(e&&(ss(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s9(t)}function s9(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u2(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u2=function(){return!!t})()}function xf(t){return xf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xf(t)}function l9(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cy(t,e)}function Cy(t,e){return Cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Cy(t,e)}function Ay(t,e,r){return e=c2(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c2(t){var e=u9(t,"string");return ss(e)=="symbol"?e:e+""}function u9(t,e){if(ss(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ss(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _1=1,c9=function(t){function e(){var r;r9(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=o9(this,e,[].concat(i)),Ay(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Ay(r,"handleKeyDown",function(a){if(a.key==="Escape"){var s,u,c,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(u=r.props.coordinate)===null||u===void 0?void 0:u.x)!==null&&s!==void 0?s:0,y:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&c!==void 0?c:0}})}}),r}return l9(e,t),i9(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>_1||Math.abs(n.height-this.state.lastBoundingBox.height)>_1)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,u=i.animationEasing,c=i.children,d=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,g=i.offset,b=i.position,v=i.reverseDirection,y=i.useTranslate3d,x=i.viewBox,_=i.wrapperStyle,w=t9({allowEscapeViewBox:a,coordinate:d,offsetTopLeft:g,position:b,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:x}),E=w.cssClasses,S=w.cssProperties,N=w1(w1({transition:h&&o?"transform ".concat(s,"ms ").concat(u):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&f?"visible":"hidden",position:"absolute",top:0,left:0},_);return G.createElement("div",{tabIndex:-1,className:E,style:N,ref:function(A){n.wrapperNode=A}},c)}}])}(T.PureComponent),d9=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Bs={isSsr:d9()};function ls(t){"@babel/helpers - typeof";return ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ls(t)}function S1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function N1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?S1(Object(r),!0).forEach(function(n){_x(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function f9(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f2(n.key),n)}}function p9(t,e,r){return e&&h9(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function m9(t,e,r){return e=bf(e),g9(t,d2()?Reflect.construct(e,r||[],bf(t).constructor):e.apply(t,r))}function g9(t,e){if(e&&(ls(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y9(t)}function y9(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d2(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d2=function(){return!!t})()}function bf(t){return bf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bf(t)}function v9(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jy(t,e)}function jy(t,e){return jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},jy(t,e)}function _x(t,e,r){return e=f2(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f2(t){var e=x9(t,"string");return ls(e)=="symbol"?e:e+""}function x9(t,e){if(ls(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ls(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function b9(t){return t.dataKey}function w9(t,e){return G.isValidElement(t)?G.cloneElement(t,e):typeof t=="function"?G.createElement(t,e):G.createElement(JW,e)}var Br=function(t){function e(){return f9(this,e),m9(this,e,arguments)}return v9(e,t),p9(e,[{key:"render",value:function(){var n=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,u=i.animationEasing,c=i.content,d=i.coordinate,f=i.filterNull,h=i.isAnimationActive,g=i.offset,b=i.payload,v=i.payloadUniqBy,y=i.position,x=i.reverseDirection,_=i.useTranslate3d,w=i.viewBox,E=i.wrapperStyle,S=b??[];f&&S.length&&(S=t2(b.filter(function(k){return k.value!=null&&(k.hide!==!0||n.props.includeHidden)}),v,b9));var N=S.length>0;return G.createElement(c9,{allowEscapeViewBox:a,animationDuration:s,animationEasing:u,isAnimationActive:h,active:o,coordinate:d,hasPayload:N,offset:g,position:y,reverseDirection:x,useTranslate3d:_,viewBox:w,wrapperStyle:E},w9(c,N1(N1({},this.props),{},{payload:S})))}}])}(T.PureComponent);_x(Br,"displayName","Tooltip");_x(Br,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Bs.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var _9=Bn,S9=function(){return _9.Date.now()},N9=S9,E9=/\s/;function k9(t){for(var e=t.length;e--&&E9.test(t.charAt(e)););return e}var T9=k9,C9=T9,A9=/^\s+/;function j9(t){return t&&t.slice(0,C9(t)+1).replace(A9,"")}var P9=j9,I9=P9,E1=Ji,O9=Os,k1=NaN,R9=/^[-+]0x[0-9a-f]+$/i,M9=/^0b[01]+$/i,$9=/^0o[0-7]+$/i,D9=parseInt;function L9(t){if(typeof t=="number")return t;if(O9(t))return k1;if(E1(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=E1(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=I9(t);var r=M9.test(t);return r||$9.test(t)?D9(t.slice(2),r?2:8):R9.test(t)?k1:+t}var h2=L9,U9=Ji,Pm=N9,T1=h2,F9="Expected a function",B9=Math.max,q9=Math.min;function V9(t,e,r){var n,i,o,a,s,u,c=0,d=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(F9);e=T1(e)||0,U9(r)&&(d=!!r.leading,f="maxWait"in r,o=f?B9(T1(r.maxWait)||0,e):o,h="trailing"in r?!!r.trailing:h);function g(N){var k=n,A=i;return n=i=void 0,c=N,a=t.apply(A,k),a}function b(N){return c=N,s=setTimeout(x,e),d?g(N):a}function v(N){var k=N-u,A=N-c,C=e-k;return f?q9(C,o-A):C}function y(N){var k=N-u,A=N-c;return u===void 0||k>=e||k<0||f&&A>=o}function x(){var N=Pm();if(y(N))return _(N);s=setTimeout(x,v(N))}function _(N){return s=void 0,h&&n?g(N):(n=i=void 0,a)}function w(){s!==void 0&&clearTimeout(s),c=0,n=u=i=s=void 0}function E(){return s===void 0?a:_(Pm())}function S(){var N=Pm(),k=y(N);if(n=arguments,i=this,u=N,k){if(s===void 0)return b(u);if(f)return clearTimeout(s),s=setTimeout(x,e),g(u)}return s===void 0&&(s=setTimeout(x,e)),a}return S.cancel=w,S.flush=E,S}var G9=V9,H9=G9,z9=Ji,W9="Expected a function";function K9(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(W9);return z9(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),H9(t,e,{leading:n,maxWait:e,trailing:i})}var J9=K9;const p2=Qe(J9);function wu(t){"@babel/helpers - typeof";return wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wu(t)}function C1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?C1(Object(r),!0).forEach(function(n){Y9(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Y9(t,e,r){return e=X9(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function X9(t){var e=Q9(t,"string");return wu(e)=="symbol"?e:e+""}function Q9(t,e){if(wu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Z9(t,e){return nK(t)||rK(t,e)||tK(t,e)||eK()}function eK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tK(t,e){if(t){if(typeof t=="string")return A1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A1(t,e)}}function A1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rK(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(d){c=!0,i=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function nK(t){if(Array.isArray(t))return t}var Py=T.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,o=t.width,a=o===void 0?"100%":o,s=t.height,u=s===void 0?"100%":s,c=t.minWidth,d=c===void 0?0:c,f=t.minHeight,h=t.maxHeight,g=t.children,b=t.debounce,v=b===void 0?0:b,y=t.id,x=t.className,_=t.onResize,w=t.style,E=w===void 0?{}:w,S=T.useRef(null),N=T.useRef();N.current=_,T.useImperativeHandle(e,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var k=T.useState({containerWidth:i.width,containerHeight:i.height}),A=Z9(k,2),C=A[0],R=A[1],$=T.useCallback(function(M,O){R(function(P){var D=Math.round(M),B=Math.round(O);return P.containerWidth===D&&P.containerHeight===B?P:{containerWidth:D,containerHeight:B}})},[]);T.useEffect(function(){var M=function(W){var K,re=W[0].contentRect,Y=re.width,ye=re.height;$(Y,ye),(K=N.current)===null||K===void 0||K.call(N,Y,ye)};v>0&&(M=p2(M,v,{trailing:!0,leading:!1}));var O=new ResizeObserver(M),P=S.current.getBoundingClientRect(),D=P.width,B=P.height;return $(D,B),O.observe(S.current),function(){O.disconnect()}},[$,v]);var L=T.useMemo(function(){var M=C.containerWidth,O=C.containerHeight;if(M<0||O<0)return null;ei(xo(a)||xo(u),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,u),ei(!r||r>0,"The aspect(%s) must be greater than zero.",r);var P=xo(a)?M:a,D=xo(u)?O:u;r&&r>0&&(P?D=P/r:D&&(P=D*r),h&&D>h&&(D=h)),ei(P>0||D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,D,a,u,d,f,r);var B=!Array.isArray(g)&&Zn(g.type).endsWith("Chart");return G.Children.map(g,function(U){return G.isValidElement(U)?T.cloneElement(U,Wc({width:P,height:D},B?{style:Wc({height:"100%",width:"100%",maxHeight:D,maxWidth:P},U.props.style)}:{})):U})},[r,g,u,h,f,d,C,a]);return G.createElement("div",{id:y?"".concat(y):void 0,className:Ge("recharts-responsive-container",x),style:Wc(Wc({},E),{},{width:a,height:u,minWidth:d,minHeight:f,maxHeight:h}),ref:S},L)}),m2=function(e){return null};m2.displayName="Cell";function _u(t){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_u(t)}function j1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Iy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j1(Object(r),!0).forEach(function(n){iK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iK(t,e,r){return e=oK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oK(t){var e=aK(t,"string");return _u(e)=="symbol"?e:e+""}function aK(t,e){if(_u(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sa={widthCache:{},cacheCount:0},sK=2e3,lK={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},P1="recharts_measurement_span";function uK(t){var e=Iy({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var Ul=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Bs.isSsr)return{width:0,height:0};var n=uK(r),i=JSON.stringify({text:e,copyStyle:n});if(sa.widthCache[i])return sa.widthCache[i];try{var o=document.getElementById(P1);o||(o=document.createElement("span"),o.setAttribute("id",P1),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=Iy(Iy({},lK),n);Object.assign(o.style,a),o.textContent="".concat(e);var s=o.getBoundingClientRect(),u={width:s.width,height:s.height};return sa.widthCache[i]=u,++sa.cacheCount>sK&&(sa.cacheCount=0,sa.widthCache={}),u}catch{return{width:0,height:0}}},cK=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Su(t){"@babel/helpers - typeof";return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Su(t)}function wf(t,e){return pK(t)||hK(t,e)||fK(t,e)||dK()}function dK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fK(t,e){if(t){if(typeof t=="string")return I1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I1(t,e)}}function I1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function hK(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(d){c=!0,i=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function pK(t){if(Array.isArray(t))return t}function mK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yK(n.key),n)}}function gK(t,e,r){return e&&O1(t.prototype,e),r&&O1(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function yK(t){var e=vK(t,"string");return Su(e)=="symbol"?e:e+""}function vK(t,e){if(Su(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Su(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var R1=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,M1=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,xK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,bK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,g2={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},wK=Object.keys(g2),Ca="NaN";function _K(t,e){return t*g2[e]}var Kc=function(){function t(e,r){mK(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!xK.test(r)&&(this.num=NaN,this.unit=""),wK.includes(r)&&(this.num=_K(e,r),this.unit="px")}return gK(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=bK.exec(r))!==null&&n!==void 0?n:[],o=wf(i,3),a=o[1],s=o[2];return new t(parseFloat(a),s??"")}}])}();function y2(t){if(t.includes(Ca))return Ca;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=R1.exec(e))!==null&&r!==void 0?r:[],i=wf(n,4),o=i[1],a=i[2],s=i[3],u=Kc.parse(o??""),c=Kc.parse(s??""),d=a==="*"?u.multiply(c):u.divide(c);if(d.isNaN())return Ca;e=e.replace(R1,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=M1.exec(e))!==null&&f!==void 0?f:[],g=wf(h,4),b=g[1],v=g[2],y=g[3],x=Kc.parse(b??""),_=Kc.parse(y??""),w=v==="+"?x.add(_):x.subtract(_);if(w.isNaN())return Ca;e=e.replace(M1,w.toString())}return e}var $1=/\(([^()]*)\)/;function SK(t){for(var e=t;e.includes("(");){var r=$1.exec(e),n=wf(r,2),i=n[1];e=e.replace($1,y2(i))}return e}function NK(t){var e=t.replace(/\s+/g,"");return e=SK(e),e=y2(e),e}function EK(t){try{return NK(t)}catch{return Ca}}function Im(t){var e=EK(t.slice(5,-1));return e===Ca?"":e}var kK=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],TK=["dx","dy","angle","className","breakAll"];function Oy(){return Oy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Oy.apply(this,arguments)}function D1(t,e){if(t==null)return{};var r=CK(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function CK(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function L1(t,e){return IK(t)||PK(t,e)||jK(t,e)||AK()}function AK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jK(t,e){if(t){if(typeof t=="string")return U1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U1(t,e)}}function U1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function PK(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(d){c=!0,i=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function IK(t){if(Array.isArray(t))return t}var v2=/[ \f\n\r\t\v\u2028\u2029]+/,x2=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var o=[];Le(r)||(n?o=r.toString().split(""):o=r.toString().split(v2));var a=o.map(function(u){return{word:u,width:Ul(u,i).width}}),s=n?0:Ul("",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}},OK=function(e,r,n,i,o){var a=e.maxLines,s=e.children,u=e.style,c=e.breakAll,d=pe(a),f=s,h=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce(function(D,B){var U=B.word,W=B.width,K=D[D.length-1];if(K&&(i==null||o||K.width+W+n<Number(i)))K.words.push(U),K.width+=W+n;else{var re={words:[U],width:W};D.push(re)}return D},[])},g=h(r),b=function(P){return P.reduce(function(D,B){return D.width>B.width?D:B})};if(!d)return g;for(var v="",y=function(P){var D=f.slice(0,P),B=x2({breakAll:c,style:u,children:D+v}).wordsWithComputedWidth,U=h(B),W=U.length>a||b(U).width>Number(i);return[W,U]},x=0,_=f.length-1,w=0,E;x<=_&&w<=f.length-1;){var S=Math.floor((x+_)/2),N=S-1,k=y(N),A=L1(k,2),C=A[0],R=A[1],$=y(S),L=L1($,1),M=L[0];if(!C&&!M&&(x=S+1),C&&M&&(_=S-1),!C&&M){E=R;break}w++}return E||g},F1=function(e){var r=Le(e)?[]:e.toString().split(v2);return[{words:r}]},RK=function(e){var r=e.width,n=e.scaleToFit,i=e.children,o=e.style,a=e.breakAll,s=e.maxLines;if((r||n)&&!Bs.isSsr){var u,c,d=x2({breakAll:a,children:i,style:o});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;u=f,c=h}else return F1(i);return OK({breakAll:a,children:i,maxLines:s,style:o},u,c,r,n)}return F1(i)},B1="#808080",_f=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,o=i===void 0?0:i,a=e.lineHeight,s=a===void 0?"1em":a,u=e.capHeight,c=u===void 0?"0.71em":u,d=e.scaleToFit,f=d===void 0?!1:d,h=e.textAnchor,g=h===void 0?"start":h,b=e.verticalAnchor,v=b===void 0?"end":b,y=e.fill,x=y===void 0?B1:y,_=D1(e,kK),w=T.useMemo(function(){return RK({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:f,style:_.style,width:_.width})},[_.breakAll,_.children,_.maxLines,f,_.style,_.width]),E=_.dx,S=_.dy,N=_.angle,k=_.className,A=_.breakAll,C=D1(_,TK);if(!$t(n)||!$t(o))return null;var R=n+(pe(E)?E:0),$=o+(pe(S)?S:0),L;switch(v){case"start":L=Im("calc(".concat(c,")"));break;case"middle":L=Im("calc(".concat((w.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:L=Im("calc(".concat(w.length-1," * -").concat(s,")"));break}var M=[];if(f){var O=w[0].width,P=_.width;M.push("scale(".concat((pe(P)?P/O:1)/O,")"))}return N&&M.push("rotate(".concat(N,", ").concat(R,", ").concat($,")")),M.length&&(C.transform=M.join(" ")),G.createElement("text",Oy({},Be(C,!0),{x:R,y:$,className:Ge("recharts-text",k),textAnchor:g,fill:x.includes("url")?B1:x}),w.map(function(D,B){var U=D.words.join(A?"":" ");return G.createElement("tspan",{x:R,dy:B===0?L:s,key:"".concat(U,"-").concat(B)},U)}))};function Bi(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function MK(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Sx(t){let e,r,n;t.length!==2?(e=Bi,r=(s,u)=>Bi(t(s),u),n=(s,u)=>t(s)-u):(e=t===Bi||t===MK?t:$K,r=t,n=t);function i(s,u,c=0,d=s.length){if(c<d){if(e(u,u)!==0)return d;do{const f=c+d>>>1;r(s[f],u)<0?c=f+1:d=f}while(c<d)}return c}function o(s,u,c=0,d=s.length){if(c<d){if(e(u,u)!==0)return d;do{const f=c+d>>>1;r(s[f],u)<=0?c=f+1:d=f}while(c<d)}return c}function a(s,u,c=0,d=s.length){const f=i(s,u,c,d-1);return f>c&&n(s[f-1],u)>-n(s[f],u)?f-1:f}return{left:i,center:a,right:o}}function $K(){return 0}function b2(t){return t===null?NaN:+t}function*DK(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const LK=Sx(Bi),hc=LK.right;Sx(b2).center;class q1 extends Map{constructor(e,r=BK){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(V1(this,e))}has(e){return super.has(V1(this,e))}set(e,r){return super.set(UK(this,e),r)}delete(e){return super.delete(FK(this,e))}}function V1({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function UK({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function FK({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function BK(t){return t!==null&&typeof t=="object"?t.valueOf():t}function qK(t=Bi){if(t===Bi)return w2;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function w2(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const VK=Math.sqrt(50),GK=Math.sqrt(10),HK=Math.sqrt(2);function Sf(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),o=n/Math.pow(10,i),a=o>=VK?10:o>=GK?5:o>=HK?2:1;let s,u,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(t*c),u=Math.round(e*c),s/c<t&&++s,u/c>e&&--u,c=-c):(c=Math.pow(10,i)*a,s=Math.round(t/c),u=Math.round(e/c),s*c<t&&++s,u*c>e&&--u),u<s&&.5<=r&&r<2?Sf(t,e,r*2):[s,u,c]}function Ry(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,o,a]=n?Sf(e,t,r):Sf(t,e,r);if(!(o>=i))return[];const s=o-i+1,u=new Array(s);if(n)if(a<0)for(let c=0;c<s;++c)u[c]=(o-c)/-a;else for(let c=0;c<s;++c)u[c]=(o-c)*a;else if(a<0)for(let c=0;c<s;++c)u[c]=(i+c)/-a;else for(let c=0;c<s;++c)u[c]=(i+c)*a;return u}function My(t,e,r){return e=+e,t=+t,r=+r,Sf(t,e,r)[2]}function $y(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?My(e,t,r):My(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function G1(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function H1(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function _2(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?w2:qK(i);n>r;){if(n-r>600){const u=n-r+1,c=e-r+1,d=Math.log(u),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(u-f)/u)*(c-u/2<0?-1:1),g=Math.max(r,Math.floor(e-c*f/u+h)),b=Math.min(n,Math.floor(e+(u-c)*f/u+h));_2(t,e,g,b,i)}const o=t[e];let a=r,s=n;for(sl(t,r,e),i(t[n],o)>0&&sl(t,r,n);a<s;){for(sl(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}i(t[r],o)===0?sl(t,r,s):(++s,sl(t,s,n)),s<=e&&(r=s+1),e<=s&&(n=s-1)}return t}function sl(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function zK(t,e,r){if(t=Float64Array.from(DK(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return H1(t);if(e>=1)return G1(t);var n,i=(n-1)*e,o=Math.floor(i),a=G1(_2(t,o).subarray(0,o+1)),s=H1(t.subarray(o+1));return a+(s-a)*(i-o)}}function WK(t,e,r=b2){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,o=Math.floor(i),a=+r(t[o],o,t),s=+r(t[o+1],o+1,t);return a+(s-a)*(i-o)}}function KK(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,o=new Array(i);++n<i;)o[n]=t+n*r;return o}function nn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function mi(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Dy=Symbol("implicit");function Nx(){var t=new q1,e=[],r=[],n=Dy;function i(o){let a=t.get(o);if(a===void 0){if(n!==Dy)return n;t.set(o,a=e.push(o)-1)}return r[a%r.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new q1;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(r=Array.from(o),i):r.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Nx(e,r).unknown(n)},nn.apply(i,arguments),i}function Nu(){var t=Nx().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,o,a,s=!1,u=0,c=0,d=.5;delete t.unknown;function f(){var h=e().length,g=i<n,b=g?i:n,v=g?n:i;o=(v-b)/Math.max(1,h-u+c*2),s&&(o=Math.floor(o)),b+=(v-b-o*(h-u))*d,a=o*(1-u),s&&(b=Math.round(b),a=Math.round(a));var y=KK(h).map(function(x){return b+o*x});return r(g?y.reverse():y)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([n,i]=h,n=+n,i=+i,f()):[n,i]},t.rangeRound=function(h){return[n,i]=h,n=+n,i=+i,s=!0,f()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(h){return arguments.length?(s=!!h,f()):s},t.padding=function(h){return arguments.length?(u=Math.min(1,c=+h),f()):u},t.paddingInner=function(h){return arguments.length?(u=Math.min(1,h),f()):u},t.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},t.copy=function(){return Nu(e(),[n,i]).round(s).paddingInner(u).paddingOuter(c).align(d)},nn.apply(f(),arguments)}function S2(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return S2(e())},t}function Fl(){return S2(Nu.apply(null,arguments).paddingInner(1))}function Ex(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function N2(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function pc(){}var Eu=.7,Nf=1/Eu,qa="\\s*([+-]?\\d+)\\s*",ku="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ln="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",JK=/^#([0-9a-f]{3,8})$/,YK=new RegExp(`^rgb\\(${qa},${qa},${qa}\\)$`),XK=new RegExp(`^rgb\\(${Ln},${Ln},${Ln}\\)$`),QK=new RegExp(`^rgba\\(${qa},${qa},${qa},${ku}\\)$`),ZK=new RegExp(`^rgba\\(${Ln},${Ln},${Ln},${ku}\\)$`),eJ=new RegExp(`^hsl\\(${ku},${Ln},${Ln}\\)$`),tJ=new RegExp(`^hsla\\(${ku},${Ln},${Ln},${ku}\\)$`),z1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ex(pc,Tu,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:W1,formatHex:W1,formatHex8:rJ,formatHsl:nJ,formatRgb:K1,toString:K1});function W1(){return this.rgb().formatHex()}function rJ(){return this.rgb().formatHex8()}function nJ(){return E2(this).formatHsl()}function K1(){return this.rgb().formatRgb()}function Tu(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=JK.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?J1(e):r===3?new yr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Jc(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Jc(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=YK.exec(t))?new yr(e[1],e[2],e[3],1):(e=XK.exec(t))?new yr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=QK.exec(t))?Jc(e[1],e[2],e[3],e[4]):(e=ZK.exec(t))?Jc(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=eJ.exec(t))?Q1(e[1],e[2]/100,e[3]/100,1):(e=tJ.exec(t))?Q1(e[1],e[2]/100,e[3]/100,e[4]):z1.hasOwnProperty(t)?J1(z1[t]):t==="transparent"?new yr(NaN,NaN,NaN,0):null}function J1(t){return new yr(t>>16&255,t>>8&255,t&255,1)}function Jc(t,e,r,n){return n<=0&&(t=e=r=NaN),new yr(t,e,r,n)}function iJ(t){return t instanceof pc||(t=Tu(t)),t?(t=t.rgb(),new yr(t.r,t.g,t.b,t.opacity)):new yr}function Ly(t,e,r,n){return arguments.length===1?iJ(t):new yr(t,e,r,n??1)}function yr(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}Ex(yr,Ly,N2(pc,{brighter(t){return t=t==null?Nf:Math.pow(Nf,t),new yr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Eu:Math.pow(Eu,t),new yr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new yr(ko(this.r),ko(this.g),ko(this.b),Ef(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Y1,formatHex:Y1,formatHex8:oJ,formatRgb:X1,toString:X1}));function Y1(){return`#${bo(this.r)}${bo(this.g)}${bo(this.b)}`}function oJ(){return`#${bo(this.r)}${bo(this.g)}${bo(this.b)}${bo((isNaN(this.opacity)?1:this.opacity)*255)}`}function X1(){const t=Ef(this.opacity);return`${t===1?"rgb(":"rgba("}${ko(this.r)}, ${ko(this.g)}, ${ko(this.b)}${t===1?")":`, ${t})`}`}function Ef(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ko(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function bo(t){return t=ko(t),(t<16?"0":"")+t.toString(16)}function Q1(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new vn(t,e,r,n)}function E2(t){if(t instanceof vn)return new vn(t.h,t.s,t.l,t.opacity);if(t instanceof pc||(t=Tu(t)),!t)return new vn;if(t instanceof vn)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),o=Math.max(e,r,n),a=NaN,s=o-i,u=(o+i)/2;return s?(e===o?a=(r-n)/s+(r<n)*6:r===o?a=(n-e)/s+2:a=(e-r)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new vn(a,s,u,t.opacity)}function aJ(t,e,r,n){return arguments.length===1?E2(t):new vn(t,e,r,n??1)}function vn(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}Ex(vn,aJ,N2(pc,{brighter(t){return t=t==null?Nf:Math.pow(Nf,t),new vn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Eu:Math.pow(Eu,t),new vn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new yr(Om(t>=240?t-240:t+120,i,n),Om(t,i,n),Om(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new vn(Z1(this.h),Yc(this.s),Yc(this.l),Ef(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ef(this.opacity);return`${t===1?"hsl(":"hsla("}${Z1(this.h)}, ${Yc(this.s)*100}%, ${Yc(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Z1(t){return t=(t||0)%360,t<0?t+360:t}function Yc(t){return Math.max(0,Math.min(1,t||0))}function Om(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const kx=t=>()=>t;function sJ(t,e){return function(r){return t+r*e}}function lJ(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function uJ(t){return(t=+t)==1?k2:function(e,r){return r-e?lJ(e,r,t):kx(isNaN(e)?r:e)}}function k2(t,e){var r=e-t;return r?sJ(t,r):kx(isNaN(t)?e:t)}const eS=function t(e){var r=uJ(e);function n(i,o){var a=r((i=Ly(i)).r,(o=Ly(o)).r),s=r(i.g,o.g),u=r(i.b,o.b),c=k2(i.opacity,o.opacity);return function(d){return i.r=a(d),i.g=s(d),i.b=u(d),i.opacity=c(d),i+""}}return n.gamma=t,n}(1);function cJ(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(o){for(i=0;i<r;++i)n[i]=t[i]*(1-o)+e[i]*o;return n}}function dJ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fJ(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),o=new Array(r),a;for(a=0;a<n;++a)i[a]=qs(t[a],e[a]);for(;a<r;++a)o[a]=e[a];return function(s){for(a=0;a<n;++a)o[a]=i[a](s);return o}}function hJ(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function kf(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function pJ(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=qs(t[i],e[i]):n[i]=e[i];return function(o){for(i in r)n[i]=r[i](o);return n}}var Uy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rm=new RegExp(Uy.source,"g");function mJ(t){return function(){return t}}function gJ(t){return function(e){return t(e)+""}}function yJ(t,e){var r=Uy.lastIndex=Rm.lastIndex=0,n,i,o,a=-1,s=[],u=[];for(t=t+"",e=e+"";(n=Uy.exec(t))&&(i=Rm.exec(e));)(o=i.index)>r&&(o=e.slice(r,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:kf(n,i)})),r=Rm.lastIndex;return r<e.length&&(o=e.slice(r),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?gJ(u[0].x):mJ(e):(e=u.length,function(c){for(var d=0,f;d<e;++d)s[(f=u[d]).i]=f.x(c);return s.join("")})}function qs(t,e){var r=typeof e,n;return e==null||r==="boolean"?kx(e):(r==="number"?kf:r==="string"?(n=Tu(e))?(e=n,eS):yJ:e instanceof Tu?eS:e instanceof Date?hJ:dJ(e)?cJ:Array.isArray(e)?fJ:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?pJ:kf)(t,e)}function Tx(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function vJ(t,e){e===void 0&&(e=t,t=qs);for(var r=0,n=e.length-1,i=e[0],o=new Array(n<0?0:n);r<n;)o[r]=t(i,i=e[++r]);return function(a){var s=Math.max(0,Math.min(n-1,Math.floor(a*=n)));return o[s](a-s)}}function xJ(t){return function(){return t}}function Tf(t){return+t}var tS=[0,1];function ur(t){return t}function Fy(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:xJ(isNaN(e)?NaN:.5)}function bJ(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function wJ(t,e,r){var n=t[0],i=t[1],o=e[0],a=e[1];return i<n?(n=Fy(i,n),o=r(a,o)):(n=Fy(n,i),o=r(o,a)),function(s){return o(n(s))}}function _J(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),o=new Array(n),a=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<n;)i[a]=Fy(t[a],t[a+1]),o[a]=r(e[a],e[a+1]);return function(s){var u=hc(t,s,1,n)-1;return o[u](i[u](s))}}function mc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function up(){var t=tS,e=tS,r=qs,n,i,o,a=ur,s,u,c;function d(){var h=Math.min(t.length,e.length);return a!==ur&&(a=bJ(t[0],t[h-1])),s=h>2?_J:wJ,u=c=null,f}function f(h){return h==null||isNaN(h=+h)?o:(u||(u=s(t.map(n),e,r)))(n(a(h)))}return f.invert=function(h){return a(i((c||(c=s(e,t.map(n),kf)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Tf),d()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),r=Tx,d()},f.clamp=function(h){return arguments.length?(a=h?!0:ur,d()):a!==ur},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,g){return n=h,i=g,d()}}function Cx(){return up()(ur,ur)}function SJ(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Cf(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function us(t){return t=Cf(Math.abs(t)),t?t[1]:NaN}function NJ(t,e){return function(r,n){for(var i=r.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>n&&(s=Math.max(1,n-u)),o.push(r.substring(i-=s,i+s)),!((u+=s+1)>n));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function EJ(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var kJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Cu(t){if(!(e=kJ.exec(t)))throw new Error("invalid format: "+t);var e;return new Ax({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Cu.prototype=Ax.prototype;function Ax(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ax.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function TJ(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var T2;function CJ(t,e){var r=Cf(t,e);if(!r)return t+"";var n=r[0],i=r[1],o=i-(T2=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=n.length;return o===a?n:o>a?n+new Array(o-a+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+Cf(t,Math.max(0,e+o-1))[0]}function rS(t,e){var r=Cf(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const nS={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:SJ,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>rS(t*100,e),r:rS,s:CJ,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function iS(t){return t}var oS=Array.prototype.map,aS=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function AJ(t){var e=t.grouping===void 0||t.thousands===void 0?iS:NJ(oS.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?iS:EJ(oS.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function c(f){f=Cu(f);var h=f.fill,g=f.align,b=f.sign,v=f.symbol,y=f.zero,x=f.width,_=f.comma,w=f.precision,E=f.trim,S=f.type;S==="n"?(_=!0,S="g"):nS[S]||(w===void 0&&(w=12),E=!0,S="g"),(y||h==="0"&&g==="=")&&(y=!0,h="0",g="=");var N=v==="$"?r:v==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",k=v==="$"?n:/[%p]/.test(S)?a:"",A=nS[S],C=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function R($){var L=N,M=k,O,P,D;if(S==="c")M=A($)+M,$="";else{$=+$;var B=$<0||1/$<0;if($=isNaN($)?u:A(Math.abs($),w),E&&($=TJ($)),B&&+$==0&&b!=="+"&&(B=!1),L=(B?b==="("?b:s:b==="-"||b==="("?"":b)+L,M=(S==="s"?aS[8+T2/3]:"")+M+(B&&b==="("?")":""),C){for(O=-1,P=$.length;++O<P;)if(D=$.charCodeAt(O),48>D||D>57){M=(D===46?i+$.slice(O+1):$.slice(O))+M,$=$.slice(0,O);break}}}_&&!y&&($=e($,1/0));var U=L.length+$.length+M.length,W=U<x?new Array(x-U+1).join(h):"";switch(_&&y&&($=e(W+$,W.length?x-M.length:1/0),W=""),g){case"<":$=L+$+M+W;break;case"=":$=L+W+$+M;break;case"^":$=W.slice(0,U=W.length>>1)+L+$+M+W.slice(U);break;default:$=W+L+$+M;break}return o($)}return R.toString=function(){return f+""},R}function d(f,h){var g=c((f=Cu(f),f.type="f",f)),b=Math.max(-8,Math.min(8,Math.floor(us(h)/3)))*3,v=Math.pow(10,-b),y=aS[8+b/3];return function(x){return g(v*x)+y}}return{format:c,formatPrefix:d}}var Xc,jx,C2;jJ({thousands:",",grouping:[3],currency:["$",""]});function jJ(t){return Xc=AJ(t),jx=Xc.format,C2=Xc.formatPrefix,Xc}function PJ(t){return Math.max(0,-us(Math.abs(t)))}function IJ(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(us(e)/3)))*3-us(Math.abs(t)))}function OJ(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,us(e)-us(t))+1}function A2(t,e,r,n){var i=$y(t,e,r),o;switch(n=Cu(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(o=IJ(i,a))&&(n.precision=o),C2(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=OJ(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=PJ(i))&&(n.precision=o-(n.type==="%")*2);break}}return jx(n)}function Xi(t){var e=t.domain;return t.ticks=function(r){var n=e();return Ry(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return A2(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,o=n.length-1,a=n[i],s=n[o],u,c,d=10;for(s<a&&(c=a,a=s,s=c,c=i,i=o,o=c);d-- >0;){if(c=My(a,s,r),c===u)return n[i]=a,n[o]=s,e(n);if(c>0)a=Math.floor(a/c)*c,s=Math.ceil(s/c)*c;else if(c<0)a=Math.ceil(a*c)/c,s=Math.floor(s*c)/c;else break;u=c}return t},t}function Af(){var t=Cx();return t.copy=function(){return mc(t,Af())},nn.apply(t,arguments),Xi(t)}function j2(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Tf),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return j2(t).unknown(e)},t=arguments.length?Array.from(t,Tf):[0,1],Xi(r)}function P2(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],o=t[n],a;return o<i&&(a=r,r=n,n=a,a=i,i=o,o=a),t[r]=e.floor(i),t[n]=e.ceil(o),t}function sS(t){return Math.log(t)}function lS(t){return Math.exp(t)}function RJ(t){return-Math.log(-t)}function MJ(t){return-Math.exp(-t)}function $J(t){return isFinite(t)?+("1e"+t):t<0?0:t}function DJ(t){return t===10?$J:t===Math.E?Math.exp:e=>Math.pow(t,e)}function LJ(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function uS(t){return(e,r)=>-t(-e,r)}function Px(t){const e=t(sS,lS),r=e.domain;let n=10,i,o;function a(){return i=LJ(n),o=DJ(n),r()[0]<0?(i=uS(i),o=uS(o),t(RJ,MJ)):t(sS,lS),e}return e.base=function(s){return arguments.length?(n=+s,a()):n},e.domain=function(s){return arguments.length?(r(s),a()):r()},e.ticks=s=>{const u=r();let c=u[0],d=u[u.length-1];const f=d<c;f&&([c,d]=[d,c]);let h=i(c),g=i(d),b,v;const y=s==null?10:+s;let x=[];if(!(n%1)&&g-h<y){if(h=Math.floor(h),g=Math.ceil(g),c>0){for(;h<=g;++h)for(b=1;b<n;++b)if(v=h<0?b/o(-h):b*o(h),!(v<c)){if(v>d)break;x.push(v)}}else for(;h<=g;++h)for(b=n-1;b>=1;--b)if(v=h>0?b/o(-h):b*o(h),!(v<c)){if(v>d)break;x.push(v)}x.length*2<y&&(x=Ry(c,d,y))}else x=Ry(h,g,Math.min(g-h,y)).map(o);return f?x.reverse():x},e.tickFormat=(s,u)=>{if(s==null&&(s=10),u==null&&(u=n===10?"s":","),typeof u!="function"&&(!(n%1)&&(u=Cu(u)).precision==null&&(u.trim=!0),u=jx(u)),s===1/0)return u;const c=Math.max(1,n*s/e.ticks().length);return d=>{let f=d/o(Math.round(i(d)));return f*n<n-.5&&(f*=n),f<=c?u(d):""}},e.nice=()=>r(P2(r(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),e}function I2(){const t=Px(up()).domain([1,10]);return t.copy=()=>mc(t,I2()).base(t.base()),nn.apply(t,arguments),t}function cS(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function dS(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Ix(t){var e=1,r=t(cS(e),dS(e));return r.constant=function(n){return arguments.length?t(cS(e=+n),dS(e)):e},Xi(r)}function O2(){var t=Ix(up());return t.copy=function(){return mc(t,O2()).constant(t.constant())},nn.apply(t,arguments)}function fS(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function UJ(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function FJ(t){return t<0?-t*t:t*t}function Ox(t){var e=t(ur,ur),r=1;function n(){return r===1?t(ur,ur):r===.5?t(UJ,FJ):t(fS(r),fS(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},Xi(e)}function Rx(){var t=Ox(up());return t.copy=function(){return mc(t,Rx()).exponent(t.exponent())},nn.apply(t,arguments),t}function BJ(){return Rx.apply(null,arguments).exponent(.5)}function hS(t){return Math.sign(t)*t*t}function qJ(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function R2(){var t=Cx(),e=[0,1],r=!1,n;function i(o){var a=qJ(t(o));return isNaN(a)?n:r?Math.round(a):a}return i.invert=function(o){return t.invert(hS(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,Tf)).map(hS)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(r=!!o,i):r},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return R2(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},nn.apply(i,arguments),Xi(i)}function M2(){var t=[],e=[],r=[],n;function i(){var a=0,s=Math.max(1,e.length);for(r=new Array(s-1);++a<s;)r[a-1]=WK(t,a/s);return o}function o(a){return a==null||isNaN(a=+a)?n:e[hc(r,a)]}return o.invertExtent=function(a){var s=e.indexOf(a);return s<0?[NaN,NaN]:[s>0?r[s-1]:t[0],s<r.length?r[s]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let s of a)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Bi),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(n=a,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return M2().domain(t).range(e).unknown(n)},nn.apply(o,arguments)}function $2(){var t=0,e=1,r=1,n=[.5],i=[0,1],o;function a(u){return u!=null&&u<=u?i[hc(n,u,0,r)]:o}function s(){var u=-1;for(n=new Array(r);++u<r;)n[u]=((u+1)*e-(u-r)*t)/(r+1);return a}return a.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,s()):[t,e]},a.range=function(u){return arguments.length?(r=(i=Array.from(u)).length-1,s()):i.slice()},a.invertExtent=function(u){var c=i.indexOf(u);return c<0?[NaN,NaN]:c<1?[t,n[0]]:c>=r?[n[r-1],e]:[n[c-1],n[c]]},a.unknown=function(u){return arguments.length&&(o=u),a},a.thresholds=function(){return n.slice()},a.copy=function(){return $2().domain([t,e]).range(i).unknown(o)},nn.apply(Xi(a),arguments)}function D2(){var t=[.5],e=[0,1],r,n=1;function i(o){return o!=null&&o<=o?e[hc(t,o,0,n)]:r}return i.domain=function(o){return arguments.length?(t=Array.from(o),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return D2().domain(t).range(e).unknown(r)},nn.apply(i,arguments)}const Mm=new Date,$m=new Date;function Dt(t,e,r,n){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const u=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return u;let c;do u.push(c=new Date(+o)),e(o,s),t(o);while(c<o&&o<a);return u},i.filter=o=>Dt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),r&&(i.count=(o,a)=>(Mm.setTime(+o),$m.setTime(+a),t(Mm),t($m),Math.floor(r(Mm,$m))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(n?a=>n(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const jf=Dt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);jf.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Dt(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):jf);jf.range;const Kn=1e3,Wr=Kn*60,Jn=Wr*60,ai=Jn*24,Mx=ai*7,pS=ai*30,Dm=ai*365,wo=Dt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Kn)},(t,e)=>(e-t)/Kn,t=>t.getUTCSeconds());wo.range;const $x=Dt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Kn)},(t,e)=>{t.setTime(+t+e*Wr)},(t,e)=>(e-t)/Wr,t=>t.getMinutes());$x.range;const Dx=Dt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Wr)},(t,e)=>(e-t)/Wr,t=>t.getUTCMinutes());Dx.range;const Lx=Dt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Kn-t.getMinutes()*Wr)},(t,e)=>{t.setTime(+t+e*Jn)},(t,e)=>(e-t)/Jn,t=>t.getHours());Lx.range;const Ux=Dt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Jn)},(t,e)=>(e-t)/Jn,t=>t.getUTCHours());Ux.range;const gc=Dt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Wr)/ai,t=>t.getDate()-1);gc.range;const cp=Dt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ai,t=>t.getUTCDate()-1);cp.range;const L2=Dt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ai,t=>Math.floor(t/ai));L2.range;function Wo(t){return Dt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Wr)/Mx)}const dp=Wo(0),Pf=Wo(1),VJ=Wo(2),GJ=Wo(3),cs=Wo(4),HJ=Wo(5),zJ=Wo(6);dp.range;Pf.range;VJ.range;GJ.range;cs.range;HJ.range;zJ.range;function Ko(t){return Dt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/Mx)}const fp=Ko(0),If=Ko(1),WJ=Ko(2),KJ=Ko(3),ds=Ko(4),JJ=Ko(5),YJ=Ko(6);fp.range;If.range;WJ.range;KJ.range;ds.range;JJ.range;YJ.range;const Fx=Dt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Fx.range;const Bx=Dt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Bx.range;const si=Dt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());si.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Dt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});si.range;const li=Dt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());li.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Dt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});li.range;function U2(t,e,r,n,i,o){const a=[[wo,1,Kn],[wo,5,5*Kn],[wo,15,15*Kn],[wo,30,30*Kn],[o,1,Wr],[o,5,5*Wr],[o,15,15*Wr],[o,30,30*Wr],[i,1,Jn],[i,3,3*Jn],[i,6,6*Jn],[i,12,12*Jn],[n,1,ai],[n,2,2*ai],[r,1,Mx],[e,1,pS],[e,3,3*pS],[t,1,Dm]];function s(c,d,f){const h=d<c;h&&([c,d]=[d,c]);const g=f&&typeof f.range=="function"?f:u(c,d,f),b=g?g.range(c,+d+1):[];return h?b.reverse():b}function u(c,d,f){const h=Math.abs(d-c)/f,g=Sx(([,,y])=>y).right(a,h);if(g===a.length)return t.every($y(c/Dm,d/Dm,f));if(g===0)return jf.every(Math.max($y(c,d,f),1));const[b,v]=a[h/a[g-1][2]<a[g][2]/h?g-1:g];return b.every(v)}return[s,u]}const[XJ,QJ]=U2(li,Bx,fp,L2,Ux,Dx),[ZJ,eY]=U2(si,Fx,dp,gc,Lx,$x);function Lm(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Um(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ll(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function tY(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=ul(i),d=cl(i),f=ul(o),h=cl(o),g=ul(a),b=cl(a),v=ul(s),y=cl(s),x=ul(u),_=cl(u),w={a:B,A:U,b:W,B:K,c:null,d:bS,e:bS,f:NY,g:RY,G:$Y,H:wY,I:_Y,j:SY,L:F2,m:EY,M:kY,p:re,q:Y,Q:SS,s:NS,S:TY,u:CY,U:AY,V:jY,w:PY,W:IY,x:null,X:null,y:OY,Y:MY,Z:DY,"%":_S},E={a:ye,A:I,b:Z,B:ce,c:null,d:wS,e:wS,f:BY,g:XY,G:ZY,H:LY,I:UY,j:FY,L:q2,m:qY,M:VY,p:ve,q:Ie,Q:SS,s:NS,S:GY,u:HY,U:zY,V:WY,w:KY,W:JY,x:null,X:null,y:YY,Y:QY,Z:eX,"%":_S},S={a:R,A:$,b:L,B:M,c:O,d:vS,e:vS,f:yY,g:yS,G:gS,H:xS,I:xS,j:hY,L:gY,m:fY,M:pY,p:C,q:dY,Q:xY,s:bY,S:mY,u:aY,U:sY,V:lY,w:oY,W:uY,x:P,X:D,y:yS,Y:gS,Z:cY,"%":vY};w.x=N(r,w),w.X=N(n,w),w.c=N(e,w),E.x=N(r,E),E.X=N(n,E),E.c=N(e,E);function N(se,Ne){return function(J){var X=[],ke=-1,Se=0,ee=se.length,fe,te,Re;for(J instanceof Date||(J=new Date(+J));++ke<ee;)se.charCodeAt(ke)===37&&(X.push(se.slice(Se,ke)),(te=mS[fe=se.charAt(++ke)])!=null?fe=se.charAt(++ke):te=fe==="e"?" ":"0",(Re=Ne[fe])&&(fe=Re(J,te)),X.push(fe),Se=ke+1);return X.push(se.slice(Se,ke)),X.join("")}}function k(se,Ne){return function(J){var X=ll(1900,void 0,1),ke=A(X,se,J+="",0),Se,ee;if(ke!=J.length)return null;if("Q"in X)return new Date(X.Q);if("s"in X)return new Date(X.s*1e3+("L"in X?X.L:0));if(Ne&&!("Z"in X)&&(X.Z=0),"p"in X&&(X.H=X.H%12+X.p*12),X.m===void 0&&(X.m="q"in X?X.q:0),"V"in X){if(X.V<1||X.V>53)return null;"w"in X||(X.w=1),"Z"in X?(Se=Um(ll(X.y,0,1)),ee=Se.getUTCDay(),Se=ee>4||ee===0?If.ceil(Se):If(Se),Se=cp.offset(Se,(X.V-1)*7),X.y=Se.getUTCFullYear(),X.m=Se.getUTCMonth(),X.d=Se.getUTCDate()+(X.w+6)%7):(Se=Lm(ll(X.y,0,1)),ee=Se.getDay(),Se=ee>4||ee===0?Pf.ceil(Se):Pf(Se),Se=gc.offset(Se,(X.V-1)*7),X.y=Se.getFullYear(),X.m=Se.getMonth(),X.d=Se.getDate()+(X.w+6)%7)}else("W"in X||"U"in X)&&("w"in X||(X.w="u"in X?X.u%7:"W"in X?1:0),ee="Z"in X?Um(ll(X.y,0,1)).getUTCDay():Lm(ll(X.y,0,1)).getDay(),X.m=0,X.d="W"in X?(X.w+6)%7+X.W*7-(ee+5)%7:X.w+X.U*7-(ee+6)%7);return"Z"in X?(X.H+=X.Z/100|0,X.M+=X.Z%100,Um(X)):Lm(X)}}function A(se,Ne,J,X){for(var ke=0,Se=Ne.length,ee=J.length,fe,te;ke<Se;){if(X>=ee)return-1;if(fe=Ne.charCodeAt(ke++),fe===37){if(fe=Ne.charAt(ke++),te=S[fe in mS?Ne.charAt(ke++):fe],!te||(X=te(se,J,X))<0)return-1}else if(fe!=J.charCodeAt(X++))return-1}return X}function C(se,Ne,J){var X=c.exec(Ne.slice(J));return X?(se.p=d.get(X[0].toLowerCase()),J+X[0].length):-1}function R(se,Ne,J){var X=g.exec(Ne.slice(J));return X?(se.w=b.get(X[0].toLowerCase()),J+X[0].length):-1}function $(se,Ne,J){var X=f.exec(Ne.slice(J));return X?(se.w=h.get(X[0].toLowerCase()),J+X[0].length):-1}function L(se,Ne,J){var X=x.exec(Ne.slice(J));return X?(se.m=_.get(X[0].toLowerCase()),J+X[0].length):-1}function M(se,Ne,J){var X=v.exec(Ne.slice(J));return X?(se.m=y.get(X[0].toLowerCase()),J+X[0].length):-1}function O(se,Ne,J){return A(se,e,Ne,J)}function P(se,Ne,J){return A(se,r,Ne,J)}function D(se,Ne,J){return A(se,n,Ne,J)}function B(se){return a[se.getDay()]}function U(se){return o[se.getDay()]}function W(se){return u[se.getMonth()]}function K(se){return s[se.getMonth()]}function re(se){return i[+(se.getHours()>=12)]}function Y(se){return 1+~~(se.getMonth()/3)}function ye(se){return a[se.getUTCDay()]}function I(se){return o[se.getUTCDay()]}function Z(se){return u[se.getUTCMonth()]}function ce(se){return s[se.getUTCMonth()]}function ve(se){return i[+(se.getUTCHours()>=12)]}function Ie(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var Ne=N(se+="",w);return Ne.toString=function(){return se},Ne},parse:function(se){var Ne=k(se+="",!1);return Ne.toString=function(){return se},Ne},utcFormat:function(se){var Ne=N(se+="",E);return Ne.toString=function(){return se},Ne},utcParse:function(se){var Ne=k(se+="",!0);return Ne.toString=function(){return se},Ne}}}var mS={"-":"",_:" ",0:"0"},Bt=/^\s*\d+/,rY=/^%/,nY=/[\\^$*+?|[\]().{}]/g;function He(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",o=i.length;return n+(o<r?new Array(r-o+1).join(e)+i:i)}function iY(t){return t.replace(nY,"\\$&")}function ul(t){return new RegExp("^(?:"+t.map(iY).join("|")+")","i")}function cl(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function oY(t,e,r){var n=Bt.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function aY(t,e,r){var n=Bt.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function sY(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function lY(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function uY(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function gS(t,e,r){var n=Bt.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function yS(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function cY(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function dY(t,e,r){var n=Bt.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function fY(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function vS(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function hY(t,e,r){var n=Bt.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function xS(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function pY(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function mY(t,e,r){var n=Bt.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function gY(t,e,r){var n=Bt.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function yY(t,e,r){var n=Bt.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function vY(t,e,r){var n=rY.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function xY(t,e,r){var n=Bt.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function bY(t,e,r){var n=Bt.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function bS(t,e){return He(t.getDate(),e,2)}function wY(t,e){return He(t.getHours(),e,2)}function _Y(t,e){return He(t.getHours()%12||12,e,2)}function SY(t,e){return He(1+gc.count(si(t),t),e,3)}function F2(t,e){return He(t.getMilliseconds(),e,3)}function NY(t,e){return F2(t,e)+"000"}function EY(t,e){return He(t.getMonth()+1,e,2)}function kY(t,e){return He(t.getMinutes(),e,2)}function TY(t,e){return He(t.getSeconds(),e,2)}function CY(t){var e=t.getDay();return e===0?7:e}function AY(t,e){return He(dp.count(si(t)-1,t),e,2)}function B2(t){var e=t.getDay();return e>=4||e===0?cs(t):cs.ceil(t)}function jY(t,e){return t=B2(t),He(cs.count(si(t),t)+(si(t).getDay()===4),e,2)}function PY(t){return t.getDay()}function IY(t,e){return He(Pf.count(si(t)-1,t),e,2)}function OY(t,e){return He(t.getFullYear()%100,e,2)}function RY(t,e){return t=B2(t),He(t.getFullYear()%100,e,2)}function MY(t,e){return He(t.getFullYear()%1e4,e,4)}function $Y(t,e){var r=t.getDay();return t=r>=4||r===0?cs(t):cs.ceil(t),He(t.getFullYear()%1e4,e,4)}function DY(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+He(e/60|0,"0",2)+He(e%60,"0",2)}function wS(t,e){return He(t.getUTCDate(),e,2)}function LY(t,e){return He(t.getUTCHours(),e,2)}function UY(t,e){return He(t.getUTCHours()%12||12,e,2)}function FY(t,e){return He(1+cp.count(li(t),t),e,3)}function q2(t,e){return He(t.getUTCMilliseconds(),e,3)}function BY(t,e){return q2(t,e)+"000"}function qY(t,e){return He(t.getUTCMonth()+1,e,2)}function VY(t,e){return He(t.getUTCMinutes(),e,2)}function GY(t,e){return He(t.getUTCSeconds(),e,2)}function HY(t){var e=t.getUTCDay();return e===0?7:e}function zY(t,e){return He(fp.count(li(t)-1,t),e,2)}function V2(t){var e=t.getUTCDay();return e>=4||e===0?ds(t):ds.ceil(t)}function WY(t,e){return t=V2(t),He(ds.count(li(t),t)+(li(t).getUTCDay()===4),e,2)}function KY(t){return t.getUTCDay()}function JY(t,e){return He(If.count(li(t)-1,t),e,2)}function YY(t,e){return He(t.getUTCFullYear()%100,e,2)}function XY(t,e){return t=V2(t),He(t.getUTCFullYear()%100,e,2)}function QY(t,e){return He(t.getUTCFullYear()%1e4,e,4)}function ZY(t,e){var r=t.getUTCDay();return t=r>=4||r===0?ds(t):ds.ceil(t),He(t.getUTCFullYear()%1e4,e,4)}function eX(){return"+0000"}function _S(){return"%"}function SS(t){return+t}function NS(t){return Math.floor(+t/1e3)}var la,G2,H2;tX({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function tX(t){return la=tY(t),G2=la.format,la.parse,H2=la.utcFormat,la.utcParse,la}function rX(t){return new Date(t)}function nX(t){return t instanceof Date?+t:+new Date(+t)}function qx(t,e,r,n,i,o,a,s,u,c){var d=Cx(),f=d.invert,h=d.domain,g=c(".%L"),b=c(":%S"),v=c("%I:%M"),y=c("%I %p"),x=c("%a %d"),_=c("%b %d"),w=c("%B"),E=c("%Y");function S(N){return(u(N)<N?g:s(N)<N?b:a(N)<N?v:o(N)<N?y:n(N)<N?i(N)<N?x:_:r(N)<N?w:E)(N)}return d.invert=function(N){return new Date(f(N))},d.domain=function(N){return arguments.length?h(Array.from(N,nX)):h().map(rX)},d.ticks=function(N){var k=h();return t(k[0],k[k.length-1],N??10)},d.tickFormat=function(N,k){return k==null?S:c(k)},d.nice=function(N){var k=h();return(!N||typeof N.range!="function")&&(N=e(k[0],k[k.length-1],N??10)),N?h(P2(k,N)):d},d.copy=function(){return mc(d,qx(t,e,r,n,i,o,a,s,u,c))},d}function iX(){return nn.apply(qx(ZJ,eY,si,Fx,dp,gc,Lx,$x,wo,G2).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function oX(){return nn.apply(qx(XJ,QJ,li,Bx,fp,cp,Ux,Dx,wo,H2).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function hp(){var t=0,e=1,r,n,i,o,a=ur,s=!1,u;function c(f){return f==null||isNaN(f=+f)?u:a(i===0?.5:(f=(o(f)-r)*i,s?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([t,e]=f,r=o(t=+t),n=o(e=+e),i=r===n?0:1/(n-r),c):[t,e]},c.clamp=function(f){return arguments.length?(s=!!f,c):s},c.interpolator=function(f){return arguments.length?(a=f,c):a};function d(f){return function(h){var g,b;return arguments.length?([g,b]=h,a=f(g,b),c):[a(0),a(1)]}}return c.range=d(qs),c.rangeRound=d(Tx),c.unknown=function(f){return arguments.length?(u=f,c):u},function(f){return o=f,r=f(t),n=f(e),i=r===n?0:1/(n-r),c}}function Qi(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function z2(){var t=Xi(hp()(ur));return t.copy=function(){return Qi(t,z2())},mi.apply(t,arguments)}function W2(){var t=Px(hp()).domain([1,10]);return t.copy=function(){return Qi(t,W2()).base(t.base())},mi.apply(t,arguments)}function K2(){var t=Ix(hp());return t.copy=function(){return Qi(t,K2()).constant(t.constant())},mi.apply(t,arguments)}function Vx(){var t=Ox(hp());return t.copy=function(){return Qi(t,Vx()).exponent(t.exponent())},mi.apply(t,arguments)}function aX(){return Vx.apply(null,arguments).exponent(.5)}function J2(){var t=[],e=ur;function r(n){if(n!=null&&!isNaN(n=+n))return e((hc(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Bi),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,o)=>zK(t,o/n))},r.copy=function(){return J2(e).domain(t)},mi.apply(r,arguments)}function pp(){var t=0,e=.5,r=1,n=1,i,o,a,s,u,c=ur,d,f=!1,h;function g(v){return isNaN(v=+v)?h:(v=.5+((v=+d(v))-o)*(n*v<n*o?s:u),c(f?Math.max(0,Math.min(1,v)):v))}g.domain=function(v){return arguments.length?([t,e,r]=v,i=d(t=+t),o=d(e=+e),a=d(r=+r),s=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),n=o<i?-1:1,g):[t,e,r]},g.clamp=function(v){return arguments.length?(f=!!v,g):f},g.interpolator=function(v){return arguments.length?(c=v,g):c};function b(v){return function(y){var x,_,w;return arguments.length?([x,_,w]=y,c=vJ(v,[x,_,w]),g):[c(0),c(.5),c(1)]}}return g.range=b(qs),g.rangeRound=b(Tx),g.unknown=function(v){return arguments.length?(h=v,g):h},function(v){return d=v,i=v(t),o=v(e),a=v(r),s=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),n=o<i?-1:1,g}}function Y2(){var t=Xi(pp()(ur));return t.copy=function(){return Qi(t,Y2())},mi.apply(t,arguments)}function X2(){var t=Px(pp()).domain([.1,1,10]);return t.copy=function(){return Qi(t,X2()).base(t.base())},mi.apply(t,arguments)}function Q2(){var t=Ix(pp());return t.copy=function(){return Qi(t,Q2()).constant(t.constant())},mi.apply(t,arguments)}function Gx(){var t=Ox(pp());return t.copy=function(){return Qi(t,Gx()).exponent(t.exponent())},mi.apply(t,arguments)}function sX(){return Gx.apply(null,arguments).exponent(.5)}const ES=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Nu,scaleDiverging:Y2,scaleDivergingLog:X2,scaleDivergingPow:Gx,scaleDivergingSqrt:sX,scaleDivergingSymlog:Q2,scaleIdentity:j2,scaleImplicit:Dy,scaleLinear:Af,scaleLog:I2,scaleOrdinal:Nx,scalePoint:Fl,scalePow:Rx,scaleQuantile:M2,scaleQuantize:$2,scaleRadial:R2,scaleSequential:z2,scaleSequentialLog:W2,scaleSequentialPow:Vx,scaleSequentialQuantile:J2,scaleSequentialSqrt:aX,scaleSequentialSymlog:K2,scaleSqrt:BJ,scaleSymlog:O2,scaleThreshold:D2,scaleTime:iX,scaleUtc:oX,tickFormat:A2},Symbol.toStringTag,{value:"Module"}));var lX=Os;function uX(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],a=e(o);if(a!=null&&(s===void 0?a===a&&!lX(a):r(a,s)))var s=a,u=o}return u}var Z2=uX;function cX(t,e){return t>e}var dX=cX,fX=Z2,hX=dX,pX=Fs;function mX(t){return t&&t.length?fX(t,pX,hX):void 0}var gX=mX;const mp=Qe(gX);function yX(t,e){return t<e}var vX=yX,xX=Z2,bX=vX,wX=Fs;function _X(t){return t&&t.length?xX(t,wX,bX):void 0}var SX=_X;const gp=Qe(SX);var NX=ix,EX=Yi,kX=s2,TX=wr;function CX(t,e){var r=TX(t)?NX:kX;return r(t,EX(e))}var AX=CX,jX=o2,PX=AX;function IX(t,e){return jX(PX(t,e),1)}var OX=IX;const RX=Qe(OX);var MX=xx;function $X(t,e){return MX(t,e)}var DX=$X;const yp=Qe(DX);var Vs=1e9,LX={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},zx,lt=!0,en="[DecimalError] ",To=en+"Invalid argument: ",Hx=en+"Exponent out of range: ",Gs=Math.floor,co=Math.pow,UX=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,jr,Lt=1e7,it=7,eP=9007199254740991,Of=Gs(eP/it),we={};we.absoluteValue=we.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};we.comparedTo=we.cmp=function(t){var e,r,n,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(n=o.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return n===i?0:n>i^o.s<0?1:-1};we.decimalPlaces=we.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*it;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};we.dividedBy=we.div=function(t){return ti(this,new this.constructor(t))};we.dividedToIntegerBy=we.idiv=function(t){var e=this,r=e.constructor;return Xe(ti(e,new r(t),0,1),r.precision)};we.equals=we.eq=function(t){return!this.cmp(t)};we.exponent=function(){return At(this)};we.greaterThan=we.gt=function(t){return this.cmp(t)>0};we.greaterThanOrEqualTo=we.gte=function(t){return this.cmp(t)>=0};we.isInteger=we.isint=function(){return this.e>this.d.length-2};we.isNegative=we.isneg=function(){return this.s<0};we.isPositive=we.ispos=function(){return this.s>0};we.isZero=function(){return this.s===0};we.lessThan=we.lt=function(t){return this.cmp(t)<0};we.lessThanOrEqualTo=we.lte=function(t){return this.cmp(t)<1};we.logarithm=we.log=function(t){var e,r=this,n=r.constructor,i=n.precision,o=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(jr))throw Error(en+"NaN");if(r.s<1)throw Error(en+(r.s?"NaN":"-Infinity"));return r.eq(jr)?new n(0):(lt=!1,e=ti(Au(r,o),Au(t,o),o),lt=!0,Xe(e,i))};we.minus=we.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?nP(e,t):tP(e,(t.s=-t.s,t))};we.modulo=we.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(en+"NaN");return r.s?(lt=!1,e=ti(r,t,0,1).times(t),lt=!0,r.minus(e)):Xe(new n(r),i)};we.naturalExponential=we.exp=function(){return rP(this)};we.naturalLogarithm=we.ln=function(){return Au(this)};we.negated=we.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};we.plus=we.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?tP(e,t):nP(e,(t.s=-t.s,t))};we.precision=we.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(To+t);if(e=At(i)+1,n=i.d.length-1,r=n*it+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};we.squareRoot=we.sqrt=function(){var t,e,r,n,i,o,a,s=this,u=s.constructor;if(s.s<1){if(!s.s)return new u(0);throw Error(en+"NaN")}for(t=At(s),lt=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=Rn(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Gs((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new u(e)):n=new u(i.toString()),r=u.precision,i=a=r+3;;)if(o=n,n=o.plus(ti(s,o,a+2)).times(.5),Rn(o.d).slice(0,a)===(e=Rn(n.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(Xe(o,r+1,0),o.times(o).eq(s)){n=o;break}}else if(e!="9999")break;a+=4}return lt=!0,Xe(n,r)};we.times=we.mul=function(t){var e,r,n,i,o,a,s,u,c,d=this,f=d.constructor,h=d.d,g=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,r=d.e+t.e,u=h.length,c=g.length,u<c&&(o=h,h=g,g=o,a=u,u=c,c=a),o=[],a=u+c,n=a;n--;)o.push(0);for(n=c;--n>=0;){for(e=0,i=u+n;i>n;)s=o[i]+g[n]*h[i-n-1]+e,o[i--]=s%Lt|0,e=s/Lt|0;o[i]=(o[i]+e)%Lt|0}for(;!o[--a];)o.pop();return e?++r:o.shift(),t.d=o,t.e=r,lt?Xe(t,f.precision):t};we.toDecimalPlaces=we.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Fn(t,0,Vs),e===void 0?e=n.rounding:Fn(e,0,8),Xe(r,t+At(r)+1,e))};we.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=$o(n,!0):(Fn(t,0,Vs),e===void 0?e=i.rounding:Fn(e,0,8),n=Xe(new i(n),t+1,e),r=$o(n,!0,t+1)),r};we.toFixed=function(t,e){var r,n,i=this,o=i.constructor;return t===void 0?$o(i):(Fn(t,0,Vs),e===void 0?e=o.rounding:Fn(e,0,8),n=Xe(new o(i),t+At(i)+1,e),r=$o(n.abs(),!1,t+At(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};we.toInteger=we.toint=function(){var t=this,e=t.constructor;return Xe(new e(t),At(t)+1,e.rounding)};we.toNumber=function(){return+this};we.toPower=we.pow=function(t){var e,r,n,i,o,a,s=this,u=s.constructor,c=12,d=+(t=new u(t));if(!t.s)return new u(jr);if(s=new u(s),!s.s){if(t.s<1)throw Error(en+"Infinity");return s}if(s.eq(jr))return s;if(n=u.precision,t.eq(jr))return Xe(s,n);if(e=t.e,r=t.d.length-1,a=e>=r,o=s.s,a){if((r=d<0?-d:d)<=eP){for(i=new u(jr),e=Math.ceil(n/it+4),lt=!1;r%2&&(i=i.times(s),TS(i.d,e)),r=Gs(r/2),r!==0;)s=s.times(s),TS(s.d,e);return lt=!0,t.s<0?new u(jr).div(i):Xe(i,n)}}else if(o<0)throw Error(en+"NaN");return o=o<0&&t.d[Math.max(e,r)]&1?-1:1,s.s=1,lt=!1,i=t.times(Au(s,n+c)),lt=!0,i=rP(i),i.s=o,i};we.toPrecision=function(t,e){var r,n,i=this,o=i.constructor;return t===void 0?(r=At(i),n=$o(i,r<=o.toExpNeg||r>=o.toExpPos)):(Fn(t,1,Vs),e===void 0?e=o.rounding:Fn(e,0,8),i=Xe(new o(i),t,e),r=At(i),n=$o(i,t<=r||r<=o.toExpNeg,t)),n};we.toSignificantDigits=we.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Fn(t,1,Vs),e===void 0?e=n.rounding:Fn(e,0,8)),Xe(new n(r),t,e)};we.toString=we.valueOf=we.val=we.toJSON=we[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=At(t),r=t.constructor;return $o(t,e<=r.toExpNeg||e>=r.toExpPos)};function tP(t,e){var r,n,i,o,a,s,u,c,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),lt?Xe(e,f):e;if(u=t.d,c=e.d,a=t.e,i=e.e,u=u.slice(),o=a-i,o){for(o<0?(n=u,o=-o,s=c.length):(n=c,i=a,s=u.length),a=Math.ceil(f/it),s=a>s?a+1:s+1,o>s&&(o=s,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for(s=u.length,o=c.length,s-o<0&&(o=s,n=c,c=u,u=n),r=0;o;)r=(u[--o]=u[o]+c[o]+r)/Lt|0,u[o]%=Lt;for(r&&(u.unshift(r),++i),s=u.length;u[--s]==0;)u.pop();return e.d=u,e.e=i,lt?Xe(e,f):e}function Fn(t,e,r){if(t!==~~t||t<e||t>r)throw Error(To+t)}function Rn(t){var e,r,n,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)n=t[e]+"",r=it-n.length,r&&(o+=Si(r)),o+=n;a=t[e],n=a+"",r=it-n.length,r&&(o+=Si(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var ti=function(){function t(n,i){var o,a=0,s=n.length;for(n=n.slice();s--;)o=n[s]*i+a,n[s]=o%Lt|0,a=o/Lt|0;return a&&n.unshift(a),n}function e(n,i,o,a){var s,u;if(o!=a)u=o>a?1:-1;else for(s=u=0;s<o;s++)if(n[s]!=i[s]){u=n[s]>i[s]?1:-1;break}return u}function r(n,i,o){for(var a=0;o--;)n[o]-=a,a=n[o]<i[o]?1:0,n[o]=a*Lt+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,a){var s,u,c,d,f,h,g,b,v,y,x,_,w,E,S,N,k,A,C=n.constructor,R=n.s==i.s?1:-1,$=n.d,L=i.d;if(!n.s)return new C(n);if(!i.s)throw Error(en+"Division by zero");for(u=n.e-i.e,k=L.length,S=$.length,g=new C(R),b=g.d=[],c=0;L[c]==($[c]||0);)++c;if(L[c]>($[c]||0)&&--u,o==null?_=o=C.precision:a?_=o+(At(n)-At(i))+1:_=o,_<0)return new C(0);if(_=_/it+2|0,c=0,k==1)for(d=0,L=L[0],_++;(c<S||d)&&_--;c++)w=d*Lt+($[c]||0),b[c]=w/L|0,d=w%L|0;else{for(d=Lt/(L[0]+1)|0,d>1&&(L=t(L,d),$=t($,d),k=L.length,S=$.length),E=k,v=$.slice(0,k),y=v.length;y<k;)v[y++]=0;A=L.slice(),A.unshift(0),N=L[0],L[1]>=Lt/2&&++N;do d=0,s=e(L,v,k,y),s<0?(x=v[0],k!=y&&(x=x*Lt+(v[1]||0)),d=x/N|0,d>1?(d>=Lt&&(d=Lt-1),f=t(L,d),h=f.length,y=v.length,s=e(f,v,h,y),s==1&&(d--,r(f,k<h?A:L,h))):(d==0&&(s=d=1),f=L.slice()),h=f.length,h<y&&f.unshift(0),r(v,f,y),s==-1&&(y=v.length,s=e(L,v,k,y),s<1&&(d++,r(v,k<y?A:L,y))),y=v.length):s===0&&(d++,v=[0]),b[c++]=d,s&&v[0]?v[y++]=$[E]||0:(v=[$[E]],y=1);while((E++<S||v[0]!==void 0)&&_--)}return b[0]||b.shift(),g.e=u,Xe(g,a?o+At(g)+1:o)}}();function rP(t,e){var r,n,i,o,a,s,u=0,c=0,d=t.constructor,f=d.precision;if(At(t)>16)throw Error(Hx+At(t));if(!t.s)return new d(jr);for(lt=!1,s=f,a=new d(.03125);t.abs().gte(.1);)t=t.times(a),c+=5;for(n=Math.log(co(2,c))/Math.LN10*2+5|0,s+=n,r=i=o=new d(jr),d.precision=s;;){if(i=Xe(i.times(t),s),r=r.times(++u),a=o.plus(ti(i,r,s)),Rn(a.d).slice(0,s)===Rn(o.d).slice(0,s)){for(;c--;)o=Xe(o.times(o),s);return d.precision=f,e==null?(lt=!0,Xe(o,f)):o}o=a}}function At(t){for(var e=t.e*it,r=t.d[0];r>=10;r/=10)e++;return e}function Fm(t,e,r){if(e>t.LN10.sd())throw lt=!0,r&&(t.precision=r),Error(en+"LN10 precision limit exceeded");return Xe(new t(t.LN10),e)}function Si(t){for(var e="";t--;)e+="0";return e}function Au(t,e){var r,n,i,o,a,s,u,c,d,f=1,h=10,g=t,b=g.d,v=g.constructor,y=v.precision;if(g.s<1)throw Error(en+(g.s?"NaN":"-Infinity"));if(g.eq(jr))return new v(0);if(e==null?(lt=!1,c=y):c=e,g.eq(10))return e==null&&(lt=!0),Fm(v,c);if(c+=h,v.precision=c,r=Rn(b),n=r.charAt(0),o=At(g),Math.abs(o)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(t),r=Rn(g.d),n=r.charAt(0),f++;o=At(g),n>1?(g=new v("0."+r),o++):g=new v(n+"."+r.slice(1))}else return u=Fm(v,c+2,y).times(o+""),g=Au(new v(n+"."+r.slice(1)),c-h).plus(u),v.precision=y,e==null?(lt=!0,Xe(g,y)):g;for(s=a=g=ti(g.minus(jr),g.plus(jr),c),d=Xe(g.times(g),c),i=3;;){if(a=Xe(a.times(d),c),u=s.plus(ti(a,new v(i),c)),Rn(u.d).slice(0,c)===Rn(s.d).slice(0,c))return s=s.times(2),o!==0&&(s=s.plus(Fm(v,c+2,y).times(o+""))),s=ti(s,new v(f),c),v.precision=y,e==null?(lt=!0,Xe(s,y)):s;s=u,i+=2}}function kS(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=Gs(r/it),t.d=[],n=(r+1)%it,r<0&&(n+=it),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=it;n<i;)t.d.push(+e.slice(n,n+=it));e=e.slice(n),n=it-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),lt&&(t.e>Of||t.e<-Of))throw Error(Hx+r)}else t.s=0,t.e=0,t.d=[0];return t}function Xe(t,e,r){var n,i,o,a,s,u,c,d,f=t.d;for(a=1,o=f[0];o>=10;o/=10)a++;if(n=e-a,n<0)n+=it,i=e,c=f[d=0];else{if(d=Math.ceil((n+1)/it),o=f.length,d>=o)return t;for(c=o=f[d],a=1;o>=10;o/=10)a++;n%=it,i=n-it+a}if(r!==void 0&&(o=co(10,a-i-1),s=c/o%10|0,u=e<0||f[d+1]!==void 0||c%o,u=r<4?(s||u)&&(r==0||r==(t.s<0?3:2)):s>5||s==5&&(r==4||u||r==6&&(n>0?i>0?c/co(10,a-i):0:f[d-1])%10&1||r==(t.s<0?8:7))),e<1||!f[0])return u?(o=At(t),f.length=1,e=e-o-1,f[0]=co(10,(it-e%it)%it),t.e=Gs(-e/it)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(n==0?(f.length=d,o=1,d--):(f.length=d+1,o=co(10,it-n),f[d]=i>0?(c/co(10,a-i)%co(10,i)|0)*o:0),u)for(;;)if(d==0){(f[0]+=o)==Lt&&(f[0]=1,++t.e);break}else{if(f[d]+=o,f[d]!=Lt)break;f[d--]=0,o=1}for(n=f.length;f[--n]===0;)f.pop();if(lt&&(t.e>Of||t.e<-Of))throw Error(Hx+At(t));return t}function nP(t,e){var r,n,i,o,a,s,u,c,d,f,h=t.constructor,g=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),lt?Xe(e,g):e;if(u=t.d,f=e.d,n=e.e,c=t.e,u=u.slice(),a=c-n,a){for(d=a<0,d?(r=u,a=-a,s=f.length):(r=f,n=c,s=u.length),i=Math.max(Math.ceil(g/it),s)+2,a>i&&(a=i,r.length=1),r.reverse(),i=a;i--;)r.push(0);r.reverse()}else{for(i=u.length,s=f.length,d=i<s,d&&(s=i),i=0;i<s;i++)if(u[i]!=f[i]){d=u[i]<f[i];break}a=0}for(d&&(r=u,u=f,f=r,e.s=-e.s),s=u.length,i=f.length-s;i>0;--i)u[s++]=0;for(i=f.length;i>a;){if(u[--i]<f[i]){for(o=i;o&&u[--o]===0;)u[o]=Lt-1;--u[o],u[i]+=Lt}u[i]-=f[i]}for(;u[--s]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(e.d=u,e.e=n,lt?Xe(e,g):e):new h(0)}function $o(t,e,r){var n,i=At(t),o=Rn(t.d),a=o.length;return e?(r&&(n=r-a)>0?o=o.charAt(0)+"."+o.slice(1)+Si(n):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+Si(-i-1)+o,r&&(n=r-a)>0&&(o+=Si(n))):i>=a?(o+=Si(i+1-a),r&&(n=r-i-1)>0&&(o=o+"."+Si(n))):((n=i+1)<a&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(o+="."),o+=Si(n))),t.s<0?"-"+o:o}function TS(t,e){if(t.length>e)return t.length=e,!0}function iP(t){var e,r,n;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(To+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return kS(a,o.toString())}else if(typeof o!="string")throw Error(To+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,UX.test(o))kS(a,o);else throw Error(To+o)}if(i.prototype=we,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=iP,i.config=i.set=FX,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function FX(t){if(!t||typeof t!="object")throw Error(en+"Object expected");var e,r,n,i=["precision",1,Vs,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(Gs(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(To+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(To+r+": "+n);return this}var zx=iP(LX);jr=new zx(1);const Ye=zx;function BX(t){return HX(t)||GX(t)||VX(t)||qX()}function qX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VX(t,e){if(t){if(typeof t=="string")return By(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return By(t,e)}}function GX(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function HX(t){if(Array.isArray(t))return By(t)}function By(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var zX=function(e){return e},oP={},aP=function(e){return e===oP},CS=function(e){return function r(){return arguments.length===0||arguments.length===1&&aP(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},WX=function t(e,r){return e===1?r:CS(function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=i.filter(function(s){return s!==oP}).length;return a>=e?r.apply(void 0,i):t(e-a,CS(function(){for(var s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];var d=i.map(function(f){return aP(f)?u.shift():f});return r.apply(void 0,BX(d).concat(u))}))})},vp=function(e){return WX(e.length,e)},qy=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},KX=vp(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),JX=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return zX;var i=r.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce(function(s,u){return u(s)},o.apply(void 0,arguments))}},Vy=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},sP=function(e){var r=null,n=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r&&o.every(function(s,u){return s===r[u]})||(r=o,n=e.apply(void 0,o)),n}};function YX(t){var e;return t===0?e=1:e=Math.floor(new Ye(t).abs().log(10).toNumber())+1,e}function XX(t,e,r){for(var n=new Ye(t),i=0,o=[];n.lt(e)&&i<1e5;)o.push(n.toNumber()),n=n.add(r),i++;return o}var QX=vp(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),ZX=vp(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),eQ=vp(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const xp={rangeStep:XX,getDigitCount:YX,interpolateNumber:QX,uninterpolateNumber:ZX,uninterpolateTruncation:eQ};function Gy(t){return nQ(t)||rQ(t)||lP(t)||tQ()}function tQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rQ(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function nQ(t){if(Array.isArray(t))return Hy(t)}function ju(t,e){return aQ(t)||oQ(t,e)||lP(t,e)||iQ()}function iQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lP(t,e){if(t){if(typeof t=="string")return Hy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hy(t,e)}}function Hy(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function oQ(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,o=void 0;try{for(var a=t[Symbol.iterator](),s;!(n=(s=a.next()).done)&&(r.push(s.value),!(e&&r.length===e));n=!0);}catch(u){i=!0,o=u}finally{try{!n&&a.return!=null&&a.return()}finally{if(i)throw o}}return r}}function aQ(t){if(Array.isArray(t))return t}function uP(t){var e=ju(t,2),r=e[0],n=e[1],i=r,o=n;return r>n&&(i=n,o=r),[i,o]}function cP(t,e,r){if(t.lte(0))return new Ye(0);var n=xp.getDigitCount(t.toNumber()),i=new Ye(10).pow(n),o=t.div(i),a=n!==1?.05:.1,s=new Ye(Math.ceil(o.div(a).toNumber())).add(r).mul(a),u=s.mul(i);return e?u:new Ye(Math.ceil(u))}function sQ(t,e,r){var n=1,i=new Ye(t);if(!i.isint()&&r){var o=Math.abs(t);o<1?(n=new Ye(10).pow(xp.getDigitCount(t)-1),i=new Ye(Math.floor(i.div(n).toNumber())).mul(n)):o>1&&(i=new Ye(Math.floor(t)))}else t===0?i=new Ye(Math.floor((e-1)/2)):r||(i=new Ye(Math.floor(t)));var a=Math.floor((e-1)/2),s=JX(KX(function(u){return i.add(new Ye(u-a).mul(n)).toNumber()}),qy);return s(0,e)}function dP(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Ye(0),tickMin:new Ye(0),tickMax:new Ye(0)};var o=cP(new Ye(e).sub(t).div(r-1),n,i),a;t<=0&&e>=0?a=new Ye(0):(a=new Ye(t).add(e).div(2),a=a.sub(new Ye(a).mod(o)));var s=Math.ceil(a.sub(t).div(o).toNumber()),u=Math.ceil(new Ye(e).sub(a).div(o).toNumber()),c=s+u+1;return c>r?dP(t,e,r,n,i+1):(c<r&&(u=e>0?u+(r-c):u,s=e>0?s:s+(r-c)),{step:o,tickMin:a.sub(new Ye(s).mul(o)),tickMax:a.add(new Ye(u).mul(o))})}function lQ(t){var e=ju(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),s=uP([r,n]),u=ju(s,2),c=u[0],d=u[1];if(c===-1/0||d===1/0){var f=d===1/0?[c].concat(Gy(qy(0,i-1).map(function(){return 1/0}))):[].concat(Gy(qy(0,i-1).map(function(){return-1/0})),[d]);return r>n?Vy(f):f}if(c===d)return sQ(c,i,o);var h=dP(c,d,a,o),g=h.step,b=h.tickMin,v=h.tickMax,y=xp.rangeStep(b,v.add(new Ye(.1).mul(g)),g);return r>n?Vy(y):y}function uQ(t,e){var r=ju(t,2),n=r[0],i=r[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=uP([n,i]),s=ju(a,2),u=s[0],c=s[1];if(u===-1/0||c===1/0)return[n,i];if(u===c)return[u];var d=Math.max(e,2),f=cP(new Ye(c).sub(u).div(d-1),o,0),h=[].concat(Gy(xp.rangeStep(new Ye(u),new Ye(c).sub(new Ye(.99).mul(f)),f)),[c]);return n>i?Vy(h):h}var cQ=sP(lQ),dQ=sP(uQ),fQ="Invariant failed";function Do(t,e){throw new Error(fQ)}var hQ=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function fs(t){"@babel/helpers - typeof";return fs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fs(t)}function Rf(){return Rf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rf.apply(this,arguments)}function pQ(t,e){return vQ(t)||yQ(t,e)||gQ(t,e)||mQ()}function mQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gQ(t,e){if(t){if(typeof t=="string")return AS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AS(t,e)}}function AS(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yQ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(d){c=!0,i=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function vQ(t){if(Array.isArray(t))return t}function xQ(t,e){if(t==null)return{};var r=bQ(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bQ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function wQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pP(n.key),n)}}function SQ(t,e,r){return e&&_Q(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function NQ(t,e,r){return e=Mf(e),EQ(t,fP()?Reflect.construct(e,r||[],Mf(t).constructor):e.apply(t,r))}function EQ(t,e){if(e&&(fs(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kQ(t)}function kQ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fP=function(){return!!t})()}function Mf(t){return Mf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mf(t)}function TQ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zy(t,e)}function zy(t,e){return zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},zy(t,e)}function hP(t,e,r){return e=pP(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pP(t){var e=CQ(t,"string");return fs(e)=="symbol"?e:e+""}function CQ(t,e){if(fs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var yc=function(t){function e(){return wQ(this,e),NQ(this,e,arguments)}return TQ(e,t),SQ(e,[{key:"render",value:function(){var n=this.props,i=n.offset,o=n.layout,a=n.width,s=n.dataKey,u=n.data,c=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=xQ(n,hQ),g=Be(h,!1);this.props.direction==="x"&&d.type!=="number"&&Do();var b=u.map(function(v){var y=c(v,s),x=y.x,_=y.y,w=y.value,E=y.errorVal;if(!E)return null;var S=[],N,k;if(Array.isArray(E)){var A=pQ(E,2);N=A[0],k=A[1]}else N=k=E;if(o==="vertical"){var C=d.scale,R=_+i,$=R+a,L=R-a,M=C(w-N),O=C(w+k);S.push({x1:O,y1:$,x2:O,y2:L}),S.push({x1:M,y1:R,x2:O,y2:R}),S.push({x1:M,y1:$,x2:M,y2:L})}else if(o==="horizontal"){var P=f.scale,D=x+i,B=D-a,U=D+a,W=P(w-N),K=P(w+k);S.push({x1:B,y1:K,x2:U,y2:K}),S.push({x1:D,y1:W,x2:D,y2:K}),S.push({x1:B,y1:W,x2:U,y2:W})}return G.createElement(_t,Rf({className:"recharts-errorBar",key:"bar-".concat(S.map(function(re){return"".concat(re.x1,"-").concat(re.x2,"-").concat(re.y1,"-").concat(re.y2)}))},g),S.map(function(re){return G.createElement("line",Rf({},re,{key:"line-".concat(re.x1,"-").concat(re.x2,"-").concat(re.y1,"-").concat(re.y2)}))}))});return G.createElement(_t,{className:"recharts-errorBars"},b)}}])}(G.Component);hP(yc,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});hP(yc,"displayName","ErrorBar");function Pu(t){"@babel/helpers - typeof";return Pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pu(t)}function jS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function io(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jS(Object(r),!0).forEach(function(n){AQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function AQ(t,e,r){return e=jQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jQ(t){var e=PQ(t,"string");return Pu(e)=="symbol"?e:e+""}function PQ(t,e){if(Pu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mP=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=Tr(r,Ba);if(!a)return null;var s=Ba.defaultProps,u=s!==void 0?io(io({},s),a.props):{},c;return a.props&&a.props.payload?c=a.props&&a.props.payload:o==="children"?c=(n||[]).reduce(function(d,f){var h=f.item,g=f.props,b=g.sectors||g.data||[];return d.concat(b.map(function(v){return{type:a.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):c=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,g=h!==void 0?io(io({},h),f.props):{},b=g.dataKey,v=g.name,y=g.legendType,x=g.hide;return{inactive:x,dataKey:b,type:u.iconType||y||"square",color:Wx(f),value:v||b,payload:g}}),io(io(io({},u),Ba.getWithHeight(a,i)),{},{payload:c,item:a})};function Iu(t){"@babel/helpers - typeof";return Iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iu(t)}function PS(t){return MQ(t)||RQ(t)||OQ(t)||IQ()}function IQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OQ(t,e){if(t){if(typeof t=="string")return Wy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wy(t,e)}}function RQ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function MQ(t){if(Array.isArray(t))return Wy(t)}function Wy(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function IS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IS(Object(r),!0).forEach(function(n){Va(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Va(t,e,r){return e=$Q(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Q(t){var e=DQ(t,"string");return Iu(e)=="symbol"?e:e+""}function DQ(t,e){if(Iu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Iu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rr(t,e,r){return Le(t)||Le(e)?r:$t(e)?Jr(t,e,r):$e(e)?e(t):r}function Bl(t,e,r,n){var i=RX(t,function(s){return Rr(s,e)});if(r==="number"){var o=i.filter(function(s){return pe(s)||parseFloat(s)});return o.length?[gp(o),mp(o)]:[1/0,-1/0]}var a=n?i.filter(function(s){return!Le(s)}):i;return a.map(function(s){return $t(s)||s instanceof Date?s:""})}var LQ=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,s=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(s<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var u=o.range,c=0;c<s;c++){var d=c>0?i[c-1].coordinate:i[s-1].coordinate,f=i[c].coordinate,h=c>=s-1?i[0].coordinate:i[c+1].coordinate,g=void 0;if(xn(f-d)!==xn(h-f)){var b=[];if(xn(h-f)===xn(u[1]-u[0])){g=h;var v=f+u[1]-u[0];b[0]=Math.min(v,(v+d)/2),b[1]=Math.max(v,(v+d)/2)}else{g=d;var y=h+u[1]-u[0];b[0]=Math.min(f,(y+f)/2),b[1]=Math.max(f,(y+f)/2)}var x=[Math.min(f,(g+f)/2),Math.max(f,(g+f)/2)];if(e>x[0]&&e<=x[1]||e>=b[0]&&e<=b[1]){a=i[c].index;break}}else{var _=Math.min(d,h),w=Math.max(d,h);if(e>(_+f)/2&&e<=(w+f)/2){a=i[c].index;break}}}else for(var E=0;E<s;E++)if(E===0&&e<=(n[E].coordinate+n[E+1].coordinate)/2||E>0&&E<s-1&&e>(n[E].coordinate+n[E-1].coordinate)/2&&e<=(n[E].coordinate+n[E+1].coordinate)/2||E===s-1&&e>(n[E].coordinate+n[E-1].coordinate)/2){a=n[E].index;break}return a},Wx=function(e){var r,n=e,i=n.type.displayName,o=(r=e.type)!==null&&r!==void 0&&r.defaultProps?xt(xt({},e.type.defaultProps),e.props):e.props,a=o.stroke,s=o.fill,u;switch(i){case"Line":u=a;break;case"Area":case"Radar":u=a&&a!=="none"?a:s;break;default:u=s;break}return u},UQ=function(e){var r=e.barSize,n=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var a={},s=Object.keys(o),u=0,c=s.length;u<c;u++)for(var d=o[s[u]].stackGroups,f=Object.keys(d),h=0,g=f.length;h<g;h++){var b=d[f[h]],v=b.items,y=b.cateAxisId,x=v.filter(function(k){return Zn(k.type).indexOf("Bar")>=0});if(x&&x.length){var _=x[0].type.defaultProps,w=_!==void 0?xt(xt({},_),x[0].props):x[0].props,E=w.barSize,S=w[y];a[S]||(a[S]=[]);var N=Le(E)?r:E;a[S].push({item:x[0],stackList:x.slice(1),barSize:Le(N)?void 0:Mo(N,n,0)})}}return a},FQ=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,s=e.maxBarSize,u=a.length;if(u<1)return null;var c=Mo(r,i,0,!0),d,f=[];if(a[0].barSize===+a[0].barSize){var h=!1,g=i/u,b=a.reduce(function(E,S){return E+S.barSize||0},0);b+=(u-1)*c,b>=i&&(b-=(u-1)*c,c=0),b>=i&&g>0&&(h=!0,g*=.9,b=u*g);var v=(i-b)/2>>0,y={offset:v-c,size:0};d=a.reduce(function(E,S){var N={item:S.item,position:{offset:y.offset+y.size+c,size:h?g:S.barSize}},k=[].concat(PS(E),[N]);return y=k[k.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(A){k.push({item:A,position:y})}),k},f)}else{var x=Mo(n,i,0,!0);i-2*x-(u-1)*c<=0&&(c=0);var _=(i-2*x-(u-1)*c)/u;_>1&&(_>>=0);var w=s===+s?Math.min(_,s):_;d=a.reduce(function(E,S,N){var k=[].concat(PS(E),[{item:S.item,position:{offset:x+(_+c)*N+(_-w)/2,size:w}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(A){k.push({item:A,position:k[k.length-1].position})}),k},f)}return d},BQ=function(e,r,n,i){var o=n.children,a=n.width,s=n.margin,u=a-(s.left||0)-(s.right||0),c=mP({children:o,legendWidth:u});if(c){var d=i||{},f=d.width,h=d.height,g=c.align,b=c.verticalAlign,v=c.layout;if((v==="vertical"||v==="horizontal"&&b==="middle")&&g!=="center"&&pe(e[g]))return xt(xt({},e),{},Va({},g,e[g]+(f||0)));if((v==="horizontal"||v==="vertical"&&g==="center")&&b!=="middle"&&pe(e[b]))return xt(xt({},e),{},Va({},b,e[b]+(h||0)))}return e},qQ=function(e,r,n){return Le(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},gP=function(e,r,n,i,o){var a=r.props.children,s=Yr(a,yc).filter(function(c){return qQ(i,o,c.props.direction)});if(s&&s.length){var u=s.map(function(c){return c.props.dataKey});return e.reduce(function(c,d){var f=Rr(d,n);if(Le(f))return c;var h=Array.isArray(f)?[gp(f),mp(f)]:[f,f],g=u.reduce(function(b,v){var y=Rr(d,v,0),x=h[0]-Math.abs(Array.isArray(y)?y[0]:y),_=h[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(x,b[0]),Math.max(_,b[1])]},[1/0,-1/0]);return[Math.min(g[0],c[0]),Math.max(g[1],c[1])]},[1/0,-1/0])}return null},VQ=function(e,r,n,i,o){var a=r.map(function(s){return gP(e,s,n,o,i)}).filter(function(s){return!Le(s)});return a&&a.length?a.reduce(function(s,u){return[Math.min(s[0],u[0]),Math.max(s[1],u[1])]},[1/0,-1/0]):null},yP=function(e,r,n,i,o){var a=r.map(function(u){var c=u.props.dataKey;return n==="number"&&c&&gP(e,u,c,i)||Bl(e,c,n,o)});if(n==="number")return a.reduce(function(u,c){return[Math.min(u[0],c[0]),Math.max(u[1],c[1])]},[1/0,-1/0]);var s={};return a.reduce(function(u,c){for(var d=0,f=c.length;d<f;d++)s[c[d]]||(s[c[d]]=!0,u.push(c[d]));return u},[])},vP=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},xP=function(e,r,n,i){if(i)return e.map(function(u){return u.coordinate});var o,a,s=e.map(function(u){return u.coordinate===r&&(o=!0),u.coordinate===n&&(a=!0),u.coordinate});return o||s.push(r),a||s.push(n),s},Yn=function(e,r,n){if(!e)return null;var i=e.scale,o=e.duplicateDomain,a=e.type,s=e.range,u=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,c=(r||n)&&a==="category"&&i.bandwidth?i.bandwidth()/u:0;if(c=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?xn(s[0]-s[1])*2*c:c,r&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var h=o?o.indexOf(f):f;return{coordinate:i(h)+c,value:f,offset:c}});return d.filter(function(f){return!cc(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+c,value:f,index:h,offset:c}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+c,value:f,offset:c}}):i.domain().map(function(f,h){return{coordinate:i(f)+c,value:o?o[f]:f,index:h,offset:c}})},Bm=new WeakMap,Qc=function(e,r){if(typeof r!="function")return e;Bm.has(e)||Bm.set(e,new WeakMap);var n=Bm.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},GQ=function(e,r,n){var i=e.scale,o=e.type,a=e.layout,s=e.axisType;if(i==="auto")return a==="radial"&&s==="radiusAxis"?{scale:Nu(),realScaleType:"band"}:a==="radial"&&s==="angleAxis"?{scale:Af(),realScaleType:"linear"}:o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Fl(),realScaleType:"point"}:o==="category"?{scale:Nu(),realScaleType:"band"}:{scale:Af(),realScaleType:"linear"};if(Ro(i)){var u="scale".concat(rp(i));return{scale:(ES[u]||Fl)(),realScaleType:ES[u]?u:"point"}}return $e(i)?{scale:i}:{scale:Fl(),realScaleType:"point"}},OS=1e-4,HQ=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),o=Math.min(i[0],i[1])-OS,a=Math.max(i[0],i[1])+OS,s=e(r[0]),u=e(r[n-1]);(s<o||s>a||u<o||u>a)&&e.domain([r[0],r[n-1]])}},zQ=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},WQ=function(e,r){if(!r||r.length!==2||!pe(r[0])||!pe(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),o=[e[0],e[1]];return(!pe(e[0])||e[0]<n)&&(o[0]=n),(!pe(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<n&&(o[1]=n),o},KQ=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var o=0,a=0,s=0;s<r;++s){var u=cc(e[s][n][1])?e[s][n][0]:e[s][n][1];u>=0?(e[s][n][0]=o,e[s][n][1]=o+u,o=e[s][n][1]):(e[s][n][0]=a,e[s][n][1]=a+u,a=e[s][n][1])}},JQ=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var o=0,a=0;a<r;++a){var s=cc(e[a][n][1])?e[a][n][0]:e[a][n][1];s>=0?(e[a][n][0]=o,e[a][n][1]=o+s,o=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}},YQ={sign:KQ,expand:d8,none:is,silhouette:f8,wiggle:h8,positive:JQ},XQ=function(e,r,n){var i=r.map(function(s){return s.props.dataKey}),o=YQ[n],a=c8().keys(i).value(function(s,u){return+Rr(s,u,0)}).order(yy).offset(o);return a(e)},QQ=function(e,r,n,i,o,a){if(!e)return null;var s=a?r.reverse():r,u={},c=s.reduce(function(f,h){var g,b=(g=h.type)!==null&&g!==void 0&&g.defaultProps?xt(xt({},h.type.defaultProps),h.props):h.props,v=b.stackId,y=b.hide;if(y)return f;var x=b[n],_=f[x]||{hasStack:!1,stackGroups:{}};if($t(v)){var w=_.stackGroups[v]||{numericAxisId:n,cateAxisId:i,items:[]};w.items.push(h),_.hasStack=!0,_.stackGroups[v]=w}else _.stackGroups[dc("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[h]};return xt(xt({},f),{},Va({},x,_))},u),d={};return Object.keys(c).reduce(function(f,h){var g=c[h];if(g.hasStack){var b={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(v,y){var x=g.stackGroups[y];return xt(xt({},v),{},Va({},y,{numericAxisId:n,cateAxisId:i,items:x.items,stackedData:XQ(e,x.items,o)}))},b)}return xt(xt({},f),{},Va({},h,g))},d)},ZQ=function(e,r){var n=r.realScaleType,i=r.type,o=r.tickCount,a=r.originalDomain,s=r.allowDecimals,u=n||r.scale;if(u!=="auto"&&u!=="linear")return null;if(o&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var c=e.domain();if(!c.length)return null;var d=cQ(c,o,s);return e.domain([gp(d),mp(d)]),{niceTicks:d}}if(o&&i==="number"){var f=e.domain(),h=dQ(f,o,s);return{niceTicks:h}}return null};function RS(t){var e=t.axis,r=t.ticks,n=t.bandSize,i=t.entry,o=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Le(i[e.dataKey])){var s=af(r,"value",i[e.dataKey]);if(s)return s.coordinate+n/2}return r[o]?r[o].coordinate+n/2:null}var u=Rr(i,Le(a)?e.dataKey:a);return Le(u)?null:e.scale(u)}var MS=function(e){var r=e.axis,n=e.ticks,i=e.offset,o=e.bandSize,a=e.entry,s=e.index;if(r.type==="category")return n[s]?n[s].coordinate+i:null;var u=Rr(a,r.dataKey,r.domain[s]);return Le(u)?null:r.scale(u)-o/2+i},eZ=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return i<=0&&o>=0?0:o<0?o:i}return n[0]},tZ=function(e,r){var n,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?xt(xt({},e.type.defaultProps),e.props):e.props,o=i.stackId;if($t(o)){var a=r[o];if(a){var s=a.items.indexOf(e);return s>=0?a.stackedData[s]:null}}return null},rZ=function(e){return e.reduce(function(r,n){return[gp(n.concat([r[0]]).filter(pe)),mp(n.concat([r[1]]).filter(pe))]},[1/0,-1/0])},bP=function(e,r,n){return Object.keys(e).reduce(function(i,o){var a=e[o],s=a.stackedData,u=s.reduce(function(c,d){var f=rZ(d.slice(r,n+1));return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(u[0],i[0]),Math.max(u[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},$S=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,DS=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ky=function(e,r,n){if($e(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(pe(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if($S.test(e[0])){var o=+$S.exec(e[0])[1];i[0]=r[0]-o}else $e(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(pe(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if(DS.test(e[1])){var a=+DS.exec(e[1])[1];i[1]=r[1]+a}else $e(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},$f=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var o=wx(r,function(f){return f.coordinate}),a=1/0,s=1,u=o.length;s<u;s++){var c=o[s],d=o[s-1];a=Math.min((c.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},LS=function(e,r,n){return!e||!e.length||yp(e,Jr(n,"type.defaultProps.domain"))?r:e},wP=function(e,r){var n=e.type.defaultProps?xt(xt({},e.type.defaultProps),e.props):e.props,i=n.dataKey,o=n.name,a=n.unit,s=n.formatter,u=n.tooltipType,c=n.chartType,d=n.hide;return xt(xt({},Be(e,!1)),{},{dataKey:i,unit:a,formatter:s,name:o||i,color:Wx(e),value:Rr(r,i),type:u,payload:r,chartType:c,hide:d})};function Ou(t){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ou(t)}function US(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function FS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?US(Object(r),!0).forEach(function(n){nZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):US(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nZ(t,e,r){return e=iZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iZ(t){var e=oZ(t,"string");return Ou(e)=="symbol"?e:e+""}function oZ(t,e){if(Ou(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Df=Math.PI/180,aZ=function(e){return e*180/Math.PI},Kt=function(e,r,n,i){return{x:e+Math.cos(-Df*i)*n,y:r+Math.sin(-Df*i)*n}},sZ=function(e,r){var n=e.x,i=e.y,o=r.x,a=r.y;return Math.sqrt(Math.pow(n-o,2)+Math.pow(i-a,2))},lZ=function(e,r){var n=e.x,i=e.y,o=r.cx,a=r.cy,s=sZ({x:n,y:i},{x:o,y:a});if(s<=0)return{radius:s};var u=(n-o)/s,c=Math.acos(u);return i>a&&(c=2*Math.PI-c),{radius:s,angle:aZ(c),angleInRadian:c}},uZ=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),o=Math.floor(n/360),a=Math.min(i,o);return{startAngle:r-a*360,endAngle:n-a*360}},cZ=function(e,r){var n=r.startAngle,i=r.endAngle,o=Math.floor(n/360),a=Math.floor(i/360),s=Math.min(o,a);return e+s*360},BS=function(e,r){var n=e.x,i=e.y,o=lZ({x:n,y:i},r),a=o.radius,s=o.angle,u=r.innerRadius,c=r.outerRadius;if(a<u||a>c)return!1;if(a===0)return!0;var d=uZ(r),f=d.startAngle,h=d.endAngle,g=s,b;if(f<=h){for(;g>h;)g-=360;for(;g<f;)g+=360;b=g>=f&&g<=h}else{for(;g>f;)g-=360;for(;g<h;)g+=360;b=g>=h&&g<=f}return b?FS(FS({},r),{},{radius:a,angle:cZ(g,r)}):null};function Ru(t){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ru(t)}var dZ=["offset"];function fZ(t){return gZ(t)||mZ(t)||pZ(t)||hZ()}function hZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pZ(t,e){if(t){if(typeof t=="string")return Jy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jy(t,e)}}function mZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gZ(t){if(Array.isArray(t))return Jy(t)}function Jy(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yZ(t,e){if(t==null)return{};var r=vZ(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vZ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function qS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function It(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qS(Object(r),!0).forEach(function(n){xZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xZ(t,e,r){return e=bZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bZ(t){var e=wZ(t,"string");return Ru(e)=="symbol"?e:e+""}function wZ(t,e){if(Ru(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ru(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mu(){return Mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mu.apply(this,arguments)}var _Z=function(e){var r=e.value,n=e.formatter,i=Le(e.children)?r:e.children;return $e(n)?n(i):i},SZ=function(e,r){var n=xn(r-e),i=Math.min(Math.abs(r-e),360);return n*i},NZ=function(e,r,n){var i=e.position,o=e.viewBox,a=e.offset,s=e.className,u=o,c=u.cx,d=u.cy,f=u.innerRadius,h=u.outerRadius,g=u.startAngle,b=u.endAngle,v=u.clockWise,y=(f+h)/2,x=SZ(g,b),_=x>=0?1:-1,w,E;i==="insideStart"?(w=g+_*a,E=v):i==="insideEnd"?(w=b-_*a,E=!v):i==="end"&&(w=b+_*a,E=v),E=x<=0?E:!E;var S=Kt(c,d,y,w),N=Kt(c,d,y,w+(E?1:-1)*359),k="M".concat(S.x,",").concat(S.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(E?0:1,`,
    `).concat(N.x,",").concat(N.y),A=Le(e.id)?dc("recharts-radial-line-"):e.id;return G.createElement("text",Mu({},n,{dominantBaseline:"central",className:Ge("recharts-radial-bar-label",s)}),G.createElement("defs",null,G.createElement("path",{id:A,d:k})),G.createElement("textPath",{xlinkHref:"#".concat(A)},r))},EZ=function(e){var r=e.viewBox,n=e.offset,i=e.position,o=r,a=o.cx,s=o.cy,u=o.innerRadius,c=o.outerRadius,d=o.startAngle,f=o.endAngle,h=(d+f)/2;if(i==="outside"){var g=Kt(a,s,c+n,h),b=g.x,v=g.y;return{x:b,y:v,textAnchor:b>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var y=(u+c)/2,x=Kt(a,s,y,h),_=x.x,w=x.y;return{x:_,y:w,textAnchor:"middle",verticalAnchor:"middle"}},kZ=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,o=e.position,a=r,s=a.x,u=a.y,c=a.width,d=a.height,f=d>=0?1:-1,h=f*i,g=f>0?"end":"start",b=f>0?"start":"end",v=c>=0?1:-1,y=v*i,x=v>0?"end":"start",_=v>0?"start":"end";if(o==="top"){var w={x:s+c/2,y:u-f*i,textAnchor:"middle",verticalAnchor:g};return It(It({},w),n?{height:Math.max(u-n.y,0),width:c}:{})}if(o==="bottom"){var E={x:s+c/2,y:u+d+h,textAnchor:"middle",verticalAnchor:b};return It(It({},E),n?{height:Math.max(n.y+n.height-(u+d),0),width:c}:{})}if(o==="left"){var S={x:s-y,y:u+d/2,textAnchor:x,verticalAnchor:"middle"};return It(It({},S),n?{width:Math.max(S.x-n.x,0),height:d}:{})}if(o==="right"){var N={x:s+c+y,y:u+d/2,textAnchor:_,verticalAnchor:"middle"};return It(It({},N),n?{width:Math.max(n.x+n.width-N.x,0),height:d}:{})}var k=n?{width:c,height:d}:{};return o==="insideLeft"?It({x:s+y,y:u+d/2,textAnchor:_,verticalAnchor:"middle"},k):o==="insideRight"?It({x:s+c-y,y:u+d/2,textAnchor:x,verticalAnchor:"middle"},k):o==="insideTop"?It({x:s+c/2,y:u+h,textAnchor:"middle",verticalAnchor:b},k):o==="insideBottom"?It({x:s+c/2,y:u+d-h,textAnchor:"middle",verticalAnchor:g},k):o==="insideTopLeft"?It({x:s+y,y:u+h,textAnchor:_,verticalAnchor:b},k):o==="insideTopRight"?It({x:s+c-y,y:u+h,textAnchor:x,verticalAnchor:b},k):o==="insideBottomLeft"?It({x:s+y,y:u+d-h,textAnchor:_,verticalAnchor:g},k):o==="insideBottomRight"?It({x:s+c-y,y:u+d-h,textAnchor:x,verticalAnchor:g},k):Rs(o)&&(pe(o.x)||xo(o.x))&&(pe(o.y)||xo(o.y))?It({x:s+Mo(o.x,c),y:u+Mo(o.y,d),textAnchor:"end",verticalAnchor:"end"},k):It({x:s+c/2,y:u+d/2,textAnchor:"middle",verticalAnchor:"middle"},k)},TZ=function(e){return"cx"in e&&pe(e.cx)};function rr(t){var e=t.offset,r=e===void 0?5:e,n=yZ(t,dZ),i=It({offset:r},n),o=i.viewBox,a=i.position,s=i.value,u=i.children,c=i.content,d=i.className,f=d===void 0?"":d,h=i.textBreakAll;if(!o||Le(s)&&Le(u)&&!T.isValidElement(c)&&!$e(c))return null;if(T.isValidElement(c))return T.cloneElement(c,i);var g;if($e(c)){if(g=T.createElement(c,i),T.isValidElement(g))return g}else g=_Z(i);var b=TZ(o),v=Be(i,!0);if(b&&(a==="insideStart"||a==="insideEnd"||a==="end"))return NZ(i,g,v);var y=b?EZ(i):kZ(i);return G.createElement(_f,Mu({className:Ge("recharts-label",f)},v,y,{breakAll:h}),g)}rr.displayName="Label";var _P=function(e){var r=e.cx,n=e.cy,i=e.angle,o=e.startAngle,a=e.endAngle,s=e.r,u=e.radius,c=e.innerRadius,d=e.outerRadius,f=e.x,h=e.y,g=e.top,b=e.left,v=e.width,y=e.height,x=e.clockWise,_=e.labelViewBox;if(_)return _;if(pe(v)&&pe(y)){if(pe(f)&&pe(h))return{x:f,y:h,width:v,height:y};if(pe(g)&&pe(b))return{x:g,y:b,width:v,height:y}}return pe(f)&&pe(h)?{x:f,y:h,width:0,height:0}:pe(r)&&pe(n)?{cx:r,cy:n,startAngle:o||i||0,endAngle:a||i||0,innerRadius:c||0,outerRadius:d||u||s||0,clockWise:x}:e.viewBox?e.viewBox:{}},CZ=function(e,r){return e?e===!0?G.createElement(rr,{key:"label-implicit",viewBox:r}):$t(e)?G.createElement(rr,{key:"label-implicit",viewBox:r,value:e}):T.isValidElement(e)?e.type===rr?T.cloneElement(e,{key:"label-implicit",viewBox:r}):G.createElement(rr,{key:"label-implicit",content:e,viewBox:r}):$e(e)?G.createElement(rr,{key:"label-implicit",content:e,viewBox:r}):Rs(e)?G.createElement(rr,Mu({viewBox:r},e,{key:"label-implicit"})):null:null},AZ=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,o=_P(e),a=Yr(i,rr).map(function(u,c){return T.cloneElement(u,{viewBox:r||o,key:"label-".concat(c)})});if(!n)return a;var s=CZ(e.label,r||o);return[s].concat(fZ(a))};rr.parseViewBox=_P;rr.renderCallByParent=AZ;function jZ(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var PZ=jZ;const IZ=Qe(PZ);function $u(t){"@babel/helpers - typeof";return $u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$u(t)}var OZ=["valueAccessor"],RZ=["data","dataKey","clockWise","id","textBreakAll"];function MZ(t){return UZ(t)||LZ(t)||DZ(t)||$Z()}function $Z(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DZ(t,e){if(t){if(typeof t=="string")return Yy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yy(t,e)}}function LZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function UZ(t){if(Array.isArray(t))return Yy(t)}function Yy(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lf(){return Lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lf.apply(this,arguments)}function VS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function GS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VS(Object(r),!0).forEach(function(n){FZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function FZ(t,e,r){return e=BZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BZ(t){var e=qZ(t,"string");return $u(e)=="symbol"?e:e+""}function qZ(t,e){if($u(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HS(t,e){if(t==null)return{};var r=VZ(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function VZ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var GZ=function(e){return Array.isArray(e.value)?IZ(e.value):e.value};function qi(t){var e=t.valueAccessor,r=e===void 0?GZ:e,n=HS(t,OZ),i=n.data,o=n.dataKey,a=n.clockWise,s=n.id,u=n.textBreakAll,c=HS(n,RZ);return!i||!i.length?null:G.createElement(_t,{className:"recharts-label-list"},i.map(function(d,f){var h=Le(o)?r(d,f):Rr(d&&d.payload,o),g=Le(s)?{}:{id:"".concat(s,"-").concat(f)};return G.createElement(rr,Lf({},Be(d,!0),c,g,{parentViewBox:d.parentViewBox,value:h,textBreakAll:u,viewBox:rr.parseViewBox(Le(a)?d:GS(GS({},d),{},{clockWise:a})),key:"label-".concat(f),index:f}))}))}qi.displayName="LabelList";function HZ(t,e){return t?t===!0?G.createElement(qi,{key:"labelList-implicit",data:e}):G.isValidElement(t)||$e(t)?G.createElement(qi,{key:"labelList-implicit",data:e,content:t}):Rs(t)?G.createElement(qi,Lf({data:e},t,{key:"labelList-implicit"})):null:null}function zZ(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=Yr(n,qi).map(function(a,s){return T.cloneElement(a,{data:e,key:"labelList-".concat(s)})});if(!r)return i;var o=HZ(t.label,e);return[o].concat(MZ(i))}qi.renderCallByParent=zZ;function Du(t){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Du(t)}function Xy(){return Xy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xy.apply(this,arguments)}function zS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function WS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zS(Object(r),!0).forEach(function(n){WZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function WZ(t,e,r){return e=KZ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KZ(t){var e=JZ(t,"string");return Du(e)=="symbol"?e:e+""}function JZ(t,e){if(Du(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YZ=function(e,r){var n=xn(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},Zc=function(e){var r=e.cx,n=e.cy,i=e.radius,o=e.angle,a=e.sign,s=e.isExternal,u=e.cornerRadius,c=e.cornerIsExternal,d=u*(s?1:-1)+i,f=Math.asin(u/d)/Df,h=c?o:o+a*f,g=Kt(r,n,d,h),b=Kt(r,n,i,h),v=c?o-a*f:o,y=Kt(r,n,d*Math.cos(f*Df),v);return{center:g,circleTangency:b,lineTangency:y,theta:f}},SP=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.startAngle,s=e.endAngle,u=YZ(a,s),c=a+u,d=Kt(r,n,o,a),f=Kt(r,n,o,c),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(a>c),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var g=Kt(r,n,i,a),b=Kt(r,n,i,c);h+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(a<=c),`,
            `).concat(g.x,",").concat(g.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},XZ=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,u=e.cornerIsExternal,c=e.startAngle,d=e.endAngle,f=xn(d-c),h=Zc({cx:r,cy:n,radius:o,angle:c,sign:f,cornerRadius:a,cornerIsExternal:u}),g=h.circleTangency,b=h.lineTangency,v=h.theta,y=Zc({cx:r,cy:n,radius:o,angle:d,sign:-f,cornerRadius:a,cornerIsExternal:u}),x=y.circleTangency,_=y.lineTangency,w=y.theta,E=u?Math.abs(c-d):Math.abs(c-d)-v-w;if(E<0)return s?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):SP({cx:r,cy:n,innerRadius:i,outerRadius:o,startAngle:c,endAngle:d});var S="M ".concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(E>180),",").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(_.x,",").concat(_.y,`
  `);if(i>0){var N=Zc({cx:r,cy:n,radius:i,angle:c,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),k=N.circleTangency,A=N.lineTangency,C=N.theta,R=Zc({cx:r,cy:n,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),$=R.circleTangency,L=R.lineTangency,M=R.theta,O=u?Math.abs(c-d):Math.abs(c-d)-C-M;if(O<0&&a===0)return"".concat(S,"L").concat(r,",").concat(n,"Z");S+="L".concat(L.x,",").concat(L.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat($.x,",").concat($.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(O>180),",").concat(+(f>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,"Z")}else S+="L".concat(r,",").concat(n,"Z");return S},QZ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},NP=function(e){var r=WS(WS({},QZ),e),n=r.cx,i=r.cy,o=r.innerRadius,a=r.outerRadius,s=r.cornerRadius,u=r.forceCornerRadius,c=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(a<o||d===f)return null;var g=Ge("recharts-sector",h),b=a-o,v=Mo(s,b,0,!0),y;return v>0&&Math.abs(d-f)<360?y=XZ({cx:n,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(v,b/2),forceCornerRadius:u,cornerIsExternal:c,startAngle:d,endAngle:f}):y=SP({cx:n,cy:i,innerRadius:o,outerRadius:a,startAngle:d,endAngle:f}),G.createElement("path",Xy({},Be(r,!0),{className:g,d:y,role:"img"}))};function Lu(t){"@babel/helpers - typeof";return Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lu(t)}function Qy(){return Qy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qy.apply(this,arguments)}function KS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function JS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KS(Object(r),!0).forEach(function(n){ZZ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZZ(t,e,r){return e=eee(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eee(t){var e=tee(t,"string");return Lu(e)=="symbol"?e:e+""}function tee(t,e){if(Lu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YS={curveBasisClosed:Z6,curveBasisOpen:e8,curveBasis:Q6,curveBumpX:L6,curveBumpY:U6,curveLinearClosed:t8,curveLinear:ip,curveMonotoneX:r8,curveMonotoneY:n8,curveNatural:i8,curveStep:o8,curveStepAfter:s8,curveStepBefore:a8},ed=function(e){return e.x===+e.x&&e.y===+e.y},dl=function(e){return e.x},fl=function(e){return e.y},ree=function(e,r){if($e(e))return e;var n="curve".concat(rp(e));return(n==="curveMonotone"||n==="curveBump")&&r?YS["".concat(n).concat(r==="vertical"?"Y":"X")]:YS[n]||ip},nee=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,o=i===void 0?[]:i,a=e.baseLine,s=e.layout,u=e.connectNulls,c=u===void 0?!1:u,d=ree(n,s),f=c?o.filter(function(v){return ed(v)}):o,h;if(Array.isArray(a)){var g=c?a.filter(function(v){return ed(v)}):a,b=f.map(function(v,y){return JS(JS({},v),{},{base:g[y]})});return s==="vertical"?h=Gc().y(fl).x1(dl).x0(function(v){return v.base.x}):h=Gc().x(dl).y1(fl).y0(function(v){return v.base.y}),h.defined(ed).curve(d),h(b)}return s==="vertical"&&pe(a)?h=Gc().y(fl).x1(dl).x0(a):pe(a)?h=Gc().x(dl).y1(fl).y0(a):h=Nj().x(dl).y(fl),h.defined(ed).curve(d),h(f)},Zy=function(e){var r=e.className,n=e.points,i=e.path,o=e.pathRef;if((!n||!n.length)&&!i)return null;var a=n&&n.length?nee(e):i;return T.createElement("path",Qy({},Be(e,!1),sf(e),{className:Ge("recharts-curve",r),d:a,ref:o}))},EP={exports:{}},iee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",oee=iee,aee=oee;function kP(){}function TP(){}TP.resetWarningCache=kP;var see=function(){function t(n,i,o,a,s,u){if(u!==aee){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:TP,resetWarningCache:kP};return r.PropTypes=r,r};EP.exports=see();var lee=EP.exports;const We=Qe(lee),{getOwnPropertyNames:uee,getOwnPropertySymbols:cee}=Object,{hasOwnProperty:dee}=Object.prototype;function qm(t,e){return function(n,i,o){return t(n,i,o)&&e(n,i,o)}}function td(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);const{cache:o}=i,a=o.get(r),s=o.get(n);if(a&&s)return a===n&&s===r;o.set(r,n),o.set(n,r);const u=t(r,n,i);return o.delete(r),o.delete(n),u}}function fee(t){return t!=null?t[Symbol.toStringTag]:void 0}function XS(t){return uee(t).concat(cee(t))}const hee=Object.hasOwn||((t,e)=>dee.call(t,e));function Jo(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const pee="__v",mee="__o",gee="_owner",{getOwnPropertyDescriptor:QS,keys:ZS}=Object;function yee(t,e){return t.byteLength===e.byteLength&&Uf(new Uint8Array(t),new Uint8Array(e))}function vee(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function xee(t,e){return t.byteLength===e.byteLength&&Uf(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function bee(t,e){return Jo(t.getTime(),e.getTime())}function wee(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function _ee(t,e){return t===e}function eN(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),o=t.entries();let a,s,u=0;for(;(a=o.next())&&!a.done;){const c=e.entries();let d=!1,f=0;for(;(s=c.next())&&!s.done;){if(i[f]){f++;continue}const h=a.value,g=s.value;if(r.equals(h[0],g[0],u,f,t,e,r)&&r.equals(h[1],g[1],h[0],g[0],t,e,r)){d=i[f]=!0;break}f++}if(!d)return!1;u++}return!0}const See=Jo;function Nee(t,e,r){const n=ZS(t);let i=n.length;if(ZS(e).length!==i)return!1;for(;i-- >0;)if(!CP(t,e,r,n[i]))return!1;return!0}function hl(t,e,r){const n=XS(t);let i=n.length;if(XS(e).length!==i)return!1;let o,a,s;for(;i-- >0;)if(o=n[i],!CP(t,e,r,o)||(a=QS(t,o),s=QS(e,o),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable)))return!1;return!0}function Eee(t,e){return Jo(t.valueOf(),e.valueOf())}function kee(t,e){return t.source===e.source&&t.flags===e.flags}function tN(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),o=t.values();let a,s;for(;(a=o.next())&&!a.done;){const u=e.values();let c=!1,d=0;for(;(s=u.next())&&!s.done;){if(!i[d]&&r.equals(a.value,s.value,a.value,s.value,t,e,r)){c=i[d]=!0;break}d++}if(!c)return!1}return!0}function Uf(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Tee(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function CP(t,e,r,n){return(n===gee||n===mee||n===pee)&&(t.$$typeof||e.$$typeof)?!0:hee(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const Cee="[object ArrayBuffer]",Aee="[object Arguments]",jee="[object Boolean]",Pee="[object DataView]",Iee="[object Date]",Oee="[object Error]",Ree="[object Map]",Mee="[object Number]",$ee="[object Object]",Dee="[object RegExp]",Lee="[object Set]",Uee="[object String]",Fee={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Bee="[object URL]",qee=Object.prototype.toString;function Vee({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:o,areMapsEqual:a,areNumbersEqual:s,areObjectsEqual:u,arePrimitiveWrappersEqual:c,areRegExpsEqual:d,areSetsEqual:f,areTypedArraysEqual:h,areUrlsEqual:g,unknownTagComparators:b}){return function(y,x,_){if(y===x)return!0;if(y==null||x==null)return!1;const w=typeof y;if(w!==typeof x)return!1;if(w!=="object")return w==="number"?s(y,x,_):w==="function"?o(y,x,_):!1;const E=y.constructor;if(E!==x.constructor)return!1;if(E===Object)return u(y,x,_);if(Array.isArray(y))return e(y,x,_);if(E===Date)return n(y,x,_);if(E===RegExp)return d(y,x,_);if(E===Map)return a(y,x,_);if(E===Set)return f(y,x,_);const S=qee.call(y);if(S===Iee)return n(y,x,_);if(S===Dee)return d(y,x,_);if(S===Ree)return a(y,x,_);if(S===Lee)return f(y,x,_);if(S===$ee)return typeof y.then!="function"&&typeof x.then!="function"&&u(y,x,_);if(S===Bee)return g(y,x,_);if(S===Oee)return i(y,x,_);if(S===Aee)return u(y,x,_);if(Fee[S])return h(y,x,_);if(S===Cee)return t(y,x,_);if(S===Pee)return r(y,x,_);if(S===jee||S===Mee||S===Uee)return c(y,x,_);if(b){let N=b[S];if(!N){const k=fee(y);k&&(N=b[k])}if(N)return N(y,x,_)}return!1}}function Gee({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:yee,areArraysEqual:r?hl:vee,areDataViewsEqual:xee,areDatesEqual:bee,areErrorsEqual:wee,areFunctionsEqual:_ee,areMapsEqual:r?qm(eN,hl):eN,areNumbersEqual:See,areObjectsEqual:r?hl:Nee,arePrimitiveWrappersEqual:Eee,areRegExpsEqual:kee,areSetsEqual:r?qm(tN,hl):tN,areTypedArraysEqual:r?qm(Uf,hl):Uf,areUrlsEqual:Tee,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const i=td(n.areArraysEqual),o=td(n.areMapsEqual),a=td(n.areObjectsEqual),s=td(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:s})}return n}function Hee(t){return function(e,r,n,i,o,a,s){return t(e,r,s)}}function zee({circular:t,comparator:e,createState:r,equals:n,strict:i}){if(r)return function(s,u){const{cache:c=t?new WeakMap:void 0,meta:d}=r();return e(s,u,{cache:c,equals:n,meta:d,strict:i})};if(t)return function(s,u){return e(s,u,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const o={cache:void 0,equals:n,meta:void 0,strict:i};return function(s,u){return e(s,u,o)}}const Wee=Zi();Zi({strict:!0});Zi({circular:!0});Zi({circular:!0,strict:!0});Zi({createInternalComparator:()=>Jo});Zi({strict:!0,createInternalComparator:()=>Jo});Zi({circular:!0,createInternalComparator:()=>Jo});Zi({circular:!0,createInternalComparator:()=>Jo,strict:!0});function Zi(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:i=!1}=t,o=Gee(t),a=Vee(o),s=r?r(a):Hee(a);return zee({circular:e,comparator:a,createState:n,equals:s,strict:i})}function Kee(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function rN(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(o){r<0&&(r=o),o-r>e?(t(o),r=-1):Kee(i)};requestAnimationFrame(n)}function e0(t){"@babel/helpers - typeof";return e0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e0(t)}function Jee(t){return Zee(t)||Qee(t)||Xee(t)||Yee()}function Yee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xee(t,e){if(t){if(typeof t=="string")return nN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nN(t,e)}}function nN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Qee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Zee(t){if(Array.isArray(t))return t}function ete(){var t={},e=function(){return null},r=!1,n=function i(o){if(!r){if(Array.isArray(o)){if(!o.length)return;var a=o,s=Jee(a),u=s[0],c=s.slice(1);if(typeof u=="number"){rN(i.bind(null,c),u);return}i(u),rN(i.bind(null,c));return}e0(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){r=!0},start:function(o){r=!1,n(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function Uu(t){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uu(t)}function iN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function oN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iN(Object(r),!0).forEach(function(n){AP(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function AP(t,e,r){return e=tte(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tte(t){var e=rte(t,"string");return Uu(e)==="symbol"?e:String(e)}function rte(t,e){if(Uu(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Uu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nte=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(o){return i.includes(o)})})},ite=function(e){return e},ote=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},ql=function(e,r){return Object.keys(r).reduce(function(n,i){return oN(oN({},n),{},AP({},i,e(i,r[i])))},{})},aN=function(e,r,n){return e.map(function(i){return"".concat(ote(i)," ").concat(r,"ms ").concat(n)}).join(",")};function ate(t,e){return ute(t)||lte(t,e)||jP(t,e)||ste()}function ste(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lte(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(d){c=!0,i=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function ute(t){if(Array.isArray(t))return t}function cte(t){return hte(t)||fte(t)||jP(t)||dte()}function dte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jP(t,e){if(t){if(typeof t=="string")return t0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t0(t,e)}}function fte(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hte(t){if(Array.isArray(t))return t0(t)}function t0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ff=1e-4,PP=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},IP=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},sN=function(e,r){return function(n){var i=PP(e,r);return IP(i,n)}},pte=function(e,r){return function(n){var i=PP(e,r),o=[].concat(cte(i.map(function(a,s){return a*s}).slice(1)),[0]);return IP(o,n)}},lN=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],o=r[1],a=r[2],s=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,o=0,a=1,s=1;break;case"ease":i=.25,o=.1,a=.25,s=1;break;case"ease-in":i=.42,o=0,a=1,s=1;break;case"ease-out":i=.42,o=0,a=.58,s=1;break;case"ease-in-out":i=0,o=0,a=.58,s=1;break;default:{var u=r[0].split("(");if(u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4){var c=u[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),d=ate(c,4);i=d[0],o=d[1],a=d[2],s=d[3]}}}var f=sN(i,a),h=sN(o,s),g=pte(i,a),b=function(x){return x>1?1:x<0?0:x},v=function(x){for(var _=x>1?1:x,w=_,E=0;E<8;++E){var S=f(w)-_,N=g(w);if(Math.abs(S-_)<Ff||N<Ff)return h(w);w=b(w-S/N)}return h(w)};return v.isStepper=!1,v},mte=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,o=i===void 0?8:i,a=e.dt,s=a===void 0?17:a,u=function(d,f,h){var g=-(d-f)*n,b=h*o,v=h+(g-b)*s/1e3,y=h*s/1e3+d;return Math.abs(y-f)<Ff&&Math.abs(v)<Ff?[f,0]:[y,v]};return u.isStepper=!0,u.dt=s,u},gte=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return lN(i);case"spring":return mte();default:if(i.split("(")[0]==="cubic-bezier")return lN(i)}return typeof i=="function"?i:null};function Fu(t){"@babel/helpers - typeof";return Fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fu(t)}function uN(t){return xte(t)||vte(t)||OP(t)||yte()}function yte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vte(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xte(t){if(Array.isArray(t))return n0(t)}function cN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cN(Object(r),!0).forEach(function(n){r0(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function r0(t,e,r){return e=bte(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bte(t){var e=wte(t,"string");return Fu(e)==="symbol"?e:String(e)}function wte(t,e){if(Fu(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _te(t,e){return Ete(t)||Nte(t,e)||OP(t,e)||Ste()}function Ste(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OP(t,e){if(t){if(typeof t=="string")return n0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n0(t,e)}}function n0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Nte(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(d){c=!0,i=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Ete(t){if(Array.isArray(t))return t}var Bf=function(e,r,n){return e+(r-e)*n},i0=function(e){var r=e.from,n=e.to;return r!==n},kte=function t(e,r,n){var i=ql(function(o,a){if(i0(a)){var s=e(a.from,a.to,a.velocity),u=_te(s,2),c=u[0],d=u[1];return zt(zt({},a),{},{from:c,velocity:d})}return a},r);return n<1?ql(function(o,a){return i0(a)?zt(zt({},a),{},{velocity:Bf(a.velocity,i[o].velocity,n),from:Bf(a.from,i[o].from,n)}):a},r):t(e,i,n-1)};const Tte=function(t,e,r,n,i){var o=nte(t,e),a=o.reduce(function(y,x){return zt(zt({},y),{},r0({},x,[t[x],e[x]]))},{}),s=o.reduce(function(y,x){return zt(zt({},y),{},r0({},x,{from:t[x],velocity:0,to:e[x]}))},{}),u=-1,c,d,f=function(){return null},h=function(){return ql(function(x,_){return _.from},s)},g=function(){return!Object.values(s).filter(i0).length},b=function(x){c||(c=x);var _=x-c,w=_/r.dt;s=kte(r,s,w),i(zt(zt(zt({},t),e),h())),c=x,g()||(u=requestAnimationFrame(f))},v=function(x){d||(d=x);var _=(x-d)/n,w=ql(function(S,N){return Bf.apply(void 0,uN(N).concat([r(_)]))},a);if(i(zt(zt(zt({},t),e),w)),_<1)u=requestAnimationFrame(f);else{var E=ql(function(S,N){return Bf.apply(void 0,uN(N).concat([r(1)]))},a);i(zt(zt(zt({},t),e),E))}};return f=r.isStepper?b:v,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(u)}}};function hs(t){"@babel/helpers - typeof";return hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hs(t)}var Cte=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Ate(t,e){if(t==null)return{};var r=jte(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function jte(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Vm(t){return Rte(t)||Ote(t)||Ite(t)||Pte()}function Pte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ite(t,e){if(t){if(typeof t=="string")return o0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o0(t,e)}}function Ote(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Rte(t){if(Array.isArray(t))return o0(t)}function o0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dN(Object(r),!0).forEach(function(n){_l(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _l(t,e,r){return e=RP(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $te(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RP(n.key),n)}}function Dte(t,e,r){return e&&$te(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function RP(t){var e=Lte(t,"string");return hs(e)==="symbol"?e:String(e)}function Lte(t,e){if(hs(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hs(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ute(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a0(t,e)}function a0(t,e){return a0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},a0(t,e)}function Fte(t){var e=Bte();return function(){var n=qf(t),i;if(e){var o=qf(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return s0(this,i)}}function s0(t,e){if(e&&(hs(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l0(t)}function l0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bte(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qf(t){return qf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qf(t)}var ui=function(t){Ute(r,t);var e=Fte(r);function r(n,i){var o;Mte(this,r),o=e.call(this,n,i);var a=o.props,s=a.isActive,u=a.attributeName,c=a.from,d=a.to,f=a.steps,h=a.children,g=a.duration;if(o.handleStyleChange=o.handleStyleChange.bind(l0(o)),o.changeStyle=o.changeStyle.bind(l0(o)),!s||g<=0)return o.state={style:{}},typeof h=="function"&&(o.state={style:d}),s0(o);if(f&&f.length)o.state={style:f[0].style};else if(c){if(typeof h=="function")return o.state={style:c},s0(o);o.state={style:u?_l({},u,c):c}}else o.state={style:{}};return o}return Dte(r,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,a=i.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.isActive,s=o.canBegin,u=o.attributeName,c=o.shouldReAnimate,d=o.to,f=o.from,h=this.state.style;if(s){if(!a){var g={style:u?_l({},u,d):d};this.state&&h&&(u&&h[u]!==d||!u&&h!==d)&&this.setState(g);return}if(!(Wee(i.to,d)&&i.canBegin&&i.isActive)){var b=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=b||c?f:i.to;if(this.state&&h){var y={style:u?_l({},u,v):v};(u&&h[u]!==v||!u&&h!==v)&&this.setState(y)}this.runAnimation(sn(sn({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,a=i.from,s=i.to,u=i.duration,c=i.easing,d=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,g=Tte(a,s,gte(c),u,this.changeStyle),b=function(){o.stopJSAnimation=g()};this.manager.start([h,d,b,u,f])}},{key:"runStepAnimation",value:function(i){var o=this,a=i.steps,s=i.begin,u=i.onAnimationStart,c=a[0],d=c.style,f=c.duration,h=f===void 0?0:f,g=function(v,y,x){if(x===0)return v;var _=y.duration,w=y.easing,E=w===void 0?"ease":w,S=y.style,N=y.properties,k=y.onAnimationEnd,A=x>0?a[x-1]:y,C=N||Object.keys(S);if(typeof E=="function"||E==="spring")return[].concat(Vm(v),[o.runJSAnimation.bind(o,{from:A.style,to:S,duration:_,easing:E}),_]);var R=aN(C,_,E),$=sn(sn(sn({},A.style),S),{},{transition:R});return[].concat(Vm(v),[$,_,k]).filter(ite)};return this.manager.start([u].concat(Vm(a.reduce(g,[d,Math.max(h,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=ete());var o=i.begin,a=i.duration,s=i.attributeName,u=i.to,c=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,g=i.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof c=="function"||typeof g=="function"||c==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var v=s?_l({},s,u):u,y=aN(Object.keys(v),a,c);b.start([d,o,sn(sn({},v),{},{transition:y}),a,f])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var u=Ate(i,Cte),c=T.Children.count(o),d=this.state.style;if(typeof o=="function")return o(d);if(!s||c===0||a<=0)return o;var f=function(g){var b=g.props,v=b.style,y=v===void 0?{}:v,x=b.className,_=T.cloneElement(g,sn(sn({},u),{},{style:sn(sn({},y),d),className:x}));return _};return c===1?f(T.Children.only(o)):G.createElement("div",null,T.Children.map(o,function(h){return f(h)}))}}]),r}(T.PureComponent);ui.displayName="Animate";ui.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ui.propTypes={from:We.oneOfType([We.object,We.string]),to:We.oneOfType([We.object,We.string]),attributeName:We.string,duration:We.number,begin:We.number,easing:We.oneOfType([We.string,We.func]),steps:We.arrayOf(We.shape({duration:We.number.isRequired,style:We.object.isRequired,easing:We.oneOfType([We.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),We.func]),properties:We.arrayOf("string"),onAnimationEnd:We.func})),children:We.oneOfType([We.node,We.func]),isActive:We.bool,canBegin:We.bool,onAnimationEnd:We.func,shouldReAnimate:We.bool,onAnimationStart:We.func,onAnimationReStart:We.func};function Bu(t){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bu(t)}function Vf(){return Vf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vf.apply(this,arguments)}function qte(t,e){return zte(t)||Hte(t,e)||Gte(t,e)||Vte()}function Vte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gte(t,e){if(t){if(typeof t=="string")return fN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fN(t,e)}}function fN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Hte(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(d){c=!0,i=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function zte(t){if(Array.isArray(t))return t}function hN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hN(Object(r),!0).forEach(function(n){Wte(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wte(t,e,r){return e=Kte(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kte(t){var e=Jte(t,"string");return Bu(e)=="symbol"?e:e+""}function Jte(t,e){if(Bu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mN=function(e,r,n,i,o){var a=Math.min(Math.abs(n)/2,Math.abs(i)/2),s=i>=0?1:-1,u=n>=0?1:-1,c=i>=0&&n>=0||i<0&&n<0?1:0,d;if(a>0&&o instanceof Array){for(var f=[0,0,0,0],h=0,g=4;h<g;h++)f[h]=o[h]>a?a:o[h];d="M".concat(e,",").concat(r+s*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(c,",").concat(e+u*f[0],",").concat(r)),d+="L ".concat(e+n-u*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(c,`,
        `).concat(e+n,",").concat(r+s*f[1])),d+="L ".concat(e+n,",").concat(r+i-s*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(c,`,
        `).concat(e+n-u*f[2],",").concat(r+i)),d+="L ".concat(e+u*f[3],",").concat(r+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(r+i-s*f[3])),d+="Z"}else if(a>0&&o===+o&&o>0){var b=Math.min(a,o);d="M ".concat(e,",").concat(r+s*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(c,",").concat(e+u*b,",").concat(r,`
            L `).concat(e+n-u*b,",").concat(r,`
            A `).concat(b,",").concat(b,",0,0,").concat(c,",").concat(e+n,",").concat(r+s*b,`
            L `).concat(e+n,",").concat(r+i-s*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(c,",").concat(e+n-u*b,",").concat(r+i,`
            L `).concat(e+u*b,",").concat(r+i,`
            A `).concat(b,",").concat(b,",0,0,").concat(c,",").concat(e,",").concat(r+i-s*b," Z")}else d="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return d},Yte=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,o=r.x,a=r.y,s=r.width,u=r.height;if(Math.abs(s)>0&&Math.abs(u)>0){var c=Math.min(o,o+s),d=Math.max(o,o+s),f=Math.min(a,a+u),h=Math.max(a,a+u);return n>=c&&n<=d&&i>=f&&i<=h}return!1},Xte={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Kx=function(e){var r=pN(pN({},Xte),e),n=T.useRef(),i=T.useState(-1),o=qte(i,2),a=o[0],s=o[1];T.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var E=n.current.getTotalLength();E&&s(E)}catch{}},[]);var u=r.x,c=r.y,d=r.width,f=r.height,h=r.radius,g=r.className,b=r.animationEasing,v=r.animationDuration,y=r.animationBegin,x=r.isAnimationActive,_=r.isUpdateAnimationActive;if(u!==+u||c!==+c||d!==+d||f!==+f||d===0||f===0)return null;var w=Ge("recharts-rectangle",g);return _?G.createElement(ui,{canBegin:a>0,from:{width:d,height:f,x:u,y:c},to:{width:d,height:f,x:u,y:c},duration:v,animationEasing:b,isActive:_},function(E){var S=E.width,N=E.height,k=E.x,A=E.y;return G.createElement(ui,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,isActive:x,easing:b},G.createElement("path",Vf({},Be(r,!0),{className:w,d:mN(k,A,S,N,h),ref:n})))}):G.createElement("path",Vf({},Be(r,!0),{className:w,d:mN(u,c,d,f,h)}))};function u0(){return u0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},u0.apply(this,arguments)}var Jx=function(e){var r=e.cx,n=e.cy,i=e.r,o=e.className,a=Ge("recharts-dot",o);return r===+r&&n===+n&&i===+i?T.createElement("circle",u0({},Be(e,!1),sf(e),{className:a,cx:r,cy:n,r:i})):null};function qu(t){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qu(t)}var Qte=["x","y","top","left","width","height","className"];function c0(){return c0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},c0.apply(this,arguments)}function gN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Zte(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gN(Object(r),!0).forEach(function(n){ere(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ere(t,e,r){return e=tre(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tre(t){var e=rre(t,"string");return qu(e)=="symbol"?e:e+""}function rre(t,e){if(qu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nre(t,e){if(t==null)return{};var r=ire(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ire(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var ore=function(e,r,n,i,o,a){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(a,",").concat(r,"h").concat(n)},are=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,o=i===void 0?0:i,a=e.top,s=a===void 0?0:a,u=e.left,c=u===void 0?0:u,d=e.width,f=d===void 0?0:d,h=e.height,g=h===void 0?0:h,b=e.className,v=nre(e,Qte),y=Zte({x:n,y:o,top:s,left:c,width:f,height:g},v);return!pe(n)||!pe(o)||!pe(f)||!pe(g)||!pe(s)||!pe(c)?null:G.createElement("path",c0({},Be(y,!0),{className:Ge("recharts-cross",b),d:ore(n,o,f,g,s,c)}))},sre=Kj,lre=sre(Object.getPrototypeOf,Object),ure=lre,cre=hi,dre=ure,fre=pi,hre="[object Object]",pre=Function.prototype,mre=Object.prototype,MP=pre.toString,gre=mre.hasOwnProperty,yre=MP.call(Object);function vre(t){if(!fre(t)||cre(t)!=hre)return!1;var e=dre(t);if(e===null)return!0;var r=gre.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&MP.call(r)==yre}var xre=vre;const bre=Qe(xre);var wre=hi,_re=pi,Sre="[object Boolean]";function Nre(t){return t===!0||t===!1||_re(t)&&wre(t)==Sre}var Ere=Nre;const kre=Qe(Ere);function Vu(t){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vu(t)}function Gf(){return Gf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gf.apply(this,arguments)}function Tre(t,e){return Pre(t)||jre(t,e)||Are(t,e)||Cre()}function Cre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Are(t,e){if(t){if(typeof t=="string")return yN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yN(t,e)}}function yN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function jre(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(d){c=!0,i=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function Pre(t){if(Array.isArray(t))return t}function vN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vN(Object(r),!0).forEach(function(n){Ire(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ire(t,e,r){return e=Ore(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ore(t){var e=Rre(t,"string");return Vu(e)=="symbol"?e:e+""}function Rre(t,e){if(Vu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bN=function(e,r,n,i,o){var a=n-i,s;return s="M ".concat(e,",").concat(r),s+="L ".concat(e+n,",").concat(r),s+="L ".concat(e+n-a/2,",").concat(r+o),s+="L ".concat(e+n-a/2-i,",").concat(r+o),s+="L ".concat(e,",").concat(r," Z"),s},Mre={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$re=function(e){var r=xN(xN({},Mre),e),n=T.useRef(),i=T.useState(-1),o=Tre(i,2),a=o[0],s=o[1];T.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&s(w)}catch{}},[]);var u=r.x,c=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,g=r.className,b=r.animationEasing,v=r.animationDuration,y=r.animationBegin,x=r.isUpdateAnimationActive;if(u!==+u||c!==+c||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var _=Ge("recharts-trapezoid",g);return x?G.createElement(ui,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:u,y:c},to:{upperWidth:d,lowerWidth:f,height:h,x:u,y:c},duration:v,animationEasing:b,isActive:x},function(w){var E=w.upperWidth,S=w.lowerWidth,N=w.height,k=w.x,A=w.y;return G.createElement(ui,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:v,easing:b},G.createElement("path",Gf({},Be(r,!0),{className:_,d:bN(k,A,E,S,N),ref:n})))}):G.createElement("g",null,G.createElement("path",Gf({},Be(r,!0),{className:_,d:bN(u,c,d,f,h)})))},Dre=["option","shapeType","propTransformer","activeClassName","isActive"];function Gu(t){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gu(t)}function Lre(t,e){if(t==null)return{};var r=Ure(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ure(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function wN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wN(Object(r),!0).forEach(function(n){Fre(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fre(t,e,r){return e=Bre(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bre(t){var e=qre(t,"string");return Gu(e)=="symbol"?e:e+""}function qre(t,e){if(Gu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vre(t,e){return Hf(Hf({},e),t)}function Gre(t,e){return t==="symbols"}function _N(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return G.createElement(Kx,r);case"trapezoid":return G.createElement($re,r);case"sector":return G.createElement(NP,r);case"symbols":if(Gre(e))return G.createElement(hx,r);break;default:return null}}function Hre(t){return T.isValidElement(t)?t.props:t}function zre(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?Vre:n,o=t.activeClassName,a=o===void 0?"recharts-active-shape":o,s=t.isActive,u=Lre(t,Dre),c;if(T.isValidElement(e))c=T.cloneElement(e,Hf(Hf({},u),Hre(e)));else if($e(e))c=e(u);else if(bre(e)&&!kre(e)){var d=i(e,u);c=G.createElement(_N,{shapeType:r,elementProps:d})}else{var f=u;c=G.createElement(_N,{shapeType:r,elementProps:f})}return s?G.createElement(_t,{className:a},c):c}function bp(t,e){return e!=null&&"trapezoids"in t.props}function wp(t,e){return e!=null&&"sectors"in t.props}function Hu(t,e){return e!=null&&"points"in t.props}function Wre(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,o=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&o}function Kre(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function Jre(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function Yre(t,e){var r;return bp(t,e)?r=Wre:wp(t,e)?r=Kre:Hu(t,e)&&(r=Jre),r}function Xre(t,e){var r;return bp(t,e)?r="trapezoids":wp(t,e)?r="sectors":Hu(t,e)&&(r="points"),r}function Qre(t,e){if(bp(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(wp(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Hu(t,e)?e.payload:{}}function Zre(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=Xre(r,e),o=Qre(r,e),a=n.filter(function(u,c){var d=yp(o,u),f=r.props[i].filter(function(b){var v=Yre(r,e);return v(b,e)}),h=r.props[i].indexOf(f[f.length-1]),g=c===h;return d&&g}),s=n.indexOf(a[a.length-1]);return s}var ene=Math.ceil,tne=Math.max;function rne(t,e,r,n){for(var i=-1,o=tne(ene((e-t)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=t,t+=r;return a}var nne=rne,ine=h2,SN=1/0,one=17976931348623157e292;function ane(t){if(!t)return t===0?t:0;if(t=ine(t),t===SN||t===-SN){var e=t<0?-1:1;return e*one}return t===t?t:0}var $P=ane,sne=nne,lne=lp,Gm=$P;function une(t){return function(e,r,n){return n&&typeof n!="number"&&lne(e,r,n)&&(r=n=void 0),e=Gm(e),r===void 0?(r=e,e=0):r=Gm(r),n=n===void 0?e<r?1:-1:Gm(n),sne(e,r,n,t)}}var cne=une,dne=cne,fne=dne(),hne=fne;const zf=Qe(hne);function zu(t){"@babel/helpers - typeof";return zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zu(t)}function NN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function EN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NN(Object(r),!0).forEach(function(n){DP(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function DP(t,e,r){return e=pne(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pne(t){var e=mne(t,"string");return zu(e)=="symbol"?e:e+""}function mne(t,e){if(zu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gne=["Webkit","Moz","O","ms"],yne=function(e,r){var n=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=gne.reduce(function(o,a){return EN(EN({},o),{},DP({},a+n,r))},{});return i[e]=r,i};function ps(t){"@babel/helpers - typeof";return ps=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ps(t)}function Wf(){return Wf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wf.apply(this,arguments)}function kN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kN(Object(r),!0).forEach(function(n){Er(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UP(n.key),n)}}function xne(t,e,r){return e&&TN(t.prototype,e),r&&TN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function bne(t,e,r){return e=Kf(e),wne(t,LP()?Reflect.construct(e,r||[],Kf(t).constructor):e.apply(t,r))}function wne(t,e){if(e&&(ps(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _ne(t)}function _ne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LP=function(){return!!t})()}function Kf(t){return Kf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kf(t)}function Sne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d0(t,e)}function d0(t,e){return d0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},d0(t,e)}function Er(t,e,r){return e=UP(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UP(t){var e=Nne(t,"string");return ps(e)=="symbol"?e:e+""}function Nne(t,e){if(ps(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ps(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ene=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,o=e.x,a=e.width,s=e.travellerWidth;if(!r||!r.length)return{};var u=r.length,c=Fl().domain(zf(0,u)).range([o,o+a-s]),d=c.domain().map(function(f){return c(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:c(n),endX:c(i),scale:c,scaleValues:d}},CN=function(e){return e.changedTouches&&!!e.changedTouches.length},ms=function(t){function e(r){var n;return vne(this,e),n=bne(this,e,[r]),Er(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),Er(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),Er(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,o=i.endIndex,a=i.onDragEnd,s=i.startIndex;a==null||a({endIndex:o,startIndex:s})}),n.detachDragEndListener()}),Er(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Er(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Er(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Er(n,"handleSlideDragStart",function(i){var o=CN(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Sne(e,t),xne(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,o=n.endX,a=this.state.scaleValues,s=this.props,u=s.gap,c=s.data,d=c.length-1,f=Math.min(i,o),h=Math.max(i,o),g=e.getIndexInRange(a,f),b=e.getIndexInRange(a,h);return{startIndex:g-g%u,endIndex:b===d?d:b-b%u}}},{key:"getTextOfTick",value:function(n){var i=this.props,o=i.data,a=i.tickFormatter,s=i.dataKey,u=Rr(o[n],s,n);return $e(a)?a(u,n):u}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,o=i.slideMoveStartX,a=i.startX,s=i.endX,u=this.props,c=u.x,d=u.width,f=u.travellerWidth,h=u.startIndex,g=u.endIndex,b=u.onChange,v=n.pageX-o;v>0?v=Math.min(v,c+d-f-s,c+d-f-a):v<0&&(v=Math.max(v,c-a,c-s));var y=this.getIndex({startX:a+v,endX:s+v});(y.startIndex!==h||y.endIndex!==g)&&b&&b(y),this.setState({startX:a+v,endX:s+v,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var o=CN(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,o=i.brushMoveStartX,a=i.movingTravellerId,s=i.endX,u=i.startX,c=this.state[a],d=this.props,f=d.x,h=d.width,g=d.travellerWidth,b=d.onChange,v=d.gap,y=d.data,x={startX:this.state.startX,endX:this.state.endX},_=n.pageX-o;_>0?_=Math.min(_,f+h-g-c):_<0&&(_=Math.max(_,f-c)),x[a]=c+_;var w=this.getIndex(x),E=w.startIndex,S=w.endIndex,N=function(){var A=y.length-1;return a==="startX"&&(s>u?E%v===0:S%v===0)||s<u&&S===A||a==="endX"&&(s>u?S%v===0:E%v===0)||s>u&&S===A};this.setState(Er(Er({},a,c+_),"brushMoveStartX",n.pageX),function(){b&&N()&&b(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var o=this,a=this.state,s=a.scaleValues,u=a.startX,c=a.endX,d=this.state[i],f=s.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=s.length)){var g=s[h];i==="startX"&&g>=c||i==="endX"&&g<=u||this.setState(Er({},i,g),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,o=n.y,a=n.width,s=n.height,u=n.fill,c=n.stroke;return G.createElement("rect",{stroke:c,fill:u,x:i,y:o,width:a,height:s})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,o=n.y,a=n.width,s=n.height,u=n.data,c=n.children,d=n.padding,f=T.Children.only(c);return f?G.cloneElement(f,{x:i,y:o,width:a,height:s,margin:d,compact:!0,data:u}):null}},{key:"renderTravellerLayer",value:function(n,i){var o,a,s=this,u=this.props,c=u.y,d=u.travellerWidth,f=u.height,h=u.traveller,g=u.ariaLabel,b=u.data,v=u.startIndex,y=u.endIndex,x=Math.max(n,this.props.x),_=Hm(Hm({},Be(this.props,!1)),{},{x,y:c,width:d,height:f}),w=g||"Min value: ".concat((o=b[v])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=b[y])===null||a===void 0?void 0:a.name);return G.createElement(_t,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),s.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,_))}},{key:"renderSlide",value:function(n,i){var o=this.props,a=o.y,s=o.height,u=o.stroke,c=o.travellerWidth,d=Math.min(n,i)+c,f=Math.max(Math.abs(i-n)-c,0);return G.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:u,fillOpacity:.2,x:d,y:a,width:f,height:s})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,o=n.endIndex,a=n.y,s=n.height,u=n.travellerWidth,c=n.stroke,d=this.state,f=d.startX,h=d.endX,g=5,b={pointerEvents:"none",fill:c};return G.createElement(_t,{className:"recharts-brush-texts"},G.createElement(_f,Wf({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-g,y:a+s/2},b),this.getTextOfTick(i)),G.createElement(_f,Wf({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+u+g,y:a+s/2},b),this.getTextOfTick(o)))}},{key:"render",value:function(){var n=this.props,i=n.data,o=n.className,a=n.children,s=n.x,u=n.y,c=n.width,d=n.height,f=n.alwaysShowText,h=this.state,g=h.startX,b=h.endX,v=h.isTextActive,y=h.isSlideMoving,x=h.isTravellerMoving,_=h.isTravellerFocused;if(!i||!i.length||!pe(s)||!pe(u)||!pe(c)||!pe(d)||c<=0||d<=0)return null;var w=Ge("recharts-brush",o),E=G.Children.count(a)===1,S=yne("userSelect","none");return G.createElement(_t,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),E&&this.renderPanorama(),this.renderSlide(g,b),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(b,"endX"),(v||y||x||_||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,o=n.y,a=n.width,s=n.height,u=n.stroke,c=Math.floor(o+s/2)-1;return G.createElement(G.Fragment,null,G.createElement("rect",{x:i,y:o,width:a,height:s,fill:u,stroke:"none"}),G.createElement("line",{x1:i+1,y1:c,x2:i+a-1,y2:c,fill:"none",stroke:"#fff"}),G.createElement("line",{x1:i+1,y1:c+2,x2:i+a-1,y2:c+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var o;return G.isValidElement(n)?o=G.cloneElement(n,i):$e(n)?o=n(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(n,i){var o=n.data,a=n.width,s=n.x,u=n.travellerWidth,c=n.updateId,d=n.startIndex,f=n.endIndex;if(o!==i.prevData||c!==i.prevUpdateId)return Hm({prevData:o,prevTravellerWidth:u,prevUpdateId:c,prevX:s,prevWidth:a},o&&o.length?Ene({data:o,width:a,x:s,travellerWidth:u,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||s!==i.prevX||u!==i.prevTravellerWidth)){i.scale.range([s,s+a-u]);var h=i.scale.domain().map(function(g){return i.scale(g)});return{prevData:o,prevTravellerWidth:u,prevUpdateId:c,prevX:s,prevWidth:a,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,i){for(var o=n.length,a=0,s=o-1;s-a>1;){var u=Math.floor((a+s)/2);n[u]>i?s=u:a=u}return i>=n[s]?s:a}}])}(T.PureComponent);Er(ms,"displayName","Brush");Er(ms,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var kne=bx;function Tne(t,e){var r;return kne(t,function(n,i,o){return r=e(n,i,o),!r}),!!r}var Cne=Tne,Ane=Fj,jne=Yi,Pne=Cne,Ine=wr,One=lp;function Rne(t,e,r){var n=Ine(t)?Ane:Pne;return r&&One(t,e,r)&&(e=void 0),n(t,jne(e))}var Mne=Rne;const $ne=Qe(Mne);var Un=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},AN=l2;function Dne(t,e,r){e=="__proto__"&&AN?AN(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var Lne=Dne,Une=Lne,Fne=a2,Bne=Yi;function qne(t,e){var r={};return e=Bne(e),Fne(t,function(n,i,o){Une(r,i,e(n,i,o))}),r}var Vne=qne;const Gne=Qe(Vne);function Hne(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var zne=Hne,Wne=bx;function Kne(t,e){var r=!0;return Wne(t,function(n,i,o){return r=!!e(n,i,o),r}),r}var Jne=Kne,Yne=zne,Xne=Jne,Qne=Yi,Zne=wr,eie=lp;function tie(t,e,r){var n=Zne(t)?Yne:Xne;return r&&eie(t,e,r)&&(e=void 0),n(t,Qne(e))}var rie=tie;const FP=Qe(rie);var nie=["x","y"];function Wu(t){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wu(t)}function f0(){return f0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},f0.apply(this,arguments)}function jN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jN(Object(r),!0).forEach(function(n){iie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iie(t,e,r){return e=oie(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oie(t){var e=aie(t,"string");return Wu(e)=="symbol"?e:e+""}function aie(t,e){if(Wu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sie(t,e){if(t==null)return{};var r=lie(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function lie(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function uie(t,e){var r=t.x,n=t.y,i=sie(t,nie),o="".concat(r),a=parseInt(o,10),s="".concat(n),u=parseInt(s,10),c="".concat(e.height||i.height),d=parseInt(c,10),f="".concat(e.width||i.width),h=parseInt(f,10);return pl(pl(pl(pl(pl({},e),i),a?{x:a}:{}),u?{y:u}:{}),{},{height:d,width:h,name:e.name,radius:e.radius})}function PN(t){return G.createElement(zre,f0({shapeType:"rectangle",propTransformer:uie,activeClassName:"recharts-active-bar"},t))}var cie=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof e=="number")return e;var o=pe(n)||SB(n);return o?e(n,i):(o||Do(),r)}},die=["value","background"],BP;function gs(t){"@babel/helpers - typeof";return gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gs(t)}function fie(t,e){if(t==null)return{};var r=hie(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function hie(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Jf(){return Jf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jf.apply(this,arguments)}function IN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function St(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IN(Object(r),!0).forEach(function(n){Pi(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ON(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VP(n.key),n)}}function mie(t,e,r){return e&&ON(t.prototype,e),r&&ON(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function gie(t,e,r){return e=Yf(e),yie(t,qP()?Reflect.construct(e,r||[],Yf(t).constructor):e.apply(t,r))}function yie(t,e){if(e&&(gs(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vie(t)}function vie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qP=function(){return!!t})()}function Yf(t){return Yf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yf(t)}function xie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h0(t,e)}function h0(t,e){return h0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},h0(t,e)}function Pi(t,e,r){return e=VP(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VP(t){var e=bie(t,"string");return gs(e)=="symbol"?e:e+""}function bie(t,e){if(gs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var eo=function(t){function e(){var r;pie(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=gie(this,e,[].concat(i)),Pi(r,"state",{isAnimationFinished:!1}),Pi(r,"id",dc("recharts-bar-")),Pi(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),a&&a()}),Pi(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),a&&a()}),r}return xie(e,t),mie(e,[{key:"renderRectanglesStatically",value:function(n){var i=this,o=this.props,a=o.shape,s=o.dataKey,u=o.activeIndex,c=o.activeBar,d=Be(this.props,!1);return n&&n.map(function(f,h){var g=h===u,b=g?c:a,v=St(St(St({},d),f),{},{isActive:g,option:b,index:h,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return G.createElement(_t,Jf({className:"recharts-bar-rectangle"},lf(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),G.createElement(PN,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,o=i.data,a=i.layout,s=i.isAnimationActive,u=i.animationBegin,c=i.animationDuration,d=i.animationEasing,f=i.animationId,h=this.state.prevData;return G.createElement(ui,{begin:u,duration:c,isActive:s,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var b=g.t,v=o.map(function(y,x){var _=h&&h[x];if(_){var w=yn(_.x,y.x),E=yn(_.y,y.y),S=yn(_.width,y.width),N=yn(_.height,y.height);return St(St({},y),{},{x:w(b),y:E(b),width:S(b),height:N(b)})}if(a==="horizontal"){var k=yn(0,y.height),A=k(b);return St(St({},y),{},{y:y.y+y.height-A,height:A})}var C=yn(0,y.width),R=C(b);return St(St({},y),{},{width:R})});return G.createElement(_t,null,n.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,o=n.isAnimationActive,a=this.state.prevData;return o&&i&&i.length&&(!a||!yp(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,o=i.data,a=i.dataKey,s=i.activeIndex,u=Be(this.props.background,!1);return o.map(function(c,d){c.value;var f=c.background,h=fie(c,die);if(!f)return null;var g=St(St(St(St(St({},h),{},{fill:"#eee"},f),u),lf(n.props,c,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:a,index:d,className:"recharts-bar-background-rectangle"});return G.createElement(PN,Jf({key:"background-bar-".concat(d),option:n.props.background,isActive:d===s},g))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,s=o.xAxis,u=o.yAxis,c=o.layout,d=o.children,f=Yr(d,yc);if(!f)return null;var h=c==="vertical"?a[0].height/2:a[0].width/2,g=function(y,x){var _=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:_,errorVal:Rr(y,x)}},b={clipPath:n?"url(#clipPath-".concat(i,")"):null};return G.createElement(_t,b,f.map(function(v){return G.cloneElement(v,{key:"error-bar-".concat(i,"-").concat(v.props.dataKey),data:a,xAxis:s,yAxis:u,layout:c,offset:h,dataPointFormatter:g})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,o=n.data,a=n.className,s=n.xAxis,u=n.yAxis,c=n.left,d=n.top,f=n.width,h=n.height,g=n.isAnimationActive,b=n.background,v=n.id;if(i||!o||!o.length)return null;var y=this.state.isAnimationFinished,x=Ge("recharts-bar",a),_=s&&s.allowDataOverflow,w=u&&u.allowDataOverflow,E=_||w,S=Le(v)?this.id:v;return G.createElement(_t,{className:x},_||w?G.createElement("defs",null,G.createElement("clipPath",{id:"clipPath-".concat(S)},G.createElement("rect",{x:_?c:c-f/2,y:w?d:d-h/2,width:_?f:f*2,height:w?h:h*2}))):null,G.createElement(_t,{className:"recharts-bar-rectangles",clipPath:E?"url(#clipPath-".concat(S,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(E,S),(!g||y)&&qi.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])}(T.PureComponent);BP=eo;Pi(eo,"displayName","Bar");Pi(eo,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Bs.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Pi(eo,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,o=t.xAxis,a=t.yAxis,s=t.xAxisTicks,u=t.yAxisTicks,c=t.stackedData,d=t.dataStartIndex,f=t.displayedData,h=t.offset,g=zQ(n,r);if(!g)return null;var b=e.layout,v=r.type.defaultProps,y=v!==void 0?St(St({},v),r.props):r.props,x=y.dataKey,_=y.children,w=y.minPointSize,E=b==="horizontal"?a:o,S=c?E.scale.domain():null,N=eZ({numericAxis:E}),k=Yr(_,m2),A=f.map(function(C,R){var $,L,M,O,P,D;c?$=WQ(c[d+R],S):($=Rr(C,x),Array.isArray($)||($=[N,$]));var B=cie(w,BP.defaultProps.minPointSize)($[1],R);if(b==="horizontal"){var U,W=[a.scale($[0]),a.scale($[1])],K=W[0],re=W[1];L=MS({axis:o,ticks:s,bandSize:i,offset:g.offset,entry:C,index:R}),M=(U=re??K)!==null&&U!==void 0?U:void 0,O=g.size;var Y=K-re;if(P=Number.isNaN(Y)?0:Y,D={x:L,y:a.y,width:O,height:a.height},Math.abs(B)>0&&Math.abs(P)<Math.abs(B)){var ye=xn(P||B)*(Math.abs(B)-Math.abs(P));M-=ye,P+=ye}}else{var I=[o.scale($[0]),o.scale($[1])],Z=I[0],ce=I[1];if(L=Z,M=MS({axis:a,ticks:u,bandSize:i,offset:g.offset,entry:C,index:R}),O=ce-Z,P=g.size,D={x:o.x,y:M,width:o.width,height:P},Math.abs(B)>0&&Math.abs(O)<Math.abs(B)){var ve=xn(O||B)*(Math.abs(B)-Math.abs(O));O+=ve}}return St(St(St({},C),{},{x:L,y:M,width:O,height:P,value:c?$:$[1],payload:C,background:D},k&&k[R]&&k[R].props),{},{tooltipPayload:[wP(r,C)],tooltipPosition:{x:L+O/2,y:M+P/2}})});return St({data:A,layout:b},h)});function Ku(t){"@babel/helpers - typeof";return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ku(t)}function wie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GP(n.key),n)}}function _ie(t,e,r){return e&&RN(t.prototype,e),r&&RN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function MN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MN(Object(r),!0).forEach(function(n){_p(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _p(t,e,r){return e=GP(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GP(t){var e=Sie(t,"string");return Ku(e)=="symbol"?e:e+""}function Sie(t,e){if(Ku(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ku(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HP=function(e,r,n,i,o){var a=e.width,s=e.height,u=e.layout,c=e.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:a-n.right,rightMirror:a-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},h=!!Tr(c,eo);return d.reduce(function(g,b){var v=r[b],y=v.orientation,x=v.domain,_=v.padding,w=_===void 0?{}:_,E=v.mirror,S=v.reversed,N="".concat(y).concat(E?"Mirror":""),k,A,C,R,$;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var L=x[1]-x[0],M=1/0,O=v.categoricalDomain.sort(kB);if(O.forEach(function(I,Z){Z>0&&(M=Math.min((I||0)-(O[Z-1]||0),M))}),Number.isFinite(M)){var P=M/L,D=v.layout==="vertical"?n.height:n.width;if(v.padding==="gap"&&(k=P*D/2),v.padding==="no-gap"){var B=Mo(e.barCategoryGap,P*D),U=P*D/2;k=U-B-(U-B)/D*B}}}i==="xAxis"?A=[n.left+(w.left||0)+(k||0),n.left+n.width-(w.right||0)-(k||0)]:i==="yAxis"?A=u==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(k||0),n.top+n.height-(w.bottom||0)-(k||0)]:A=v.range,S&&(A=[A[1],A[0]]);var W=GQ(v,o,h),K=W.scale,re=W.realScaleType;K.domain(x).range(A),HQ(K);var Y=ZQ(K,pn(pn({},v),{},{realScaleType:re}));i==="xAxis"?($=y==="top"&&!E||y==="bottom"&&E,C=n.left,R=f[N]-$*v.height):i==="yAxis"&&($=y==="left"&&!E||y==="right"&&E,C=f[N]-$*v.width,R=n.top);var ye=pn(pn(pn({},v),Y),{},{realScaleType:re,x:C,y:R,scale:K,width:i==="xAxis"?n.width:v.width,height:i==="yAxis"?n.height:v.height});return ye.bandSize=$f(ye,Y),!v.hide&&i==="xAxis"?f[N]+=($?-1:1)*ye.height:v.hide||(f[N]+=($?-1:1)*ye.width),pn(pn({},g),{},_p({},b,ye))},{})},zP=function(e,r){var n=e.x,i=e.y,o=r.x,a=r.y;return{x:Math.min(n,o),y:Math.min(i,a),width:Math.abs(o-n),height:Math.abs(a-i)}},Nie=function(e){var r=e.x1,n=e.y1,i=e.x2,o=e.y2;return zP({x:r,y:n},{x:i,y:o})},WP=function(){function t(e){wie(this,t),this.scale=e}return _ie(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,o=n.position;if(r!==void 0){if(o)switch(o){case"start":return this.scale(r);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(i){var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+u}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],o=n[n.length-1];return i<=o?r>=i&&r<=o:r>=o&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}])}();_p(WP,"EPS",1e-4);var Yx=function(e){var r=Object.keys(e).reduce(function(n,i){return pn(pn({},n),{},_p({},i,WP.create(e[i])))},{});return pn(pn({},r),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.bandAware,s=o.position;return Gne(i,function(u,c){return r[c].apply(u,{bandAware:a,position:s})})},isInRange:function(i){return FP(i,function(o,a){return r[a].isInRange(o)})}})};function Eie(t){return(t%180+180)%180}var kie=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Eie(i),a=o*Math.PI/180,s=Math.atan(n/r),u=a>s&&a<Math.PI-s?n/Math.sin(a):r/Math.cos(a);return Math.abs(u)},Tie=Yi,Cie=fc,Aie=ap;function jie(t){return function(e,r,n){var i=Object(e);if(!Cie(e)){var o=Tie(r);e=Aie(e),r=function(s){return o(i[s],s,i)}}var a=t(e,r,n);return a>-1?i[o?e[a]:a]:void 0}}var Pie=jie,Iie=$P;function Oie(t){var e=Iie(t),r=e%1;return e===e?r?e-r:e:0}var Rie=Oie,Mie=e2,$ie=Yi,Die=Rie,Lie=Math.max;function Uie(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=r==null?0:Die(r);return i<0&&(i=Lie(n+i,0)),Mie(t,$ie(e),i)}var Fie=Uie,Bie=Pie,qie=Fie,Vie=Bie(qie),Gie=Vie;const Hie=Qe(Gie);var zie=AF(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),Xx=T.createContext(void 0),Qx=T.createContext(void 0),KP=T.createContext(void 0),JP=T.createContext({}),YP=T.createContext(void 0),XP=T.createContext(0),QP=T.createContext(0),$N=function(e){var r=e.state,n=r.xAxisMap,i=r.yAxisMap,o=r.offset,a=e.clipPathId,s=e.children,u=e.width,c=e.height,d=zie(o);return G.createElement(Xx.Provider,{value:n},G.createElement(Qx.Provider,{value:i},G.createElement(JP.Provider,{value:o},G.createElement(KP.Provider,{value:d},G.createElement(YP.Provider,{value:a},G.createElement(XP.Provider,{value:c},G.createElement(QP.Provider,{value:u},s)))))))},Wie=function(){return T.useContext(YP)},ZP=function(e){var r=T.useContext(Xx);r==null&&Do();var n=r[e];return n==null&&Do(),n},Kie=function(){var e=T.useContext(Xx);return Ti(e)},Jie=function(){var e=T.useContext(Qx),r=Hie(e,function(n){return FP(n.domain,Number.isFinite)});return r||Ti(e)},eI=function(e){var r=T.useContext(Qx);r==null&&Do();var n=r[e];return n==null&&Do(),n},Yie=function(){var e=T.useContext(KP);return e},Xie=function(){return T.useContext(JP)},Zx=function(){return T.useContext(QP)},eb=function(){return T.useContext(XP)};function ys(t){"@babel/helpers - typeof";return ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ys(t)}function Qie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rI(n.key),n)}}function eoe(t,e,r){return e&&Zie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function toe(t,e,r){return e=Xf(e),roe(t,tI()?Reflect.construct(e,r||[],Xf(t).constructor):e.apply(t,r))}function roe(t,e){if(e&&(ys(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return noe(t)}function noe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tI=function(){return!!t})()}function Xf(t){return Xf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xf(t)}function ioe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p0(t,e)}function p0(t,e){return p0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},p0(t,e)}function DN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function LN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DN(Object(r),!0).forEach(function(n){tb(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tb(t,e,r){return e=rI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rI(t){var e=ooe(t,"string");return ys(e)=="symbol"?e:e+""}function ooe(t,e){if(ys(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ys(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function aoe(t,e){return coe(t)||uoe(t,e)||loe(t,e)||soe()}function soe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function loe(t,e){if(t){if(typeof t=="string")return UN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UN(t,e)}}function UN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function uoe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(d){c=!0,i=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function coe(t){if(Array.isArray(t))return t}function m0(){return m0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},m0.apply(this,arguments)}var doe=function(e,r){var n;return G.isValidElement(e)?n=G.cloneElement(e,r):$e(e)?n=e(r):n=G.createElement("line",m0({},r,{className:"recharts-reference-line-line"})),n},foe=function(e,r,n,i,o,a,s,u,c){var d=o.x,f=o.y,h=o.width,g=o.height;if(n){var b=c.y,v=e.y.apply(b,{position:a});if(Un(c,"discard")&&!e.y.isInRange(v))return null;var y=[{x:d+h,y:v},{x:d,y:v}];return u==="left"?y.reverse():y}if(r){var x=c.x,_=e.x.apply(x,{position:a});if(Un(c,"discard")&&!e.x.isInRange(_))return null;var w=[{x:_,y:f+g},{x:_,y:f}];return s==="top"?w.reverse():w}if(i){var E=c.segment,S=E.map(function(N){return e.apply(N,{position:a})});return Un(c,"discard")&&$ne(S,function(N){return!e.isInRange(N)})?null:S}return null};function hoe(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxisId,o=t.yAxisId,a=t.shape,s=t.className,u=t.alwaysShow,c=Wie(),d=ZP(i),f=eI(o),h=Yie();if(!c||!h)return null;ei(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=Yx({x:d.scale,y:f.scale}),b=$t(e),v=$t(r),y=n&&n.length===2,x=foe(g,b,v,y,h,t.position,d.orientation,f.orientation,t);if(!x)return null;var _=aoe(x,2),w=_[0],E=w.x,S=w.y,N=_[1],k=N.x,A=N.y,C=Un(t,"hidden")?"url(#".concat(c,")"):void 0,R=LN(LN({clipPath:C},Be(t,!0)),{},{x1:E,y1:S,x2:k,y2:A});return G.createElement(_t,{className:Ge("recharts-reference-line",s)},doe(a,R),rr.renderCallByParent(t,Nie({x1:E,y1:S,x2:k,y2:A})))}var rb=function(t){function e(){return Qie(this,e),toe(this,e,arguments)}return ioe(e,t),eoe(e,[{key:"render",value:function(){return G.createElement(hoe,this.props)}}])}(G.Component);tb(rb,"displayName","ReferenceLine");tb(rb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function g0(){return g0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},g0.apply(this,arguments)}function vs(t){"@babel/helpers - typeof";return vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vs(t)}function FN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function BN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FN(Object(r),!0).forEach(function(n){Sp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function poe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function moe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iI(n.key),n)}}function goe(t,e,r){return e&&moe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yoe(t,e,r){return e=Qf(e),voe(t,nI()?Reflect.construct(e,r||[],Qf(t).constructor):e.apply(t,r))}function voe(t,e){if(e&&(vs(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xoe(t)}function xoe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nI=function(){return!!t})()}function Qf(t){return Qf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qf(t)}function boe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y0(t,e)}function y0(t,e){return y0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},y0(t,e)}function Sp(t,e,r){return e=iI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iI(t){var e=woe(t,"string");return vs(e)=="symbol"?e:e+""}function woe(t,e){if(vs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _oe=function(e){var r=e.x,n=e.y,i=e.xAxis,o=e.yAxis,a=Yx({x:i.scale,y:o.scale}),s=a.apply({x:r,y:n},{bandAware:!0});return Un(e,"discard")&&!a.isInRange(s)?null:s},Np=function(t){function e(){return poe(this,e),yoe(this,e,arguments)}return boe(e,t),goe(e,[{key:"render",value:function(){var n=this.props,i=n.x,o=n.y,a=n.r,s=n.alwaysShow,u=n.clipPathId,c=$t(i),d=$t(o);if(ei(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!c||!d)return null;var f=_oe(this.props);if(!f)return null;var h=f.x,g=f.y,b=this.props,v=b.shape,y=b.className,x=Un(this.props,"hidden")?"url(#".concat(u,")"):void 0,_=BN(BN({clipPath:x},Be(this.props,!0)),{},{cx:h,cy:g});return G.createElement(_t,{className:Ge("recharts-reference-dot",y)},e.renderDot(v,_),rr.renderCallByParent(this.props,{x:h-a,y:g-a,width:2*a,height:2*a}))}}])}(G.Component);Sp(Np,"displayName","ReferenceDot");Sp(Np,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Sp(Np,"renderDot",function(t,e){var r;return G.isValidElement(t)?r=G.cloneElement(t,e):$e(t)?r=t(e):r=G.createElement(Jx,g0({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function v0(){return v0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},v0.apply(this,arguments)}function xs(t){"@babel/helpers - typeof";return xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xs(t)}function qN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function VN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qN(Object(r),!0).forEach(function(n){Ep(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Soe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Noe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aI(n.key),n)}}function Eoe(t,e,r){return e&&Noe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function koe(t,e,r){return e=Zf(e),Toe(t,oI()?Reflect.construct(e,r||[],Zf(t).constructor):e.apply(t,r))}function Toe(t,e){if(e&&(xs(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Coe(t)}function Coe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oI=function(){return!!t})()}function Zf(t){return Zf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zf(t)}function Aoe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x0(t,e)}function x0(t,e){return x0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},x0(t,e)}function Ep(t,e,r){return e=aI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function aI(t){var e=joe(t,"string");return xs(e)=="symbol"?e:e+""}function joe(t,e){if(xs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Poe=function(e,r,n,i,o){var a=o.x1,s=o.x2,u=o.y1,c=o.y2,d=o.xAxis,f=o.yAxis;if(!d||!f)return null;var h=Yx({x:d.scale,y:f.scale}),g={x:e?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(u,{position:"start"}):h.y.rangeMin},b={x:r?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(c,{position:"end"}):h.y.rangeMax};return Un(o,"discard")&&(!h.isInRange(g)||!h.isInRange(b))?null:zP(g,b)},kp=function(t){function e(){return Soe(this,e),koe(this,e,arguments)}return Aoe(e,t),Eoe(e,[{key:"render",value:function(){var n=this.props,i=n.x1,o=n.x2,a=n.y1,s=n.y2,u=n.className,c=n.alwaysShow,d=n.clipPathId;ei(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=$t(i),h=$t(o),g=$t(a),b=$t(s),v=this.props.shape;if(!f&&!h&&!g&&!b&&!v)return null;var y=Poe(f,h,g,b,this.props);if(!y&&!v)return null;var x=Un(this.props,"hidden")?"url(#".concat(d,")"):void 0;return G.createElement(_t,{className:Ge("recharts-reference-area",u)},e.renderRect(v,VN(VN({clipPath:x},Be(this.props,!0)),y)),rr.renderCallByParent(this.props,y))}}])}(G.Component);Ep(kp,"displayName","ReferenceArea");Ep(kp,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Ep(kp,"renderRect",function(t,e){var r;return G.isValidElement(t)?r=G.cloneElement(t,e):$e(t)?r=t(e):r=G.createElement(Kx,v0({},e,{className:"recharts-reference-area-rect"})),r});function sI(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function Ioe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return kie(n,r)}function Ooe(t,e,r){var n=r==="width",i=t.x,o=t.y,a=t.width,s=t.height;return e===1?{start:n?i:o,end:n?i+a:o+s}:{start:n?i+a:o+s,end:n?i:o}}function eh(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var o=r();return t*(e-t*o/2-n)>=0&&t*(e+t*o/2-i)<=0}function Roe(t,e){return sI(t,e+1)}function Moe(t,e,r,n,i){for(var o=(n||[]).slice(),a=e.start,s=e.end,u=0,c=1,d=a,f=function(){var b=n==null?void 0:n[u];if(b===void 0)return{v:sI(n,c)};var v=u,y,x=function(){return y===void 0&&(y=r(b,v)),y},_=b.coordinate,w=u===0||eh(t,_,x,d,s);w||(u=0,d=a,c+=1),w&&(d=_+t*(x()/2+i),u+=c)},h;c<=o.length;)if(h=f(),h)return h.v;return[]}function Ju(t){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ju(t)}function GN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function er(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GN(Object(r),!0).forEach(function(n){$oe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $oe(t,e,r){return e=Doe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Doe(t){var e=Loe(t,"string");return Ju(e)=="symbol"?e:e+""}function Loe(t,e){if(Ju(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ju(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uoe(t,e,r,n,i){for(var o=(n||[]).slice(),a=o.length,s=e.start,u=e.end,c=function(h){var g=o[h],b,v=function(){return b===void 0&&(b=r(g,h)),b};if(h===a-1){var y=t*(g.coordinate+t*v()/2-u);o[h]=g=er(er({},g),{},{tickCoord:y>0?g.coordinate-y*t:g.coordinate})}else o[h]=g=er(er({},g),{},{tickCoord:g.coordinate});var x=eh(t,g.tickCoord,v,s,u);x&&(u=g.tickCoord-t*(v()/2+i),o[h]=er(er({},g),{},{isShow:!0}))},d=a-1;d>=0;d--)c(d);return o}function Foe(t,e,r,n,i,o){var a=(n||[]).slice(),s=a.length,u=e.start,c=e.end;if(o){var d=n[s-1],f=r(d,s-1),h=t*(d.coordinate+t*f/2-c);a[s-1]=d=er(er({},d),{},{tickCoord:h>0?d.coordinate-h*t:d.coordinate});var g=eh(t,d.tickCoord,function(){return f},u,c);g&&(c=d.tickCoord-t*(f/2+i),a[s-1]=er(er({},d),{},{isShow:!0}))}for(var b=o?s-1:s,v=function(_){var w=a[_],E,S=function(){return E===void 0&&(E=r(w,_)),E};if(_===0){var N=t*(w.coordinate-t*S()/2-u);a[_]=w=er(er({},w),{},{tickCoord:N<0?w.coordinate-N*t:w.coordinate})}else a[_]=w=er(er({},w),{},{tickCoord:w.coordinate});var k=eh(t,w.tickCoord,S,u,c);k&&(u=w.tickCoord+t*(S()/2+i),a[_]=er(er({},w),{},{isShow:!0}))},y=0;y<b;y++)v(y);return a}function nb(t,e,r){var n=t.tick,i=t.ticks,o=t.viewBox,a=t.minTickGap,s=t.orientation,u=t.interval,c=t.tickFormatter,d=t.unit,f=t.angle;if(!i||!i.length||!n)return[];if(pe(u)||Bs.isSsr)return Roe(i,typeof u=="number"&&pe(u)?u:0);var h=[],g=s==="top"||s==="bottom"?"width":"height",b=d&&g==="width"?Ul(d,{fontSize:e,letterSpacing:r}):{width:0,height:0},v=function(w,E){var S=$e(c)?c(w.value,E):w.value;return g==="width"?Ioe(Ul(S,{fontSize:e,letterSpacing:r}),b,f):Ul(S,{fontSize:e,letterSpacing:r})[g]},y=i.length>=2?xn(i[1].coordinate-i[0].coordinate):1,x=Ooe(o,y,g);return u==="equidistantPreserveStart"?Moe(y,x,v,i,a):(u==="preserveStart"||u==="preserveStartEnd"?h=Foe(y,x,v,i,a,u==="preserveStartEnd"):h=Uoe(y,x,v,i,a),h.filter(function(_){return _.isShow}))}var Boe=["viewBox"],qoe=["viewBox"],Voe=["ticks"];function bs(t){"@babel/helpers - typeof";return bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bs(t)}function Aa(){return Aa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Aa.apply(this,arguments)}function HN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Pt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HN(Object(r),!0).forEach(function(n){ib(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zm(t,e){if(t==null)return{};var r=Goe(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Goe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Hoe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uI(n.key),n)}}function zoe(t,e,r){return e&&zN(t.prototype,e),r&&zN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Woe(t,e,r){return e=th(e),Koe(t,lI()?Reflect.construct(e,r||[],th(t).constructor):e.apply(t,r))}function Koe(t,e){if(e&&(bs(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Joe(t)}function Joe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lI=function(){return!!t})()}function th(t){return th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},th(t)}function Yoe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b0(t,e)}function b0(t,e){return b0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},b0(t,e)}function ib(t,e,r){return e=uI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uI(t){var e=Xoe(t,"string");return bs(e)=="symbol"?e:e+""}function Xoe(t,e){if(bs(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hs=function(t){function e(r){var n;return Hoe(this,e),n=Woe(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return Yoe(e,t),zoe(e,[{key:"shouldComponentUpdate",value:function(n,i){var o=n.viewBox,a=zm(n,Boe),s=this.props,u=s.viewBox,c=zm(s,qoe);return!Fa(o,u)||!Fa(a,c)||!Fa(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,o=i.x,a=i.y,s=i.width,u=i.height,c=i.orientation,d=i.tickSize,f=i.mirror,h=i.tickMargin,g,b,v,y,x,_,w=f?-1:1,E=n.tickSize||d,S=pe(n.tickCoord)?n.tickCoord:n.coordinate;switch(c){case"top":g=b=n.coordinate,y=a+ +!f*u,v=y-w*E,_=v-w*h,x=S;break;case"left":v=y=n.coordinate,b=o+ +!f*s,g=b-w*E,x=g-w*h,_=S;break;case"right":v=y=n.coordinate,b=o+ +f*s,g=b+w*E,x=g+w*h,_=S;break;default:g=b=n.coordinate,y=a+ +f*u,v=y+w*E,_=v+w*h,x=S;break}return{line:{x1:g,y1:v,x2:b,y2:y},tick:{x,y:_}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,o=n.mirror,a;switch(i){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,o=n.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,o=n.y,a=n.width,s=n.height,u=n.orientation,c=n.mirror,d=n.axisLine,f=Pt(Pt(Pt({},Be(this.props,!1)),Be(d,!1)),{},{fill:"none"});if(u==="top"||u==="bottom"){var h=+(u==="top"&&!c||u==="bottom"&&c);f=Pt(Pt({},f),{},{x1:i,y1:o+h*s,x2:i+a,y2:o+h*s})}else{var g=+(u==="left"&&!c||u==="right"&&c);f=Pt(Pt({},f),{},{x1:i+g*a,y1:o,x2:i+g*a,y2:o+s})}return G.createElement("line",Aa({},f,{className:Ge("recharts-cartesian-axis-line",Jr(d,"className"))}))}},{key:"renderTicks",value:function(n,i,o){var a=this,s=this.props,u=s.tickLine,c=s.stroke,d=s.tick,f=s.tickFormatter,h=s.unit,g=nb(Pt(Pt({},this.props),{},{ticks:n}),i,o),b=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),y=Be(this.props,!1),x=Be(d,!1),_=Pt(Pt({},y),{},{fill:"none"},Be(u,!1)),w=g.map(function(E,S){var N=a.getTickLineCoord(E),k=N.line,A=N.tick,C=Pt(Pt(Pt(Pt({textAnchor:b,verticalAnchor:v},y),{},{stroke:"none",fill:c},x),A),{},{index:S,payload:E,visibleTicksCount:g.length,tickFormatter:f});return G.createElement(_t,Aa({className:"recharts-cartesian-axis-tick",key:"tick-".concat(E.value,"-").concat(E.coordinate,"-").concat(E.tickCoord)},lf(a.props,E,S)),u&&G.createElement("line",Aa({},_,k,{className:Ge("recharts-cartesian-axis-tick-line",Jr(u,"className"))})),d&&e.renderTickItem(d,C,"".concat($e(f)?f(E.value,S):E.value).concat(h||"")))});return G.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,i=this.props,o=i.axisLine,a=i.width,s=i.height,u=i.ticksGenerator,c=i.className,d=i.hide;if(d)return null;var f=this.props,h=f.ticks,g=zm(f,Voe),b=h;return $e(u)&&(b=h&&h.length>0?u(this.props):u(g)),a<=0||s<=0||!b||!b.length?null:G.createElement(_t,{className:Ge("recharts-cartesian-axis",c),ref:function(y){n.layerReference=y}},o&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),rr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,o){var a,s=Ge(i.className,"recharts-cartesian-axis-tick-value");return G.isValidElement(n)?a=G.cloneElement(n,Pt(Pt({},i),{},{className:s})):$e(n)?a=n(Pt(Pt({},i),{},{className:s})):a=G.createElement(_f,Aa({},i,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(T.Component);ib(Hs,"displayName","CartesianAxis");ib(Hs,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Qoe=["x1","y1","x2","y2","key"],Zoe=["offset"];function Lo(t){"@babel/helpers - typeof";return Lo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lo(t)}function WN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function nr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?WN(Object(r),!0).forEach(function(n){eae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function eae(t,e,r){return e=tae(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tae(t){var e=rae(t,"string");return Lo(e)=="symbol"?e:e+""}function rae(t,e){if(Lo(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lo(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _o(){return _o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_o.apply(this,arguments)}function KN(t,e){if(t==null)return{};var r=nae(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function nae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var iae=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,i=e.x,o=e.y,a=e.width,s=e.height,u=e.ry;return G.createElement("rect",{x:i,y:o,ry:u,width:a,height:s,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function cI(t,e){var r;if(G.isValidElement(t))r=G.cloneElement(t,e);else if($e(t))r=t(e);else{var n=e.x1,i=e.y1,o=e.x2,a=e.y2,s=e.key,u=KN(e,Qoe),c=Be(u,!1);c.offset;var d=KN(c,Zoe);r=G.createElement("line",_o({},d,{x1:n,y1:i,x2:o,y2:a,fill:"none",key:s}))}return r}function oae(t){var e=t.x,r=t.width,n=t.horizontal,i=n===void 0?!0:n,o=t.horizontalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,u){var c=nr(nr({},t),{},{x1:e,y1:s,x2:e+r,y2:s,key:"line-".concat(u),index:u});return cI(i,c)});return G.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function aae(t){var e=t.y,r=t.height,n=t.vertical,i=n===void 0?!0:n,o=t.verticalPoints;if(!i||!o||!o.length)return null;var a=o.map(function(s,u){var c=nr(nr({},t),{},{x1:s,y1:e,x2:s,y2:e+r,key:"line-".concat(u),index:u});return cI(i,c)});return G.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function sae(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,i=t.y,o=t.width,a=t.height,s=t.horizontalPoints,u=t.horizontal,c=u===void 0?!0:u;if(!c||!e||!e.length)return null;var d=s.map(function(h){return Math.round(h+i-i)}).sort(function(h,g){return h-g});i!==d[0]&&d.unshift(0);var f=d.map(function(h,g){var b=!d[g+1],v=b?i+a-h:d[g+1]-h;if(v<=0)return null;var y=g%e.length;return G.createElement("rect",{key:"react-".concat(g),y:h,x:n,height:v,width:o,stroke:"none",fill:e[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function lae(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,i=t.fillOpacity,o=t.x,a=t.y,s=t.width,u=t.height,c=t.verticalPoints;if(!r||!n||!n.length)return null;var d=c.map(function(h){return Math.round(h+o-o)}).sort(function(h,g){return h-g});o!==d[0]&&d.unshift(0);var f=d.map(function(h,g){var b=!d[g+1],v=b?o+s-h:d[g+1]-h;if(v<=0)return null;var y=g%n.length;return G.createElement("rect",{key:"react-".concat(g),x:h,y:a,width:v,height:u,stroke:"none",fill:n[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var uae=function(e,r){var n=e.xAxis,i=e.width,o=e.height,a=e.offset;return xP(nb(nr(nr(nr({},Hs.defaultProps),n),{},{ticks:Yn(n,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.left,a.left+a.width,r)},cae=function(e,r){var n=e.yAxis,i=e.width,o=e.height,a=e.offset;return xP(nb(nr(nr(nr({},Hs.defaultProps),n),{},{ticks:Yn(n,!0),viewBox:{x:0,y:0,width:i,height:o}})),a.top,a.top+a.height,r)},ua={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function rh(t){var e,r,n,i,o,a,s=Zx(),u=eb(),c=Xie(),d=nr(nr({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:ua.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:ua.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:ua.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:ua.horizontalFill,vertical:(o=t.vertical)!==null&&o!==void 0?o:ua.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:ua.verticalFill,x:pe(t.x)?t.x:c.left,y:pe(t.y)?t.y:c.top,width:pe(t.width)?t.width:c.width,height:pe(t.height)?t.height:c.height}),f=d.x,h=d.y,g=d.width,b=d.height,v=d.syncWithTicks,y=d.horizontalValues,x=d.verticalValues,_=Kie(),w=Jie();if(!pe(g)||g<=0||!pe(b)||b<=0||!pe(f)||f!==+f||!pe(h)||h!==+h)return null;var E=d.verticalCoordinatesGenerator||uae,S=d.horizontalCoordinatesGenerator||cae,N=d.horizontalPoints,k=d.verticalPoints;if((!N||!N.length)&&$e(S)){var A=y&&y.length,C=S({yAxis:w?nr(nr({},w),{},{ticks:A?y:w.ticks}):void 0,width:s,height:u,offset:c},A?!0:v);ei(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Lo(C),"]")),Array.isArray(C)&&(N=C)}if((!k||!k.length)&&$e(E)){var R=x&&x.length,$=E({xAxis:_?nr(nr({},_),{},{ticks:R?x:_.ticks}):void 0,width:s,height:u,offset:c},R?!0:v);ei(Array.isArray($),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Lo($),"]")),Array.isArray($)&&(k=$)}return G.createElement("g",{className:"recharts-cartesian-grid"},G.createElement(iae,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),G.createElement(oae,_o({},d,{offset:c,horizontalPoints:N,xAxis:_,yAxis:w})),G.createElement(aae,_o({},d,{offset:c,verticalPoints:k,xAxis:_,yAxis:w})),G.createElement(sae,_o({},d,{horizontalPoints:N})),G.createElement(lae,_o({},d,{verticalPoints:k})))}rh.displayName="CartesianGrid";var dae=["type","layout","connectNulls","ref"],fae=["key"];function ws(t){"@babel/helpers - typeof";return ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ws(t)}function JN(t,e){if(t==null)return{};var r=hae(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function hae(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Vl(){return Vl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vl.apply(this,arguments)}function YN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Nr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YN(Object(r),!0).forEach(function(n){mn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ca(t){return yae(t)||gae(t)||mae(t)||pae()}function pae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mae(t,e){if(t){if(typeof t=="string")return w0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w0(t,e)}}function gae(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yae(t){if(Array.isArray(t))return w0(t)}function w0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fI(n.key),n)}}function xae(t,e,r){return e&&XN(t.prototype,e),r&&XN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function bae(t,e,r){return e=nh(e),wae(t,dI()?Reflect.construct(e,r||[],nh(t).constructor):e.apply(t,r))}function wae(t,e){if(e&&(ws(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _ae(t)}function _ae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dI=function(){return!!t})()}function nh(t){return nh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nh(t)}function Sae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_0(t,e)}function _0(t,e){return _0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},_0(t,e)}function mn(t,e,r){return e=fI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fI(t){var e=Nae(t,"string");return ws(e)=="symbol"?e:e+""}function Nae(t,e){if(ws(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ws(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vc=function(t){function e(){var r;vae(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r=bae(this,e,[].concat(i)),mn(r,"state",{isAnimationFinished:!0,totalLength:0}),mn(r,"generateSimpleStrokeDasharray",function(a,s){return"".concat(s,"px ").concat(a-s,"px")}),mn(r,"getStrokeDasharray",function(a,s,u){var c=u.reduce(function(x,_){return x+_});if(!c)return r.generateSimpleStrokeDasharray(s,a);for(var d=Math.floor(a/c),f=a%c,h=s-a,g=[],b=0,v=0;b<u.length;v+=u[b],++b)if(v+u[b]>f){g=[].concat(ca(u.slice(0,b)),[f-v]);break}var y=g.length%2===0?[0,h]:[h];return[].concat(ca(e.repeat(u,d)),ca(g),y).map(function(x){return"".concat(x,"px")}).join(", ")}),mn(r,"id",dc("recharts-line-")),mn(r,"pathRef",function(a){r.mainCurve=a}),mn(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),mn(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Sae(e,t),xae(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.points,s=o.xAxis,u=o.yAxis,c=o.layout,d=o.children,f=Yr(d,yc);if(!f)return null;var h=function(v,y){return{x:v.x,y:v.y,value:v.value,errorVal:Rr(v.payload,y)}},g={clipPath:n?"url(#clipPath-".concat(i,")"):null};return G.createElement(_t,g,f.map(function(b){return G.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:a,xAxis:s,yAxis:u,layout:c,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,i,o){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,u=s.dot,c=s.points,d=s.dataKey,f=Be(this.props,!1),h=Be(u,!0),g=c.map(function(v,y){var x=Nr(Nr(Nr({key:"dot-".concat(y),r:3},f),h),{},{index:y,cx:v.x,cy:v.y,value:v.value,dataKey:d,payload:v.payload,points:c});return e.renderDotItem(u,x)}),b={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return G.createElement(_t,Vl({className:"recharts-line-dots",key:"dots"},b),g)}},{key:"renderCurveStatically",value:function(n,i,o,a){var s=this.props,u=s.type,c=s.layout,d=s.connectNulls;s.ref;var f=JN(s,dae),h=Nr(Nr(Nr({},Be(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:n},a),{},{type:u,layout:c,connectNulls:d});return G.createElement(Zy,Vl({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,i){var o=this,a=this.props,s=a.points,u=a.strokeDasharray,c=a.isAnimationActive,d=a.animationBegin,f=a.animationDuration,h=a.animationEasing,g=a.animationId,b=a.animateNewValues,v=a.width,y=a.height,x=this.state,_=x.prevPoints,w=x.totalLength;return G.createElement(ui,{begin:d,duration:f,isActive:c,easing:h,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(E){var S=E.t;if(_){var N=_.length/s.length,k=s.map(function(L,M){var O=Math.floor(M*N);if(_[O]){var P=_[O],D=yn(P.x,L.x),B=yn(P.y,L.y);return Nr(Nr({},L),{},{x:D(S),y:B(S)})}if(b){var U=yn(v*2,L.x),W=yn(y/2,L.y);return Nr(Nr({},L),{},{x:U(S),y:W(S)})}return Nr(Nr({},L),{},{x:L.x,y:L.y})});return o.renderCurveStatically(k,n,i)}var A=yn(0,w),C=A(S),R;if(u){var $="".concat(u).split(/[,\s]+/gim).map(function(L){return parseFloat(L)});R=o.getStrokeDasharray(C,w,$)}else R=o.generateSimpleStrokeDasharray(w,C);return o.renderCurveStatically(s,n,i,{strokeDasharray:R})})}},{key:"renderCurve",value:function(n,i){var o=this.props,a=o.points,s=o.isAnimationActive,u=this.state,c=u.prevPoints,d=u.totalLength;return s&&a&&a.length&&(!c&&d>0||!yp(c,a))?this.renderCurveWithAnimation(n,i):this.renderCurveStatically(a,n,i)}},{key:"render",value:function(){var n,i=this.props,o=i.hide,a=i.dot,s=i.points,u=i.className,c=i.xAxis,d=i.yAxis,f=i.top,h=i.left,g=i.width,b=i.height,v=i.isAnimationActive,y=i.id;if(o||!s||!s.length)return null;var x=this.state.isAnimationFinished,_=s.length===1,w=Ge("recharts-line",u),E=c&&c.allowDataOverflow,S=d&&d.allowDataOverflow,N=E||S,k=Le(y)?this.id:y,A=(n=Be(a,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},C=A.r,R=C===void 0?3:C,$=A.strokeWidth,L=$===void 0?2:$,M=MB(a)?a:{},O=M.clipDot,P=O===void 0?!0:O,D=R*2+L;return G.createElement(_t,{className:w},E||S?G.createElement("defs",null,G.createElement("clipPath",{id:"clipPath-".concat(k)},G.createElement("rect",{x:E?h:h-g/2,y:S?f:f-b/2,width:E?g:g*2,height:S?b:b*2})),!P&&G.createElement("clipPath",{id:"clipPath-dots-".concat(k)},G.createElement("rect",{x:h-D/2,y:f-D/2,width:g+D,height:b+D}))):null,!_&&this.renderCurve(N,k),this.renderErrorBar(N,k),(_||a)&&this.renderDots(N,P,k),(!v||x)&&qi.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,i){for(var o=n.length%2!==0?[].concat(ca(n),[0]):n,a=[],s=0;s<i;++s)a=[].concat(ca(a),ca(o));return a}},{key:"renderDotItem",value:function(n,i){var o;if(G.isValidElement(n))o=G.cloneElement(n,i);else if($e(n))o=n(i);else{var a=i.key,s=JN(i,fae),u=Ge("recharts-line-dot",typeof n!="boolean"?n.className:"");o=G.createElement(Jx,Vl({key:a},s,{className:u}))}return o}}])}(T.PureComponent);mn(vc,"displayName","Line");mn(vc,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Bs.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});mn(vc,"getComposedData",function(t){var e=t.props,r=t.xAxis,n=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,a=t.dataKey,s=t.bandSize,u=t.displayedData,c=t.offset,d=e.layout,f=u.map(function(h,g){var b=Rr(h,a);return d==="horizontal"?{x:RS({axis:r,ticks:i,bandSize:s,entry:h,index:g}),y:Le(b)?null:n.scale(b),value:b,payload:h}:{x:Le(b)?null:r.scale(b),y:RS({axis:n,ticks:o,bandSize:s,entry:h,index:g}),value:b,payload:h}});return Nr({points:f,layout:d},c)});function _s(t){"@babel/helpers - typeof";return _s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_s(t)}function Eae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mI(n.key),n)}}function Tae(t,e,r){return e&&kae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cae(t,e,r){return e=ih(e),Aae(t,hI()?Reflect.construct(e,r||[],ih(t).constructor):e.apply(t,r))}function Aae(t,e){if(e&&(_s(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jae(t)}function jae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hI=function(){return!!t})()}function ih(t){return ih=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ih(t)}function Pae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S0(t,e)}function S0(t,e){return S0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},S0(t,e)}function pI(t,e,r){return e=mI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mI(t){var e=Iae(t,"string");return _s(e)=="symbol"?e:e+""}function Iae(t,e){if(_s(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_s(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function N0(){return N0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},N0.apply(this,arguments)}function Oae(t){var e=t.xAxisId,r=Zx(),n=eb(),i=ZP(e);return i==null?null:T.createElement(Hs,N0({},i,{className:Ge("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(a){return Yn(a,!0)}}))}var Uo=function(t){function e(){return Eae(this,e),Cae(this,e,arguments)}return Pae(e,t),Tae(e,[{key:"render",value:function(){return T.createElement(Oae,this.props)}}])}(T.Component);pI(Uo,"displayName","XAxis");pI(Uo,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ss(t){"@babel/helpers - typeof";return Ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ss(t)}function Rae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vI(n.key),n)}}function $ae(t,e,r){return e&&Mae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dae(t,e,r){return e=oh(e),Lae(t,gI()?Reflect.construct(e,r||[],oh(t).constructor):e.apply(t,r))}function Lae(t,e){if(e&&(Ss(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uae(t)}function Uae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gI=function(){return!!t})()}function oh(t){return oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},oh(t)}function Fae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E0(t,e)}function E0(t,e){return E0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},E0(t,e)}function yI(t,e,r){return e=vI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vI(t){var e=Bae(t,"string");return Ss(e)=="symbol"?e:e+""}function Bae(t,e){if(Ss(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ss(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function k0(){return k0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},k0.apply(this,arguments)}var qae=function(e){var r=e.yAxisId,n=Zx(),i=eb(),o=eI(r);return o==null?null:T.createElement(Hs,k0({},o,{className:Ge("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(s){return Yn(s,!0)}}))},Fo=function(t){function e(){return Rae(this,e),Dae(this,e,arguments)}return Fae(e,t),$ae(e,[{key:"render",value:function(){return T.createElement(qae,this.props)}}])}(T.Component);yI(Fo,"displayName","YAxis");yI(Fo,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function QN(t){return zae(t)||Hae(t)||Gae(t)||Vae()}function Vae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gae(t,e){if(t){if(typeof t=="string")return T0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T0(t,e)}}function Hae(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zae(t){if(Array.isArray(t))return T0(t)}function T0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var C0=function(e,r,n,i,o){var a=Yr(e,rb),s=Yr(e,Np),u=[].concat(QN(a),QN(s)),c=Yr(e,kp),d="".concat(i,"Id"),f=i[0],h=r;if(u.length&&(h=u.reduce(function(v,y){if(y.props[d]===n&&Un(y.props,"extendDomain")&&pe(y.props[f])){var x=y.props[f];return[Math.min(v[0],x),Math.max(v[1],x)]}return v},h)),c.length){var g="".concat(f,"1"),b="".concat(f,"2");h=c.reduce(function(v,y){if(y.props[d]===n&&Un(y.props,"extendDomain")&&pe(y.props[g])&&pe(y.props[b])){var x=y.props[g],_=y.props[b];return[Math.min(v[0],x,_),Math.max(v[1],x,_)]}return v},h)}return o&&o.length&&(h=o.reduce(function(v,y){return pe(y)?[Math.min(v[0],y),Math.max(v[1],y)]:v},h)),h},xI={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(u,c,d){this.fn=u,this.context=c,this.once=d||!1}function o(u,c,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new i(d,f||u,h),b=r?r+c:c;return u._events[b]?u._events[b].fn?u._events[b]=[u._events[b],g]:u._events[b].push(g):(u._events[b]=g,u._eventsCount++),u}function a(u,c){--u._eventsCount===0?u._events=new n:delete u._events[c]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],d,f;if(this._eventsCount===0)return c;for(f in d=this._events)e.call(d,f)&&c.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(d)):c},s.prototype.listeners=function(c){var d=r?r+c:c,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,g=f.length,b=new Array(g);h<g;h++)b[h]=f[h].fn;return b},s.prototype.listenerCount=function(c){var d=r?r+c:c,f=this._events[d];return f?f.fn?1:f.length:0},s.prototype.emit=function(c,d,f,h,g,b){var v=r?r+c:c;if(!this._events[v])return!1;var y=this._events[v],x=arguments.length,_,w;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),x){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,f),!0;case 4:return y.fn.call(y.context,d,f,h),!0;case 5:return y.fn.call(y.context,d,f,h,g),!0;case 6:return y.fn.call(y.context,d,f,h,g,b),!0}for(w=1,_=new Array(x-1);w<x;w++)_[w-1]=arguments[w];y.fn.apply(y.context,_)}else{var E=y.length,S;for(w=0;w<E;w++)switch(y[w].once&&this.removeListener(c,y[w].fn,void 0,!0),x){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,d);break;case 3:y[w].fn.call(y[w].context,d,f);break;case 4:y[w].fn.call(y[w].context,d,f,h);break;default:if(!_)for(S=1,_=new Array(x-1);S<x;S++)_[S-1]=arguments[S];y[w].fn.apply(y[w].context,_)}}return!0},s.prototype.on=function(c,d,f){return o(this,c,d,f,!1)},s.prototype.once=function(c,d,f){return o(this,c,d,f,!0)},s.prototype.removeListener=function(c,d,f,h){var g=r?r+c:c;if(!this._events[g])return this;if(!d)return a(this,g),this;var b=this._events[g];if(b.fn)b.fn===d&&(!h||b.once)&&(!f||b.context===f)&&a(this,g);else{for(var v=0,y=[],x=b.length;v<x;v++)(b[v].fn!==d||h&&!b[v].once||f&&b[v].context!==f)&&y.push(b[v]);y.length?this._events[g]=y.length===1?y[0]:y:a(this,g)}return this},s.prototype.removeAllListeners=function(c){var d;return c?(d=r?r+c:c,this._events[d]&&a(this,d)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,t.exports=s})(xI);var Wae=xI.exports;const Kae=Qe(Wae);var Wm=new Kae,Km="recharts.syncMouseEvents";function Yu(t){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yu(t)}function Jae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bI(n.key),n)}}function Xae(t,e,r){return e&&Yae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jm(t,e,r){return e=bI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bI(t){var e=Qae(t,"string");return Yu(e)=="symbol"?e:e+""}function Qae(t,e){if(Yu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Zae=function(){function t(){Jae(this,t),Jm(this,"activeIndex",0),Jm(this,"coordinateList",[]),Jm(this,"layout","horizontal")}return Xae(t,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,o=i===void 0?null:i,a=r.container,s=a===void 0?null:a,u=r.layout,c=u===void 0?null:u,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,g=h===void 0?null:h;this.coordinateList=(n=o??this.coordinateList)!==null&&n!==void 0?n:[],this.container=s??this.container,this.layout=c??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,a=i.y,s=i.height,u=this.coordinateList[this.activeIndex].coordinate,c=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=o+u+c,h=a+this.offset.top+s/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function ese(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],i=t==null?void 0:t[1];if(n&&i&&pe(n)&&pe(i))return!0}return!1}function tse(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function wI(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,o=t.endAngle,a=Kt(e,r,n,i),s=Kt(e,r,n,o);return{points:[a,s],cx:e,cy:r,radius:n,startAngle:i,endAngle:o}}function rse(t,e,r){var n,i,o,a;if(t==="horizontal")n=e.x,o=n,i=r.top,a=r.top+r.height;else if(t==="vertical")i=e.y,a=i,n=r.left,o=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,u=e.cy,c=e.innerRadius,d=e.outerRadius,f=e.angle,h=Kt(s,u,c,f),g=Kt(s,u,d,f);n=h.x,i=h.y,o=g.x,a=g.y}else return wI(e);return[{x:n,y:i},{x:o,y:a}]}function Xu(t){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xu(t)}function ZN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function rd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZN(Object(r),!0).forEach(function(n){nse(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nse(t,e,r){return e=ise(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ise(t){var e=ose(t,"string");return Xu(e)=="symbol"?e:e+""}function ose(t,e){if(Xu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ase(t){var e,r,n=t.element,i=t.tooltipEventType,o=t.isActive,a=t.activeCoordinate,s=t.activePayload,u=t.offset,c=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,g=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!g||!o||!a||h!=="ScatterChart"&&i!=="axis")return null;var b,v=Zy;if(h==="ScatterChart")b=a,v=are;else if(h==="BarChart")b=tse(f,a,u,d),v=Kx;else if(f==="radial"){var y=wI(a),x=y.cx,_=y.cy,w=y.radius,E=y.startAngle,S=y.endAngle;b={cx:x,cy:_,startAngle:E,endAngle:S,innerRadius:w,outerRadius:w},v=NP}else b={points:rse(f,a,u)},v=Zy;var N=rd(rd(rd(rd({stroke:"#ccc",pointerEvents:"none"},u),b),Be(g,!1)),{},{payload:s,payloadIndex:c,className:Ge("recharts-tooltip-cursor",g.className)});return T.isValidElement(g)?T.cloneElement(g,N):T.createElement(v,N)}var sse=["item"],lse=["children","className","width","height","style","compact","title","desc"];function Ns(t){"@babel/helpers - typeof";return Ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ns(t)}function ja(){return ja=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ja.apply(this,arguments)}function eE(t,e){return dse(t)||cse(t,e)||SI(t,e)||use()}function use(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cse(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,e!==0)for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(d){c=!0,i=d}finally{try{if(!u&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}function dse(t){if(Array.isArray(t))return t}function tE(t,e){if(t==null)return{};var r=fse(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fse(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function hse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pse(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NI(n.key),n)}}function mse(t,e,r){return e&&pse(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gse(t,e,r){return e=ah(e),yse(t,_I()?Reflect.construct(e,r||[],ah(t).constructor):e.apply(t,r))}function yse(t,e){if(e&&(Ns(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vse(t)}function vse(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _I(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_I=function(){return!!t})()}function ah(t){return ah=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ah(t)}function xse(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A0(t,e)}function A0(t,e){return A0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},A0(t,e)}function Es(t){return _se(t)||wse(t)||SI(t)||bse()}function bse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SI(t,e){if(t){if(typeof t=="string")return j0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j0(t,e)}}function wse(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _se(t){if(Array.isArray(t))return j0(t)}function j0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ne(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rE(Object(r),!0).forEach(function(n){Ae(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rE(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ae(t,e,r){return e=NI(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NI(t){var e=Sse(t,"string");return Ns(e)=="symbol"?e:e+""}function Sse(t,e){if(Ns(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ns(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nse={xAxis:["bottom","top"],yAxis:["left","right"]},Ese={width:"100%",height:"100%"},EI={x:0,y:0};function nd(t){return t}var kse=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},Tse=function(e,r,n,i){var o=r.find(function(d){return d&&d.index===n});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,s=i.radius;return ne(ne(ne({},i),Kt(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var u=o.coordinate,c=i.angle;return ne(ne(ne({},i),Kt(i.cx,i.cy,u,c)),{},{angle:c,radius:u})}return EI},Tp=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,o=r.dataEndIndex,a=(n??[]).reduce(function(s,u){var c=u.props.data;return c&&c.length?[].concat(Es(s),Es(c)):s},[]);return a.length>0?a:e&&e.length&&pe(i)&&pe(o)?e.slice(i,o+1):[]};function kI(t){return t==="number"?[0,"auto"]:void 0}var P0=function(e,r,n,i){var o=e.graphicalItems,a=e.tooltipAxis,s=Tp(r,e);return n<0||!o||!o.length||n>=s.length?null:o.reduce(function(u,c){var d,f=(d=c.props.data)!==null&&d!==void 0?d:r;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var g=f===void 0?s:f;h=af(g,a.dataKey,i)}else h=f&&f[n]||s[n];return h?[].concat(Es(u),[wP(c,h)]):u},[])},nE=function(e,r,n,i){var o=i||{x:e.chartX,y:e.chartY},a=kse(o,n),s=e.orderedTooltipTicks,u=e.tooltipAxis,c=e.tooltipTicks,d=LQ(a,s,c,u);if(d>=0&&c){var f=c[d]&&c[d].value,h=P0(e,r,d,f),g=Tse(n,s,d,o);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:g}}return null},Cse=function(e,r){var n=r.axes,i=r.graphicalItems,o=r.axisType,a=r.axisIdKey,s=r.stackGroups,u=r.dataStartIndex,c=r.dataEndIndex,d=e.layout,f=e.children,h=e.stackOffset,g=vP(d,o);return n.reduce(function(b,v){var y,x=v.type.defaultProps!==void 0?ne(ne({},v.type.defaultProps),v.props):v.props,_=x.type,w=x.dataKey,E=x.allowDataOverflow,S=x.allowDuplicatedCategory,N=x.scale,k=x.ticks,A=x.includeHidden,C=x[a];if(b[C])return b;var R=Tp(e.data,{graphicalItems:i.filter(function(Y){var ye,I=a in Y.props?Y.props[a]:(ye=Y.type.defaultProps)===null||ye===void 0?void 0:ye[a];return I===C}),dataStartIndex:u,dataEndIndex:c}),$=R.length,L,M,O;ese(x.domain,E,_)&&(L=Ky(x.domain,null,E),g&&(_==="number"||N!=="auto")&&(O=Bl(R,w,"category")));var P=kI(_);if(!L||L.length===0){var D,B=(D=x.domain)!==null&&D!==void 0?D:P;if(w){if(L=Bl(R,w,_),_==="category"&&g){var U=EB(L);S&&U?(M=L,L=zf(0,$)):S||(L=LS(B,L,v).reduce(function(Y,ye){return Y.indexOf(ye)>=0?Y:[].concat(Es(Y),[ye])},[]))}else if(_==="category")S?L=L.filter(function(Y){return Y!==""&&!Le(Y)}):L=LS(B,L,v).reduce(function(Y,ye){return Y.indexOf(ye)>=0||ye===""||Le(ye)?Y:[].concat(Es(Y),[ye])},[]);else if(_==="number"){var W=VQ(R,i.filter(function(Y){var ye,I,Z=a in Y.props?Y.props[a]:(ye=Y.type.defaultProps)===null||ye===void 0?void 0:ye[a],ce="hide"in Y.props?Y.props.hide:(I=Y.type.defaultProps)===null||I===void 0?void 0:I.hide;return Z===C&&(A||!ce)}),w,o,d);W&&(L=W)}g&&(_==="number"||N!=="auto")&&(O=Bl(R,w,"category"))}else g?L=zf(0,$):s&&s[C]&&s[C].hasStack&&_==="number"?L=h==="expand"?[0,1]:bP(s[C].stackGroups,u,c):L=yP(R,i.filter(function(Y){var ye=a in Y.props?Y.props[a]:Y.type.defaultProps[a],I="hide"in Y.props?Y.props.hide:Y.type.defaultProps.hide;return ye===C&&(A||!I)}),_,d,!0);if(_==="number")L=C0(f,L,C,o,k),B&&(L=Ky(B,L,E));else if(_==="category"&&B){var K=B,re=L.every(function(Y){return K.indexOf(Y)>=0});re&&(L=K)}}return ne(ne({},b),{},Ae({},C,ne(ne({},x),{},{axisType:o,domain:L,categoricalDomain:O,duplicateDomain:M,originalDomain:(y=x.domain)!==null&&y!==void 0?y:P,isCategorical:g,layout:d})))},{})},Ase=function(e,r){var n=r.graphicalItems,i=r.Axis,o=r.axisType,a=r.axisIdKey,s=r.stackGroups,u=r.dataStartIndex,c=r.dataEndIndex,d=e.layout,f=e.children,h=Tp(e.data,{graphicalItems:n,dataStartIndex:u,dataEndIndex:c}),g=h.length,b=vP(d,o),v=-1;return n.reduce(function(y,x){var _=x.type.defaultProps!==void 0?ne(ne({},x.type.defaultProps),x.props):x.props,w=_[a],E=kI("number");if(!y[w]){v++;var S;return b?S=zf(0,g):s&&s[w]&&s[w].hasStack?(S=bP(s[w].stackGroups,u,c),S=C0(f,S,w,o)):(S=Ky(E,yP(h,n.filter(function(N){var k,A,C=a in N.props?N.props[a]:(k=N.type.defaultProps)===null||k===void 0?void 0:k[a],R="hide"in N.props?N.props.hide:(A=N.type.defaultProps)===null||A===void 0?void 0:A.hide;return C===w&&!R}),"number",d),i.defaultProps.allowDataOverflow),S=C0(f,S,w,o)),ne(ne({},y),{},Ae({},w,ne(ne({axisType:o},i.defaultProps),{},{hide:!0,orientation:Jr(Nse,"".concat(o,".").concat(v%2),null),domain:S,originalDomain:E,isCategorical:b,layout:d})))}return y},{})},jse=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,o=r.AxisComp,a=r.graphicalItems,s=r.stackGroups,u=r.dataStartIndex,c=r.dataEndIndex,d=e.children,f="".concat(i,"Id"),h=Yr(d,o),g={};return h&&h.length?g=Cse(e,{axes:h,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:u,dataEndIndex:c}):a&&a.length&&(g=Ase(e,{Axis:o,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:u,dataEndIndex:c})),g},Pse=function(e){var r=Ti(e),n=Yn(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:wx(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:$f(r,n)}},iE=function(e){var r=e.children,n=e.defaultShowTooltip,i=Tr(r,ms),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!n}},Ise=function(e){return!e||!e.length?!1:e.some(function(r){var n=Zn(r&&r.type);return n&&n.indexOf("Bar")>=0})},oE=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Ose=function(e,r){var n=e.props,i=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,s=e.yAxisMap,u=s===void 0?{}:s,c=n.width,d=n.height,f=n.children,h=n.margin||{},g=Tr(f,ms),b=Tr(f,Ba),v=Object.keys(u).reduce(function(S,N){var k=u[N],A=k.orientation;return!k.mirror&&!k.hide?ne(ne({},S),{},Ae({},A,S[A]+k.width)):S},{left:h.left||0,right:h.right||0}),y=Object.keys(a).reduce(function(S,N){var k=a[N],A=k.orientation;return!k.mirror&&!k.hide?ne(ne({},S),{},Ae({},A,Jr(S,"".concat(A))+k.height)):S},{top:h.top||0,bottom:h.bottom||0}),x=ne(ne({},y),v),_=x.bottom;g&&(x.bottom+=g.props.height||ms.defaultProps.height),b&&r&&(x=BQ(x,i,n,r));var w=c-x.left-x.right,E=d-x.top-x.bottom;return ne(ne({brushBottom:_},x),{},{width:Math.max(w,0),height:Math.max(E,0)})},Rse=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},TI=function(e){var r=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,o=i===void 0?"axis":i,a=e.validateTooltipEventTypes,s=a===void 0?["axis"]:a,u=e.axisComponents,c=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,h=function(x,_){var w=_.graphicalItems,E=_.stackGroups,S=_.offset,N=_.updateId,k=_.dataStartIndex,A=_.dataEndIndex,C=x.barSize,R=x.layout,$=x.barGap,L=x.barCategoryGap,M=x.maxBarSize,O=oE(R),P=O.numericAxisName,D=O.cateAxisName,B=Ise(w),U=[];return w.forEach(function(W,K){var re=Tp(x.data,{graphicalItems:[W],dataStartIndex:k,dataEndIndex:A}),Y=W.type.defaultProps!==void 0?ne(ne({},W.type.defaultProps),W.props):W.props,ye=Y.dataKey,I=Y.maxBarSize,Z=Y["".concat(P,"Id")],ce=Y["".concat(D,"Id")],ve={},Ie=u.reduce(function(_e,q){var V=_["".concat(q.axisType,"Map")],de=Y["".concat(q.axisType,"Id")];V&&V[de]||q.axisType==="zAxis"||Do();var z=V[de];return ne(ne({},_e),{},Ae(Ae({},q.axisType,z),"".concat(q.axisType,"Ticks"),Yn(z)))},ve),se=Ie[D],Ne=Ie["".concat(D,"Ticks")],J=E&&E[Z]&&E[Z].hasStack&&tZ(W,E[Z].stackGroups),X=Zn(W.type).indexOf("Bar")>=0,ke=$f(se,Ne),Se=[],ee=B&&UQ({barSize:C,stackGroups:E,totalSize:Rse(Ie,D)});if(X){var fe,te,Re=Le(I)?M:I,qe=(fe=(te=$f(se,Ne,!0))!==null&&te!==void 0?te:Re)!==null&&fe!==void 0?fe:0;Se=FQ({barGap:$,barCategoryGap:L,bandSize:qe!==ke?qe:ke,sizeList:ee[ce],maxBarSize:Re}),qe!==ke&&(Se=Se.map(function(_e){return ne(ne({},_e),{},{position:ne(ne({},_e.position),{},{offset:_e.position.offset-qe/2})})}))}var ie=W&&W.type&&W.type.getComposedData;ie&&U.push({props:ne(ne({},ie(ne(ne({},Ie),{},{displayedData:re,props:x,dataKey:ye,item:W,bandSize:ke,barPosition:Se,offset:S,stackedData:J,layout:R,dataStartIndex:k,dataEndIndex:A}))),{},Ae(Ae(Ae({key:W.key||"item-".concat(K)},P,Ie[P]),D,Ie[D]),"animationId",N)),childIndex:LB(W,x.children),item:W})}),U},g=function(x,_){var w=x.props,E=x.dataStartIndex,S=x.dataEndIndex,N=x.updateId;if(!P_({props:w}))return null;var k=w.children,A=w.layout,C=w.stackOffset,R=w.data,$=w.reverseStackOrder,L=oE(A),M=L.numericAxisName,O=L.cateAxisName,P=Yr(k,n),D=QQ(R,P,"".concat(M,"Id"),"".concat(O,"Id"),C,$),B=u.reduce(function(Y,ye){var I="".concat(ye.axisType,"Map");return ne(ne({},Y),{},Ae({},I,jse(w,ne(ne({},ye),{},{graphicalItems:P,stackGroups:ye.axisType===M&&D,dataStartIndex:E,dataEndIndex:S}))))},{}),U=Ose(ne(ne({},B),{},{props:w,graphicalItems:P}),_==null?void 0:_.legendBBox);Object.keys(B).forEach(function(Y){B[Y]=d(w,B[Y],U,Y.replace("Map",""),r)});var W=B["".concat(O,"Map")],K=Pse(W),re=h(w,ne(ne({},B),{},{dataStartIndex:E,dataEndIndex:S,updateId:N,graphicalItems:P,stackGroups:D,offset:U}));return ne(ne({formattedGraphicalItems:re,graphicalItems:P,offset:U,stackGroups:D},K),B)},b=function(y){function x(_){var w,E,S;return hse(this,x),S=gse(this,x,[_]),Ae(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ae(S,"accessibilityManager",new Zae),Ae(S,"handleLegendBBoxUpdate",function(N){if(N){var k=S.state,A=k.dataStartIndex,C=k.dataEndIndex,R=k.updateId;S.setState(ne({legendBBox:N},g({props:S.props,dataStartIndex:A,dataEndIndex:C,updateId:R},ne(ne({},S.state),{},{legendBBox:N}))))}}),Ae(S,"handleReceiveSyncEvent",function(N,k,A){if(S.props.syncId===N){if(A===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(k)}}),Ae(S,"handleBrushChange",function(N){var k=N.startIndex,A=N.endIndex;if(k!==S.state.dataStartIndex||A!==S.state.dataEndIndex){var C=S.state.updateId;S.setState(function(){return ne({dataStartIndex:k,dataEndIndex:A},g({props:S.props,dataStartIndex:k,dataEndIndex:A,updateId:C},S.state))}),S.triggerSyncEvent({dataStartIndex:k,dataEndIndex:A})}}),Ae(S,"handleMouseEnter",function(N){var k=S.getMouseInfo(N);if(k){var A=ne(ne({},k),{},{isTooltipActive:!0});S.setState(A),S.triggerSyncEvent(A);var C=S.props.onMouseEnter;$e(C)&&C(A,N)}}),Ae(S,"triggeredAfterMouseMove",function(N){var k=S.getMouseInfo(N),A=k?ne(ne({},k),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(A),S.triggerSyncEvent(A);var C=S.props.onMouseMove;$e(C)&&C(A,N)}),Ae(S,"handleItemMouseEnter",function(N){S.setState(function(){return{isTooltipActive:!0,activeItem:N,activePayload:N.tooltipPayload,activeCoordinate:N.tooltipPosition||{x:N.cx,y:N.cy}}})}),Ae(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),Ae(S,"handleMouseMove",function(N){N.persist(),S.throttleTriggeredAfterMouseMove(N)}),Ae(S,"handleMouseLeave",function(N){S.throttleTriggeredAfterMouseMove.cancel();var k={isTooltipActive:!1};S.setState(k),S.triggerSyncEvent(k);var A=S.props.onMouseLeave;$e(A)&&A(k,N)}),Ae(S,"handleOuterEvent",function(N){var k=DB(N),A=Jr(S.props,"".concat(k));if(k&&$e(A)){var C,R;/.*touch.*/i.test(k)?R=S.getMouseInfo(N.changedTouches[0]):R=S.getMouseInfo(N),A((C=R)!==null&&C!==void 0?C:{},N)}}),Ae(S,"handleClick",function(N){var k=S.getMouseInfo(N);if(k){var A=ne(ne({},k),{},{isTooltipActive:!0});S.setState(A),S.triggerSyncEvent(A);var C=S.props.onClick;$e(C)&&C(A,N)}}),Ae(S,"handleMouseDown",function(N){var k=S.props.onMouseDown;if($e(k)){var A=S.getMouseInfo(N);k(A,N)}}),Ae(S,"handleMouseUp",function(N){var k=S.props.onMouseUp;if($e(k)){var A=S.getMouseInfo(N);k(A,N)}}),Ae(S,"handleTouchMove",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(N.changedTouches[0])}),Ae(S,"handleTouchStart",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&S.handleMouseDown(N.changedTouches[0])}),Ae(S,"handleTouchEnd",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&S.handleMouseUp(N.changedTouches[0])}),Ae(S,"handleDoubleClick",function(N){var k=S.props.onDoubleClick;if($e(k)){var A=S.getMouseInfo(N);k(A,N)}}),Ae(S,"handleContextMenu",function(N){var k=S.props.onContextMenu;if($e(k)){var A=S.getMouseInfo(N);k(A,N)}}),Ae(S,"triggerSyncEvent",function(N){S.props.syncId!==void 0&&Wm.emit(Km,S.props.syncId,N,S.eventEmitterSymbol)}),Ae(S,"applySyncEvent",function(N){var k=S.props,A=k.layout,C=k.syncMethod,R=S.state.updateId,$=N.dataStartIndex,L=N.dataEndIndex;if(N.dataStartIndex!==void 0||N.dataEndIndex!==void 0)S.setState(ne({dataStartIndex:$,dataEndIndex:L},g({props:S.props,dataStartIndex:$,dataEndIndex:L,updateId:R},S.state)));else if(N.activeTooltipIndex!==void 0){var M=N.chartX,O=N.chartY,P=N.activeTooltipIndex,D=S.state,B=D.offset,U=D.tooltipTicks;if(!B)return;if(typeof C=="function")P=C(U,N);else if(C==="value"){P=-1;for(var W=0;W<U.length;W++)if(U[W].value===N.activeLabel){P=W;break}}var K=ne(ne({},B),{},{x:B.left,y:B.top}),re=Math.min(M,K.x+K.width),Y=Math.min(O,K.y+K.height),ye=U[P]&&U[P].value,I=P0(S.state,S.props.data,P),Z=U[P]?{x:A==="horizontal"?U[P].coordinate:re,y:A==="horizontal"?Y:U[P].coordinate}:EI;S.setState(ne(ne({},N),{},{activeLabel:ye,activeCoordinate:Z,activePayload:I,activeTooltipIndex:P}))}else S.setState(N)}),Ae(S,"renderCursor",function(N){var k,A=S.state,C=A.isTooltipActive,R=A.activeCoordinate,$=A.activePayload,L=A.offset,M=A.activeTooltipIndex,O=A.tooltipAxisBandSize,P=S.getTooltipEventType(),D=(k=N.props.active)!==null&&k!==void 0?k:C,B=S.props.layout,U=N.key||"_recharts-cursor";return G.createElement(ase,{key:U,activeCoordinate:R,activePayload:$,activeTooltipIndex:M,chartName:r,element:N,isActive:D,layout:B,offset:L,tooltipAxisBandSize:O,tooltipEventType:P})}),Ae(S,"renderPolarAxis",function(N,k,A){var C=Jr(N,"type.axisType"),R=Jr(S.state,"".concat(C,"Map")),$=N.type.defaultProps,L=$!==void 0?ne(ne({},$),N.props):N.props,M=R&&R[L["".concat(C,"Id")]];return T.cloneElement(N,ne(ne({},M),{},{className:Ge(C,M.className),key:N.key||"".concat(k,"-").concat(A),ticks:Yn(M,!0)}))}),Ae(S,"renderPolarGrid",function(N){var k=N.props,A=k.radialLines,C=k.polarAngles,R=k.polarRadius,$=S.state,L=$.radiusAxisMap,M=$.angleAxisMap,O=Ti(L),P=Ti(M),D=P.cx,B=P.cy,U=P.innerRadius,W=P.outerRadius;return T.cloneElement(N,{polarAngles:Array.isArray(C)?C:Yn(P,!0).map(function(K){return K.coordinate}),polarRadius:Array.isArray(R)?R:Yn(O,!0).map(function(K){return K.coordinate}),cx:D,cy:B,innerRadius:U,outerRadius:W,key:N.key||"polar-grid",radialLines:A})}),Ae(S,"renderLegend",function(){var N=S.state.formattedGraphicalItems,k=S.props,A=k.children,C=k.width,R=k.height,$=S.props.margin||{},L=C-($.left||0)-($.right||0),M=mP({children:A,formattedGraphicalItems:N,legendWidth:L,legendContent:c});if(!M)return null;var O=M.item,P=tE(M,sse);return T.cloneElement(O,ne(ne({},P),{},{chartWidth:C,chartHeight:R,margin:$,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),Ae(S,"renderTooltip",function(){var N,k=S.props,A=k.children,C=k.accessibilityLayer,R=Tr(A,Br);if(!R)return null;var $=S.state,L=$.isTooltipActive,M=$.activeCoordinate,O=$.activePayload,P=$.activeLabel,D=$.offset,B=(N=R.props.active)!==null&&N!==void 0?N:L;return T.cloneElement(R,{viewBox:ne(ne({},D),{},{x:D.left,y:D.top}),active:B,label:P,payload:B?O:[],coordinate:M,accessibilityLayer:C})}),Ae(S,"renderBrush",function(N){var k=S.props,A=k.margin,C=k.data,R=S.state,$=R.offset,L=R.dataStartIndex,M=R.dataEndIndex,O=R.updateId;return T.cloneElement(N,{key:N.key||"_recharts-brush",onChange:Qc(S.handleBrushChange,N.props.onChange),data:C,x:pe(N.props.x)?N.props.x:$.left,y:pe(N.props.y)?N.props.y:$.top+$.height+$.brushBottom-(A.bottom||0),width:pe(N.props.width)?N.props.width:$.width,startIndex:L,endIndex:M,updateId:"brush-".concat(O)})}),Ae(S,"renderReferenceElement",function(N,k,A){if(!N)return null;var C=S,R=C.clipPathId,$=S.state,L=$.xAxisMap,M=$.yAxisMap,O=$.offset,P=N.type.defaultProps||{},D=N.props,B=D.xAxisId,U=B===void 0?P.xAxisId:B,W=D.yAxisId,K=W===void 0?P.yAxisId:W;return T.cloneElement(N,{key:N.key||"".concat(k,"-").concat(A),xAxis:L[U],yAxis:M[K],viewBox:{x:O.left,y:O.top,width:O.width,height:O.height},clipPathId:R})}),Ae(S,"renderActivePoints",function(N){var k=N.item,A=N.activePoint,C=N.basePoint,R=N.childIndex,$=N.isRange,L=[],M=k.props.key,O=k.item.type.defaultProps!==void 0?ne(ne({},k.item.type.defaultProps),k.item.props):k.item.props,P=O.activeDot,D=O.dataKey,B=ne(ne({index:R,dataKey:D,cx:A.x,cy:A.y,r:4,fill:Wx(k.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},Be(P,!1)),sf(P));return L.push(x.renderActiveDot(P,B,"".concat(M,"-activePoint-").concat(R))),C?L.push(x.renderActiveDot(P,ne(ne({},B),{},{cx:C.x,cy:C.y}),"".concat(M,"-basePoint-").concat(R))):$&&L.push(null),L}),Ae(S,"renderGraphicChild",function(N,k,A){var C=S.filterFormatItem(N,k,A);if(!C)return null;var R=S.getTooltipEventType(),$=S.state,L=$.isTooltipActive,M=$.tooltipAxis,O=$.activeTooltipIndex,P=$.activeLabel,D=S.props.children,B=Tr(D,Br),U=C.props,W=U.points,K=U.isRange,re=U.baseLine,Y=C.item.type.defaultProps!==void 0?ne(ne({},C.item.type.defaultProps),C.item.props):C.item.props,ye=Y.activeDot,I=Y.hide,Z=Y.activeBar,ce=Y.activeShape,ve=!!(!I&&L&&B&&(ye||Z||ce)),Ie={};R!=="axis"&&B&&B.props.trigger==="click"?Ie={onClick:Qc(S.handleItemMouseEnter,N.props.onClick)}:R!=="axis"&&(Ie={onMouseLeave:Qc(S.handleItemMouseLeave,N.props.onMouseLeave),onMouseEnter:Qc(S.handleItemMouseEnter,N.props.onMouseEnter)});var se=T.cloneElement(N,ne(ne({},C.props),Ie));function Ne(q){return typeof M.dataKey=="function"?M.dataKey(q.payload):null}if(ve)if(O>=0){var J,X;if(M.dataKey&&!M.allowDuplicatedCategory){var ke=typeof M.dataKey=="function"?Ne:"payload.".concat(M.dataKey.toString());J=af(W,ke,P),X=K&&re&&af(re,ke,P)}else J=W==null?void 0:W[O],X=K&&re&&re[O];if(ce||Z){var Se=N.props.activeIndex!==void 0?N.props.activeIndex:O;return[T.cloneElement(N,ne(ne(ne({},C.props),Ie),{},{activeIndex:Se})),null,null]}if(!Le(J))return[se].concat(Es(S.renderActivePoints({item:C,activePoint:J,basePoint:X,childIndex:O,isRange:K})))}else{var ee,fe=(ee=S.getItemByXY(S.state.activeCoordinate))!==null&&ee!==void 0?ee:{graphicalItem:se},te=fe.graphicalItem,Re=te.item,qe=Re===void 0?N:Re,ie=te.childIndex,_e=ne(ne(ne({},C.props),Ie),{},{activeIndex:ie});return[T.cloneElement(qe,_e),null,null]}return K?[se,null,null]:[se,null]}),Ae(S,"renderCustomized",function(N,k,A){return T.cloneElement(N,ne(ne({key:"recharts-customized-".concat(A)},S.props),S.state))}),Ae(S,"renderMap",{CartesianGrid:{handler:nd,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:nd},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:nd},YAxis:{handler:nd},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((w=_.id)!==null&&w!==void 0?w:dc("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=p2(S.triggeredAfterMouseMove,(E=_.throttleDelay)!==null&&E!==void 0?E:1e3/60),S.state={},S}return xse(x,y),mse(x,[{key:"componentDidMount",value:function(){var w,E;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,E=w.children,S=w.data,N=w.height,k=w.layout,A=Tr(E,Br);if(A){var C=A.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var R=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,$=P0(this.state,S,C,R),L=this.state.tooltipTicks[C].coordinate,M=(this.state.offset.top+N)/2,O=k==="horizontal",P=O?{x:L,y:M}:{y:L,x:M},D=this.state.formattedGraphicalItems.find(function(U){var W=U.item;return W.type.name==="Scatter"});D&&(P=ne(ne({},P),D.props.points[C].tooltipPosition),$=D.props.points[C].tooltipPayload);var B={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:R,activePayload:$,activeCoordinate:P};this.setState(B),this.renderCursor(A),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,E){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==E.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var S,N;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0}})}return null}},{key:"componentDidUpdate",value:function(w){ly([Tr(w.children,Br)],[Tr(this.props.children,Br)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Tr(this.props.children,Br);if(w&&typeof w.props.shared=="boolean"){var E=w.props.shared?"axis":"item";return s.indexOf(E)>=0?E:o}return o}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var E=this.container,S=E.getBoundingClientRect(),N=cK(S),k={chartX:Math.round(w.pageX-N.left),chartY:Math.round(w.pageY-N.top)},A=S.width/E.offsetWidth||1,C=this.inRange(k.chartX,k.chartY,A);if(!C)return null;var R=this.state,$=R.xAxisMap,L=R.yAxisMap,M=this.getTooltipEventType(),O=nE(this.state,this.props.data,this.props.layout,C);if(M!=="axis"&&$&&L){var P=Ti($).scale,D=Ti(L).scale,B=P&&P.invert?P.invert(k.chartX):null,U=D&&D.invert?D.invert(k.chartY):null;return ne(ne({},k),{},{xValue:B,yValue:U},O)}return O?ne(ne({},k),O):null}},{key:"inRange",value:function(w,E){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,N=this.props.layout,k=w/S,A=E/S;if(N==="horizontal"||N==="vertical"){var C=this.state.offset,R=k>=C.left&&k<=C.left+C.width&&A>=C.top&&A<=C.top+C.height;return R?{x:k,y:A}:null}var $=this.state,L=$.angleAxisMap,M=$.radiusAxisMap;if(L&&M){var O=Ti(L);return BS({x:k,y:A},O)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,E=this.getTooltipEventType(),S=Tr(w,Br),N={};S&&E==="axis"&&(S.props.trigger==="click"?N={onClick:this.handleClick}:N={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var k=sf(this.props,this.handleOuterEvent);return ne(ne({},k),N)}},{key:"addListener",value:function(){Wm.on(Km,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Wm.removeListener(Km,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,E,S){for(var N=this.state.formattedGraphicalItems,k=0,A=N.length;k<A;k++){var C=N[k];if(C.item===w||C.props.key===w.key||E===Zn(C.item.type)&&S===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,E=this.state.offset,S=E.left,N=E.top,k=E.height,A=E.width;return G.createElement("defs",null,G.createElement("clipPath",{id:w},G.createElement("rect",{x:S,y:N,height:k,width:A})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(E,S){var N=eE(S,2),k=N[0],A=N[1];return ne(ne({},E),{},Ae({},k,A.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(E,S){var N=eE(S,2),k=N[0],A=N[1];return ne(ne({},E),{},Ae({},k,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var E;return(E=this.state.xAxisMap)===null||E===void 0||(E=E[w])===null||E===void 0?void 0:E.scale}},{key:"getYScaleByAxisId",value:function(w){var E;return(E=this.state.yAxisMap)===null||E===void 0||(E=E[w])===null||E===void 0?void 0:E.scale}},{key:"getItemByXY",value:function(w){var E=this.state,S=E.formattedGraphicalItems,N=E.activeItem;if(S&&S.length)for(var k=0,A=S.length;k<A;k++){var C=S[k],R=C.props,$=C.item,L=$.type.defaultProps!==void 0?ne(ne({},$.type.defaultProps),$.props):$.props,M=Zn($.type);if(M==="Bar"){var O=(R.data||[]).find(function(U){return Yte(w,U)});if(O)return{graphicalItem:C,payload:O}}else if(M==="RadialBar"){var P=(R.data||[]).find(function(U){return BS(w,U)});if(P)return{graphicalItem:C,payload:P}}else if(bp(C,N)||wp(C,N)||Hu(C,N)){var D=Zre({graphicalItem:C,activeTooltipItem:N,itemData:L.data}),B=L.activeIndex===void 0?D:L.activeIndex;return{graphicalItem:ne(ne({},C),{},{childIndex:B}),payload:Hu(C,N)?L.data[D]:C.props.data[D]}}}return null}},{key:"render",value:function(){var w=this;if(!P_(this))return null;var E=this.props,S=E.children,N=E.className,k=E.width,A=E.height,C=E.style,R=E.compact,$=E.title,L=E.desc,M=tE(E,lse),O=Be(M,!1);if(R)return G.createElement($N,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},G.createElement(cy,ja({},O,{width:k,height:A,title:$,desc:L}),this.renderClipPath(),O_(S,this.renderMap)));if(this.props.accessibilityLayer){var P,D;O.tabIndex=(P=this.props.tabIndex)!==null&&P!==void 0?P:0,O.role=(D=this.props.role)!==null&&D!==void 0?D:"application",O.onKeyDown=function(U){w.accessibilityManager.keyboardEvent(U)},O.onFocus=function(){w.accessibilityManager.focus()}}var B=this.parseEventsOfWrapper();return G.createElement($N,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},G.createElement("div",ja({className:Ge("recharts-wrapper",N),style:ne({position:"relative",cursor:"default",width:k,height:A},C)},B,{ref:function(W){w.container=W}}),G.createElement(cy,ja({},O,{width:k,height:A,title:$,desc:L,style:Ese}),this.renderClipPath(),O_(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(T.Component);Ae(b,"displayName",r),Ae(b,"defaultProps",ne({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Ae(b,"getDerivedStateFromProps",function(y,x){var _=y.dataKey,w=y.data,E=y.children,S=y.width,N=y.height,k=y.layout,A=y.stackOffset,C=y.margin,R=x.dataStartIndex,$=x.dataEndIndex;if(x.updateId===void 0){var L=iE(y);return ne(ne(ne({},L),{},{updateId:0},g(ne(ne({props:y},L),{},{updateId:0}),x)),{},{prevDataKey:_,prevData:w,prevWidth:S,prevHeight:N,prevLayout:k,prevStackOffset:A,prevMargin:C,prevChildren:E})}if(_!==x.prevDataKey||w!==x.prevData||S!==x.prevWidth||N!==x.prevHeight||k!==x.prevLayout||A!==x.prevStackOffset||!Fa(C,x.prevMargin)){var M=iE(y),O={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},P=ne(ne({},nE(x,w,k)),{},{updateId:x.updateId+1}),D=ne(ne(ne({},M),O),P);return ne(ne(ne({},D),g(ne({props:y},D),x)),{},{prevDataKey:_,prevData:w,prevWidth:S,prevHeight:N,prevLayout:k,prevStackOffset:A,prevMargin:C,prevChildren:E})}if(!ly(E,x.prevChildren)){var B,U,W,K,re=Tr(E,ms),Y=re&&(B=(U=re.props)===null||U===void 0?void 0:U.startIndex)!==null&&B!==void 0?B:R,ye=re&&(W=(K=re.props)===null||K===void 0?void 0:K.endIndex)!==null&&W!==void 0?W:$,I=Y!==R||ye!==$,Z=!Le(w),ce=Z&&!I?x.updateId:x.updateId+1;return ne(ne({updateId:ce},g(ne(ne({props:y},x),{},{updateId:ce,dataStartIndex:Y,dataEndIndex:ye}),x)),{},{prevChildren:E,dataStartIndex:Y,dataEndIndex:ye})}return null}),Ae(b,"renderActiveDot",function(y,x,_){var w;return T.isValidElement(y)?w=T.cloneElement(y,x):$e(y)?w=y(x):w=G.createElement(Jx,x),G.createElement(_t,{className:"recharts-active-dot",key:_},w)});var v=T.forwardRef(function(x,_){return G.createElement(b,ja({},x,{ref:_}))});return v.displayName=b.displayName,v},Mse=TI({chartName:"LineChart",GraphicalChild:vc,axisComponents:[{axisType:"xAxis",AxisComp:Uo},{axisType:"yAxis",AxisComp:Fo}],formatAxisMap:HP}),CI=TI({chartName:"BarChart",GraphicalChild:eo,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Uo},{axisType:"yAxis",AxisComp:Fo}],formatAxisMap:HP});const $se=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:" "}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:" ",val:12,color:"bg-orange-100 text-orange-600"},{label:" ",val:5,color:"bg-blue-100 text-blue-600"},{label:" ",val:3,color:"bg-green-100 text-green-600"},{label:" ",val:1,color:"bg-red-100 text-red-600"}].map((t,e)=>l.jsxs("div",{className:`p-4 rounded-xl shadow-sm ${t.color} dark:bg-opacity-10`,children:[l.jsx("p",{className:"text-sm opacity-80",children:t.label}),l.jsx("p",{className:"text-3xl font-bold mt-2",children:t.val})]},e))}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700 dark:text-gray-200",children:"  ()"}),l.jsx("div",{className:"h-64",children:l.jsx(Py,{width:"100%",height:"100%",children:l.jsxs(CI,{data:KD,children:[l.jsx(rh,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),l.jsx(Uo,{dataKey:"name",stroke:"#9ca3af"}),l.jsx(Fo,{stroke:"#9ca3af"}),l.jsx(Br,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),l.jsx(eo,{dataKey:"value",fill:"#800020",radius:[4,4,0,0]})]})})})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700 dark:text-gray-200",children:"  (6  )"}),l.jsx("div",{className:"h-64",children:l.jsx(Py,{width:"100%",height:"100%",children:l.jsxs(Mse,{data:JD,children:[l.jsx(rh,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),l.jsx(Uo,{dataKey:"name",stroke:"#9ca3af"}),l.jsx(Fo,{stroke:"#9ca3af"}),l.jsx(Br,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),l.jsx(vc,{type:"monotone",dataKey:"uv",stroke:"#38bdf8",strokeWidth:3})]})})})]})]})]});function gi({data:t,columns:e,title:r,icon:n,onAdd:i,onEdit:o,onDelete:a,onViewDetails:s,customRowActions:u,extraActions:c,selectedIds:d,onSelect:f}){const[h,g]=T.useState(t),[b,v]=T.useState(""),[y,x]=T.useState(1),[_,w]=T.useState(10),[E,S]=T.useState([]),N=d||E,k=f||S,[A,C]=T.useState(null);T.useEffect(()=>{let B=[...t];if(b){const U=b.toLowerCase();B=B.filter(W=>Object.values(W).join(" ").toLowerCase().includes(U))}A&&B.sort((U,W)=>{const K=U[A.key],re=W[A.key];if(K===re)return 0;if(K==null)return 1;if(re==null)return-1;const Y=K<re?-1:1;return A.direction==="asc"?Y:-Y}),g(B),b&&y!==1&&x(1)},[t,b,A]);const R=B=>{let U="asc";A&&A.key===B&&A.direction==="asc"&&(U="desc"),C({key:B,direction:U})},$=(y-1)*_,L=$+_,M=h.slice($,L),O=B=>{B.target.checked?k(h.map(U=>U.id)):k([])},P=B=>{N.includes(B)?k(N.filter(U=>U!==B)):k([...N,B])},D=s||o||a||u;return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[n&&l.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 rounded-lg shadow-sm",children:l.jsx(n,{className:"w-6 h-6 text-primary"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:r}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["  ",r]})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[N.length>0&&l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 px-3 py-2 rounded-lg text-sm font-medium animate-fadeIn",children:[N.length,"  "]}),c,i&&l.jsxs("button",{onClick:i,className:"bg-primary text-white px-4 py-2.5 rounded-xl shadow-lg shadow-red-900/20 flex items-center gap-2 hover:bg-red-800 transition transform active:scale-95 font-medium text-sm",children:[l.jsx(or,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden md:inline",children:" "})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4 flex gap-4",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(Oo,{className:"absolute right-3 top-3 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"  ...",value:b,onChange:B=>v(B.target.value),className:"w-full pr-10 pl-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl outline-none focus:ring-2 focus:ring-primary transition-all"})]}),l.jsx("button",{className:"bg-gray-50 dark:bg-gray-700 p-2.5 rounded-xl border border-gray-200 dark:border-gray-600 text-gray-500",children:l.jsx(Rh,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden border border-gray-100 dark:border-gray-700",children:[l.jsx("div",{className:"overflow-x-auto min-h-[300px]",children:l.jsxs("table",{className:"w-full text-right text-sm",children:[l.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 text-gray-500 font-medium",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 w-10",children:l.jsx("input",{type:"checkbox",onChange:O,checked:h.length>0&&N.length===h.length,className:"w-4 h-4 rounded text-primary focus:ring-primary cursor-pointer"})}),e.map((B,U)=>l.jsx("th",{className:`p-4 whitespace-nowrap ${B.sortKey?"cursor-pointer hover:text-primary transition-colors select-none":""}`,onClick:()=>B.sortKey&&R(B.sortKey),children:l.jsxs("div",{className:"flex items-center gap-1",children:[B.header,B.sortKey&&l.jsx("span",{className:"text-gray-400",children:(A==null?void 0:A.key)===B.sortKey?A.direction==="asc"?l.jsx(sD,{className:"w-3 h-3"}):l.jsx(oD,{className:"w-3 h-3"}):l.jsx(aD,{className:"w-3 h-3 opacity-50"})})]})},U)),D&&l.jsx("th",{className:"p-4",children:""})]})}),l.jsx("tbody",{className:"divide-y dark:divide-gray-700",children:M.length>0?M.map((B,U)=>l.jsxs("tr",{className:`hover:bg-gray-50 dark:hover:bg-gray-700/50 transition ${N.includes(B.id)?"bg-blue-50 dark:bg-blue-900/10":""}`,children:[l.jsx("td",{className:"p-4",children:l.jsx("input",{type:"checkbox",checked:N.includes(B.id),onChange:()=>P(B.id),className:"w-4 h-4 rounded text-primary focus:ring-primary cursor-pointer"})}),e.map((W,K)=>l.jsx("td",{className:"p-4",children:W.accessor(B)},K)),D&&l.jsxs("td",{className:"p-4 flex gap-1.5 items-center",children:[u&&u(B),s&&l.jsx("button",{onClick:()=>s(B),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",title:"",children:l.jsx(Vv,{width:18,height:18})}),o&&l.jsx("button",{onClick:()=>o(B),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition",title:"",children:l.jsx(Mh,{width:18,height:18})}),a&&l.jsx("button",{onClick:()=>a(B),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition",title:"",children:l.jsx(Et,{width:18,height:18})})]})]},B.id||U)):l.jsx("tr",{children:l.jsx("td",{colSpan:e.length+2,className:"p-12 text-center text-gray-400",children:"  ."})})})]})}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border-t dark:border-gray-700 p-4 flex flex-col md:flex-row justify-between items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[l.jsx("span",{children:""}),l.jsxs("select",{value:_,onChange:B=>{w(Number(B.target.value)),x(1)},className:"bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded p-1 outline-none",children:[l.jsx("option",{value:10,children:"10"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"}),l.jsx("option",{value:200,children:"200"})]}),l.jsxs("span",{children:[": ",h.length]})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{disabled:y===1,onClick:()=>x(B=>B-1),className:"p-2 border rounded-lg hover:bg-white disabled:opacity-50",children:l.jsx(oc,{className:"w-4 h-4"})}),l.jsxs("span",{className:"px-4 py-2 text-sm font-bold",children:[" ",y]}),l.jsx("button",{disabled:L>=h.length,onClick:()=>x(B=>B+1),className:"p-2 border rounded-lg hover:bg-white disabled:opacity-50",children:l.jsx(Oh,{className:"w-4 h-4"})})]})]})]})]})}const Dse=["user_groups","personnel","org_chart","app_users","locations","equipment_classes","equipment_groups","equipment","equipment_local_names","evaluation_periods","evaluation_criteria","measurement_units","equipment_tree","part_categories_main","part_categories_sub","part_categories_sub_sub","parts","activity_cards","checklist_items","maintenance_plans"],aE={user_groups:" ",personnel:"",org_chart:" ",app_users:" ",locations:" ",equipment_classes:" ",equipment_groups:" ",equipment:"",equipment_local_names:"  ",evaluation_periods:" ",evaluation_criteria:" ",measurement_units:" ",equipment_tree:" ",part_categories_main:"  ",part_categories_sub:"  ",part_categories_sub_sub:"   ",parts:"",activity_cards:" ",checklist_items:" ",maintenance_plans:" "},Lse=()=>{const[t,e]=T.useState("user_groups"),[r,n]=T.useState([]),[i,o]=T.useState(!1),[a,s]=T.useState(!1),[u,c]=T.useState(null),[d,f]=T.useState([]),[h,g]=T.useState(null),[b,v]=T.useState(!1),[y,x]=T.useState([]),[_,w]=T.useState([]),[E,S]=T.useState([]),[N,k]=T.useState([]),[A,C]=T.useState([]),[R,$]=T.useState([]),[L,M]=T.useState([]),[O,P]=T.useState([]),D=T.useRef(null),B=T.useRef(null),U={user_groups:[{key:"code",header:" "},{key:"name",header:" "}],personnel:[{key:"personnel_code",header:" "},{key:"full_name",header:"   "},{key:"unit",header:""},{key:"mobile",header:""},{key:"email",header:""}],app_users:[{key:"username",header:" "},{key:"avatar",header:""},{key:"full_name",header:"   "},{key:"role",header:" "}],locations:[{key:"code",header:""},{key:"name",header:"  "},{key:"parent_name",header:"  "}],org_chart:[{key:"code",header:" "},{key:"name",header:" "},{key:"parent_name",header:" "},{key:"manager_name",header:" "}],measurement_units:[{key:"title",header:" "}],equipment_local_names:[{key:"class_id",header:""},{key:"group_id",header:""},{key:"local_name",header:" /"}],evaluation_periods:[{key:"code",header:" "},{key:"title",header:" "}],evaluation_criteria:[{key:"org_unit_id",header:" "},{key:"title",header:" "},{key:"max_score",header:" "}],equipment_classes:[{key:"code",header:" "},{key:"name",header:" "}],equipment_groups:[{key:"code",header:" "},{key:"name",header:" "},{key:"class_id",header:" "}],equipment:[{key:"code",header:" "},{key:"name",header:" "},{key:"class_id",header:""},{key:"group_id",header:""}],equipment_tree:[{key:"equipment_id",header:""},{key:"code",header:" "},{key:"name",header:" "},{key:"parent_id",header:""}],part_categories_main:[{key:"code",header:" "},{key:"name",header:"  "}],part_categories_sub:[{key:"parent_name",header:" "},{key:"code",header:" "},{key:"name",header:"  "}],part_categories_sub_sub:[{key:"grand_parent_name",header:" "},{key:"parent_name",header:" "},{key:"code",header:" "},{key:"name",header:"   "}],parts:[{key:"code",header:" "},{key:"name",header:" "},{key:"full_category_path",header:" "},{key:"stock_unit_name",header:" "},{key:"consumption_unit_name",header:" "}],activity_cards:[{key:"code",header:" "},{key:"name",header:" "}],checklist_items:[{key:"activity_card_id",header:" "},{key:"sort_order",header:""},{key:"description",header:""}],maintenance_plans:[{key:"code",header:" "},{key:"name",header:" "},{key:"equipment_id",header:""}]},W=["personnel_code","full_name","username","name","title","code","local_name","class_id","group_id","org_unit_id","max_score","activity_card_id","equipment_id","description"],K=q=>{try{return JSON.parse(localStorage.getItem(`admin_data_${q}`)||"[]")}catch{return[]}},re=(q,V)=>{localStorage.setItem(`admin_data_${q}`,JSON.stringify(V))},Y=async()=>{o(!0),g(null);let q=t;t.startsWith("part_categories_")&&(q="part_categories");try{const{data:V,error:de}=await Oe.from(q).select("*").order("created_at",{ascending:!1});if(de)throw de;let z=V||[];if(t.startsWith("part_categories_")&&(P(V||[]),t==="part_categories_main"?z=z.filter(me=>me.level_type==="MAIN"):t==="part_categories_sub"?z=z.filter(me=>me.level_type==="SUB").map(me=>{var ge;return{...me,parent_name:((ge=V==null?void 0:V.find(Te=>Te.id===me.parent_id))==null?void 0:ge.name)||"-"}}):t==="part_categories_sub_sub"&&(z=z.filter(me=>me.level_type==="SUB_SUB").map(me=>{const ge=V==null?void 0:V.find(De=>De.id===me.parent_id),Te=ge?V==null?void 0:V.find(De=>De.id===ge.parent_id):null;return{...me,parent_name:(ge==null?void 0:ge.name)||"-",grand_parent_name:(Te==null?void 0:Te.name)||"-"}}))),t==="parts"){const me=O.length>0?O:await Fe("part_categories"),ge=L.length>0?L:await Fe("measurement_units");P(me),M(ge),z=z.map(Te=>{var Xt,_r;const De=me.find(jt=>jt.id===Te.category_id);let Vt="-";if(De){const jt=me.find(An=>An.id===De.parent_id),Cn=jt?me.find(An=>An.id===jt.parent_id):null;Vt=`${(Cn==null?void 0:Cn.name)||"?"} > ${(jt==null?void 0:jt.name)||"?"} > ${De.name}`}return{...Te,full_category_path:Vt,stock_unit_name:((Xt=ge.find(jt=>jt.id===Te.stock_unit_id))==null?void 0:Xt.title)||"-",consumption_unit_name:((_r=ge.find(jt=>jt.id===Te.consumption_unit_id))==null?void 0:_r.title)||"-"}})}if(t==="app_users"){const me=y.length>0?y:await Fe("personnel");x(me),z=z.map(ge=>{const Te=me.find(De=>De.id===ge.personnel_id);return{...ge,full_name:Te?Te.full_name:"---",unit:Te?Te.unit:"---",avatar:ge.avatar||(Te?Te.profile_picture:null),personnel_code:Te?Te.personnel_code:null}})}if(t==="org_chart"){if(y.length===0){const me=await Fe("personnel");x(me)}z=z.map(me=>{var ge,Te;return{...me,parent_name:((ge=z.find(De=>De.id===me.parent_id))==null?void 0:ge.name)||"-",manager_name:((Te=y.find(De=>De.id===me.manager_id))==null?void 0:Te.full_name)||me.manager_name||"-"}})}if(t==="locations"&&(z=z.map(me=>{var ge;return{...me,parent_name:((ge=z.find(Te=>Te.id===me.parent_id))==null?void 0:ge.name)||"-"}})),t==="personnel"){const me=await Fe("org_chart");S(me),z=z.map(ge=>{const Te=me.find(De=>De.id===ge.org_unit_id);return{...ge,unit:Te?Te.name:ge.unit||"-"}})}if(t==="evaluation_criteria"){const me=await Fe("org_chart");S(me),z=z.map(ge=>{const Te=me.find(De=>De.id===ge.org_unit_id);return{...ge,org_unit_name:Te?Te.name:"-"}})}if(t==="equipment_groups"){const me=await Fe("equipment_classes");k(me),z=z.map(ge=>{var Te;return{...ge,class_name:((Te=me.find(De=>De.id===ge.class_id))==null?void 0:Te.name)||"-"}})}if(t==="equipment"||t==="equipment_local_names"){const me=await Fe("equipment_classes"),ge=await Fe("equipment_groups");k(me),C(ge),z=z.map(Te=>{var De,Vt;return{...Te,class_name:((De=me.find(Xt=>Xt.id===Te.class_id))==null?void 0:De.name)||"-",group_name:((Vt=ge.find(Xt=>Xt.id===Te.group_id))==null?void 0:Vt.name)||"-"}})}if(t==="equipment_tree"){const me=await Fe("equipment");$(me),z=z.map(ge=>{var Te,De;return{...ge,equipment_name:((Te=me.find(Vt=>Vt.id===ge.equipment_id))==null?void 0:Te.name)||"-",parent_name:((De=z.find(Vt=>Vt.id===ge.parent_id))==null?void 0:De.name)||"-"}})}v(!1),n(z),re(t,z)}catch(V){console.warn("Supabase fetch failed, switching to local data:",V),v(!0);const de=K(t);n(de)}finally{o(!1)}};T.useEffect(()=>{Y(),f([]),(t==="app_users"||t==="org_chart"||t==="evaluation_criteria")&&(Fe("personnel").then(x),Fe("org_chart").then(S)),t==="app_users"&&Fe("user_groups").then(w),t==="personnel"&&Fe("org_chart").then(S),(t==="equipment_groups"||t==="equipment"||t==="equipment_local_names")&&Fe("equipment_classes").then(k),(t==="equipment"||t==="equipment_local_names")&&Fe("equipment_groups").then(C),t==="equipment_tree"&&Fe("equipment").then($),t==="parts"&&Fe("measurement_units").then(M)},[t]);const ye=()=>{c({}),s(!0)},I=q=>{if(t==="app_users"&&q.personnel_id){const V=y.find(de=>de.id===q.personnel_id);c({...q,full_name:V==null?void 0:V.full_name,unit:V==null?void 0:V.unit,personnel_profile:V==null?void 0:V.profile_picture})}else if(t==="part_categories_sub"||t==="part_categories_sub_sub")c({...q});else if(t==="parts"){const V=O.find(me=>me.id===q.category_id),de=O.find(me=>me.id===(V==null?void 0:V.parent_id)),z=O.find(me=>me.id===(de==null?void 0:de.parent_id));c({...q,temp_main_cat_id:(z==null?void 0:z.id)||"",temp_sub_cat_id:(de==null?void 0:de.id)||""})}else c(q);s(!0)},Z=async q=>{if(!q.personnel_code){alert(":       .");return}if(window.confirm(`        "${q.username}"     (${q.personnel_code})  `)){o(!0);try{const{error:V}=await Oe.from("app_users").update({password:q.personnel_code,is_default_password:!0}).eq("id",q.id);if(V)throw V;alert("     .")}catch(V){console.error("Reset Password Error:",V),alert("    : "+V.message)}finally{o(!1)}}},ce=async q=>{if(!window.confirm("      "))return;[...r],n(de=>de.filter(z=>z.id!==q.id)),f(de=>de.filter(z=>z!==q.id));let V=t;t.startsWith("part_categories_")&&(V="part_categories");try{const{error:de}=await Oe.from(V).delete().eq("id",q.id);if(de)throw de;await Y()}catch{console.warn("Delete failed, performing offline delete");const me=K(t).filter(ge=>ge.id!==q.id);re(t,me),v(!0)}},ve=async()=>{if(d.length===0||!window.confirm(`   ${d.length}   `))return;n(V=>V.filter(de=>!d.includes(de.id)));let q=t;t.startsWith("part_categories_")&&(q="part_categories");try{const{error:V}=await Oe.from(q).delete().in("id",d);if(V)throw V;f([]),await Y()}catch{console.warn("Bulk delete failed, performing offline delete");const z=K(t).filter(me=>!d.includes(me.id));re(t,z),f([]),v(!0)}},Ie=q=>{const V=y.find(de=>de.id===q);V&&c({...u,personnel_id:V.id,full_name:V.full_name,unit:V.unit,personnel_profile:V.profile_picture,password:V.personnel_code,is_default_password:!0})},se=()=>{if(!u)return!1;switch(t){case"user_groups":return!!(u.code&&u.name);case"personnel":return!!(u.personnel_code&&u.full_name);case"org_chart":return!!u.name;case"app_users":return!!(u.username&&u.personnel_id&&u.role);case"locations":return!!u.name;case"equipment_classes":return!!(u.code&&u.name);case"equipment_groups":return!!(u.code&&u.name&&u.class_id);case"equipment":return!!(u.code&&u.name&&u.class_id&&u.group_id);case"equipment_local_names":return!!(u.local_name&&u.class_id&&u.group_id);case"evaluation_periods":return!!(u.code&&u.title);case"evaluation_criteria":return!!(u.title&&u.max_score&&u.org_unit_id);case"measurement_units":return!!u.title;case"equipment_tree":return!!(u.code&&u.name&&u.equipment_id);case"part_categories_main":return!!(u.code&&u.name);case"part_categories_sub":return!!(u.code&&u.name&&u.parent_id);case"part_categories_sub_sub":return!!(u.code&&u.name&&u.parent_id);case"parts":return!!(u.name&&u.category_id);case"activity_cards":return!!(u.code&&u.name);case"checklist_items":return!!(u.description&&u.activity_card_id);case"maintenance_plans":return!!(u.name&&u.equipment_id);default:return!1}},Ne=async q=>{q.preventDefault(),o(!0),g(null);let V={...u},de=t;if(!se()){o(!1),alert("    ()   .");return}if(t.startsWith("part_categories_")){de="part_categories";const z=r.some(ge=>ge.code===V.code&&ge.id!==V.id),me=r.some(ge=>ge.name===V.name&&ge.id!==V.id);if(z){o(!1),alert("  .");return}if(me){o(!1),alert("  .");return}t==="part_categories_main"&&(V.level_type="MAIN"),t==="part_categories_sub"&&(V.level_type="SUB"),t==="part_categories_sub_sub"&&(V.level_type="SUB_SUB"),delete V.parent_name,delete V.grand_parent_name,delete V.temp_main_cat_id}if(t==="parts"&&(delete V.full_category_path,delete V.temp_main_cat_id,delete V.temp_sub_cat_id,delete V.stock_unit_name,delete V.consumption_unit_name),t==="equipment_classes"){const z=r.some(ge=>ge.code===V.code&&ge.id!==V.id),me=r.some(ge=>ge.name===V.name&&ge.id!==V.id);if(z){o(!1),alert("   .");return}if(me){o(!1),alert("   .");return}}if(t==="equipment_groups"){const z=r.some(ge=>ge.code===V.code&&ge.id!==V.id),me=r.some(ge=>ge.name===V.name&&ge.id!==V.id);if(z){o(!1),alert("   .");return}if(me){o(!1),alert("   .");return}}if(t==="personnel"&&V.org_unit_id){const z=E.find(me=>me.id===V.org_unit_id);z&&(V.unit=z.name)}t==="app_users"&&(delete V.full_name,delete V.unit,delete V.personnel_profile,delete V.avatar,delete V.personnel_code),(t==="org_chart"||t==="locations")&&(delete V.parent_name,t==="org_chart"&&delete V.manager_name),t==="equipment_groups"&&delete V.class_name,(t==="equipment"||t==="equipment_local_names")&&(delete V.class_name,delete V.group_name),t==="equipment_tree"&&(delete V.equipment_name,delete V.parent_name),t==="evaluation_criteria"&&delete V.org_unit_name;try{if(V.id){const{error:z}=await Oe.from(de).update(V).eq("id",V.id);if(z)throw z}else{const{error:z}=await Oe.from(de).insert([V]);if(z)throw z}await Y(),s(!1)}catch(z){if(z.code==="23505")alert(" :     (  )    .");else{console.warn("Save failed, performing offline save:",z);let ge=[...K(t)];if(V.id){const Te=ge.findIndex(De=>De.id===V.id);Te>=0?ge[Te]={...ge[Te],...V}:ge.push(V)}else V.id=$l(),V.created_at=new Date().toISOString(),ge.unshift(V);re(t,ge),alert("     .         ."),await Y(),s(!1)}}finally{o(!1)}},J=()=>{const V=U[t].map(De=>De.key),de=r.length>0?r:[];let z="\uFEFF"+V.join(",")+`
`;de.forEach(De=>{const Vt=V.map(Xt=>{let _r=De[Xt]||"";return String(_r).includes(",")&&(_r=`"${_r}"`),_r});z+=Vt.join(",")+`
`});const me=new Blob([z],{type:"text/csv;charset=utf-8;"}),ge=document.createElement("a"),Te=URL.createObjectURL(me);ge.setAttribute("href",Te),ge.setAttribute("download",`${t}_export.csv`),document.body.appendChild(ge),ge.click(),document.body.removeChild(ge)},X=q=>{var z;const V=(z=q.target.files)==null?void 0:z[0];if(!V)return;const de=new FileReader;de.onload=async me=>{var An;let ge=((An=me.target)==null?void 0:An.result)||"";ge=ge.replace(/^\uFEFF/,"");const Te=ge.split(/\r?\n/).filter(mt=>mt.trim()!=="");if(Te.length<2){alert("       ."),D.current&&(D.current.value="");return}const De=Te[0],Vt=De.includes(";")?";":",",Xt=De.split(Vt).map(mt=>mt.trim().replace(/^"|"$/g,"")),_r=U[t].map(mt=>mt.key);if(t==="personnel"&&!Xt.includes("personnel_code")){alert(':  "personnel_code"  .');return}if(t==="app_users"&&(!Xt.includes("username")||!Xt.includes("personnel_code"))){alert('   :     "username"  "personnel_code" .');return}const jt=[],Cn=[];for(let mt=1;mt<Te.length;mt++){const xc=Te[mt].split(Vt).map(jn=>jn.trim().replace(/^"|"$/g,"")),Dr={};Xt.forEach((jn,Mp)=>{let on=xc[Mp];if(on&&on!=="")if(t==="app_users")if(jn==="personnel_code"){const Js=y.find(Ys=>Ys.personnel_code===on);Js?(Dr.personnel_id=Js.id,Dr.password=on,Dr.is_default_password=!0):Cn.push(` ${mt+1}:   ${on}    .`)}else _r.includes(jn)&&(Dr[jn]=on);else _r.includes(jn)&&(Dr[jn]=on)}),!(t==="personnel"&&!Dr.personnel_code)&&(t==="app_users"&&!Dr.personnel_id||Object.keys(Dr).length>0&&jt.push(Dr))}if(jt.length===0){alert(`    .
`+Cn.join(`
`));return}o(!0);try{const{data:mt,error:Xo}=await Oe.from(t).insert(jt).select();if(Xo)throw Xo;alert(` ${(mt==null?void 0:mt.length)||jt.length}     .`),await Y()}catch(mt){console.error("Upload Error:",mt),mt.code==="23505"?alert("  :     ."):alert(` : ${mt.message}`)}finally{o(!1),D.current&&(D.current.value="")}},de.readAsText(V)},ke=q=>{var de;const V=(de=q.target.files)==null?void 0:de[0];if(V){const z=new FileReader;z.onloadend=()=>{c({...u,profile_picture:z.result})},z.readAsDataURL(V)}},Se=(U[t]||[]).map(q=>({header:q.header,accessor:V=>{if(q.key==="avatar"||q.key==="profile_picture")return l.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 overflow-hidden flex items-center justify-center",children:V[q.key]?l.jsx("img",{src:V[q.key],alt:"Avatar",className:"w-full h-full object-cover"}):l.jsx(ts,{className:"w-5 h-5 text-gray-400"})});if(typeof V[q.key]=="boolean")return V[q.key]?l.jsx("span",{className:"text-green-600",children:""}):l.jsx("span",{className:"text-gray-400",children:""});if(t==="equipment_groups"&&q.key==="class_id")return V.class_name||"-";if(t==="equipment"||t==="equipment_local_names"){if(q.key==="class_id")return V.class_name||"-";if(q.key==="group_id")return V.group_name||"-"}return t==="evaluation_criteria"&&q.key==="org_unit_id"?V.org_unit_name||"-":t==="equipment_tree"&&q.key==="equipment_id"?V.equipment_name||"-":t==="equipment_tree"&&q.key==="parent_id"?V.parent_name||"-":V[q.key]},sortKey:q.key})),ee=l.jsxs(l.Fragment,{children:[d.length>0&&l.jsxs("button",{onClick:ve,className:"bg-red-50 text-red-600 hover:bg-red-100 px-3 py-2 rounded-lg flex items-center gap-2 text-sm transition animate-fadeIn",children:[l.jsx(Et,{className:"w-4 h-4"}),"  ",d.length," "]}),l.jsxs("button",{onClick:J,className:"bg-green-50 text-green-700 border border-green-200 px-3 py-2 rounded-lg flex items-center gap-2 text-sm hover:bg-green-100 transition",children:[l.jsx(qv,{className:"w-4 h-4"}),"  / "]}),l.jsx("input",{type:"file",ref:D,accept:".csv",onChange:X,className:"hidden"}),l.jsxs("button",{onClick:()=>{var q;return(q=D.current)==null?void 0:q.click()},className:"bg-blue-50 text-blue-700 border border-blue-200 px-3 py-2 rounded-lg flex items-center gap-2 text-sm hover:bg-blue-100 transition",children:[l.jsx(uu,{className:"w-4 h-4"}),"    (CSV)"]})]}),fe=()=>{const q=O.filter(V=>V.level_type==="MAIN");return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:u.parent_id||"",onChange:V=>c({...u,parent_id:V.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 outline-none",children:[l.jsx("option",{value:"",children:" ..."}),q.map(V=>l.jsxs("option",{value:V.id,children:[V.name," (",V.code,")"]},V.id))]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["   ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:u.code||"",onChange:V=>c({...u,code:V.target.value}),className:"w-full p-2.5 border rounded-lg outline-none"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["   ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:u.name||"",onChange:V=>c({...u,name:V.target.value}),className:"w-full p-2.5 border rounded-lg outline-none"})]})]})]})},te=()=>{const q=O.filter(de=>de.level_type==="MAIN"),V=O.filter(de=>de.level_type==="SUB"&&(!u.temp_main_cat_id||de.parent_id===u.temp_main_cat_id));return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"  ()"}),l.jsxs("select",{value:u.temp_main_cat_id||"",onChange:de=>c({...u,temp_main_cat_id:de.target.value,parent_id:""}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 outline-none",children:[l.jsx("option",{value:"",children:" ..."}),q.map(de=>l.jsxs("option",{value:de.id,children:[de.name," (",de.code,")"]},de.id))]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:u.parent_id||"",onChange:de=>c({...u,parent_id:de.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 outline-none",disabled:!u.temp_main_cat_id,children:[l.jsx("option",{value:"",children:" ..."}),V.map(de=>l.jsxs("option",{value:de.id,children:[de.name," (",de.code,")"]},de.id))]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["    ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:u.code||"",onChange:de=>c({...u,code:de.target.value}),className:"w-full p-2.5 border rounded-lg outline-none"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["    ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:u.name||"",onChange:de=>c({...u,name:de.target.value}),className:"w-full p-2.5 border rounded-lg outline-none"})]})]})]})},Re=()=>{const q=O.filter(z=>z.level_type==="MAIN"),V=O.filter(z=>z.level_type==="SUB"&&(!u.temp_main_cat_id||z.parent_id===u.temp_main_cat_id)),de=O.filter(z=>z.level_type==="SUB_SUB"&&(!u.temp_sub_cat_id||z.parent_id===u.temp_sub_cat_id));return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/30 p-3 rounded-lg border border-gray-200 dark:border-gray-600",children:[l.jsx("h4",{className:"text-xs font-bold text-gray-500 mb-2",children:" "}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("select",{value:u.temp_main_cat_id||"",onChange:z=>c({...u,temp_main_cat_id:z.target.value,temp_sub_cat_id:"",category_id:""}),className:"w-full p-2 text-sm border rounded bg-white dark:bg-gray-800",children:[l.jsx("option",{value:"",children:".  ..."}),q.map(z=>l.jsx("option",{value:z.id,children:z.name},z.id))]}),l.jsxs("select",{value:u.temp_sub_cat_id||"",onChange:z=>c({...u,temp_sub_cat_id:z.target.value,category_id:""}),className:"w-full p-2 text-sm border rounded bg-white dark:bg-gray-800",disabled:!u.temp_main_cat_id,children:[l.jsx("option",{value:"",children:".  ..."}),V.map(z=>l.jsx("option",{value:z.id,children:z.name},z.id))]}),l.jsxs("select",{value:u.category_id||"",onChange:z=>c({...u,category_id:z.target.value}),className:"w-full p-2 text-sm border rounded bg-white dark:bg-gray-800 border-primary",disabled:!u.temp_sub_cat_id,children:[l.jsx("option",{value:"",children:".    ()..."}),de.map(z=>l.jsx("option",{value:z.id,children:z.name},z.id))]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),l.jsx("input",{type:"text",value:u.code||"",onChange:z=>c({...u,code:z.target.value}),className:"w-full p-2.5 border rounded-lg outline-none"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:u.name||"",onChange:z=>c({...u,name:z.target.value}),className:"w-full p-2.5 border rounded-lg outline-none"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),l.jsxs("select",{value:u.stock_unit_id||"",onChange:z=>c({...u,stock_unit_id:z.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-800 outline-none",children:[l.jsx("option",{value:"",children:"..."}),L.map(z=>l.jsx("option",{value:z.id,children:z.title},z.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),l.jsxs("select",{value:u.consumption_unit_id||"",onChange:z=>c({...u,consumption_unit_id:z.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-800 outline-none",children:[l.jsx("option",{value:"",children:"..."}),L.map(z=>l.jsx("option",{value:z.id,children:z.title},z.id))]})]})]})]})},qe=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col items-center gap-4",children:[l.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 dark:bg-gray-700 border-4 border-white dark:border-gray-600 shadow-lg overflow-hidden flex items-center justify-center",children:u.personnel_profile?l.jsx("img",{src:u.personnel_profile,alt:"Profile",className:"w-full h-full object-cover"}):l.jsx(ts,{className:"w-10 h-10 text-gray-400"})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h4",{className:"font-bold text-lg",children:u.full_name||" "}),l.jsx("p",{className:"text-sm text-gray-500",children:u.unit||"  "})]})]}),l.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:u.personnel_id||"",onChange:q=>Ie(q.target.value),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-primary outline-none",children:[l.jsx("option",{value:"",children:"  ..."}),y.map(q=>l.jsxs("option",{value:q.id,children:[q.full_name," (",q.personnel_code,")"]},q.id))]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:["  () ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",dir:"ltr",value:u.username||"",onChange:q=>c({...u,username:q.target.value}),className:"w-full p-2.5 border rounded-lg bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-primary outline-none",placeholder:"user123"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:u.role||"",onChange:q=>c({...u,role:q.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-primary outline-none",children:[l.jsx("option",{value:"",children:"  ..."}),_.map(q=>l.jsx("option",{value:q.name,children:q.name},q.id))]})]}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-3 rounded-lg text-xs text-blue-700 dark:text-blue-300 flex items-center gap-2",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),"         ."]})]})]}),ie=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:" "}),l.jsx("input",{type:"text",value:u.code||"",onChange:q=>c({...u,code:q.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:u.name||"",onChange:q=>c({...u,name:q.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"  "}),l.jsxs("select",{value:u.parent_id||"",onChange:q=>c({...u,parent_id:q.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary",children:[l.jsx("option",{value:"",children:"  ()"}),r.filter(q=>q.id!==u.id).map(q=>l.jsx("option",{value:q.id,children:q.name},q.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:" "}),l.jsxs("select",{value:u.manager_id||"",onChange:q=>c({...u,manager_id:q.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary",children:[l.jsx("option",{value:"",children:" ..."}),y.map(q=>l.jsxs("option",{value:q.id,children:[q.full_name," (",q.unit,")"]},q.id))]})]})]}),_e=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:""}),l.jsx("input",{type:"text",value:u.code||"",onChange:q=>c({...u,code:q.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:["   ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:u.name||"",onChange:q=>c({...u,name:q.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:"  "}),l.jsxs("select",{value:u.parent_id||"",onChange:q=>c({...u,parent_id:q.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary",children:[l.jsx("option",{value:"",children:"  ()"}),r.filter(q=>q.id!==u.id).map(q=>l.jsx("option",{value:q.id,children:q.name},q.id))]})]})]});return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[l.jsx(Is,{className:"text-primary"}),"   "]}),b&&l.jsxs("div",{className:"flex items-center gap-1 bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-xs font-bold animate-pulse",children:[l.jsx(zD,{className:"w-4 h-4"}),"  "]})]}),l.jsx("div",{className:"flex gap-2",children:l.jsx("button",{onClick:Y,className:"p-2 bg-gray-200 dark:bg-gray-700 rounded-full hover:rotate-180 transition duration-500",children:l.jsx(Kg,{className:`w-5 h-5 ${i?"animate-spin":""}`})})})]}),h&&l.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg border border-red-200",children:h}),l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-2 overflow-x-auto flex gap-2 pb-3 mb-2",children:Dse.map(q=>l.jsx("button",{onClick:()=>e(q),className:`px-4 py-2 rounded-lg whitespace-nowrap transition-colors text-sm font-medium
                    ${t===q?"bg-primary text-white shadow-lg":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300"}`,children:aE[q]},q))}),l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm min-h-[400px]",children:l.jsx(gi,{title:aE[t],data:r,columns:Se,onAdd:ye,onEdit:I,onDelete:ce,extraActions:ee,selectedIds:d,onSelect:f,customRowActions:q=>t==="app_users"?l.jsx("button",{onClick:()=>Z(q),className:"p-1.5 text-slate-400 hover:text-orange-500 hover:bg-orange-50 rounded-lg transition-colors",title:"  ",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-key-round","aria-hidden":"true",children:[l.jsx("path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"}),l.jsx("circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor"})]})}):null})}),a&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-lg overflow-hidden animate-fadeIn",children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[l.jsx("h3",{className:"font-bold",children:u!=null&&u.id?" ":"  "}),l.jsx("button",{onClick:()=>s(!1),className:"p-1 hover:bg-gray-200 rounded-full",children:l.jsx(ht,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:Ne,className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[t==="app_users"?qe():t==="org_chart"?ie():t==="locations"?_e():t==="part_categories_sub"?fe():t==="part_categories_sub_sub"?te():t==="parts"?Re():l.jsxs(l.Fragment,{children:[U[t].map(q=>{const V=W.includes(q.key);if(q.key==="parent_name"||t==="evaluation_criteria"&&q.key==="org_unit_name"||t==="part_categories_main"&&q.key==="level_type")return null;const de=V&&!(t==="equipment"&&q.key==="description");if(t==="personnel"&&q.key==="unit")return l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:["  ",V&&l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:u.org_unit_id||"",onChange:z=>c({...u,org_unit_id:z.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-primary outline-none",children:[l.jsx("option",{value:"",children:" ..."}),E.map(z=>l.jsx("option",{value:z.id,children:z.name},z.id))]})]},String(q.key));if(t==="evaluation_criteria"&&q.key==="org_unit_id")return l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:["   ",V&&l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:u.org_unit_id||"",onChange:z=>c({...u,org_unit_id:z.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-primary outline-none",children:[l.jsx("option",{value:"",children:" ..."}),E.map(z=>l.jsx("option",{value:z.id,children:z.name},z.id))]})]},String(q.key));if(t==="equipment_groups"&&q.key==="class_id")return l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:["  ",V&&l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:u.class_id||"",onChange:z=>c({...u,class_id:z.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-primary outline-none",children:[l.jsx("option",{value:"",children:" ..."}),N.map(z=>l.jsx("option",{value:z.id,children:z.name},z.id))]})]},String(q.key));if(t==="equipment"||t==="equipment_local_names"){if(q.key==="class_id")return l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:[" ",t==="equipment_local_names"?" (   )":""," ",V&&l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:u.class_id||"",onChange:z=>c({...u,class_id:z.target.value,group_id:""}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-primary outline-none",children:[l.jsx("option",{value:"",children:" ..."}),N.map(z=>l.jsx("option",{value:z.id,children:z.name},z.id))]})]},String(q.key));if(q.key==="group_id"){const z=A.filter(me=>me.class_id===u.class_id);return l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:[" ",t==="equipment_local_names"?" (   )":""," ",V&&l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:u.group_id||"",onChange:me=>c({...u,group_id:me.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-primary outline-none",disabled:!u.class_id,children:[l.jsx("option",{value:"",children:" ..."}),z.map(me=>l.jsx("option",{value:me.id,children:me.name},me.id))]})]},String(q.key))}}return t==="equipment_tree"&&q.key==="equipment_id"?l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:[" ",V&&l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:u.equipment_id||"",onChange:z=>c({...u,equipment_id:z.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-primary outline-none",children:[l.jsx("option",{value:"",children:" ..."}),R.map(z=>l.jsxs("option",{value:z.id,children:[z.name," (",z.code,")"]},z.id))]})]},String(q.key)):t==="equipment_tree"&&q.key==="parent_id"?l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:" "}),l.jsxs("select",{value:u.parent_id||"",onChange:z=>c({...u,parent_id:z.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-primary outline-none",children:[l.jsx("option",{value:"",children:"  ()"}),r.filter(z=>z.id!==u.id&&z.equipment_id===u.equipment_id).map(z=>l.jsxs("option",{value:z.id,children:[z.name," (",z.code,")"]},z.id))]})]},String(q.key)):l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:[q.header," ",de&&l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:q.key==="email"?"email":"text",value:u[q.key]||"",onChange:z=>c({...u,[q.key]:z.target.value}),className:"w-full p-2.5 border rounded-lg bg-gray-50 dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:ring-2 focus:ring-primary outline-none",placeholder:q.key==="mobile"?": 09123456789":""})]},String(q.key))}),t==="personnel"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-700 dark:text-gray-300",children:" "}),l.jsxs("div",{className:"flex items-center gap-4 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-xl border border-dashed border-gray-300 dark:border-gray-600",children:[l.jsxs("div",{onClick:()=>{var q;return(q=B.current)==null?void 0:q.click()},className:"w-20 h-20 rounded-full bg-gray-200 dark:bg-gray-600 overflow-hidden border-2 border-white shadow-sm cursor-pointer hover:opacity-80 transition relative group",children:[u.profile_picture?l.jsx("img",{src:u.profile_picture,alt:"Profile",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:l.jsx(Kd,{className:"w-8 h-8"})}),l.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition",children:l.jsx(uu,{className:"w-6 h-6 text-white"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("input",{type:"file",ref:B,accept:"image/*",className:"hidden",onChange:ke}),l.jsxs("button",{type:"button",onClick:()=>{var q;return(q=B.current)==null?void 0:q.click()},className:"text-sm bg-blue-50 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-100 flex items-center gap-2 mb-1 w-full justify-center",children:[l.jsx(Kd,{className:"w-4 h-4"}),"  "]}),l.jsx("p",{className:"text-[10px] text-gray-400 text-center",children:" : JPG, PNG"})]})]})]})]}),l.jsxs("div",{className:"pt-4 flex gap-3 sticky bottom-0 bg-white dark:bg-gray-800 pb-2 border-t dark:border-gray-700 mt-2",children:[l.jsx("button",{type:"button",onClick:()=>s(!1),className:"flex-1 py-2.5 border rounded-lg hover:bg-gray-50 transition",children:""}),l.jsxs("button",{type:"submit",disabled:i||!se(),className:`flex-1 py-2.5 rounded-lg flex justify-center gap-2 items-center transition shadow-lg ${i||!se()?"bg-gray-400 text-gray-200 cursor-not-allowed opacity-70":"bg-primary text-white hover:bg-red-800"}`,children:[i?l.jsx(Kg,{className:"w-4 h-4 animate-spin"}):l.jsx(En,{className:"w-4 h-4"})," "]})]})]})]})})]})},Mn=({value:t,onChange:e,label:r,error:n,disableFuture:i=!0})=>{const[o,a]=T.useState(!1),[s,u]=T.useState(1403),[c,d]=T.useState(1),f=T.useRef(null);T.useEffect(()=>{if(t){const N=t.split("/").map(Number);N.length===3&&(u(N[0]),d(N[1]))}else{const N=at().split("/").map(Number);u(N[0]),d(N[1])}},[t,o]),T.useEffect(()=>{const N=k=>{f.current&&!f.current.contains(k.target)&&a(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]);const h=["","","","","","","","","","","",""],g=["","","","","","",""],b=(N,k)=>k<=6?31:k<=11||N%33===1||N%33===5||N%33===9||N%33===13||N%33===17||N%33===22||N%33===26||N%33===30?30:29,v=(N,k)=>{const{gy:A,gm:C,gd:R}=AA(N,k,1);return new Date(A,C-1,R).getDay()},y=()=>{c===1?(d(12),u(N=>N-1)):d(N=>N-1)},x=()=>{c===12?(d(1),u(N=>N+1)):d(N=>N+1)},_=N=>{const k=`${s}/${String(c).padStart(2,"0")}/${String(N).padStart(2,"0")}`;i&&tf(k)||(e(k),a(!1))},w=()=>{const N=at();e(N),a(!1)},E=(v(s,c)+1)%7,S=b(s,c);return l.jsxs("div",{className:"relative",ref:f,children:[r&&l.jsx("label",{className:"block text-xs font-medium mb-1.5 text-gray-700 dark:text-gray-300",children:r}),l.jsxs("button",{type:"button",onClick:()=>a(!o),className:`w-full flex items-center justify-between px-4 py-2.5 bg-white dark:bg-gray-700 rounded-xl border transition-all
        ${n?"border-red-500 text-red-500":"border-gray-200 dark:border-gray-600 text-gray-800 dark:text-gray-100 hover:border-primary/50"} ${o?"ring-2 ring-primary/20 border-primary shadow-sm":""}`,children:[l.jsx("span",{className:`${t?"text-sm font-medium":"text-gray-400 text-sm"}`,children:t||" ..."}),l.jsx(dD,{className:"w-4 h-4 text-gray-400"})]}),o&&l.jsxs("div",{className:"absolute top-full left-0 z-50 mt-2 w-72 bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-600 p-4 animate-fadeIn",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("button",{onClick:y,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition",children:l.jsx(oc,{className:"w-4 h-4"})}),l.jsxs("span",{className:"font-bold text-sm text-gray-800 dark:text-gray-200",children:[h[c-1]," ",s]}),l.jsx("button",{onClick:x,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition",children:l.jsx(Oh,{className:"w-4 h-4"})})]}),l.jsx("div",{className:"grid grid-cols-7 mb-2 text-center text-xs font-medium text-gray-400",children:g.map((N,k)=>l.jsx("span",{className:k===6?"text-red-500 font-bold":"",children:N},k))}),l.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:E}).map((N,k)=>l.jsx("div",{},`empty-${k}`)),Array.from({length:S}).map((N,k)=>{const A=k+1,C=`${s}/${String(c).padStart(2,"0")}/${String(A).padStart(2,"0")}`,R=t===C,$=i&&tf(C),L=(E+k)%7===6;return l.jsx("button",{type:"button",disabled:$,onClick:()=>_(A),className:`w-8 h-8 rounded-lg text-sm flex items-center justify-center transition-all
                     ${R?"bg-primary text-white shadow-md font-bold":$?"text-gray-200 dark:text-gray-600 cursor-not-allowed":L?"text-red-500 font-medium hover:bg-red-50 dark:hover:bg-red-900/20":"hover:bg-primary/10 text-gray-700 dark:text-gray-300"}`,children:A},A)})]}),l.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100 dark:border-gray-700",children:l.jsx("button",{type:"button",onClick:w,className:"w-full py-2 text-xs text-primary bg-primary/5 hover:bg-primary/10 rounded-lg font-medium transition-colors",children:"  "})})]})]})},qr=({value:t,onChange:e,label:r})=>{const[n,i]=T.useState(!1),[o,a]=T.useState("HOURS"),s=T.useRef(null),[u,c]=T.useState("00"),[d,f]=T.useState("00");T.useEffect(()=>{if(t&&t.includes(":")){const[_,w]=t.split(":");c(_),f(w)}},[t,n]),T.useEffect(()=>{const _=w=>{s.current&&!s.current.contains(w.target)&&i(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const h=_=>{c(_),a("MINUTES")},g=_=>{f(_),e(`${u}:${_}`),i(!1),a("HOURS")},b=(_,w,E)=>{const S=_*(360/w)-90,N=E*Math.cos(S*Math.PI/180),k=E*Math.sin(S*Math.PI/180);return{transform:`translate(${N}px, ${k}px)`}},v=[12,13,14,15,16,17,18,19,20,21,22,23],y=[12,1,2,3,4,5,6,7,8,9,10,11],x=[0,5,10,15,20,25,30,35,40,45,50,55];return l.jsxs("div",{className:"relative",ref:s,children:[r&&l.jsx("label",{className:"block text-xs font-medium mb-1.5 text-gray-700 dark:text-gray-300",children:r}),l.jsxs("button",{type:"button",onClick:()=>i(!n),className:`w-full flex items-center justify-between px-4 py-2.5 bg-white dark:bg-gray-700 rounded-xl border transition-all
        ${n?"ring-2 ring-primary/20 border-primary shadow-sm":"border-gray-200 dark:border-gray-600 hover:border-primary/50"}
        `,children:[l.jsx("span",{className:`font-mono text-lg tracking-wider ${t?"text-gray-800 dark:text-gray-100":"text-gray-400 font-sans text-sm tracking-normal"}`,children:t||"--:--"}),l.jsx(Ps,{className:"w-5 h-5 text-gray-400"})]}),n&&l.jsxs("div",{className:"absolute top-full left-0 z-50 mt-2 w-64 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-100 dark:border-gray-600 p-4 animate-fadeIn flex flex-col items-center",children:[l.jsxs("div",{className:"flex items-center justify-center gap-1 mb-6 text-4xl font-bold text-gray-700 dark:text-white",children:[l.jsx("button",{type:"button",onClick:()=>a("HOURS"),className:`p-1 rounded ${o==="HOURS"?"text-primary":"text-gray-300 dark:text-gray-600"}`,children:u}),l.jsx("span",{className:"text-gray-300 pb-2",children:":"}),l.jsx("button",{type:"button",onClick:()=>a("MINUTES"),className:`p-1 rounded ${o==="MINUTES"?"text-primary":"text-gray-300 dark:text-gray-600"}`,children:d})]}),l.jsxs("div",{className:"relative w-48 h-48 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-4",children:[l.jsx("div",{className:"absolute w-1 h-1 bg-primary rounded-full z-10"}),o==="HOURS"&&l.jsxs(l.Fragment,{children:[v.map((_,w)=>{const E=_===12?"00":_,S=String(E).padStart(2,"0"),N=u===S;return l.jsx("button",{type:"button",onClick:()=>h(S),style:b(w,12,85),className:`absolute w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-all
                            ${N?"bg-primary text-white scale-110 shadow-lg z-20":"text-gray-500 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}
                          `,children:E},`out-${_}`)}),y.map((_,w)=>{const E=String(_).padStart(2,"0"),S=u===E;return l.jsx("button",{type:"button",onClick:()=>h(E),style:b(w,12,50),className:`absolute w-7 h-7 rounded-full flex items-center justify-center text-xs font-medium transition-all
                            ${S?"bg-primary text-white scale-110 shadow-lg z-20":"text-gray-400 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}
                          `,children:_===12?"12":_},`in-${_}`)})]}),o==="MINUTES"&&l.jsxs(l.Fragment,{children:[x.map((_,w)=>{const E=String(_).padStart(2,"0"),S=d===E;return l.jsx("button",{type:"button",onClick:()=>g(E),style:b(w,12,80),className:`absolute w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-all
                            ${S?"bg-primary text-white scale-110 shadow-lg z-20":"text-gray-500 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}
                          `,children:E},`m-${_}`)}),l.jsx("div",{className:"absolute w-2 h-2 bg-gray-300 rounded-full"})]})]}),l.jsx("div",{className:"text-xs text-gray-400 text-center",children:o==="HOURS"?"   ":"   "})]})]})},ob=({initialData:t,onProcessComplete:e})=>{const r=As(),n=JSON.parse(localStorage.getItem("currentUser")||"{}"),i=!!t,o=i?"   ()":"  ",[a,s]=T.useState("GENERAL"),[u,c]=T.useState(null),[d,f]=T.useState(null),[h,g]=T.useState(!1),[b,v]=T.useState(null),[y,x]=T.useState(!1),[_,w]=T.useState([]),[E,S]=T.useState([]),[N,k]=T.useState([]),[A,C]=T.useState([]),[R,$]=T.useState([]),[L,M]=T.useState([]),O=T.useRef(null),[P,D]=T.useState({equipCode:"",equipName:"",equipLocalName:"",locationId:"",productionLine:"",requester:n.fullName||" ",reportDate:at(),reportTime:rs(),shift:"DayWork",workCategory:"MECHANICAL",workType:"REPAIR",priority:"NORMAL",failureDesc:"",actionDesc:"",startDate:at(),startTime:"",endDate:at(),endTime:"",downtime:"",repairTime:""}),[B,U]=T.useState([]),[W,K]=T.useState([]),[re,Y]=T.useState([]);T.useEffect(()=>{(async()=>{const fe=await Fe("equipment"),te=await Fe("equipment_local_names"),Re=await Fe("locations");S(fe),k(te),$(fe),M(te),C(Re),w(await Fe("measurement_units"))})(),t&&(D(fe=>({...fe,...t})),t.labor&&U(t.labor),t.parts&&K(t.parts),t.docs&&Y(t.docs))},[t]);const ye=ee=>{const fe=ee.target.value,te=E.find(Re=>Re.code===fe);if(!te){D(Re=>({...Re,equipCode:"",equipName:"",locationId:""})),M(N);return}if(D(Re=>({...Re,equipCode:fe,equipName:te.name,locationId:te.location_id||""})),te.class_id&&te.group_id){const Re=N.filter(qe=>qe.class_id===te.class_id&&qe.group_id===te.group_id);M(Re)}else M(N)},I=ee=>{const fe=ee.target.value,te=N.find(Re=>Re.local_name===fe);if(D(Re=>({...Re,equipLocalName:fe})),te&&te.class_id&&te.group_id){const Re=E.filter(qe=>qe.class_id===te.class_id&&qe.group_id===te.group_id);$(Re)}else $(E)},Z=ee=>{const fe=window.SpeechRecognition||window.webkitSpeechRecognition;if(!fe){alert("         .");return}if(b===ee){v(null);return}const te=new fe;te.lang="fa-IR",te.continuous=!1,te.interimResults=!1,te.onstart=()=>v(ee),te.onend=()=>v(null),te.onresult=Re=>{const qe=Re.results[0][0].transcript;D(ie=>({...ie,[ee]:ie[ee]?`${ie[ee]} ${qe}`:qe}))},te.start()},ce=()=>{U([...B,{id:Math.random().toString(),name:"",startDate:P.startDate,startTime:P.startTime||"08:00",endDate:P.endDate,endTime:P.endTime||"16:00",durationMinutes:0}])},ve=(ee,fe,te)=>{U(Re=>Re.map(qe=>{if(qe.id!==ee)return qe;const ie={...qe,[fe]:te};return["startDate","startTime","endDate","endTime"].includes(fe)&&(ie.durationMinutes=XD(ie.startDate,ie.startTime,ie.endDate,ie.endTime)),ie}))},Ie=()=>{var ee;K([...W,{id:Math.random().toString(),code:"",name:"",qty:1,unit:((ee=_[0])==null?void 0:ee.title)||""}])},se=(ee,fe,te)=>{K(Re=>Re.map(qe=>qe.id===ee?{...qe,[fe]:te}:qe))},Ne=ee=>{if(ee.target.files&&ee.target.files.length>0){const fe=Array.from(ee.target.files).map(te=>({id:Math.random().toString(),name:te.name}));Y(te=>[...te,...fe]),ee.target.value=""}},J=(ee,fe)=>{ee(te=>te.filter(Re=>Re.id!==fe))},X=()=>{if(!P.equipCode)return"     .";if(!P.equipLocalName)return"      .";if(!P.productionLine)return"     .";if(!P.locationId)return"     .";if(!P.workCategory)return"   ()   .";if(!P.failureDesc)return"   .";if(i){if(!P.actionDesc)return"    .";if(!P.startDate||!P.startTime||!P.endDate||!P.endTime)return"      .";if(!P.downtime||!P.repairTime)return"       .";if(tf(P.startDate)||tf(P.endDate))return"         .";if(YD(P.startDate,P.startTime,P.endDate,P.endTime)===1)return":            ."}return null},ke=()=>!(!P.equipCode||!P.equipLocalName||!P.productionLine||!P.locationId||!P.workCategory||!P.priority||!P.workType||!P.failureDesc||i&&(!P.actionDesc||!P.downtime||!P.repairTime)),Se=async ee=>{ee.preventDefault(),f(null);const fe=X();if(fe){f(fe),s("GENERAL"),window.scrollTo(0,0);return}if(!window.confirm(i?"        ":"         "))return;const te={...P,labor:B,parts:W,docs:re};if(i&&e)e(te);else{x(!0);try{const Re=new Date,qe=$h(Re.getFullYear(),Re.getMonth()+1,Re.getDate()),ie=String(qe.jy).substring(2),_e=String(qe.jm).padStart(2,"0"),q=`W${ie}${_e}`,V=await Ho(q);Hi("WORK_ORDER",te,n,V,` : ${P.equipName||P.equipLocalName} - ${P.failureDesc.substring(0,30)}...`)?(g(!0),c(V)):f("   .    .")}catch(Re){console.error(Re),f("        .")}finally{x(!1)}}};return u?l.jsx("div",{className:"max-w-2xl mx-auto pt-8 pb-20 px-4",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fadeIn",children:[l.jsxs("div",{className:"bg-green-600 p-6 text-center text-white",children:[l.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 backdrop-blur-sm",children:l.jsx(js,{className:"w-10 h-10 text-white"})}),l.jsx("h2",{className:"text-2xl font-bold mb-1",children:h?"     ":"  "}),l.jsx("p",{className:"opacity-90 font-mono text-lg",children:u})]}),l.jsxs("div",{className:"p-6 space-y-3",children:[l.jsxs("button",{onClick:()=>r("/work-orders"),className:"w-full bg-white border border-gray-200 dark:bg-gray-700 py-3.5 rounded-xl flex items-center justify-center gap-2 font-medium hover:bg-gray-50 dark:hover:bg-gray-600",children:[l.jsx(ND,{className:"w-5 h-5"}),"     "]}),l.jsx("button",{onClick:()=>r("/"),className:"w-full text-gray-500 py-2 text-sm",children:"  "})]})]})}):l.jsxs("div",{className:"max-w-4xl mx-auto pb-20",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h1",{className:"text-2xl font-bold",children:o}),i&&l.jsx("div",{className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm font-bold",children:" "})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden",children:[l.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 overflow-x-auto",children:[l.jsx("button",{type:"button",onClick:()=>s("GENERAL"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${a==="GENERAL"?"border-primary text-primary":"border-transparent"}`,children:" "}),i&&l.jsxs(l.Fragment,{children:[l.jsx("button",{type:"button",onClick:()=>s("LABOR"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${a==="LABOR"?"border-primary text-primary":"border-transparent"}`,children:" "}),l.jsx("button",{type:"button",onClick:()=>s("PARTS"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${a==="PARTS"?"border-primary text-primary":"border-transparent"}`,children:" "})]}),l.jsx("button",{type:"button",onClick:()=>s("DOCS"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${a==="DOCS"?"border-primary text-primary":"border-transparent"}`,children:""})]}),l.jsxs("form",{onSubmit:Se,className:"p-6",children:[d&&l.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-6 flex items-start gap-3 text-sm animate-pulse border border-red-100",children:[l.jsx(nD,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),l.jsx("span",{children:d})]}),a==="GENERAL"&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 bg-gray-50 dark:bg-gray-700/50 p-4 rounded-xl border border-gray-100 dark:border-gray-600",children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-xs text-gray-500 mb-1",children:" "}),l.jsx("span",{className:"font-bold text-sm",children:P.requester})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-xs text-gray-500 mb-1",children:" "}),l.jsx("span",{className:"font-bold text-sm font-mono",children:P.reportDate})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-xs text-gray-500 mb-1",children:" "}),l.jsx("span",{className:"font-bold text-sm font-mono",children:P.reportTime})]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"text-xs text-gray-500 mb-1",children:" "}),l.jsxs("select",{value:P.shift,onChange:ee=>D({...P,shift:ee.target.value}),disabled:i,className:`text-sm font-bold border-none bg-transparent outline-none ${i?"cursor-not-allowed":"cursor-pointer"}`,children:[l.jsx("option",{value:"DayWork",children:""}),l.jsx("option",{value:"A",children:" A"}),l.jsx("option",{value:"B",children:" B"}),l.jsx("option",{value:"C",children:" C"})]})]})]}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/30 p-4 rounded-xl border border-gray-100 dark:border-gray-700 space-y-4",children:[l.jsx("h3",{className:"text-sm font-bold text-gray-500 mb-2",children:" "}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs font-medium mb-1.5 text-gray-700 dark:text-gray-300",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),i?l.jsx("input",{type:"text",value:P.equipCode,disabled:!0,className:"w-full p-2.5 border rounded-xl bg-gray-200 dark:bg-gray-600 cursor-not-allowed"}):l.jsxs("select",{value:P.equipCode,onChange:ye,className:"w-full p-2.5 border rounded-xl bg-white dark:bg-gray-700 outline-none disabled:bg-gray-100 disabled:dark:bg-gray-600",children:[l.jsx("option",{value:"",children:" ..."}),R.map(ee=>l.jsxs("option",{value:ee.code,children:[ee.code," - ",ee.name]},ee.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium mb-1.5 text-gray-700 dark:text-gray-300",children:"  ()"}),l.jsx("input",{type:"text",readOnly:!0,value:P.equipName,className:"w-full p-2.5 border rounded-xl bg-gray-200 dark:bg-gray-600 cursor-not-allowed opacity-70",placeholder:"     "})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs font-medium mb-1.5 text-gray-700 dark:text-gray-300",children:["   ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{required:!0,disabled:i,value:P.equipLocalName,onChange:I,className:`w-full p-2.5 border rounded-xl outline-none ${i?"bg-gray-200 dark:bg-gray-600 cursor-not-allowed":"bg-white dark:bg-gray-700"}`,children:[l.jsx("option",{value:"",children:"  ..."}),L.length>0?L.map(ee=>l.jsx("option",{value:ee.local_name,children:ee.local_name},ee.id)):l.jsx("option",{disabled:!0,children:"  "})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs font-medium mb-1.5 text-gray-700 dark:text-gray-300",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{required:!0,disabled:i,value:P.productionLine,onChange:ee=>D({...P,productionLine:ee.target.value}),className:`w-full p-2.5 border rounded-xl outline-none ${i?"bg-gray-200 dark:bg-gray-600 cursor-not-allowed":"bg-white dark:bg-gray-700"}`,children:[l.jsx("option",{value:"",children:" "}),l.jsx("option",{value:"Line A",children:"Line A"}),l.jsx("option",{value:"Line B",children:"Line B"}),l.jsx("option",{value:"Line A&B",children:"Line A&B"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs font-medium mb-1.5 text-gray-700 dark:text-gray-300",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{disabled:i,value:P.locationId,onChange:ee=>D({...P,locationId:ee.target.value}),className:`w-full p-2.5 border rounded-xl outline-none ${i?"bg-gray-200 dark:bg-gray-600 cursor-not-allowed":"bg-white dark:bg-gray-700"}`,children:[l.jsx("option",{value:"",children:" ..."}),A.map(ee=>l.jsx("option",{value:ee.id,children:ee.name},ee.id))]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1.5 text-gray-700 dark:text-gray-300",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{required:!0,disabled:i,value:P.workType,onChange:ee=>D({...P,workType:ee.target.value}),className:`w-full p-2.5 border rounded-xl outline-none ${i?"bg-gray-200 cursor-not-allowed":"bg-white dark:bg-gray-700"}`,children:[l.jsx("option",{value:"REPAIR",children:"  (EM)"}),l.jsx("option",{value:"PM",children:"  (PM)"}),l.jsx("option",{value:"PROJECT",children:" / "}),l.jsx("option",{value:"INSPECTION",children:" "}),l.jsx("option",{value:"SERVICE",children:" "})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1.5 text-gray-700 dark:text-gray-300",children:["  () ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{required:!0,disabled:i,value:P.workCategory,onChange:ee=>D({...P,workCategory:ee.target.value}),className:`w-full p-2.5 border rounded-xl outline-none ${i?"bg-gray-200 cursor-not-allowed":"bg-white dark:bg-gray-700"}`,children:[l.jsx("option",{value:"MECHANICAL",children:""}),l.jsx("option",{value:"ELECTRICAL",children:""}),l.jsx("option",{value:"INSTRUMENTATION",children:" "}),l.jsx("option",{value:"FACILITIES",children:" "})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1.5 text-gray-700 dark:text-gray-300",children:[" ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{required:!0,disabled:i,value:P.priority,onChange:ee=>D({...P,priority:ee.target.value}),className:`w-full p-2.5 border rounded-xl outline-none ${i?"bg-gray-200 cursor-not-allowed":"bg-white dark:bg-gray-700"}`,children:[l.jsx("option",{value:"NORMAL",children:""}),l.jsx("option",{value:"URGENT",children:""}),l.jsx("option",{value:"CRITICAL",children:" ( )"})]})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1.5 text-gray-700 dark:text-gray-300",children:["  /  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{required:!0,readOnly:i,className:`w-full p-4 border rounded-xl h-28 pl-10 resize-none ${i?"bg-gray-100 cursor-not-allowed":"bg-gray-50 dark:bg-gray-700"}`,placeholder:"    ...",value:P.failureDesc,onChange:ee=>D({...P,failureDesc:ee.target.value})}),!i&&l.jsx("button",{type:"button",onClick:()=>Z("failureDesc"),className:`absolute left-2 bottom-2 p-2 transition rounded-full ${b==="failureDesc"?"bg-red-100 text-red-600 animate-pulse":"text-gray-400 hover:text-primary"}`,children:b==="failureDesc"?l.jsx(Ct,{className:"w-5 h-5 animate-spin"}):l.jsx(Hr,{className:"w-5 h-5"})})]})]}),i&&l.jsxs("div",{className:"space-y-6 border-t-2 border-dashed border-gray-300 dark:border-gray-600 pt-6 mt-2",children:[l.jsxs("h3",{className:"text-lg font-bold text-primary flex items-center gap-2",children:[l.jsx(mA,{className:"w-5 h-5"}),"    (  )"]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1.5 text-gray-700 dark:text-gray-300",children:["   ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{required:!0,className:"w-full p-4 border rounded-xl bg-white dark:bg-gray-700 h-28 pl-10 outline-none resize-none",placeholder:"    ...",value:P.actionDesc,onChange:ee=>D({...P,actionDesc:ee.target.value})}),l.jsx("button",{type:"button",onClick:()=>Z("actionDesc"),className:`absolute left-2 bottom-2 p-2 transition rounded-full ${b==="actionDesc"?"bg-red-100 text-red-600 animate-pulse":"text-gray-400 hover:text-primary"}`,children:b==="actionDesc"?l.jsx(Ct,{className:"w-5 h-5 animate-spin"}):l.jsx(Hr,{className:"w-5 h-5"})})]})]}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-800 space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx(Mn,{label:" ",value:P.startDate,onChange:ee=>D({...P,startDate:ee})}),l.jsx(qr,{label:" ",value:P.startTime,onChange:ee=>D({...P,startTime:ee})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx(Mn,{label:" ",value:P.endDate,onChange:ee=>D({...P,endDate:ee})}),l.jsx(qr,{label:" ",value:P.endTime,onChange:ee=>D({...P,endTime:ee})})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs font-medium mb-1.5",children:["  () ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"number",required:!0,value:P.downtime,onChange:ee=>D({...P,downtime:ee.target.value}),className:"w-full p-2.5 border rounded-xl bg-white dark:bg-gray-700 text-center"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs font-medium mb-1.5",children:["   () ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"number",required:!0,value:P.repairTime,onChange:ee=>D({...P,repairTime:ee.target.value}),className:"w-full p-2.5 border rounded-xl bg-white dark:bg-gray-700 text-center"})]})]})]})]})]}),a==="LABOR"&&l.jsxs("div",{className:"space-y-4",children:[B.map(ee=>l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-600 space-y-3 animate-fadeIn",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1 ml-2",children:[l.jsxs("label",{className:"text-xs text-gray-500 mb-1 block",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:ee.name,onChange:fe=>ve(ee.id,"name",fe.target.value),className:"w-full p-2 border rounded-lg bg-white dark:bg-gray-800",children:[l.jsx("option",{value:"",children:"..."}),l.jsx("option",{value:" ",children:"  ()"}),l.jsx("option",{value:" ",children:"  ()"})]})]}),l.jsx("button",{type:"button",onClick:()=>J(U,ee.id),className:"p-2 text-red-500 hover:bg-red-100 rounded-lg mt-5",children:l.jsx(Et,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx(Mn,{label:" ",value:ee.startDate,onChange:fe=>ve(ee.id,"startDate",fe)}),l.jsx(qr,{label:" ",value:ee.startTime,onChange:fe=>ve(ee.id,"startTime",fe)}),l.jsx(Mn,{label:" ",value:ee.endDate,onChange:fe=>ve(ee.id,"endDate",fe)}),l.jsx(qr,{label:" ",value:ee.endTime,onChange:fe=>ve(ee.id,"endTime",fe)})]})]},ee.id)),l.jsxs("button",{type:"button",onClick:ce,className:"w-full flex items-center justify-center gap-2 text-primary border-2 border-dashed border-primary/30 px-4 py-3 rounded-lg hover:bg-primary/5 transition",children:[l.jsx(or,{className:"w-4 h-4"}),"   "]})]}),a==="PARTS"&&l.jsxs("div",{className:"space-y-4",children:[W.map(ee=>l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-xl space-y-3 animate-fadeIn relative",children:[l.jsx("button",{type:"button",onClick:()=>J(K,ee.id),className:"absolute top-4 left-4 p-1.5 text-red-500 hover:bg-red-100 rounded",children:l.jsx(Et,{className:"w-4 h-4"})}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:" "}),l.jsx("input",{type:"text",value:ee.code,onChange:fe=>se(ee.id,"code",fe.target.value),className:"w-full p-2 border rounded-lg bg-white dark:bg-gray-800",placeholder:" ..."})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"text-xs text-gray-500 mb-1 block",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:ee.name,onChange:fe=>se(ee.id,"name",fe.target.value),className:"w-full p-2 border rounded-lg bg-white dark:bg-gray-800",placeholder:"..."})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"text-xs text-gray-500 mb-1 block",children:[" ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"number",value:ee.qty,onChange:fe=>se(ee.id,"qty",Number(fe.target.value)),className:"w-full p-2 border rounded-lg bg-white dark:bg-gray-800"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"text-xs text-gray-500 mb-1 block",children:[" ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("select",{value:ee.unit,onChange:fe=>se(ee.id,"unit",fe.target.value),className:"w-full p-2 border rounded-lg bg-white dark:bg-gray-800",children:_.length>0?_.map(fe=>l.jsx("option",{value:fe.title,children:fe.title},fe.id)):l.jsx("option",{value:"",children:""})})]})]})]},ee.id)),l.jsxs("button",{type:"button",onClick:Ie,className:"w-full flex items-center justify-center gap-2 text-primary border-2 border-dashed border-primary/30 px-4 py-3 rounded-lg hover:bg-primary/5 transition",children:[l.jsx(or,{className:"w-4 h-4"}),"   "]})]}),a==="DOCS"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("input",{type:"file",ref:O,multiple:!0,className:"hidden",onChange:Ne}),l.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-8 text-center hover:bg-gray-50 dark:hover:bg-gray-700 transition cursor-pointer",onClick:()=>{var ee;return(ee=O.current)==null?void 0:ee.click()},children:[l.jsx(Qn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-500 mb-2 font-medium",children:"       "})]}),re.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-sm font-bold text-gray-500",children:"  :"}),re.map(ee=>l.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-gray-700 border p-3 rounded-lg shadow-sm",children:[l.jsx("span",{className:"text-sm truncate max-w-[200px]",children:ee.name}),l.jsx("button",{type:"button",onClick:()=>J(Y,ee.id),className:"text-red-500",children:l.jsx(Et,{className:"w-4 h-4"})})]},ee.id))]})]}),l.jsx("div",{className:"mt-8 pt-6 border-t border-gray-100 dark:border-gray-700 flex justify-end",children:l.jsxs("button",{disabled:!ke()||y,type:"submit",className:`bg-primary text-white px-8 py-3 rounded-xl shadow-lg shadow-red-900/20 flex items-center gap-2 hover:bg-red-800 transition transform active:scale-95 ${!ke()||y?"opacity-50 cursor-not-allowed bg-gray-400 hover:bg-gray-400 shadow-none":""}`,children:[y?l.jsx(Ct,{className:"w-5 h-5 animate-spin"}):l.jsx(En,{className:"w-5 h-5"}),i?"    ":"     "]})})]})]})]})},Use=()=>{const t=As(),[e,r]=T.useState([]),[n,i]=T.useState([]),[o,a]=T.useState([]),[s,u]=T.useState(null),[c,d]=T.useState(!1),[f,h]=T.useState([]),[g,b]=T.useState(""),[v,y]=T.useState("ALL"),[x,_]=T.useState(""),[w,E]=T.useState(""),[S,N]=T.useState(1),[k,A]=T.useState(10);T.useEffect(()=>{const O=V5();r(O.sort((P,D)=>D.createdAt.localeCompare(P.createdAt)))},[]),T.useEffect(()=>{let O=e;g&&(O=O.filter(P=>{var D;return P.title.includes(g)||P.trackingCode.includes(g)||((D=P.data)==null?void 0:D.equipName)&&P.data.equipName.includes(g)})),v!=="ALL"&&(O=O.filter(P=>C(P).includes(v))),x&&(O=O.filter(P=>P.createdAt>=x)),w&&(O=O.filter(P=>P.createdAt<=w)),i(O),N(1),h([])},[e,g,v,x,w]),T.useEffect(()=>{const O=(S-1)*k,P=O+k;a(n.slice(O,P))},[n,S,k]);const C=O=>{if(O.status==="DONE")return" ";const D=gu().find(U=>U.id===O.workflowId),B=D==null?void 0:D.steps.find(U=>U.id===O.currentStepId);return(B==null?void 0:B.title)||""},R=O=>{const P=C(O);let D="bg-gray-100 text-gray-600";return P.includes("")?D="bg-blue-100 text-blue-700":P.includes("")?D="bg-orange-100 text-orange-700":P.includes("")?D="bg-purple-100 text-purple-700":(P.includes("")||O.status==="DONE")&&(D="bg-green-100 text-green-700"),l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${D}`,children:P})},$=O=>{O.target.checked?h(o.map(P=>P.id)):h([])},L=O=>{f.includes(O)?h(f.filter(P=>P!==O)):h([...f,O])},M=()=>{const O=f.length>0?e.filter(K=>f.includes(K.id)):n;if(O.length===0){alert("    .");return}const P=[" ","",""," ","",""],D=O.map(K=>{var re,Y;return[K.trackingCode,((re=K.data)==null?void 0:re.equipName)||"-",K.title,((Y=K.data)==null?void 0:Y.requester)||"-",K.createdAt,C(K)]}),B="data:text/csv;charset=utf-8,\uFEFF"+P.join(",")+`
`+D.map(K=>K.join(",")).join(`
`),U=encodeURI(B),W=document.createElement("a");W.setAttribute("href",U),W.setAttribute("download",`work_orders_report_${new Date().getTime()}.csv`),document.body.appendChild(W),W.click(),document.body.removeChild(W)};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 rounded-lg shadow-sm",children:l.jsx(CA,{className:"w-6 h-6 text-primary"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"  "}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"     "})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[f.length>0&&l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 px-3 py-2 rounded-lg text-sm font-medium animate-fadeIn",children:[f.length,"   "]}),l.jsxs("button",{onClick:M,className:"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-600 px-4 py-2.5 rounded-xl shadow-sm flex items-center gap-2 hover:bg-gray-50 dark:hover:bg-gray-600 transition font-medium",children:[l.jsx(xA,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden md:inline",children:" "})]}),l.jsxs("button",{onClick:()=>t("/work-orders/new"),className:"bg-primary text-white px-4 py-2.5 rounded-xl shadow-lg shadow-red-900/20 flex items-center gap-2 hover:bg-red-800 transition transform active:scale-95 font-medium",children:[l.jsx(or,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden md:inline",children:"  "})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:[l.jsxs("div",{className:"p-4 flex flex-col md:flex-row gap-4 items-center",children:[l.jsxs("div",{className:"relative flex-1 w-full",children:[l.jsx(Oo,{className:"absolute right-3 top-3 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:" (  ...)",value:g,onChange:O=>b(O.target.value),className:"w-full pr-10 pl-4 py-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl outline-none focus:ring-2 focus:ring-primary transition-all"})]}),l.jsxs("button",{onClick:()=>d(!c),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl border transition-all ${c?"bg-primary/5 border-primary text-primary":"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600"}`,children:[l.jsx(Rh,{className:"w-5 h-5"}),l.jsx("span",{children:""}),c?l.jsx(yA,{className:"w-4 h-4"}):l.jsx(Ih,{className:"w-4 h-4"})]})]}),c&&l.jsxs("div",{className:"px-4 pb-4 pt-0 grid grid-cols-1 md:grid-cols-4 gap-4 animate-fadeIn",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:""}),l.jsxs("select",{value:v,onChange:O=>y(O.target.value),className:"w-full p-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg outline-none",children:[l.jsx("option",{value:"ALL",children:" "}),l.jsx("option",{value:"",children:" "}),l.jsx("option",{value:"",children:"  "}),l.jsx("option",{value:"",children:" "}),l.jsx("option",{value:"",children:" "})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" "}),l.jsx("input",{type:"text",placeholder:"1403/01/01",value:x,onChange:O=>_(O.target.value),className:"w-full p-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg outline-none text-left",dir:"ltr"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" "}),l.jsx("input",{type:"text",placeholder:"1403/12/29",value:w,onChange:O=>E(O.target.value),className:"w-full p-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg outline-none text-left",dir:"ltr"})]}),l.jsx("div",{className:"flex items-end",children:l.jsx("button",{onClick:()=>{y("ALL"),_(""),E(""),b("")},className:"w-full p-2.5 text-red-500 hover:bg-red-50 rounded-lg transition text-sm",children:"  "})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden border border-gray-100 dark:border-gray-700",children:[l.jsx("div",{className:"overflow-x-auto min-h-[300px]",children:l.jsxs("table",{className:"w-full text-right text-sm",children:[l.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 text-gray-500 font-medium",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 w-10",children:l.jsx("input",{type:"checkbox",onChange:$,checked:o.length>0&&f.length===o.length,className:"w-4 h-4 rounded text-primary focus:ring-primary cursor-pointer"})}),l.jsx("th",{className:"p-4",children:" "}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4",children:"  / "}),l.jsx("th",{className:"p-4",children:" "}),l.jsx("th",{className:"p-4",children:" "}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4",children:""})]})}),l.jsx("tbody",{className:"divide-y dark:divide-gray-700",children:o.length>0?o.map(O=>{var P,D,B;return l.jsxs("tr",{className:`hover:bg-gray-50 dark:hover:bg-gray-700/50 transition ${f.includes(O.id)?"bg-blue-50 dark:bg-blue-900/10":""}`,children:[l.jsx("td",{className:"p-4",children:l.jsx("input",{type:"checkbox",checked:f.includes(O.id),onChange:()=>L(O.id),className:"w-4 h-4 rounded text-primary focus:ring-primary cursor-pointer"})}),l.jsx("td",{className:"p-4 font-mono font-bold text-gray-600 dark:text-gray-300",children:O.trackingCode}),l.jsx("td",{className:"p-4 font-bold text-gray-800 dark:text-gray-100",children:((P=O.data)==null?void 0:P.equipName)||"-"}),l.jsx("td",{className:"p-4 text-gray-500 truncate max-w-[200px]",children:((D=O.data)==null?void 0:D.failureDesc)||O.title}),l.jsx("td",{className:"p-4",children:((B=O.data)==null?void 0:B.requester)||""}),l.jsx("td",{className:"p-4 font-mono text-xs text-gray-500",children:O.createdAt}),l.jsx("td",{className:"p-4",children:R(O)}),l.jsx("td",{className:"p-4",children:l.jsxs("button",{onClick:()=>u(O),className:"text-primary hover:bg-primary/10 p-2 rounded-lg transition flex items-center gap-1 text-xs font-bold",children:[l.jsx(Vv,{className:"w-4 h-4"})," "]})})]},O.id)}):l.jsx("tr",{children:l.jsxs("td",{colSpan:8,className:"p-12 text-center text-gray-400 flex flex-col items-center justify-center",children:[l.jsx(Oo,{className:"w-12 h-12 mb-4 opacity-20"}),l.jsx("span",{children:"     ."})]})})})]})}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 border-t dark:border-gray-700 p-4 flex flex-col md:flex-row justify-between items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[l.jsx("span",{children:""}),l.jsxs("select",{value:k,onChange:O=>{A(Number(O.target.value)),N(1)},className:"bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded p-1 outline-none",children:[l.jsx("option",{value:10,children:"10"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"}),l.jsx("option",{value:200,children:"200"})]}),l.jsx("span",{children:"   "}),l.jsxs("span",{className:"mr-2 px-2 border-r border-gray-300 dark:border-gray-600",children:[": ",n.length," "]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{disabled:S===1,onClick:()=>N(O=>Math.max(1,O-1)),className:"p-2 border rounded-lg hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed",children:l.jsx(oc,{className:"w-4 h-4"})}),l.jsxs("span",{className:"px-4 text-sm font-bold",children:[" ",S,"  ",Math.ceil(n.length/k)||1]}),l.jsx("button",{disabled:S>=Math.ceil(n.length/k),onClick:()=>N(O=>O+1),className:"p-2 border rounded-lg hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed",children:l.jsx(Oh,{className:"w-4 h-4"})})]})]})]}),s&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-4xl h-[90vh] flex flex-col overflow-hidden animate-fadeIn",children:[l.jsxs("div",{className:"flex justify-between items-center p-4 border-b dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-lg",children:s.title}),l.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 px-2 py-0.5 rounded text-xs",children:s.trackingCode})]}),l.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full",children:l.jsx(ht,{className:"w-6 h-6"})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-100 dark:bg-black/20 p-4",children:l.jsx("div",{className:"pointer-events-none opacity-90",children:l.jsx(ob,{initialData:s.data})})}),l.jsx("div",{className:"p-4 border-t dark:border-gray-700 bg-white dark:bg-gray-800 flex justify-end",children:l.jsx("button",{onClick:()=>u(null),className:"px-6 py-2 bg-gray-200 dark:bg-gray-700 rounded-lg hover:bg-gray-300 transition",children:""})})]})})]})},Fse=[{id:"1",desc:"   ",status:null},{id:"2",desc:"  ",status:null},{id:"3",desc:"  ",status:null},{id:"4",desc:"   ",status:null}],Bse=({user:t})=>{const e=As(),[r,n]=T.useState("SELECT"),[i,o]=T.useState(Fse),[a,s]=T.useState(""),u=(h,g)=>{o(b=>b.map(v=>v.id===h?{...v,status:g}:v))},c=()=>{n("SENDING"),setTimeout(()=>{s(jA("J")),n("RESULT")},3e3)},d=i.filter(h=>h.status===null).length,f=(i.length-d)/i.length*100;if(r==="SELECT")return l.jsxs("div",{className:"flex flex-col items-center justify-center h-[80vh] space-y-8",children:[l.jsx("div",{className:"w-40 h-40 bg-white dark:bg-gray-800 rounded-full flex items-center justify-center shadow-xl cursor-pointer hover:scale-105 transition",onClick:()=>n("CHECKLIST"),children:l.jsx($D,{className:"w-20 h-20 text-primary"})}),l.jsx("p",{className:"text-lg font-medium",children:" QR   "}),l.jsx("button",{onClick:()=>n("CHECKLIST"),className:"bg-primary text-white px-8 py-3 rounded-full shadow-lg",children:"   "})]});if(r==="SENDING")return l.jsxs("div",{className:"flex flex-col items-center justify-center h-[80vh] text-center p-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-primary mb-8"}),l.jsx("h2",{className:"text-xl font-bold mb-4",children:"   ..."}),l.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-100 dark:border-blue-800",children:l.jsx("p",{className:"text-blue-700 dark:text-blue-300 font-medium",children:"      "})})]});if(r==="RESULT"){const h=i.filter(g=>g.status==="NOK");return l.jsxs("div",{className:"max-w-md mx-auto space-y-6 pt-4",children:[l.jsxs("div",{className:"text-center space-y-2",children:[l.jsx("div",{className:"text-4xl animate-bounce",children:""}),l.jsxs("h2",{className:"text-xl font-bold text-green-600",children:[t.fullName,"  "]}),l.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-2 inline-block font-mono text-sm",children:[" : ",a]})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 space-y-4",children:[l.jsx("h3",{className:"font-bold border-b pb-2",children:" "}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[l.jsx("span",{className:"text-gray-500",children:":"}),l.jsx("span",{children:"  101"}),l.jsx("span",{className:"text-gray-500",children:":"}),l.jsx("span",{children:at()}),l.jsx("span",{className:"text-gray-500",children:":"}),l.jsxs("span",{className:"text-green-600 font-bold",children:[i.filter(g=>g.status==="OK").length," "]}),l.jsx("span",{className:"text-gray-500",children:":"}),l.jsxs("span",{className:"text-red-600 font-bold",children:[h.length," "]})]}),h.length>0&&l.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-3 rounded text-sm mt-2",children:[l.jsx("p",{className:"font-bold text-red-700 dark:text-red-400 mb-1",children:" :"}),l.jsx("ul",{className:"list-disc list-inside",children:h.map(g=>l.jsx("li",{children:g.desc},g.id))})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("button",{className:"flex-1 bg-green-600 text-white py-3 rounded-xl flex items-center justify-center gap-2 shadow-lg",children:[l.jsx(Hv,{className:"w-5 h-5"}),"  "]}),l.jsxs("button",{onClick:()=>e("/"),className:"flex-1 bg-gray-600 text-white py-3 rounded-xl flex items-center justify-center gap-2 shadow-lg",children:[l.jsx(wA,{className:"w-5 h-5"})," "]})]})]})}return l.jsxs("div",{className:"max-w-2xl mx-auto pb-24",children:[l.jsxs("div",{className:"sticky top-0 bg-gray-50 dark:bg-gray-900 z-10 py-4 shadow-sm",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("h2",{className:"font-bold text-lg",children:"   PM-101"}),l.jsxs("span",{className:"text-sm bg-accent text-white px-2 py-1 rounded-full",children:[d," "]})]}),l.jsx("div",{className:"h-2 w-full bg-gray-200 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-accent transition-all duration-300",style:{width:`${f}%`}})})]}),l.jsx("div",{className:"space-y-4 mt-4",children:i.map(h=>l.jsxs("div",{className:`bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border-r-4 ${h.status==="OK"?"border-green-500":h.status==="NOK"?"border-red-500":"border-gray-300"}`,children:[l.jsx("p",{className:"font-medium mb-4",children:h.desc}),h.status!=="NOK"?l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("button",{onClick:()=>u(h.id,"OK"),className:`flex-1 py-3 rounded-lg flex items-center justify-center gap-2 transition-colors ${h.status==="OK"?"bg-green-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-500 hover:bg-green-100"}`,children:[l.jsx(es,{className:"w-5 h-5"})," "]}),l.jsxs("button",{onClick:()=>u(h.id,"NOK"),className:"flex-1 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-red-100 text-gray-500 rounded-lg flex items-center justify-center gap-2",children:[l.jsx(ht,{className:"w-5 h-5"})," "]})]}):l.jsxs("div",{className:"space-y-3 animate-fadeIn",children:[l.jsxs("label",{className:"text-xs font-bold text-red-500 block mb-1",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",placeholder:"   ...",className:"w-full p-2 pr-10 border border-red-300 rounded-lg bg-red-50 dark:bg-red-900/10",autoFocus:!0}),l.jsx(Hr,{className:"absolute left-2 top-2 text-gray-400 w-5 h-5"})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("button",{className:"text-blue-600 flex items-center gap-1 text-sm",children:[l.jsx(Kd,{className:"w-4 h-4"}),"  "]}),l.jsx("button",{onClick:()=>u(h.id,null),className:"text-gray-400 text-sm",children:""})]})]})]},h.id))}),l.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white dark:bg-gray-800 border-t dark:border-gray-700 md:relative md:bg-transparent md:border-none",children:l.jsx("button",{disabled:d>0,onClick:c,className:"w-full bg-primary disabled:bg-gray-400 text-white py-4 rounded-xl font-bold shadow-lg transition-all transform active:scale-95",children:"   "})})]})},qse=({user:t})=>{const[e,r]=T.useState("LIST"),[n,i]=T.useState([]),[o,a]=T.useState(!1),[s,u]=T.useState(!1),[c,d]=T.useState([]),[f,h]=T.useState([]),[g,b]=T.useState([]),[v,y]=T.useState([]),[x,_]=T.useState({mainCatId:"",subCatId:"",subSubCatId:"",search:""}),[w,E]=T.useState([]),[S,N]=T.useState({requestDate:at(),requestTime:rs(),workOrderId:"",description:""}),[k,A]=T.useState([]),[C,R]=T.useState({id:"",partId:"",partName:"",partCode:"",qty:1,unit:"",note:""}),[$,L]=T.useState(!1);T.useEffect(()=>{O(),M()},[]);const M=async()=>{const I=Fh("PART_REQUEST");i(I.map(Z=>({...Z,...Z.data})))},O=async()=>{a(!0);const[I,Z,ce,ve]=await Promise.all([Fe("part_categories"),Fe("parts"),Fe("measurement_units"),Oe.from("cartable_items").select("*").eq("module","WORK_ORDER").neq("status","DONE")]);d(I||[]),h(Z||[]),b(ce||[]),y(ve.data||[]),ce&&ce.length>0&&R(Ie=>({...Ie,unit:ce[0].title})),a(!1)};T.useEffect(()=>{let I=f;if(x.subSubCatId)I=I.filter(Z=>Z.category_id===x.subSubCatId);else if(x.subCatId){const Z=c.filter(ce=>ce.parent_id===x.subCatId).map(ce=>ce.id);I=I.filter(ce=>Z.includes(ce.category_id))}else if(x.mainCatId){const Z=c.filter(ve=>ve.parent_id===x.mainCatId).map(ve=>ve.id),ce=c.filter(ve=>Z.includes(ve.parent_id)).map(ve=>ve.id);I=I.filter(ve=>ce.includes(ve.category_id))}if(x.search){const Z=x.search.toLowerCase();I=I.filter(ce=>ce.name&&ce.name.toLowerCase().includes(Z)||ce.code&&ce.code.toLowerCase().includes(Z))}E(I)},[x,f,c]);const P=I=>{var ve,Ie;const Z=f.find(se=>se.id===I);if(!Z)return;const ce=((ve=g.find(se=>se.id===Z.consumption_unit_id))==null?void 0:ve.title)||((Ie=g[0])==null?void 0:Ie.title)||"";R(se=>({...se,partId:Z.id,partName:Z.name,partCode:Z.code,unit:ce}))},D=()=>{if(!C.partId&&!C.partName){alert("          .");return}if(C.qty<=0){alert("     .");return}const I={...C,id:Math.random().toString()};A(Z=>[...Z,I]),R({id:"",partId:"",partName:"",partCode:"",qty:1,unit:C.unit,note:""})},B=I=>{R(I),L(!0),A(Z=>Z.filter(ce=>ce.id!==I.id))},U=()=>{var I;!C.partName||C.qty<=0||(A(Z=>[...Z,C]),L(!1),R({id:"",partId:"",partName:"",partCode:"",qty:1,unit:((I=g[0])==null?void 0:I.title)||"",note:""}))},W=I=>{window.confirm("      ")&&A(Z=>Z.filter(ce=>ce.id!==I))},K=async I=>{if(I.preventDefault(),k.length===0){alert("   .      .");return}if(!S.workOrderId&&!S.description.trim()){alert("       ( )  .");return}u(!0);try{const Z=new Date,ce=at().split("/"),ve=await Ho("P"),Ie=v.find(ee=>ee.id===S.workOrderId),se=Ie?Ie.tracking_code:null,Ne={tracking_code:ve,requester_id:t.id,requester_name:t.fullName,work_order_id:S.workOrderId||null,work_order_code:se,request_date:S.requestDate,description:S.description||(Ie?`   ${Ie.title}`:""),status:"PENDING"},{data:J,error:X}=await Oe.from("part_requests").insert([Ne]).select().single();if(X)throw X;const ke=k.map(ee=>({request_id:J.id,part_id:ee.partId||null,part_name:ee.partName,qty:ee.qty,unit:ee.unit,note:ee.note})),{error:Se}=await Oe.from("part_request_items").insert(ke);if(Se)throw Se;Hi("PART_REQUEST",{...Ne,items:k},t,ve,` : ${k.length} `),alert(`    ${ve}    .`),r("LIST"),M(),A([]),N({requestDate:at(),requestTime:rs(),workOrderId:"",description:""})}catch(Z){console.error(Z),alert("   : "+Z.message)}finally{u(!1)}},re=c.filter(I=>I.level_type==="MAIN"),Y=c.filter(I=>I.level_type==="SUB"&&(!x.mainCatId||I.parent_id===x.mainCatId)),ye=c.filter(I=>I.level_type==="SUB_SUB"&&(!x.subCatId||I.parent_id===x.subCatId));return e==="LIST"?l.jsx("div",{className:"max-w-7xl mx-auto pb-20",children:l.jsx(gi,{title:"   ",icon:Ml,data:n,onAdd:()=>r("NEW"),columns:[{header:" ",accessor:I=>l.jsx("span",{className:"font-mono font-bold",children:I.trackingCode})},{header:" ",accessor:I=>I.createdAt},{header:"  ",accessor:I=>{var Z;return((Z=I.data)==null?void 0:Z.work_order_code)||"-"}},{header:" ",accessor:I=>{var Z,ce;return l.jsx("span",{className:"bg-blue-50 text-blue-700 px-2 py-0.5 rounded font-bold",children:((ce=(Z=I.data)==null?void 0:Z.items)==null?void 0:ce.length)||0})}},{header:" ",accessor:I=>{var Z;return((Z=I.data)==null?void 0:Z.requester_name)||t.fullName}},{header:"",accessor:I=>l.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${I.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:I.status==="PENDING"?"  ":" "})}]})}):l.jsxs("div",{className:"max-w-5xl mx-auto pb-20",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:l.jsx(Ml,{className:"w-8 h-8 text-primary"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold",children:"   / "}),l.jsx("p",{className:"text-xs text-gray-500",children:"    "})]})]}),l.jsx("button",{onClick:()=>r("LIST"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:l.jsx(ht,{className:"w-6 h-6"})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:[l.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-200 border-b dark:border-gray-600 pb-2 mb-4",children:"  "}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" "}),l.jsx("div",{className:"p-2.5 bg-gray-100 dark:bg-gray-700 rounded-lg text-sm",children:t.fullName})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:""}),l.jsx("div",{className:"p-2.5 bg-gray-100 dark:bg-gray-700 rounded-lg text-sm font-mono text-center",children:S.requestDate})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"  "}),l.jsxs("select",{value:S.workOrderId,onChange:I=>N({...S,workOrderId:I.target.value}),className:"w-full p-2.5 border rounded-lg bg-white dark:bg-gray-600 text-sm outline-none focus:ring-2 focus:ring-primary",children:[l.jsx("option",{value:"",children:"  ()"}),v.map(I=>l.jsxs("option",{value:I.id,children:[I.tracking_code," - ",I.title]},I.id))]})]}),!S.workOrderId&&l.jsxs("div",{className:"md:col-span-3 animate-fadeIn",children:[l.jsxs("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:["  () ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:S.description,onChange:I=>N({...S,description:I.target.value}),className:"w-full p-2.5 border rounded-lg outline-none focus:ring-2 focus:ring-primary",placeholder:"    ..."})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700",children:[l.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-200 border-b dark:border-gray-600 pb-2 mb-4 flex items-center gap-2",children:[l.jsx(or,{className:"w-5 h-5 text-green-600"}),$?"  ":"  "]}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-3 rounded-lg border border-blue-100 dark:border-blue-800 mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-blue-700 mb-2",children:[l.jsx(Rh,{className:"w-4 h-4"}),"  "]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-2",children:[l.jsxs("select",{value:x.mainCatId,onChange:I=>_({...x,mainCatId:I.target.value,subCatId:"",subSubCatId:""}),className:"p-2 rounded border outline-none text-xs",children:[l.jsx("option",{value:"",children:"  "}),re.map(I=>l.jsx("option",{value:I.id,children:I.name},I.id))]}),l.jsxs("select",{value:x.subCatId,onChange:I=>_({...x,subCatId:I.target.value,subSubCatId:""}),className:"p-2 rounded border outline-none text-xs",disabled:!x.mainCatId,children:[l.jsx("option",{value:"",children:"  "}),Y.map(I=>l.jsx("option",{value:I.id,children:I.name},I.id))]}),l.jsxs("select",{value:x.subSubCatId,onChange:I=>_({...x,subSubCatId:I.target.value}),className:"p-2 rounded border outline-none text-xs",disabled:!x.subCatId,children:[l.jsx("option",{value:"",children:" "}),ye.map(I=>l.jsx("option",{value:I.id,children:I.name},I.id))]}),l.jsxs("div",{className:"relative",children:[l.jsx(Oo,{className:"absolute left-2 top-2 w-4 h-4 text-gray-400"}),l.jsx("input",{type:"text",placeholder:" /...",value:x.search,onChange:I=>_({...x,search:I.target.value}),className:"w-full p-2 pl-8 rounded border outline-none text-xs"})]})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:C.partId,onChange:I=>P(I.target.value),className:"w-full p-3 border rounded-xl bg-white dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary",children:[l.jsx("option",{value:"",children:"--     --"}),w.map(I=>l.jsxs("option",{value:I.id,children:[I.name," ",I.code?`(${I.code})`:""]},I.id))]}),l.jsx("div",{className:"mt-1 text-xs text-gray-400",children:w.length===0?"   .":`${w.length}   .`})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 items-end",children:[l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"  (   )"}),l.jsx("input",{type:"text",value:C.partName,onChange:I=>R({...C,partName:I.target.value}),className:"w-full p-2.5 border rounded-lg outline-none focus:ring-2 focus:ring-primary",placeholder:" ..."})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:[" ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"number",min:"0.01",step:"0.01",value:C.qty,onChange:I=>R({...C,qty:Number(I.target.value)}),className:"w-full p-2.5 border rounded-lg outline-none focus:ring-2 focus:ring-primary text-center font-bold"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:[" ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("select",{value:C.unit,onChange:I=>R({...C,unit:I.target.value}),className:"w-full p-2.5 border rounded-lg outline-none focus:ring-2 focus:ring-primary",children:g.map(I=>l.jsx("option",{value:I.title,children:I.title},I.id))})]})]}),l.jsx("div",{className:"mt-3",children:l.jsx("input",{type:"text",value:C.note,onChange:I=>R({...C,note:I.target.value}),className:"w-full p-2.5 border rounded-lg outline-none focus:ring-2 focus:ring-primary text-sm",placeholder:"     ()..."})}),l.jsx("div",{className:"mt-4 flex justify-end",children:$?l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{var I;L(!1),R({id:"",partId:"",partName:"",partCode:"",qty:1,unit:((I=g[0])==null?void 0:I.title)||"",note:""})},className:"px-4 py-2 border rounded-lg text-gray-500 hover:bg-gray-100",children:""}),l.jsx("button",{onClick:U,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow-lg",children:""})]}):l.jsxs("button",{onClick:D,className:"w-full sm:w-auto px-6 py-2.5 bg-green-600 text-white rounded-xl hover:bg-green-700 shadow-lg flex items-center justify-center gap-2 font-bold transition transform active:scale-95",children:[l.jsx(or,{className:"w-5 h-5"}),"   "]})})]})]}),l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden h-full flex flex-col",children:[l.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 border-b dark:border-gray-700 flex justify-between items-center",children:[l.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[l.jsx(ED,{className:"w-5 h-5"}),"   "]}),l.jsx("span",{className:"bg-primary text-white text-xs px-2 py-1 rounded-full",children:k.length})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2 max-h-[500px]",children:k.length===0?l.jsxs("div",{className:"text-center py-10 text-gray-400 text-sm",children:[l.jsx(Ml,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"    ."]}):k.map((I,Z)=>l.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded-lg border border-gray-100 dark:border-gray-600 shadow-sm hover:shadow-md transition relative group",children:[l.jsxs("div",{className:"flex justify-between items-start mb-1",children:[l.jsx("span",{className:"font-bold text-sm text-gray-800 dark:text-gray-200",children:I.partName}),l.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-600 px-1.5 py-0.5 rounded font-mono text-gray-500",children:I.partCode||"---"})]}),l.jsxs("div",{className:"text-sm text-blue-600 font-bold mb-1",children:[I.qty," ",I.unit]}),I.note&&l.jsx("div",{className:"text-xs text-gray-500 italic border-t pt-1 mt-1",children:I.note}),l.jsxs("div",{className:"absolute top-2 left-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity bg-white/80 dark:bg-gray-800/80 rounded p-0.5 backdrop-blur-sm",children:[l.jsx("button",{onClick:()=>B(I),className:"p-1 text-blue-500 hover:bg-blue-50 rounded",children:l.jsx(Mh,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>W(I.id),className:"p-1 text-red-500 hover:bg-red-50 rounded",children:l.jsx(Et,{className:"w-4 h-4"})})]})]},I.id))}),l.jsx("div",{className:"p-4 border-t dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:l.jsxs("button",{onClick:K,disabled:k.length===0||s||!S.workOrderId&&!S.description,className:"w-full bg-primary text-white py-3 rounded-xl shadow-xl hover:bg-red-800 transition font-bold flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[s?l.jsx(Ct,{className:"w-5 h-5 animate-spin"}):l.jsx(En,{className:"w-5 h-5"}),"  "]})})]})})]})]})},Vse=()=>{const[t,e]=T.useState("LIST"),[r,n]=T.useState([]),[i,o]=T.useState(!1),[a,s]=T.useState(!1),u=T.useRef(null),[c,d]=T.useState(null),[f,h]=T.useState({code:"",name:"",type:""});T.useEffect(()=>{g()},[t]);const g=async()=>{o(!0);try{const{data:w,error:E}=await Oe.from("technical_documents").select("*").order("created_at",{ascending:!1});if(E)throw E;n(w||[])}catch(w){console.error("Error fetching documents:",w)}finally{o(!1)}},b=()=>{var w;(w=u.current)==null||w.click()},v=w=>{w.target.files&&w.target.files[0]&&d(w.target.files[0])},y=()=>f.code.trim()!==""&&f.name.trim()!==""&&f.type!=="",x=async w=>{if(w.preventDefault(),!!y()){s(!0);try{const E={code:f.code,title:f.name,type:f.type,file_name:c?c.name:" "},{error:S}=await Oe.from("technical_documents").insert([E]);if(S)throw S;alert("    ."),h({code:"",name:"",type:""}),d(null),u.current&&(u.current.value=""),e("LIST"),g()}catch(E){alert("   : "+E.message)}finally{s(!1)}}},_=async w=>{if(window.confirm("      "))try{const{error:E}=await Oe.from("technical_documents").delete().eq("id",w.id);if(E)throw E;n(S=>S.filter(N=>N.id!==w.id))}catch(E){alert("  : "+E.message)}};return t==="LIST"?l.jsxs("div",{className:"max-w-7xl mx-auto pb-20",children:[l.jsx("div",{className:"flex justify-end mb-4",children:l.jsx("button",{onClick:g,className:"p-2 bg-white dark:bg-gray-800 rounded-lg shadow hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:l.jsx(Kg,{className:`w-5 h-5 ${i?"animate-spin":""}`})})}),l.jsx(gi,{title:"  ",icon:Ol,data:r,onAdd:()=>e("NEW"),onDelete:_,columns:[{header:" ",accessor:w=>l.jsx("span",{className:"font-mono font-bold",children:w.code})},{header:" ",accessor:w=>w.title},{header:" ",accessor:w=>w.type},{header:" ",accessor:w=>w.file_name||"-"},{header:" ",accessor:w=>new Date(w.created_at).toLocaleDateString("fa-IR")}]})]}):l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ol,{className:"w-8 h-8 text-primary"}),l.jsx("h1",{className:"text-2xl font-bold",children:"    "})]}),l.jsx("button",{onClick:()=>e("LIST"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:l.jsx(ht,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm h-fit border border-gray-200 dark:border-gray-700",children:l.jsxs("form",{onSubmit:x,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm mb-1 font-bold text-gray-700 dark:text-gray-300",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:f.code,onChange:w=>h({...f,code:w.target.value}),className:"w-full p-3 border rounded-xl bg-gray-50 dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary transition-all",required:!0,placeholder:": MAP-101"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm mb-1 font-bold text-gray-700 dark:text-gray-300",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:f.name,onChange:w=>h({...f,name:w.target.value}),className:"w-full p-3 border rounded-xl bg-gray-50 dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary transition-all",required:!0,placeholder:"   ..."})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm mb-1 font-bold text-gray-700 dark:text-gray-300",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:f.type,onChange:w=>h({...f,type:w.target.value}),className:"w-full p-3 border rounded-xl bg-gray-50 dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary transition-all cursor-pointer",required:!0,children:[l.jsx("option",{value:"",children:" ..."}),l.jsx("option",{value:"MAP",children:" "}),l.jsx("option",{value:"CATALOG",children:"  "}),l.jsx("option",{value:"MANUAL",children:" "}),l.jsx("option",{value:"OTHER",children:" "})]})]}),l.jsx("input",{type:"file",ref:u,onChange:v,className:"hidden"}),l.jsxs("div",{onClick:b,className:`border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-all mt-6
                ${c?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}
              `,children:[l.jsx(uu,{className:`w-10 h-10 mx-auto mb-4 ${c?"text-green-600":"text-gray-400"}`}),l.jsx("span",{className:"text-sm font-bold text-gray-600 dark:text-gray-300 block",children:c?c.name:"    "}),l.jsx("span",{className:"text-xs text-gray-400 mt-2 block",children:"PDF, JPG, PNG (Max 10MB)"})]}),l.jsxs("div",{className:"flex gap-3 pt-6 border-t dark:border-gray-700 mt-6",children:[l.jsx("button",{type:"button",onClick:()=>e("LIST"),className:"flex-1 border py-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:""}),l.jsxs("button",{type:"submit",disabled:!y()||a,className:`flex-[2] py-3 rounded-xl shadow-lg font-bold transition-all flex items-center justify-center gap-2
                        ${y()&&!a?"bg-primary text-white hover:bg-red-800 cursor-pointer transform active:scale-95":"bg-gray-300 text-gray-500 dark:bg-gray-700 dark:text-gray-400 cursor-not-allowed opacity-70"}
                    `,children:[a?l.jsx(Ct,{className:"w-5 h-5 animate-spin"}):l.jsx(Ol,{className:"w-5 h-5"}),"  "]})]})]})})]})},sE=({value:t,onChange:e,label:r,error:n})=>{const[i,o]=T.useState(!1),a=T.useRef(null),s=Array.from({length:24},(g,b)=>String(b).padStart(2,"0")),u=Array.from({length:12},(g,b)=>String(b*5).padStart(2,"0"));T.useEffect(()=>{const g=b=>{a.current&&!a.current.contains(b.target)&&o(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const[c,d]=t?t.split(":"):["--","--"],f=g=>{e(`${g}:${d==="--"?"00":d}`)},h=g=>{e(`${c==="--"?"00":c}:${g}`),o(!1)};return l.jsxs("div",{className:"relative",ref:a,children:[r&&l.jsx("label",{className:"block text-xs font-medium mb-1.5 text-gray-700 dark:text-gray-300",children:r}),l.jsxs("button",{type:"button",onClick:()=>o(!i),className:`w-full flex items-center justify-between px-4 py-2.5 bg-white dark:bg-gray-700 rounded-xl border transition-all
        ${n?"border-red-500 text-red-500":"border-gray-200 dark:border-gray-600 hover:border-primary/50 text-gray-800 dark:text-gray-100"} ${i?"ring-2 ring-primary/20 border-primary shadow-sm":""}`,children:[l.jsx("span",{className:`font-mono text-lg tracking-wider ${t?"":"text-gray-400 text-sm font-sans tracking-normal"}`,children:t||" ..."}),l.jsx(Ps,{className:"w-4 h-4 text-gray-400"})]}),i&&l.jsxs("div",{className:"absolute top-full left-0 z-50 mt-2 w-48 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-100 dark:border-gray-600 p-2 animate-fadeIn flex gap-2 h-64",children:[l.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[l.jsx("div",{className:"text-xs text-center text-gray-400 py-1 sticky top-0 bg-gray-50 dark:bg-gray-700/50",children:""}),u.map(g=>l.jsx("button",{type:"button",onClick:()=>h(g),className:`w-full text-center py-2 text-sm font-mono rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition
                        ${d===g?"bg-primary text-white hover:bg-primary font-bold shadow-sm":"text-gray-700 dark:text-gray-300"}
                    `,children:g},g))]}),l.jsx("div",{className:"flex items-center justify-center font-bold text-gray-300",children:":"}),l.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[l.jsx("div",{className:"text-xs text-center text-gray-400 py-1 sticky top-0 bg-gray-50 dark:bg-gray-700/50",children:""}),s.map(g=>l.jsx("button",{type:"button",onClick:()=>f(g),className:`w-full text-center py-2 text-sm font-mono rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition
                        ${c===g?"bg-primary text-white hover:bg-primary font-bold shadow-sm":"text-gray-700 dark:text-gray-300"}
                    `,children:g},g))]})]})]})},Gse=({user:t})=>{const[e,r]=T.useState("LIST"),[n,i]=T.useState([]),[o,a]=T.useState(!1),[s,u]=T.useState(!1),[c,d]=T.useState([]),[f,h]=T.useState([]),[g,b]=T.useState(null);T.useEffect(()=>{v(),Fe("personnel").then(d),Fe("org_chart").then(h),y()},[e]);const v=async()=>{a(!0);const{data:J}=await Oe.from("meeting_minutes").select("*").order("created_at",{ascending:!1});J&&i(J),a(!1)},y=async()=>{const{data:J}=await Oe.from("app_users").select("avatar").eq("role","ADMIN").limit(1).single();J&&b(J.avatar)},[x,_]=T.useState({subject:"",location:"",meetingDate:at(),startTime:"",endTime:""}),[w,E]=T.useState([]),[S,N]=T.useState(""),[k,A]=T.useState(null),[C,R]=T.useState([]),[$,L]=T.useState({name:"",role:""});T.useRef(null);const[M,O]=T.useState([]),[P,D]=T.useState(null),B=()=>{if(!$.name||!$.role){alert("      ");return}R([...C,$]),L({name:"",role:""})},U=J=>{R(C.filter((X,ke)=>ke!==J))},W=()=>{S.trim()&&(k?(E(w.map(J=>J.id===k?{...J,text:S}:J)),A(null)):E([...w,{id:Math.random().toString(),text:S}]),N(""))},K=J=>{N(J.text),A(J.id)},re=J=>{E(w.filter(X=>X.id!==J))},Y=J=>{const X=["","","","","","","","","",""];return J.toString().replace(/\d/g,ke=>X[parseInt(ke)])},ye=()=>{if(!x.startTime||!x.endTime)return!1;const[J,X]=x.startTime.split(":").map(Number),[ke,Se]=x.endTime.split(":").map(Number);return ke>J||ke===J&&Se>X},I=()=>x.subject&&ye()&&C.length>0&&w.length>0,Z=()=>{x.subject||C.length>0?window.confirm("        ")&&(ce(),r("LIST")):(ce(),r("LIST"))},ce=()=>{_({subject:"",location:"",meetingDate:at(),startTime:"",endTime:""}),R([]),E([]),O([]),D(null)},ve=async J=>{if(J.preventDefault(),!I())return;u(!0);let X=null,ke="";try{ke=await Ho("G");const ee=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t.id)?t.id:null;X={tracking_code:ke,subject:x.subject,location:x.location,meeting_date:x.meetingDate,start_time:x.startTime,end_time:x.endTime,attendees:C,decisions:w,attached_files:M.map(te=>({name:te.name||"unknown",size:te.size||0,type:te.type||"application/octet-stream"})),creator_id:ee,status:"PENDING"};const{error:fe}=await Oe.from("meeting_minutes").insert([X]);if(fe)throw fe;Hi("MEETING",X,t,ke,`: ${x.subject}`),alert("    ."),D(X),r("VIEW")}catch(Se){console.error("Submission Error:",Se);const ee=(Se==null?void 0:Se.message)||(Se==null?void 0:Se.error_description)||(typeof Se=="object"?JSON.stringify(Se):String(Se))||" ";if(alert(`   : 
${ee}

            .`),X){try{Hi("MEETING",X,t,ke||"OFFLINE",` (): ${x.subject}`)}catch(fe){console.warn("Local save warning:",fe)}D(X),r("VIEW")}}finally{u(!1)}},Ie=()=>{window.print()},se=async()=>{if(navigator.share)try{await navigator.share({title:` ${P.subject}`,text:`  ${P.tracking_code}  ${P.meeting_date}`,url:window.location.href})}catch(J){console.error("Error sharing:",J)}else Ie()},Ne=J=>{D(J),O(J.attached_files||[]),r("VIEW")};return e==="VIEW"&&P?l.jsxs("div",{className:"bg-gray-100 min-h-screen p-4 flex justify-center text-black",children:[l.jsx("style",{children:`
                  @media print {
                      @page { size: A4; margin: 0; }
                      body { background: white; -webkit-print-color-adjust: exact; }
                      .no-print { display: none !important; }
                      .print-container { width: 210mm !important; min-height: 297mm !important; padding: 20mm !important; margin: 0 !important; box-shadow: none !important; }
                      aside, header, footer { display: none !important; }
                  }
              `}),l.jsxs("div",{className:"print-container bg-white shadow-2xl relative text-sm space-y-6 font-sans box-border w-[210mm] min-h-[297mm] p-[20mm]",children:[l.jsxs("div",{className:"flex justify-between items-center border-b-4 border-[#800020] pb-4 mb-6 relative min-h-[100px]",children:[l.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden border border-gray-200 flex items-center justify-center shadow-sm",children:g?l.jsx("img",{src:g,alt:"Logo",className:"w-full h-full object-cover"}):l.jsx(Xv,{className:"w-full h-full object-contain"})}),l.jsxs("div",{className:"flex flex-col items-center absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2",children:[l.jsx("h1",{className:"text-xl font-black text-[#800020] whitespace-nowrap",children:"     "}),l.jsx("span",{className:"text-sm font-bold text-gray-700 mt-2 bg-gray-100 px-4 py-1 rounded-full border border-gray-200",children:" "})]}),l.jsxs("div",{className:"w-48 text-xs flex flex-col gap-2 bg-gray-50 p-2 rounded-lg border border-gray-100",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-500 font-bold",children:":"}),l.jsx("span",{className:"font-mono font-bold text-sm text-[#800020]",children:P.tracking_code})]}),l.jsx("div",{className:"w-full border-t border-gray-200 border-dashed"}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-500 font-bold",children:":"}),l.jsx("span",{className:"font-mono font-bold",children:P.meeting_date})]}),l.jsx("div",{className:"w-full border-t border-gray-200 border-dashed"}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-gray-500 font-bold",children:":"}),l.jsx("span",{className:"font-bold",children:M.length>0?"":""})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 border border-gray-300 rounded-lg p-4 bg-gray-50",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:" :"})," ",l.jsx("span",{className:"font-bold",children:P.subject})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:" :"})," ",l.jsx("span",{className:"font-bold",children:P.location||"-"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:" :"})," ",l.jsx("span",{className:"font-bold font-mono",children:P.start_time})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:" :"})," ",l.jsx("span",{className:"font-bold font-mono",children:P.end_time})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-[#800020] border-b-2 border-[#800020] pb-1 mb-3 inline-block",children:"  "}),l.jsxs("table",{className:"w-full border-collapse border border-gray-300 text-center",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-100",children:[l.jsx("th",{className:"border border-gray-300 p-2 w-10",children:""}),l.jsx("th",{className:"border border-gray-300 p-2",children:"   "}),l.jsx("th",{className:"border border-gray-300 p-2",children:" / "}),l.jsx("th",{className:"border border-gray-300 p-2",children:""})]})}),l.jsx("tbody",{children:P.attendees.map((J,X)=>l.jsxs("tr",{children:[l.jsx("td",{className:"border border-gray-300 p-2",children:Y(X+1)}),l.jsx("td",{className:"border border-gray-300 p-2 font-bold",children:J.name}),l.jsx("td",{className:"border border-gray-300 p-2",children:J.role}),l.jsx("td",{className:"border border-gray-300 p-2"})]},X))})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-[#800020] border-b-2 border-[#800020] pb-1 mb-3 inline-block",children:" "}),l.jsx("div",{className:"border border-gray-300 rounded-lg p-4 space-y-4 min-h-[200px]",children:P.decisions.map((J,X)=>l.jsxs("div",{className:"flex gap-2 text-justify leading-relaxed border-b border-dashed border-gray-200 pb-2 last:border-0",children:[l.jsxs("span",{className:"font-bold text-[#800020]",children:[Y(X+1),"."]}),l.jsx("span",{children:J.text})]},X))})]}),l.jsxs("div",{className:"no-print fixed bottom-0 left-0 right-0 p-4 bg-white border-t flex justify-center gap-4 shadow-lg z-50",children:[l.jsxs("button",{onClick:()=>r("LIST"),className:"bg-gray-100 text-gray-800 px-6 py-3 rounded-xl flex items-center gap-2 hover:bg-gray-200 font-bold transition",children:[l.jsx(wA,{className:"w-5 h-5"})," "]}),l.jsxs("button",{onClick:Ie,className:"bg-blue-600 text-white px-8 py-3 rounded-xl flex items-center gap-2 hover:bg-blue-700 shadow-xl font-bold",children:[l.jsx(NA,{className:"w-5 h-5"}),"  (PDF)"]}),l.jsxs("button",{onClick:se,className:"bg-green-600 text-white px-8 py-3 rounded-xl flex items-center gap-2 hover:bg-green-700 shadow-xl font-bold",children:[l.jsx(Hv,{className:"w-5 h-5"}),"  "]})]})]})]}):e==="LIST"?l.jsx("div",{className:"max-w-7xl mx-auto pb-20",children:l.jsx(gi,{title:" ",icon:Jd,data:n,onAdd:()=>{ce(),r("NEW")},columns:[{header:" ",accessor:J=>l.jsx("span",{className:"font-mono font-bold",children:J.tracking_code})},{header:" ",accessor:J=>l.jsx("span",{className:"font-bold",children:J.subject})},{header:" ",accessor:J=>J.meeting_date},{header:"",accessor:J=>`${J.start_time} - ${J.end_time}`},{header:"",accessor:J=>J.location},{header:"",accessor:J=>{var X;return l.jsxs("span",{className:"bg-blue-50 text-blue-700 px-2 rounded font-bold",children:[((X=J.decisions)==null?void 0:X.length)||0," "]})}}],onViewDetails:Ne})}):l.jsxs("div",{className:"max-w-3xl mx-auto pb-20",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:l.jsx(Jd,{className:"w-8 h-8 text-primary"})}),l.jsx("h1",{className:"text-2xl font-bold",children:"  "})]}),l.jsx("button",{onClick:Z,className:"p-2 hover:bg-gray-100 rounded-full",children:l.jsx(ht,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:ve,className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("label",{className:"block text-sm mb-1 font-medium",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:x.subject,onChange:J=>_({...x,subject:J.target.value}),className:"w-full p-3 border rounded-xl bg-gray-50 dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary",required:!0,placeholder:"  ..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm mb-1 font-medium",children:" "}),l.jsx("input",{type:"text",value:x.location,onChange:J=>_({...x,location:J.target.value}),className:"w-full p-2.5 border rounded-xl bg-gray-50 dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary"})]}),l.jsx("div",{children:l.jsx(Mn,{label:" ",value:x.meetingDate,onChange:J=>_({...x,meetingDate:J})})}),l.jsx("div",{children:l.jsx(sE,{label:" ",value:x.startTime,onChange:J=>_({...x,startTime:J})})}),l.jsx("div",{children:l.jsx(sE,{label:" ",value:x.endTime,onChange:J=>_({...x,endTime:J}),error:x.endTime&&!ye()?"      ":void 0})})]}),l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-800",children:[l.jsxs("label",{className:"block text-sm mb-3 font-bold flex items-center gap-2 text-blue-800 dark:text-blue-300",children:[l.jsx(Is,{className:"w-4 h-4"}),"    ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"flex gap-2 mb-3 items-end",children:[l.jsxs("div",{className:"flex-[1] min-w-0",children:[l.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:" "}),l.jsxs("select",{className:"w-full p-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 outline-none text-sm",value:$.name,onChange:J=>L({...$,name:J.target.value}),children:[l.jsx("option",{value:"",children:"..."}),c.map(J=>l.jsx("option",{value:J.full_name,children:J.full_name},J.id))]})]}),l.jsxs("div",{className:"flex-[2] min-w-0",children:[l.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:" / "}),l.jsxs("select",{className:"w-full p-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 outline-none text-sm",value:$.role,onChange:J=>L({...$,role:J.target.value}),children:[l.jsx("option",{value:"",children:"..."}),f.map(J=>l.jsx("option",{value:J.name,children:J.name},J.id))]})]}),l.jsx("button",{type:"button",onClick:B,className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 h-[38px] w-[38px] flex items-center justify-center",children:l.jsx(or,{className:"w-5 h-5"})})]}),C.length>0?l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:C.map((J,X)=>l.jsxs("div",{className:"flex justify-between items-center p-2 border-b last:border-0 hover:bg-gray-50 dark:hover:bg-gray-700",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"font-bold",children:J.name}),l.jsx("span",{className:"text-gray-400 text-xs",children:"|"}),l.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:J.role})]}),l.jsx("button",{type:"button",onClick:()=>U(X),className:"text-red-500 hover:bg-red-50 p-1 rounded",children:l.jsx(Et,{className:"w-4 h-4"})})]},X))}):l.jsx("p",{className:"text-xs text-gray-500 text-center py-2 bg-white/50 rounded border border-dashed",children:"    ."})]}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/30 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[l.jsxs("label",{className:"block text-sm mb-3 font-bold flex items-center gap-2 text-gray-800 dark:text-gray-200",children:[l.jsx(Za,{className:"w-4 h-4"}),"   ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[l.jsx("input",{type:"text",value:S,onChange:J=>N(J.target.value),placeholder:" ...",className:"flex-1 p-2.5 border rounded-lg dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary",onKeyDown:J=>J.key==="Enter"&&(J.preventDefault(),W())}),l.jsx("button",{type:"button",onClick:W,className:`bg-green-600 text-white px-4 rounded-lg hover:bg-green-700 transition ${S.trim()?"":"opacity-50 cursor-not-allowed"}`,children:k?l.jsx(En,{className:"w-5 h-5"}):l.jsx(or,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[w.length===0&&l.jsx("p",{className:"text-sm text-gray-400 text-center py-2 italic",children:"   ."}),w.map((J,X)=>l.jsxs("div",{className:"flex justify-between items-start bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 group",children:[l.jsxs("div",{className:"flex gap-3",children:[l.jsx("span",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full flex-shrink-0 mt-0.5",children:Y(X+1)}),l.jsx("span",{className:"text-sm text-justify leading-relaxed",children:J.text})]}),l.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{type:"button",onClick:()=>K(J),className:"text-blue-500 hover:bg-blue-50 p-1.5 rounded",children:l.jsx(Mh,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>re(J.id),className:"text-red-500 hover:bg-red-50 p-1.5 rounded",children:l.jsx(Et,{className:"w-4 h-4"})})]})]},J.id))]})]}),l.jsxs("div",{className:"flex gap-3 pt-4 border-t dark:border-gray-700",children:[l.jsx("button",{type:"button",onClick:Z,className:"flex-1 border border-gray-300 dark:border-gray-600 py-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-500",children:""}),l.jsxs("button",{type:"submit",disabled:!I()||s,className:`flex-[2] text-white py-3 rounded-xl shadow hover:bg-red-800 flex justify-center gap-2 font-bold transition
                    ${I()&&!s?"bg-primary":"bg-gray-400 cursor-not-allowed"}
                `,children:[s?l.jsx(Ct,{className:"w-5 h-5 animate-spin"}):l.jsx(En,{className:"w-5 h-5"}),"   "]})]})]})]})},Hse=({user:t})=>{const[e,r]=T.useState("LIST"),[n,i]=T.useState([]),[o,a]=T.useState(!1);T.useEffect(()=>{const y=Fh("SUGGESTION");i(y.map(x=>({...x,...x.data})))},[e]);const[s,u]=T.useState(""),c=T.useRef(null),[d,f]=T.useState([]),h=async y=>{if(y.preventDefault(),!!s.trim()){a(!0);try{const x=await Ho("H"),_={tracking_code:x,user_id:t.id,user_name:t.fullName,description:s,attached_files:d.map(E=>({name:E.name,size:E.size})),status:"PENDING"},{error:w}=await Oe.from("technical_suggestions").insert([_]);if(w)throw w;Hi("SUGGESTION",{text:s,..._},t,x,`: ${s.substring(0,20)}...`),alert(`     ${x}  .`),r("LIST"),u(""),f([])}catch(x){console.error(x),alert("   : "+x.message)}finally{a(!1)}}},g=()=>{var y;(y=c.current)==null||y.click()},b=y=>{y.target.files&&y.target.files.length>0&&f([...d,...Array.from(y.target.files)])},v=y=>{f(d.filter((x,_)=>_!==y))};return e==="LIST"?l.jsx("div",{className:"max-w-7xl mx-auto pb-20",children:l.jsx(gi,{title:" ",icon:Qd,data:n,onAdd:()=>r("NEW"),columns:[{header:" ",accessor:y=>l.jsx("span",{className:"font-mono font-bold",children:y.trackingCode})},{header:" ",accessor:y=>y.description?y.description.substring(0,50)+"...":y.title},{header:" ",accessor:y=>y.createdAt},{header:" ",accessor:y=>y.user_name||t.fullName},{header:"",accessor:y=>l.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-2 rounded-full text-xs font-bold",children:y.status==="PENDING"?"  ":"  "})}]})}):l.jsxs("div",{className:"max-w-2xl mx-auto pb-20",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Qd,{className:"w-8 h-8 text-primary"}),l.jsx("h1",{className:"text-2xl font-bold",children:"  "})]}),l.jsx("button",{onClick:()=>r("LIST"),className:"p-2 hover:bg-gray-100 rounded-full",children:l.jsx(ht,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:h,className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:" "}),l.jsx("input",{type:"text",value:t.fullName,disabled:!0,className:"w-full p-2 border rounded bg-gray-100 dark:bg-gray-700 text-gray-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:" "}),l.jsx("input",{type:"text",value:at(),disabled:!0,className:"w-full p-2 border rounded bg-gray-100 dark:bg-gray-700 text-gray-500"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium mb-1",children:["   ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{value:s,onChange:y=>u(y.target.value),className:"w-full h-40 p-3 pl-10 border rounded-lg bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-primary outline-none resize-none",placeholder:"         ...",required:!0}),l.jsx("button",{type:"button",className:"absolute bottom-3 left-3 p-2 text-gray-400 hover:text-primary transition-colors",children:l.jsx(Hr,{className:"w-6 h-6"})})]})]}),l.jsxs("div",{children:[l.jsx("input",{type:"file",ref:c,multiple:!0,className:"hidden",onChange:b}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{type:"button",onClick:g,className:"flex items-center gap-2 text-gray-500 hover:text-gray-700 border border-gray-300 dark:border-gray-600 px-4 py-2 rounded-lg transition hover:bg-gray-50 dark:hover:bg-gray-700",children:[l.jsx(Qn,{className:"w-4 h-4"}),"  "]}),l.jsx("span",{className:"text-xs text-gray-400",children:" : PDF, JPG (max 5MB)"})]}),d.length>0&&l.jsx("div",{className:"mt-4 space-y-2",children:d.map((y,x)=>l.jsxs("div",{className:"flex justify-between items-center bg-gray-50 dark:bg-gray-700/50 p-2 rounded-lg text-sm border border-gray-100 dark:border-gray-600",children:[l.jsx("span",{className:"truncate max-w-[200px]",children:y.name}),l.jsx("button",{type:"button",onClick:()=>v(x),className:"text-red-500 hover:bg-red-50 p-1 rounded",children:l.jsx(Et,{className:"w-4 h-4"})})]},x))})]}),l.jsxs("div",{className:"flex gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:()=>r("LIST"),className:"flex-1 border py-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700",children:""}),l.jsxs("button",{type:"submit",disabled:!s.trim()||o,className:`flex-[2] text-white py-3 rounded-xl shadow-lg flex items-center justify-center gap-2 transition
                    ${!s.trim()||o?"bg-gray-400 cursor-not-allowed opacity-70":"bg-primary hover:bg-red-800"}
                `,children:[o?l.jsx(Ct,{className:"w-5 h-5 animate-spin"}):l.jsx(Zd,{className:"w-5 h-5"})," "]})]})]})]})},zse=({user:t})=>{const[e,r]=T.useState("LIST"),[n,i]=T.useState([]),[o,a]=T.useState([]),[s,u]=T.useState(!1);T.useEffect(()=>{const y=Fh("PURCHASE");i(y.map(x=>({...x,...x.data}))),Fe("measurement_units").then(a)},[e]);const[c,d]=T.useState({requestNumber:"",requestDate:at(),location:" ()",priority:"",desc:"",qty:1,unit:""}),[f,h]=T.useState(null);T.useEffect(()=>{o.length>0&&!c.unit&&d(y=>({...y,unit:o[0].title}))},[o]);const g=()=>/^\d{2}\/\d{4}$/.test(c.requestNumber)&&c.desc.trim().length>0&&c.qty>0&&c.unit.length>0,b=y=>{d({...c,requestNumber:y}),y&&!/^\d{2}\/\d{4}$/.test(y)?h("   (: 03/1234)"):h(null)},v=async y=>{var x;if(y.preventDefault(),!!g()){u(!0);try{const _=await Ho("K"),w={tracking_code:_,request_number:c.requestNumber,requester_id:t.id,requester_name:t.fullName,request_date:c.requestDate,description:c.desc,qty:c.qty,unit:c.unit,location:c.location,priority:c.priority,status:"PENDING"},{error:E}=await Oe.from("purchase_requests").insert([w]);if(E)throw E;Hi("PURCHASE",w,t,_,`: ${c.desc.substring(0,20)}...`),alert(`     ${_}  .`),r("LIST"),d({requestNumber:"",requestDate:at(),location:" ()",priority:"",desc:"",qty:1,unit:((x=o[0])==null?void 0:x.title)||""})}catch(_){console.error(_),alert("   : "+_.message)}finally{u(!1)}}};return e==="LIST"?l.jsx("div",{className:"max-w-7xl mx-auto pb-20",children:l.jsx(gi,{title:" ",icon:ef,data:n,onAdd:()=>r("NEW"),columns:[{header:" ",accessor:y=>l.jsx("span",{className:"font-mono font-bold",children:y.trackingCode})},{header:" ",accessor:y=>l.jsx("span",{className:"font-mono",children:y.requestNumber||y.request_number})},{header:" ",accessor:y=>y.desc||y.description},{header:"",accessor:y=>`${y.qty} ${y.unit||""}`},{header:"",accessor:y=>y.requestDate||y.request_date},{header:"",accessor:y=>l.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-2 rounded text-xs font-bold",children:y.status==="PENDING"?" ":" "})}]})}):l.jsxs("div",{className:"max-w-3xl mx-auto pb-20",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ef,{className:"w-8 h-8 text-primary"}),l.jsx("h1",{className:"text-2xl font-bold",children:"  /"})]}),l.jsx("button",{onClick:()=>r("LIST"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:l.jsx(ht,{className:"w-5 h-5"})})]}),l.jsxs("form",{onSubmit:v,className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"label-text",children:" "}),l.jsx("input",{type:"text",value:t.fullName,disabled:!0,className:"input-field bg-gray-100 dark:bg-gray-700 cursor-not-allowed"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"label-text",children:["  (: 03/1234) ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:c.requestNumber,onChange:y=>b(y.target.value),className:`input-field font-mono text-center ${f?"border-red-500 ring-1 ring-red-500":""}`,placeholder:"03/1234",required:!0,maxLength:7}),f&&l.jsxs("div",{className:"flex items-center gap-1 text-red-500 text-xs mt-1",children:[l.jsx(gA,{className:"w-3 h-3"}),l.jsx("span",{children:f})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label-text",children:" "}),l.jsx(Mn,{value:c.requestDate,onChange:y=>d({...c,requestDate:y})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label-text",children:" "}),l.jsxs("select",{className:"input-field",value:c.location,onChange:y=>d({...c,location:y.target.value}),children:[l.jsx("option",{children:" ( )"}),l.jsx("option",{children:" ()"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"label-text",children:""}),l.jsxs("select",{className:"input-field",value:c.priority,onChange:y=>d({...c,priority:y.target.value}),children:[l.jsx("option",{children:""}),l.jsx("option",{children:""}),l.jsx("option",{children:" ( )"})]})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"label-text",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{value:c.desc,onChange:y=>d({...c,desc:y.target.value}),className:"input-field h-32 pl-10",required:!0,placeholder:"     ..."}),l.jsx(Hr,{className:"absolute left-3 bottom-3 text-gray-400 cursor-pointer hover:text-primary"})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"col-span-1",children:[l.jsxs("label",{className:"label-text",children:[" ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"number",value:c.qty,onChange:y=>d({...c,qty:Number(y.target.value)}),className:"input-field text-center font-bold",required:!0,min:"0.01"})]}),l.jsxs("div",{className:"col-span-1",children:[l.jsxs("label",{className:"label-text",children:[" ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("select",{value:c.unit,onChange:y=>d({...c,unit:y.target.value}),className:"input-field",children:o.length>0?o.map(y=>l.jsx("option",{value:y.title,children:y.title},y.id)):l.jsx("option",{value:"",children:""})})]}),l.jsxs("div",{className:"col-span-1",children:[l.jsx("label",{className:"label-text",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",className:"input-field pl-8",placeholder:":  "}),l.jsx(Hr,{className:"absolute left-2 top-2.5 w-4 h-4 text-gray-400"})]})]})]}),l.jsxs("div",{className:"flex gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:()=>r("LIST"),className:"flex-1 border py-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:""}),l.jsxs("button",{type:"submit",disabled:!g()||s,className:`flex-[2] text-white py-4 rounded-xl font-bold shadow-lg flex items-center justify-center gap-2 transition
                        ${!g()||s?"bg-gray-400 cursor-not-allowed opacity-70":"bg-primary hover:bg-red-800"}
                    `,children:[s?l.jsx(Ct,{className:"w-5 h-5 animate-spin"}):l.jsx(En,{className:"w-5 h-5"}),"    "]})]})]}),l.jsx("style",{children:`
        .label-text { display: block; font-size: 0.875rem; margin-bottom: 0.25rem; color: #4b5563; }
        .dark .label-text { color: #d1d5db; }
        .input-field { width: 100%; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: 0.75rem; background-color: #f9fafb; transition: all 0.2s; outline: none; }
        .dark .input-field { background-color: #374151; border-color: #4b5563; color: white; }
        .input-field:focus { border-color: #800020; box-shadow: 0 0 0 2px rgba(128, 0, 32, 0.1); }
      `})]})},Wse=({user:t,onUpdateUser:e,snowMode:r,setSnowMode:n})=>{const i=T.useRef(null),o=a=>{var u;const s=(u=a.target.files)==null?void 0:u[0];if(s){const c=new FileReader;c.onloadend=()=>{const d=c.result;e({...t,avatar:d})},c.readAsDataURL(s)}};return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsx("h1",{className:"text-2xl font-bold",children:" "}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow p-6",children:[l.jsxs("div",{className:"flex items-center gap-6 mb-8",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-4xl overflow-hidden",children:t.avatar?l.jsx("img",{src:t.avatar,className:"w-full h-full object-cover",alt:"avatar"}):""}),l.jsx("button",{onClick:()=>{var a;return(a=i.current)==null?void 0:a.click()},className:"absolute bottom-0 right-0 bg-primary text-white p-2 rounded-full shadow-lg hover:bg-red-800 transition cursor-pointer z-10",type:"button",children:l.jsx(Kd,{className:"w-4 h-4"})}),l.jsx("input",{type:"file",ref:i,className:"hidden",accept:"image/*",onChange:o})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold",children:t.fullName}),l.jsx("p",{className:"text-gray-500",children:t.role})]})]}),l.jsxs("form",{className:"space-y-6",onSubmit:a=>a.preventDefault(),children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-bold border-b pb-2",children:" "}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"bg-blue-100 text-blue-600 p-2 rounded-lg",children:l.jsx(UD,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium block",children:"  "}),l.jsx("span",{className:"text-xs text-gray-500",children:"     "})]})]}),l.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r,onChange:a=>n(a.target.checked)}),l.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-500"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"font-bold border-b pb-2",children:""}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm mb-1",children:"  "}),l.jsx("input",{type:"password",className:"w-full p-2 border rounded dark:bg-gray-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm mb-1",children:"  "}),l.jsx("input",{type:"password",className:"w-full p-2 border rounded dark:bg-gray-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm mb-1",children:"   "}),l.jsx("input",{type:"password",className:"w-full p-2 border rounded dark:bg-gray-700"})]}),l.jsx("button",{type:"button",className:"bg-primary text-white px-6 py-2 rounded shadow hover:bg-red-800 transition",onClick:()=>alert("    ."),children:" "})]})]})]})]})},Kse=({user:t})=>{const[e,r]=T.useState("LIST"),[n,i]=T.useState([]),[o,a]=T.useState([]),[s,u]=T.useState(!1),[c,d]=T.useState(!1);T.useEffect(()=>{const I=Fh("PROJECT");i(I.map(Z=>({...Z,...Z.data}))),Fe("personnel").then(a)},[e]);const[f,h]=T.useState({title:"",manager:"",managerId:"",budget:"",startDate:at(),endDate:"",description:""}),[g,b]=T.useState([]),[v,y]=T.useState(""),[x,_]=T.useState(null),[w,E]=T.useState([]),[S,N]=T.useState({title:"",weight:10}),k=T.useRef(null),[A,C]=T.useState([]),R=()=>{const I=window.SpeechRecognition||window.webkitSpeechRecognition;if(!I){alert("         .");return}if(c){d(!1);return}const Z=new I;Z.lang="fa-IR",Z.continuous=!1,Z.interimResults=!1,Z.onstart=()=>d(!0),Z.onend=()=>d(!1),Z.onresult=ce=>{const ve=ce.results[0][0].transcript;h(Ie=>({...Ie,description:Ie.description?`${Ie.description} ${ve}`:ve}))},Z.start()},$=()=>{v.trim()&&(x?(b(g.map(I=>I.id===x?{...I,text:v}:I)),_(null)):b([...g,{id:Math.random().toString(),text:v}]),y(""))},L=I=>{y(I.text),_(I.id)},M=I=>{b(g.filter(Z=>Z.id!==I))},O=()=>{if(!S.title)return;if(S.weight<0){alert("      .");return}const I=w.reduce((Z,ce)=>Z+ce.weight,0);if(I+S.weight>100){alert(`      .  : ${100-I}`);return}E([...w,{id:Math.random().toString(),title:S.title,weight:S.weight,progress:0}]),N({title:"",weight:10})},P=I=>{E(w.filter(Z=>Z.id!==I))},D=()=>{const I=w.reduce((ce,ve)=>ce+ve.weight,0);if(I===0)return 0;const Z=w.reduce((ce,ve)=>ce+ve.progress*ve.weight,0);return Math.round(Z/I)},B=I=>{if(I.target.files&&I.target.files.length>0){const Z=Array.from(I.target.files),ce=Z.filter(ve=>ve.size<=10*1024*1024);ce.length!==Z.length&&alert("          ."),C(ve=>[...ve,...ce])}k.current&&(k.current.value="")},U=I=>{C(Z=>Z.filter((ce,ve)=>ve!==I))},W=I=>{const Z=I.target.value,ce=o.find(ve=>ve.id===Z);h(ce?{...f,managerId:ce.id,manager:ce.full_name}:{...f,managerId:"",manager:""})},K=()=>{const I=w.reduce((Z,ce)=>Z+ce.weight,0);return f.title&&f.managerId&&g.length>0&&(w.length===0||I===100)},re=async I=>{if(I.preventDefault(),!!K()){u(!0);try{const Z=new Date,ce=$h(Z.getFullYear(),Z.getMonth()+1,Z.getDate()),ve=`P${String(ce.jy).substring(2)}${String(ce.jm).padStart(2,"0")}`,Ie=await Ho(ve),se={...f,budget:f.budget===""?0:Number(f.budget),objectives:g,milestones:w,fileNames:A.map(Ne=>Ne.name),progress:D()};Hi("PROJECT",se,t,Ie,`: ${f.title}`),alert(`    ${Ie}        .`),Y()}catch(Z){console.error(Z),alert("   .    .")}finally{u(!1)}}},Y=()=>{r("LIST"),h({title:"",manager:"",managerId:"",budget:"",startDate:at(),endDate:"",description:""}),b([]),E([]),C([]),y(""),_(null)},ye=()=>{f.title||g.length>0?window.confirm("       ")&&Y():Y()};return e==="LIST"?l.jsx("div",{className:"max-w-7xl mx-auto pb-20",children:l.jsx(gi,{title:"   ",icon:Wd,data:n,onAdd:()=>r("NEW"),columns:[{header:" ",accessor:I=>l.jsx("span",{className:"font-mono font-bold",children:I.trackingCode})},{header:" ",accessor:I=>l.jsx("span",{className:"font-bold",children:I.title})},{header:" ",accessor:I=>I.manager},{header:" ",accessor:I=>I.startDate},{header:" ()",accessor:I=>I.budget?Number(I.budget).toLocaleString():"---"},{header:"",accessor:I=>l.jsxs("div",{className:"w-24",children:[l.jsx("div",{className:"flex justify-between text-xs mb-1",children:l.jsxs("span",{children:[I.progress||0,"%"]})}),l.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-blue-500",style:{width:`${I.progress||0}%`}})})]})},{header:"",accessor:I=>l.jsx("span",{className:"bg-blue-100 text-blue-700 px-2 py-0.5 rounded text-xs font-bold",children:I.status==="PENDING"?"  ":" "})}]})}):l.jsxs("div",{className:"max-w-4xl mx-auto pb-20",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[l.jsx(Wd,{className:"w-8 h-8 text-primary"}),l.jsx("h2",{className:"text-xl font-bold",children:"    "})]}),l.jsxs("form",{onSubmit:re,className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm mb-1 font-medium",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{value:f.title,onChange:I=>h({...f,title:I.target.value}),required:!0,className:"w-full p-2.5 border rounded-xl dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary",placeholder:" ..."})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm mb-1 font-medium",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{value:f.managerId,onChange:W,className:"w-full p-2.5 border rounded-xl dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary",children:[l.jsx("option",{value:"",children:" ..."}),o.map(I=>l.jsxs("option",{value:I.id,children:[I.full_name," (",I.unit,")"]},I.id))]})]}),l.jsx("div",{children:l.jsx(Mn,{label:" ",value:f.startDate||"",onChange:I=>h({...f,startDate:I}),disableFuture:!1})}),l.jsx("div",{children:l.jsx(Mn,{label:"  ()",value:f.endDate||"",onChange:I=>h({...f,endDate:I}),disableFuture:!1})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm mb-1 font-medium",children:"  ()"}),l.jsx("input",{type:"number",min:"0",value:f.budget,onChange:I=>h({...f,budget:I.target.value}),className:"w-full p-2.5 border rounded-xl dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary",placeholder:"..."})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm mb-1 font-medium",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{value:f.description,onChange:I=>h({...f,description:I.target.value}),className:"w-full p-3 border rounded-xl dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary min-h-[100px]",placeholder:" ..."}),l.jsx("button",{type:"button",onClick:R,className:`absolute left-2 bottom-2 p-2 rounded-full transition ${c?"bg-red-500 text-white animate-pulse":"text-gray-400 hover:text-primary"}`,children:c?l.jsx(Ct,{className:"w-5 h-5 animate-spin"}):l.jsx(Hr,{className:"w-5 h-5"})})]})]}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/30 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[l.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-200 mb-2 flex items-center gap-2",children:[l.jsx(Za,{className:"w-5 h-5"}),"     ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("div",{className:"flex gap-2 mb-3",children:[l.jsx("input",{type:"text",value:v,onChange:I=>y(I.target.value),placeholder:"      ...",className:"flex-1 p-2.5 border rounded-lg dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary",onKeyDown:I=>I.key==="Enter"&&(I.preventDefault(),$())}),l.jsx("button",{type:"button",onClick:$,className:`bg-blue-600 text-white px-4 rounded-lg hover:bg-blue-700 transition ${v.trim()?"":"opacity-50 cursor-not-allowed"}`,children:x?l.jsx(En,{className:"w-5 h-5"}):l.jsx(or,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[g.length===0&&l.jsx("p",{className:"text-sm text-gray-400 text-center py-2",children:"   ."}),g.map((I,Z)=>l.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full",children:Z+1}),l.jsx("span",{className:"text-sm",children:I.text})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>L(I),className:"text-blue-500 hover:bg-blue-50 p-1.5 rounded",children:l.jsx(Mh,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>M(I.id),className:"text-red-500 hover:bg-red-50 p-1.5 rounded",children:l.jsx(Et,{className:"w-4 h-4"})})]})]},I.id))]})]}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/30 p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[l.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-200 mb-4 flex items-center gap-2",children:[l.jsx(GD,{className:"w-5 h-5"}),"   (WBS)"]}),l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{type:"text",placeholder:"  (: )",className:"flex-[2] p-2 border rounded-lg dark:bg-gray-700 outline-none",value:S.title,onChange:I=>N({...S,title:I.target.value})}),l.jsxs("div",{className:"flex-1 relative",children:[l.jsx("input",{type:"number",min:"0",placeholder:" ",className:"w-full p-2 border rounded-lg dark:bg-gray-700 text-center outline-none",value:S.weight,onChange:I=>N({...S,weight:Number(I.target.value)})}),l.jsx("span",{className:"absolute left-2 top-2 text-xs text-gray-400",children:"%"})]}),l.jsx("button",{type:"button",onClick:O,className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700",children:l.jsx(or,{className:"w-5 h-5"})})]}),w.length>0?l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"grid grid-cols-12 text-xs text-gray-500 px-2",children:[l.jsx("span",{className:"col-span-8",children:" "}),l.jsx("span",{className:"col-span-2 text-center",children:" "}),l.jsx("span",{className:"col-span-2 text-center",children:""})]}),w.map(I=>l.jsxs("div",{className:"grid grid-cols-12 items-center bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm",children:[l.jsxs("span",{className:"col-span-8 font-medium flex items-center gap-2",children:[l.jsx(Za,{className:"w-4 h-4 text-green-500"})," ",I.title]}),l.jsxs("span",{className:"col-span-2 text-center bg-blue-50 text-blue-700 rounded px-1 text-sm font-bold",children:[I.weight,"%"]}),l.jsx("div",{className:"col-span-2 flex justify-center",children:l.jsx("button",{type:"button",onClick:()=>P(I.id),className:"text-red-500 hover:bg-red-50 p-1 rounded",children:l.jsx(Et,{className:"w-4 h-4"})})})]},I.id)),l.jsxs("div",{className:"mt-2 text-left text-sm font-bold flex justify-end gap-2 items-center",children:[l.jsx("span",{children:" :"}),l.jsxs("span",{className:`px-2 py-1 rounded ${w.reduce((I,Z)=>I+Z.weight,0)===100?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[w.reduce((I,Z)=>I+Z.weight,0),"%"]})]})]}):l.jsx("p",{className:"text-center text-gray-400 text-sm py-4",children:"    ."})]}),l.jsxs("div",{children:[l.jsx("input",{type:"file",ref:k,multiple:!0,className:"hidden",onChange:B}),l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("label",{className:"font-bold text-sm flex items-center gap-2",children:[l.jsx(Qn,{className:"w-4 h-4"}),"  "]}),l.jsxs("button",{type:"button",onClick:()=>{var I;return(I=k.current)==null?void 0:I.click()},className:"text-blue-600 text-xs flex items-center gap-1 hover:bg-blue-50 px-2 py-1 rounded transition border border-blue-200",children:[l.jsx(uu,{className:"w-3 h-3"}),"  "]})]}),A.length===0&&l.jsx("p",{className:"text-xs text-gray-400 italic",children:"     ()"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:A.map((I,Z)=>l.jsxs("div",{className:"flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-2 rounded-lg border border-gray-200 dark:border-gray-600",children:[l.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[l.jsx(Yd,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),l.jsx("span",{className:"text-xs truncate",children:I.name}),l.jsxs("span",{className:"text-[10px] text-gray-400",children:["(",(I.size/1024/1024).toFixed(2)," MB)"]})]}),l.jsx("button",{type:"button",onClick:()=>U(Z),className:"text-red-500 hover:bg-red-50 p-1 rounded",children:l.jsx(ht,{className:"w-3 h-3"})})]},Z))})]}),l.jsxs("div",{className:"flex gap-3 pt-4 border-t dark:border-gray-700",children:[l.jsxs("button",{type:"button",onClick:ye,className:"flex-1 border border-gray-300 dark:border-gray-600 py-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center justify-center gap-2 transition",children:[l.jsx(ht,{className:"w-5 h-5"})," "]}),l.jsxs("button",{type:"submit",disabled:!K()||s,className:`flex-[2] text-white py-3 rounded-xl shadow-lg flex items-center justify-center gap-2 transition font-bold
                    ${K()&&!s?"bg-primary hover:bg-red-800":"bg-gray-400 cursor-not-allowed opacity-70"}
                `,children:[s?l.jsx(Ct,{className:"w-5 h-5 animate-spin"}):l.jsx(En,{className:"w-5 h-5"}),"     "]})]})]})]})},Jse=({user:t})=>{const[e,r]=T.useState("LIST"),[n,i]=T.useState(!1),[o,a]=T.useState([]),[s,u]=T.useState(!1),[c,d]=T.useState([]),[f,h]=T.useState([]),[g,b]=T.useState([]);T.useEffect(()=>{v(),Fe("evaluation_periods").then(d),Fe("evaluation_criteria").then(h),Fe("personnel").then(b)},[e]);const v=async()=>{u(!0);try{const{data:k,error:A}=await Oe.from("performance_evaluations").select("*").order("created_at",{ascending:!1});!A&&k&&a(k.map(C=>({...C,personnelName:C.personnel_name,totalScore:C.total_score,criteria:C.criteria_data})))}catch(k){console.error("Fetch Error:",k)}finally{u(!1)}},[y,x]=T.useState({personnelId:"",personnelName:"",unit:"",period:"",criteria:[]});T.useEffect(()=>{c.length>0&&!y.period&&x(k=>({...k,period:c[0].title}))},[c]);const _=y.criteria.reduce((k,A)=>k+A.score,0),w=y.criteria.reduce((k,A)=>k+A.max,0),E=async k=>{var A;if(k.preventDefault(),!y.personnelId){alert("      .");return}if(y.criteria.length===0){alert("          .");return}u(!0);try{const C=await Ho("G"),R={tracking_code:C,personnel_id:y.personnelId,personnel_name:y.personnelName,unit:y.unit,period:y.period,total_score:_,criteria_data:y.criteria,evaluator_id:t.id,description:`  ${t.fullName}`,status:"PENDING"},{error:$}=await Oe.from("performance_evaluations").insert([R]);if($)throw $;Hi("PERFORMANCE",{...y,totalScore:_},t,C,` : ${y.personnelName} - ${y.period}`),alert(`     .
 : ${C}`),r("LIST"),x({personnelId:"",personnelName:"",unit:"",org_unit_id:"",period:((A=c[0])==null?void 0:A.title)||"",criteria:[]})}catch(C){console.error("Save Error:",C),alert("   : "+C.message)}finally{u(!1)}},S=(k,A)=>{const C=y.criteria[k].max;if(A>C){alert(`       (${C})  .`);return}const R=[...y.criteria];R[k].score=Math.max(0,A),x({...y,criteria:R})},N=k=>{const A=f.filter(R=>R.org_unit_id===k.org_unit_id),C=A.map(R=>({label:R.title,score:0,max:R.max_score}));x({...y,personnelId:k.id,personnelName:k.full_name,unit:k.unit,org_unit_id:k.org_unit_id,criteria:C}),i(!1),A.length===0&&alert(":        ()   .      .")};return e==="LIST"?l.jsxs("div",{className:"max-w-7xl mx-auto pb-20",children:[s&&l.jsx("div",{className:"text-center py-4",children:l.jsx(Ct,{className:"w-6 h-6 animate-spin mx-auto text-primary"})}),l.jsx(gi,{title:"  ",icon:Bv,data:o,onAdd:()=>r("NEW"),columns:[{header:" ",accessor:k=>l.jsx("span",{className:"font-mono font-bold",children:k.tracking_code||k.trackingCode})},{header:" ",accessor:k=>l.jsx("span",{className:"font-bold",children:k.personnelName})},{header:"",accessor:k=>k.unit},{header:" ",accessor:k=>k.period},{header:" ",accessor:k=>{const A=k.criteria?k.criteria.reduce((C,R)=>C+R.max,0):100;return l.jsxs("span",{className:`font-bold ${k.totalScore>=A*.8?"text-green-600":"text-orange-500"}`,children:[k.totalScore," / ",A]})}},{header:" ",accessor:k=>new Date(k.created_at).toLocaleDateString("fa-IR")}]})]}):l.jsxs("div",{className:"max-w-3xl mx-auto pb-20",children:[l.jsx("h2",{className:"text-xl font-bold mb-6",children:"   "}),l.jsxs("form",{onSubmit:E,className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 bg-gray-50 dark:bg-gray-700/30 p-4 rounded-xl",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),y.personnelName?l.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-600 p-3 rounded-lg border border-primary/30",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:y.personnelName}),l.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:[": ",y.unit]})]}),l.jsx("button",{type:"button",onClick:()=>i(!0),className:"text-primary text-sm underline",children:""})]}):l.jsxs("button",{type:"button",onClick:()=>i(!0),className:"w-full p-3 border-2 border-dashed border-gray-300 dark:border-gray-500 rounded-lg text-gray-500 hover:border-primary hover:text-primary transition flex items-center justify-center gap-2",children:[l.jsx(Is,{className:"w-5 h-5"}),"   "]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("select",{value:y.period,onChange:k=>x({...y,period:k.target.value}),className:"w-full p-3 border rounded-lg bg-white dark:bg-gray-600 outline-none focus:ring-2 focus:ring-primary",children:c.length>0?c.map(k=>l.jsx("option",{value:k.title,children:k.title},k.id)):l.jsx("option",{children:"   "})})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center border-b pb-2 mb-4",children:[l.jsxs("h3",{className:"font-bold",children:["  ",y.unit?`( ${y.unit})`:""]}),y.unit&&l.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded flex items-center gap-1",children:[l.jsx(Yd,{className:"w-3 h-3"}),"   "]})]}),y.personnelId?y.criteria.length>0?y.criteria.map((k,A)=>l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition animate-fadeIn",children:[l.jsxs("div",{className:"mb-2 md:mb-0",children:[l.jsxs("span",{className:"font-medium block",children:[A+1,". ",k.label]}),l.jsxs("span",{className:"text-xs text-gray-500",children:["   : ",k.max]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",min:"0",max:k.max,value:k.score,onChange:C=>S(A,Number(C.target.value)),className:"w-20 p-2 border rounded-lg text-center font-bold outline-none focus:ring-2 focus:ring-primary dark:bg-gray-600"}),l.jsxs("span",{className:"text-gray-400 text-sm",children:["/ ",k.max]})]})]},A)):l.jsx("div",{className:"text-center p-6 bg-yellow-50 text-yellow-700 rounded-xl border border-yellow-200",children:l.jsxs("p",{children:['      "',y.unit,'"   .']})}):l.jsx("p",{className:"text-center text-gray-400 py-4 border-2 border-dashed rounded-xl",children:"          ."})]}),l.jsxs("div",{className:"sticky bottom-0 bg-white dark:bg-gray-800 pt-4 pb-2 border-t dark:border-gray-700",children:[l.jsxs("div",{className:"flex justify-between items-center bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl mb-4",children:[l.jsx("span",{className:"font-bold text-lg text-blue-800 dark:text-blue-300",children:"   "}),l.jsxs("div",{className:"flex items-baseline gap-1",children:[l.jsx("span",{className:"text-4xl font-black text-primary",children:_}),l.jsxs("span",{className:"text-gray-500",children:["/ ",w||100]})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"button",onClick:()=>r("LIST"),className:"flex-1 border py-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:""}),l.jsx("button",{type:"submit",disabled:y.criteria.length===0||s,className:"flex-1 bg-primary text-white py-3 rounded-xl shadow-lg hover:bg-red-800 transition transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:s?l.jsx(Ct,{className:"w-5 h-5 animate-spin"}):"   "})]})]})]}),n&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden flex flex-col max-h-[80vh]",children:[l.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-900",children:[l.jsx("h3",{className:"font-bold text-lg",children:" "}),l.jsx("button",{onClick:()=>i(!1),children:l.jsx(ht,{className:"w-5 h-5 text-gray-500"})})]}),l.jsx("div",{className:"p-4 border-b dark:border-gray-700",children:l.jsxs("div",{className:"relative",children:[l.jsx(Oo,{className:"absolute right-3 top-2.5 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"   ...",className:"w-full pr-10 pl-4 py-2 border rounded-lg bg-gray-50 dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary"})]})}),l.jsx("div",{className:"overflow-y-auto flex-1 p-2",children:l.jsxs("table",{className:"w-full text-right text-sm",children:[l.jsx("thead",{className:"text-gray-500 bg-gray-50 dark:bg-gray-700/50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-3",children:"   "}),l.jsx("th",{className:"p-3",children:" "}),l.jsx("th",{className:"p-3",children:""})]})}),l.jsx("tbody",{className:"divide-y dark:divide-gray-700",children:g.length>0?g.map(k=>l.jsxs("tr",{onClick:()=>N(k),className:"hover:bg-blue-50 dark:hover:bg-blue-900/20 cursor-pointer transition",children:[l.jsx("td",{className:"p-3 font-bold",children:k.full_name}),l.jsx("td",{className:"p-3 text-gray-500 dark:text-gray-400",children:k.unit}),l.jsx("td",{className:"p-3",children:l.jsx("button",{className:"bg-primary/10 text-primary p-1.5 rounded-full",children:l.jsx(es,{className:"w-4 h-4"})})})]},k.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-4 text-center",children:"  ."})})})]})})]})})]})},Yse=({user:t})=>{var b;const[e,r]=T.useState("WORK_ORDER"),[n,i]=T.useState([]),[o,a]=T.useState(null);T.useEffect(()=>{const v=g_(t);i(v)},[t,e]);const s=(v,y)=>{o&&(q5(o.id,v,t),a(null),i(g_(t)))},u=v=>{const x=c(o).find(_=>_.style==="primary"||_.style==="success");x&&o?(o.data=v,s(x.id)):alert("      .")},c=v=>{const x=gu().find(w=>w.id===v.workflowId);if(!x)return[];const _=x.steps.find(w=>w.id===v.currentStepId);return _?_.actions:[]},d=v=>{const x=gu().find(w=>w.id===v.workflowId),_=x==null?void 0:x.steps.find(w=>w.id===v.currentStepId);return(_==null?void 0:_.title)||""},f=v=>n.filter(y=>y.module===v).length,h=[{id:"WORK_ORDER",label:" ",icon:Yd},{id:"PROJECT",label:"",icon:Wd},{id:"PERFORMANCE",label:" ",icon:Bv},{id:"PART_REQUEST",label:" ",icon:Ml},{id:"INSPECTION",label:" ",icon:vA},{id:"DOCUMENT",label:" ",icon:Ol},{id:"MEETING",label:"",icon:Jd},{id:"SUGGESTION",label:"",icon:Qd},{id:"PURCHASE",label:" ",icon:ef}],g=({item:v})=>{const y=c(v),[x,_]=T.useState("");return v.module==="WORK_ORDER"?l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 h-full flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 border-b dark:border-gray-700 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[l.jsx(Yd,{className:"w-5 h-5 text-primary"}),v.title]}),l.jsx("span",{className:"text-xs text-gray-500",children:v.trackingCode})]}),l.jsx("button",{onClick:()=>a(null),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full",children:l.jsx(Vw,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:l.jsx(ob,{initialData:v.data,onProcessComplete:u})})]}):l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-100 dark:border-gray-700 h-full flex flex-col",children:[l.jsxs("div",{className:"p-6 border-b dark:border-gray-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"bg-primary/10 text-primary px-2 py-0.5 rounded text-xs font-bold",children:v.module}),l.jsx("span",{className:"text-gray-400 text-xs",children:v.trackingCode})]}),l.jsx("h2",{className:"text-xl font-bold",children:v.title}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:v.description})]}),l.jsx("button",{onClick:()=>a(null),className:"p-2 hover:bg-gray-100 rounded-full",children:l.jsx(Vw,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-bold border-r-4 border-primary pr-3 mb-3",children:" "}),l.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg text-sm space-y-2",children:Object.entries(v.data).map(([w,E])=>typeof E=="object"||Array.isArray(E)||w==="id"?null:l.jsxs("div",{className:"flex justify-between border-b border-gray-200 dark:border-gray-600 pb-1 last:border-0",children:[l.jsxs("span",{className:"text-gray-500",children:[w,":"]}),l.jsx("span",{className:"font-medium",children:String(E)})]},w))})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-bold mb-2",children:" /  ():"}),l.jsx("textarea",{value:x,onChange:w=>_(w.target.value),className:"w-full p-3 border rounded-lg dark:bg-gray-700 focus:ring-2 focus:ring-primary outline-none",placeholder:"    ...",rows:3})]})]}),l.jsx("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 border-t dark:border-gray-700 flex gap-3 flex-wrap",children:y.map(w=>{const E=w.style==="primary"?"bg-blue-600 hover:bg-blue-700 text-white":w.style==="success"?"bg-green-600 hover:bg-green-700 text-white":w.style==="danger"?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-800";return l.jsx("button",{onClick:()=>s(w.id),className:`flex-1 py-3 px-4 rounded-xl font-bold shadow-md transition transform active:scale-95 ${E}`,children:w.label},w.id)})})]})};return o?l.jsx("div",{className:"max-w-7xl mx-auto h-[calc(100vh-100px)] p-4",children:l.jsx(g,{item:o})}):l.jsxs("div",{className:"max-w-7xl mx-auto h-[calc(100vh-100px)] flex flex-col md:flex-row gap-6 p-4",children:[l.jsxs("div",{className:"w-full md:w-64 flex-shrink-0 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden flex flex-col",children:[l.jsx("div",{className:"p-4 border-b dark:border-gray-700",children:l.jsxs("h2",{className:"font-bold text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[l.jsx(Xd,{className:"w-5 h-5"}),"  "]})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:h.map(v=>l.jsxs("button",{onClick:()=>{r(v.id)},className:`w-full flex items-center justify-between p-3 rounded-lg text-sm transition-colors ${e===v.id?"bg-primary text-white shadow-md":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(v.icon,{className:"w-4 h-4"}),l.jsx("span",{children:v.label})]}),f(v.id)>0&&l.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${e===v.id?"bg-white text-primary":"bg-gray-200 text-gray-700"}`,children:f(v.id)})]},v.id))})]}),l.jsx("div",{className:"flex-1 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden flex flex-col",children:l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsx("div",{className:"p-4 border-b dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:l.jsxs("h3",{className:"font-bold",children:[" : ",(b=h.find(v=>v.id===e))==null?void 0:b.label]})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:n.filter(v=>v.module===e).length===0?l.jsxs("div",{className:"text-center py-20 text-gray-400 flex flex-col items-center",children:[l.jsx(js,{className:"w-12 h-12 mb-3 opacity-20"}),l.jsx("p",{children:"     ."})]}):n.filter(v=>v.module===e).map(v=>l.jsx("div",{onClick:()=>a(v),className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 hover:shadow-md hover:border-primary transition cursor-pointer group",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-200 group-hover:text-primary transition",children:v.title}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:v.description})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:"bg-blue-50 text-blue-700 text-xs px-2 py-1 rounded font-bold",children:d(v)}),l.jsxs("div",{className:"text-xs text-gray-400 mt-2 flex items-center gap-1 justify-end",children:[l.jsx(Ps,{className:"w-3 h-3"})," ",v.updatedAt]})]})]})},v.id))})]})})]})},Xse=({user:t})=>{const[e,r]=T.useState("INBOX"),[n,i]=T.useState([]),[o,a]=T.useState([]),[s,u]=T.useState(null),[c,d]=T.useState(!1),[f,h]=T.useState([]),[g,b]=T.useState([]),[v,y]=T.useState(!1),x=T.useRef(null),[_,w]=T.useState("USER"),[E,S]=T.useState(""),[N,k]=T.useState(""),[A,C]=T.useState(""),[R,$]=T.useState(!1),[L,M]=T.useState([]),[O,P]=T.useState(""),D=T.useRef(null),[B,U]=T.useState(""),[W,K]=T.useState("newest"),[re,Y]=T.useState(1),[ye,I]=T.useState(10);T.useEffect(()=>{Z()},[t,e]),T.useEffect(()=>{Y(1),U("")},[e]),T.useEffect(()=>{(async()=>{try{const _e=await Fe("app_users"),q=await Fe("personnel"),V=_e.map(de=>{const z=q.find(me=>me.id===de.personnel_id);return{id:de.id,name:z?z.full_name:de.username}});h(V)}catch(_e){console.error("Error loading users for messages:",_e)}})()},[]),T.useEffect(()=>{const ie=_e=>{x.current&&!x.current.contains(_e.target)&&y(!1)};return document.addEventListener("mousedown",ie),()=>document.removeEventListener("mousedown",ie)},[]);const Z=async()=>{d(!0);try{const{inbox:ie,sent:_e}=await QA(t.id,t.role);i(ie),a(_e)}catch(ie){console.error("Failed to load messages",ie)}finally{d(!1)}},ce=async ie=>{u(ie),e==="INBOX"&&!ie.readBy.includes(t.id)&&(i(_e=>_e.map(q=>q.id===ie.id?{...q,readBy:[...q.readBy,t.id]}:q)),await D5(ie,t.id))},ve=ie=>{b(_e=>_e.includes(ie)?_e.filter(q=>q!==ie):[..._e,ie])},Ie=ie=>new Promise((_e,q)=>{const V=new FileReader;V.readAsDataURL(ie),V.onload=()=>{_e(V.result)},V.onerror=de=>{q(de)}}),se=ie=>{if(ie.target.files&&ie.target.files.length>0){const _e=Array.from(ie.target.files),q=5*1024*1024,V=_e.filter(de=>de.size>q?(alert(` ${de.name}        .`),!1):!0);M(de=>[...de,...V])}D.current&&(D.current.value="")},Ne=ie=>{M(_e=>_e.filter((q,V)=>V!==ie))},J=async ie=>{ie.preventDefault();let _e="";if(_==="USER"){if(g.length===0){alert("      ");return}_e=g}else if(_==="ALL")_e="ALL";else{if(!E){alert("    ");return}_e=E}$(!0),P("");try{const q=[];for(const V of L){const de=await Ie(V);q.push({name:V.name,size:V.size,type:V.type,data:de})}await $5(t,_e,_,N,A,q),P("    "),k(""),C(""),S(""),b([]),M([]),Z(),setTimeout(()=>{P(""),r("SENT")},3e3)}catch(q){alert("   : "+(q.message||" ")),console.error(q)}finally{$(!1)}},X=ie=>ie.readBy&&ie.readBy.length>0?l.jsx("span",{title:" ",className:"flex text-blue-500",children:l.jsx(Gw,{className:"w-4 h-4"})}):l.jsx("span",{title:" ",className:"flex text-gray-400",children:l.jsx(es,{className:"w-4 h-4"})}),ke=ie=>{if(ie.receiverType==="ALL")return" ";if(ie.receiverType==="GROUP")return` ${ie.receiverId}`;const _e=f.find(q=>q.id===ie.receiverId);return _e?_e.name:""},ee=(()=>{let ie=e==="INBOX"?n:o;if(B){const _e=B.toLowerCase();ie=ie.filter(q=>q.subject.toLowerCase().includes(_e)||q.body.toLowerCase().includes(_e)||q.senderName.toLowerCase().includes(_e)||e==="SENT"&&ke(q).toLowerCase().includes(_e))}return ie.sort((_e,q)=>W==="newest"?q.createdAt.localeCompare(_e.createdAt):_e.createdAt.localeCompare(q.createdAt)),ie})(),fe=ee.length,te=Math.ceil(fe/ye),Re=(re-1)*ye,qe=ee.slice(Re,Re+ye);return l.jsxs("div",{className:"max-w-7xl mx-auto h-[calc(100vh-100px)] flex flex-col md:flex-row gap-6 p-4",children:[l.jsxs("div",{className:"w-full md:w-64 flex-shrink-0 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden flex flex-col",children:[l.jsx("div",{className:"p-4 border-b dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:l.jsxs("button",{onClick:()=>{r("COMPOSE"),u(null),P("")},className:"w-full bg-blue-600 text-white py-2 rounded-lg shadow hover:bg-blue-700 transition flex items-center justify-center gap-2",children:[l.jsx(Zd,{className:"w-4 h-4"}),"   "]})}),l.jsxs("div",{className:"p-2 space-y-1",children:[l.jsxs("button",{onClick:()=>{r("INBOX"),u(null)},className:`w-full flex items-center justify-between p-3 rounded-lg text-sm transition-colors ${e==="INBOX"?"bg-primary/10 text-primary font-bold":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Xd,{className:"w-4 h-4"}),"  "]}),n.filter(ie=>!ie.readBy.includes(t.id)).length>0&&l.jsx("span",{className:"bg-red-500 text-white px-2 py-0.5 rounded-full text-xs",children:n.filter(ie=>!ie.readBy.includes(t.id)).length})]}),l.jsx("button",{onClick:()=>{r("SENT"),u(null)},className:`w-full flex items-center justify-between p-3 rounded-lg text-sm transition-colors ${e==="SENT"?"bg-primary/10 text-primary font-bold":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(uu,{className:"w-4 h-4"}),"  "]})})]})]}),l.jsxs("div",{className:"flex-1 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden flex flex-col",children:[e==="COMPOSE"&&l.jsxs("div",{className:"p-6 overflow-y-auto",children:[l.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[l.jsx(_A,{className:"w-6 h-6 text-primary"}),"   "]}),O&&l.jsxs("div",{className:"mb-4 bg-green-100 border border-green-200 text-green-800 px-4 py-3 rounded-lg flex items-center gap-2 animate-fadeIn",children:[l.jsx(js,{className:"w-5 h-5"}),O]}),l.jsxs("form",{onSubmit:J,className:"space-y-4 max-w-2xl",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold mb-1",children:" "}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{type:"button",onClick:()=>w("USER"),className:`flex-1 py-2 rounded-lg border text-sm flex items-center justify-center gap-1 ${_==="USER"?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-200"}`,children:[l.jsx(ts,{className:"w-4 h-4"})," "]}),l.jsxs("button",{type:"button",onClick:()=>w("GROUP"),className:`flex-1 py-2 rounded-lg border text-sm flex items-center justify-center gap-1 ${_==="GROUP"?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-200"}`,children:[l.jsx(Is,{className:"w-4 h-4"})," "]}),l.jsxs("button",{type:"button",onClick:()=>w("ALL"),className:`flex-1 py-2 rounded-lg border text-sm flex items-center justify-center gap-1 ${_==="ALL"?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-200"}`,children:[l.jsx(bD,{className:"w-4 h-4"})," "]})]})]}),_==="USER"&&l.jsxs("div",{className:"relative",ref:x,children:[l.jsx("label",{className:"block text-sm font-bold mb-1",children:" "}),l.jsxs("div",{className:"w-full p-2.5 border rounded-lg bg-gray-50 dark:bg-gray-700 outline-none cursor-pointer flex items-center justify-between",onClick:()=>y(!v),children:[l.jsx("span",{className:"text-sm truncate",children:g.length>0?`${g.length}   `:" ..."}),l.jsx(Ih,{className:"w-4 h-4 text-gray-500"})]}),v&&l.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 border dark:border-gray-600 rounded-lg shadow-xl z-50 max-h-60 overflow-y-auto p-1",children:f.map(ie=>l.jsxs("div",{onClick:()=>ve(ie.id),className:"flex items-center gap-2 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:g.includes(ie.id),readOnly:!0,className:"w-4 h-4 rounded text-primary focus:ring-primary pointer-events-none"}),l.jsx("span",{className:"text-sm",children:ie.name})]},ie.id))}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:g.map(ie=>{const _e=f.find(q=>q.id===ie);return _e?l.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full flex items-center gap-1",children:[_e.name,l.jsx("button",{type:"button",onClick:()=>ve(ie),className:"hover:text-red-600",children:l.jsx(ht,{className:"w-3 h-3"})})]},ie):null})})]}),_==="GROUP"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold mb-1",children:"  "}),l.jsxs("select",{className:"w-full p-2.5 border rounded-lg bg-gray-50 dark:bg-gray-700 outline-none",value:E,onChange:ie=>S(ie.target.value),required:!0,children:[l.jsx("option",{value:"",children:" ..."}),l.jsx("option",{value:gr.ADMIN,children:" "}),l.jsx("option",{value:gr.MANAGER,children:" "}),l.jsx("option",{value:gr.USER,children:" "}),l.jsx("option",{value:gr.STOREKEEPER,children:""})]})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-bold mb-1",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",value:N,onChange:ie=>k(ie.target.value),className:"w-full p-2.5 border rounded-lg bg-gray-50 dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary",required:!0,placeholder:" ..."})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-bold mb-1",children:["  ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{value:A,onChange:ie=>C(ie.target.value),className:"w-full p-3 border rounded-lg h-40 bg-gray-50 dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary resize-none",required:!0,placeholder:"    ..."})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{type:"button",onClick:()=>{var ie;return(ie=D.current)==null?void 0:ie.click()},className:"flex items-center gap-2 text-gray-500 hover:text-gray-700 border border-gray-300 dark:border-gray-600 px-4 py-2 rounded-lg transition hover:bg-gray-50 dark:hover:bg-gray-700",children:[l.jsx(Qn,{className:"w-4 h-4"}),"  "]}),l.jsx("span",{className:"text-xs text-gray-400",children:"   :  "}),l.jsx("input",{type:"file",ref:D,multiple:!0,className:"hidden",onChange:se})]}),L.length>0&&l.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:L.map((ie,_e)=>l.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 px-3 py-1.5 rounded-full text-xs border border-gray-200 dark:border-gray-600",children:[l.jsx("span",{className:"truncate max-w-[150px]",children:ie.name}),l.jsxs("span",{className:"text-gray-400",children:["(",(ie.size/1024/1024).toFixed(2)," MB)"]}),l.jsx("button",{type:"button",onClick:()=>Ne(_e),className:"text-red-500 hover:bg-red-100 rounded-full p-0.5",children:l.jsx(ht,{className:"w-3 h-3"})})]},_e))})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsxs("button",{disabled:R,type:"submit",className:"bg-primary text-white px-8 py-3 rounded-xl shadow-lg hover:bg-red-800 transition flex items-center gap-2 disabled:opacity-50",children:[R?l.jsx(Ct,{className:"w-5 h-5 animate-spin"}):l.jsx(Zd,{className:"w-5 h-5"}),"  "]})})]})]}),(e==="INBOX"||e==="SENT")&&l.jsxs("div",{className:"flex h-full flex-col md:flex-row",children:[l.jsxs("div",{className:`${s?"hidden md:flex md:w-1/3 border-l dark:border-gray-700":"w-full flex"} flex-col h-full bg-white dark:bg-gray-800`,children:[l.jsxs("div",{className:"p-3 border-b dark:border-gray-700 space-y-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Oo,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"...",value:B,onChange:ie=>{U(ie.target.value),Y(1)},className:"w-full pr-9 pl-3 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg text-sm outline-none focus:ring-1 focus:ring-primary"})]}),l.jsxs("div",{className:"flex justify-between items-center text-xs",children:[l.jsxs("button",{onClick:()=>K(ie=>ie==="newest"?"oldest":"newest"),className:"flex items-center gap-1 text-gray-500 hover:text-primary transition",children:[l.jsx(iD,{className:"w-3 h-3"}),W==="newest"?"":""]}),l.jsxs("span",{className:"text-gray-400",children:[fe," "]})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto",children:[c&&l.jsxs("div",{className:"p-10 text-center text-gray-400",children:[l.jsx(Ct,{className:"w-8 h-8 mx-auto animate-spin mb-2"}),l.jsx("span",{children:"  ..."})]}),!c&&qe.length===0&&l.jsxs("div",{className:"text-center p-10 text-gray-400",children:[l.jsx(Xd,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),l.jsx("p",{children:"  "})]}),qe.map(ie=>{const _e=e==="INBOX"&&!ie.readBy.includes(t.id);return l.jsxs("div",{onClick:()=>ce(ie),className:`p-4 border-b dark:border-gray-700 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 transition relative
                                            ${(s==null?void 0:s.id)===ie.id?"bg-blue-50 dark:bg-blue-900/20":""}
                                            ${_e?"bg-white":"bg-gray-50/30 dark:bg-gray-800/50"}
                                        `,children:[_e&&l.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 bg-blue-500"}),l.jsxs("div",{className:"flex justify-between items-start mb-1",children:[l.jsx("span",{className:`text-sm ${_e?"font-black text-black dark:text-white":"font-medium text-gray-600 dark:text-gray-400"}`,children:e==="INBOX"?ie.senderName:ke(ie)}),l.jsx("span",{className:"text-[10px] text-gray-400",dir:"ltr",children:ie.createdAt})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h4",{className:`text-sm truncate pr-2 ${_e?"font-black text-gray-900 dark:text-white":"font-normal text-gray-600 dark:text-gray-400"}`,children:ie.subject}),e==="SENT"&&X(ie)]}),l.jsx("p",{className:`text-xs mt-1 truncate ${_e?"text-gray-800 dark:text-gray-300":"text-gray-400"}`,children:ie.body}),ie.attachments&&ie.attachments.length>0&&l.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-gray-400",children:[l.jsx(Qn,{className:"w-3 h-3"}),l.jsxs("span",{children:[ie.attachments.length," "]})]})]},ie.id)})]}),fe>0&&l.jsxs("div",{className:"p-3 border-t dark:border-gray-700 bg-gray-50 dark:bg-gray-900 flex justify-between items-center text-xs",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:ye,onChange:ie=>{I(Number(ie.target.value)),Y(1)},className:"bg-white dark:bg-gray-800 border dark:border-gray-600 rounded p-1 outline-none",children:[l.jsx("option",{value:10,children:"10"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"}),l.jsx("option",{value:200,children:"200"})]}),l.jsx("span",{className:"text-gray-500",children:""})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{disabled:re===1,onClick:()=>Y(ie=>ie-1),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded disabled:opacity-30",children:l.jsx(oc,{className:"w-4 h-4"})}),l.jsxs("span",{className:"font-mono",children:[re," / ",te||1]}),l.jsx("button",{disabled:re>=te,onClick:()=>Y(ie=>ie+1),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded disabled:opacity-30",children:l.jsx(Oh,{className:"w-4 h-4"})})]})]})]}),s?l.jsxs("div",{className:"flex-1 flex flex-col h-full bg-gray-50 dark:bg-gray-900/50",children:[l.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 shadow-sm border-b dark:border-gray-700",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsx("h2",{className:"text-xl font-bold",children:s.subject}),l.jsx("button",{onClick:()=>u(null),className:"md:hidden text-sm text-blue-600",children:""})]}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-600 dark:text-gray-300",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center font-bold text-gray-500",children:e==="INBOX"?s.senderName[0]:l.jsx(ts,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("p",{children:l.jsx("span",{className:"font-bold",children:e==="INBOX"?s.senderName:""})}),l.jsx("p",{className:"text-xs opacity-70",dir:"ltr",children:s.createdAt})]})]}),e==="SENT"&&l.jsxs("div",{className:"mt-4 pt-3 border-t dark:border-gray-700 text-xs text-gray-500",children:[": ",ke(s),s.readBy.length>0&&l.jsxs("span",{className:"mr-2 text-blue-600 flex items-center gap-1 inline-flex",children:[l.jsx(Gw,{className:"w-3 h-3"}),"  "]})]})]}),l.jsxs("div",{className:"p-6 flex-1 overflow-y-auto",children:[l.jsx("p",{className:"whitespace-pre-wrap leading-relaxed text-gray-800 dark:text-gray-200",children:s.body}),s.attachments&&s.attachments.length>0&&l.jsxs("div",{className:"mt-8 border-t border-gray-200 dark:border-gray-700 pt-4",children:[l.jsxs("h4",{className:"text-sm font-bold mb-3 flex items-center gap-2",children:[l.jsx(Qn,{className:"w-4 h-4"}),"   "]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:s.attachments.map((ie,_e)=>l.jsxs("div",{className:"flex items-center p-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm hover:shadow-md transition",children:[l.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 p-2 rounded-lg text-gray-500",children:l.jsx(vD,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex-1 px-3 overflow-hidden",children:[l.jsx("p",{className:"text-sm font-medium truncate",title:ie.name,children:ie.name}),l.jsxs("p",{className:"text-xs text-gray-400",children:[(ie.size/1024).toFixed(1)," KB"]})]}),l.jsx("a",{href:ie.data,download:ie.name,className:"text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 p-2 rounded-full transition",title:"",children:l.jsx(qv,{className:"w-4 h-4"})})]},_e))})]})]})]}):l.jsx("div",{className:"hidden md:flex flex-1 items-center justify-center text-gray-400 bg-gray-50 dark:bg-gray-900/50"})]})]})]})},Qse=({user:t})=>{var L;const[e,r]=T.useState([]),[n,i]=T.useState(!1),[o,a]=T.useState(!1),[s,u]=T.useState(""),[c,d]=T.useState("ALL"),[f,h]=T.useState({}),[g,b]=T.useState(""),[v,y]=T.useState([]),x=T.useRef(null);T.useEffect(()=>{_()},[]);const _=async()=>{i(!0);try{const{data:M,error:O}=await Oe.from("personal_notes").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(O)throw O;const P=(M||[]).map(D=>({id:D.id,userId:D.user_id,title:D.title,content:D.content,tags:D.tags||[],reminderDate:D.reminder_date,reminderTime:D.reminder_time,isCompleted:D.is_completed,attachments:D.attachments||[],createdAt:D.created_at,reminderSeen:!1}));r(P)}catch(M){console.error(M)}finally{i(!1)}},w=()=>{h({title:"",content:"",tags:[],isCompleted:!1,reminderDate:at()}),y([]),a(!0)},E=M=>{h(M),y([]),a(!0)},S=async M=>{if(M.preventDefault(),!!f.title){i(!0);try{const O=[];for(const B of v){const U=new FileReader,W=await new Promise(K=>{U.onload=()=>K(U.result),U.readAsDataURL(B)});O.push({name:B.name,size:B.size,type:B.type,data:W})}const P=[...f.attachments||[],...O],D={user_id:t.id,title:f.title,content:f.content,tags:f.tags,reminder_date:f.reminderDate,reminder_time:f.reminderTime,is_completed:f.isCompleted,attachments:P};f.id?await Oe.from("personal_notes").update(D).eq("id",f.id):await Oe.from("personal_notes").insert([D]),a(!1),_()}catch{alert("   ")}finally{i(!1)}}},N=async M=>{if(confirm("      ")){r(O=>O.filter(P=>P.id!==M));try{await Oe.from("personal_notes").delete().eq("id",M)}catch{alert("   "),_()}}},k=async M=>{const O=!M.isCompleted;r(P=>P.map(D=>D.id===M.id?{...D,isCompleted:O}:D));try{await Oe.from("personal_notes").update({is_completed:O}).eq("id",M.id)}catch(P){console.error(P)}},A=M=>{var O;M.key==="Enter"&&g.trim()&&(M.preventDefault(),(O=f.tags)!=null&&O.includes(g.trim())||h(P=>({...P,tags:[...P.tags||[],g.trim()]})),b(""))},C=M=>{h(O=>{var P;return{...O,tags:(P=O.tags)==null?void 0:P.filter(D=>D!==M)}})},R=M=>{M.target.files&&y(O=>[...O,...Array.from(M.target.files)])},$=e.filter(M=>{const O=M.title.includes(s)||M.content.includes(s)||M.tags.some(P=>P.includes(s));return c==="TODO"?O&&!M.isCompleted:c==="DONE"?O&&M.isCompleted:O});return l.jsxs("div",{className:"max-w-7xl mx-auto pb-20 p-4",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 rounded-lg shadow-sm",children:l.jsx(TA,{className:"w-6 h-6 text-primary"})}),l.jsx("h1",{className:"text-2xl font-bold",children:" "})]}),l.jsxs("button",{onClick:w,className:"bg-primary text-white px-4 py-2.5 rounded-xl shadow-lg flex items-center gap-2 hover:bg-red-800 transition transform active:scale-95",children:[l.jsx(or,{className:"w-5 h-5"}),"  "]})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 p-4 mb-6 flex flex-col md:flex-row gap-4 justify-between",children:[l.jsxs("div",{className:"relative flex-1 max-w-md",children:[l.jsx(Oo,{className:"absolute right-3 top-2.5 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"  ...",value:s,onChange:M=>u(M.target.value),className:"w-full pr-10 pl-4 py-2 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg outline-none focus:ring-2 focus:ring-primary"})]}),l.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-700 p-1 rounded-lg",children:["ALL","TODO","DONE"].map(M=>l.jsx("button",{onClick:()=>d(M),className:`px-4 py-1.5 rounded-md text-sm font-medium transition ${c===M?"bg-white dark:bg-gray-600 shadow text-primary":"text-gray-500 dark:text-gray-300"}`,children:M==="ALL"?"":M==="TODO"?" ":" "},M))})]}),n?l.jsx("div",{className:"text-center py-20",children:l.jsx(Ct,{className:"w-10 h-10 animate-spin mx-auto text-primary"})}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:$.map((M,O)=>{var P;return l.jsxs("div",{className:`
                        relative group rounded-2xl p-5 border shadow-sm transition hover:shadow-md flex flex-col
                        ${M.isCompleted?"bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700 opacity-70 grayscale-[0.5]":"bg-white dark:bg-gray-800 border-gray-100 dark:border-gray-700"}
                    `,children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsx("h3",{className:`font-bold text-lg line-clamp-1 ${M.isCompleted?"line-through text-gray-500":""}`,children:M.title}),l.jsxs("div",{className:"flex gap-1 pl-1",children:[l.jsx("button",{onClick:D=>{D.stopPropagation(),E(M)},className:"p-1.5 text-gray-400 hover:text-blue-600 bg-gray-50 dark:bg-gray-700/50 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"",children:l.jsx(OD,{className:"w-4 h-4"})}),l.jsx("button",{onClick:D=>{D.stopPropagation(),N(M.id)},className:"p-1.5 text-gray-400 hover:text-red-600 bg-gray-50 dark:bg-gray-700/50 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"",children:l.jsx(Et,{className:"w-4 h-4"})})]})]}),l.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-3 mb-4 flex-1 whitespace-pre-line leading-relaxed",children:M.content}),l.jsxs("div",{className:"space-y-3 mt-auto",children:[l.jsx("div",{className:"flex flex-wrap gap-1",children:(P=M.tags)==null?void 0:P.map(D=>l.jsxs("span",{className:"text-[10px] bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded-full text-gray-600 dark:text-gray-400",children:["#",D]},D))}),l.jsxs("div",{className:"flex items-center justify-between pt-3 border-t dark:border-gray-700",children:[M.reminderDate?l.jsxs("div",{className:`flex items-center gap-1 text-xs ${M.isCompleted?"text-gray-400":"text-red-500 bg-red-50 dark:bg-red-900/10 px-2 py-1 rounded"}`,children:[l.jsx(Ps,{className:"w-3 h-3"}),l.jsxs("span",{children:[M.reminderDate," ",M.reminderTime?`- ${M.reminderTime}`:""]})]}):l.jsx("span",{}),l.jsx("button",{onClick:()=>k(M),className:`p-2 rounded-full transition ${M.isCompleted?"bg-green-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-400 hover:text-green-500"}`,title:M.isCompleted?"  ":" ",children:l.jsx(js,{className:"w-5 h-5"})})]})]}),M.attachments&&M.attachments.length>0&&l.jsx("div",{className:"absolute top-2 left-2 text-gray-400 transform -rotate-45 pointer-events-none",children:l.jsx(Qn,{className:"w-4 h-4"})})]},M.id)})}),o&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:l.jsxs("form",{onSubmit:S,className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-lg flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-800",children:[l.jsx("h3",{className:"font-bold text-lg",children:f.id?" ":" "}),l.jsx("button",{type:"button",onClick:()=>a(!1),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full",children:l.jsx(ht,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold mb-1",children:""}),l.jsx("input",{value:f.title,onChange:M=>h({...f,title:M.target.value}),className:"w-full p-3 border rounded-xl bg-gray-50 dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary",placeholder:":   ...",autoFocus:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold mb-1",children:" "}),l.jsx("textarea",{value:f.content,onChange:M=>h({...f,content:M.target.value}),className:"w-full p-3 h-32 border rounded-xl bg-gray-50 dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary resize-none",placeholder:"   ..."})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-blue-50 dark:bg-blue-900/10 p-4 rounded-xl border border-blue-100 dark:border-blue-800",children:[l.jsx("div",{children:l.jsx(Mn,{label:" ",value:f.reminderDate||"",onChange:M=>h({...f,reminderDate:M}),disableFuture:!1})}),l.jsx("div",{children:l.jsx(qr,{label:" ",value:f.reminderTime||"",onChange:M=>h({...f,reminderTime:M})})})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-bold mb-1 flex items-center gap-2",children:[l.jsx(VD,{className:"w-4 h-4"})," "]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-2 p-2 border rounded-xl bg-gray-50 dark:bg-gray-700 min-h-[46px]",children:[(L=f.tags)==null?void 0:L.map(M=>l.jsxs("span",{className:"bg-white dark:bg-gray-600 px-2 py-1 rounded text-xs flex items-center gap-1 shadow-sm",children:[M,l.jsx("button",{type:"button",onClick:()=>C(M),className:"hover:text-red-500",children:l.jsx(ht,{className:"w-3 h-3"})})]},M)),l.jsx("input",{value:g,onChange:M=>b(M.target.value),onKeyDown:A,className:"bg-transparent outline-none flex-1 text-sm min-w-[100px]",placeholder:"  Enter ..."})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-bold mb-1 flex items-center gap-2",children:[l.jsx(Qn,{className:"w-4 h-4"}),"  "]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>{var M;return(M=x.current)==null?void 0:M.click()},className:"px-4 py-2 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-sm",children:" "}),l.jsxs("span",{className:"text-xs text-gray-400",children:[v.length,"  "]})]}),l.jsx("input",{type:"file",ref:x,onChange:R,multiple:!0,className:"hidden"}),f.attachments&&f.attachments.length>0&&l.jsx("div",{className:"mt-2 space-y-1",children:f.attachments.map((M,O)=>l.jsxs("div",{className:"text-xs flex items-center gap-2 text-gray-500",children:[l.jsx(Qn,{className:"w-3 h-3"})," ",M.name]},O))})]})]}),l.jsxs("div",{className:"p-4 border-t dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-6 py-2 border rounded-xl hover:bg-gray-200 transition",children:""}),l.jsxs("button",{type:"submit",className:"px-6 py-2 bg-primary text-white rounded-xl shadow hover:bg-red-800 transition flex items-center gap-2",children:[n?l.jsx(Ct,{className:"w-4 h-4 animate-spin"}):l.jsx(En,{className:"w-4 h-4"})," "]})]})]})})]})},Zse=()=>{const[t,e]=T.useState([]),[r,n]=T.useState(null);T.useEffect(()=>{e(gu())},[]);const i=()=>{const u={id:$l(),title:" ",module:"WORK_ORDER",isActive:!1,steps:[]};n(u)},o=()=>{r&&(B5(r),e(gu()),alert("    ."))},a=()=>{if(!r)return;const u={id:$l(),title:" ",assigneeRole:gr.ADMIN,actions:[]};n({...r,steps:[...r.steps,u]})},s=u=>{if(!r)return;const c={id:$l(),label:"  ",nextStepId:"FINISH",style:"primary"};n({...r,steps:r.steps.map(d=>d.id!==u?d:{...d,actions:[...d.actions,c]})})};return r?l.jsxs("div",{className:"max-w-6xl mx-auto pb-20 h-[calc(100vh-100px)] flex flex-col",children:[l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm mb-6 flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:()=>n(null),className:"text-gray-500 hover:text-gray-800",children:""}),l.jsx("div",{className:"h-8 w-px bg-gray-300"}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500 block",children:" "}),l.jsx("input",{value:r.title,onChange:u=>n({...r,title:u.target.value}),className:"font-bold bg-transparent outline-none border-b border-dashed border-gray-300 focus:border-primary"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500 block",children:" "}),l.jsxs("select",{value:r.module,onChange:u=>n({...r,module:u.target.value}),className:"bg-gray-50 dark:bg-gray-700 rounded p-1 text-sm outline-none",children:[l.jsx("option",{value:"WORK_ORDER",children:"  (Work Order)"}),l.jsx("option",{value:"PROJECT",children:" (Project)"}),l.jsx("option",{value:"PART_REQUEST",children:" "}),l.jsx("option",{value:"PURCHASE",children:" "}),l.jsx("option",{value:"PERFORMANCE",children:" "}),l.jsx("option",{value:"MEETING",children:""}),l.jsx("option",{value:"SUGGESTION",children:""})]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-sm",children:[l.jsx("input",{type:"checkbox",checked:r.isActive,onChange:u=>n({...r,isActive:u.target.checked}),className:"w-4 h-4 text-primary rounded"})," "]}),l.jsxs("button",{onClick:o,className:"bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-green-700 shadow",children:[l.jsx(En,{className:"w-4 h-4"}),"  "]})]})]}),l.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-auto bg-gray-100 dark:bg-gray-900 rounded-xl p-6 border border-dashed border-gray-300 relative",children:l.jsxs("div",{className:"flex gap-8 min-w-max",children:[l.jsxs("div",{className:"w-16 flex flex-col items-center justify-center pt-20 opacity-50",children:[l.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white shadow-lg mb-2",children:l.jsx(RD,{className:"w-6 h-6 ml-1"})}),l.jsx("span",{className:"text-xs font-bold",children:""})]}),l.jsx(Rl,{className:"w-8 h-8 text-gray-300 self-center mt-8"}),r.steps.map((u,c)=>l.jsxs("div",{className:"flex gap-4 items-center",children:[l.jsxs("div",{className:"w-80 bg-white dark:bg-gray-800 rounded-xl shadow-lg border-t-4 border-primary flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("input",{value:u.title,onChange:d=>{const f=[...r.steps];f[c].title=d.target.value,n({...r,steps:f})},className:"font-bold text-gray-800 dark:text-white bg-transparent outline-none w-full",placeholder:" "}),l.jsxs("div",{className:"mt-2",children:[l.jsx("label",{className:"text-xs text-gray-500",children:" :"}),l.jsxs("select",{value:u.assigneeRole,onChange:d=>{const f=[...r.steps];f[c].assigneeRole=d.target.value,n({...r,steps:f})},className:"block w-full mt-1 text-sm bg-gray-50 dark:bg-gray-700 p-1 rounded",children:[Object.values(gr).map(d=>l.jsx("option",{value:d,children:d},d)),l.jsx("option",{value:"INITIATOR",children:"  (Initiator)"})]})]})]}),l.jsx("button",{onClick:()=>{const d=r.steps.filter(f=>f.id!==u.id);n({...r,steps:d})},className:"text-red-400 hover:text-red-600",children:l.jsx(Et,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/30 flex-1 space-y-2",children:[l.jsx("p",{className:"text-xs font-bold text-gray-500 mb-2",children:" (Actions):"}),u.actions.map((d,f)=>l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-2 rounded border border-gray-200 dark:border-gray-600 text-sm space-y-2",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{value:d.label,onChange:h=>{const g=[...r.steps];g[c].actions[f].label=h.target.value,n({...r,steps:g})},className:"flex-1 bg-transparent border-b border-dashed outline-none",placeholder:" "}),l.jsxs("select",{value:d.style,onChange:h=>{const g=[...r.steps];g[c].actions[f].style=h.target.value,n({...r,steps:g})},className:"text-xs bg-gray-100 rounded",children:[l.jsx("option",{value:"primary",children:""}),l.jsx("option",{value:"success",children:""}),l.jsx("option",{value:"danger",children:""}),l.jsx("option",{value:"neutral",children:""})]})]}),l.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[l.jsx(Rl,{className:"w-3 h-3"}),l.jsx("span",{children:" :"}),l.jsxs("select",{value:d.nextStepId,onChange:h=>{const g=[...r.steps];g[c].actions[f].nextStepId=h.target.value,n({...r,steps:g})},className:"bg-transparent font-medium text-gray-800 dark:text-gray-200 outline-none",children:[l.jsx("option",{value:"FINISH",children:" "}),r.steps.map(h=>l.jsx("option",{value:h.id,children:h.title},h.id))]})]})]},d.id)),l.jsx("button",{onClick:()=>s(u.id),className:"w-full py-1 text-xs text-primary border border-dashed border-primary/30 rounded hover:bg-primary/5",children:"+  "})]})]}),l.jsx(Rl,{className:"w-8 h-8 text-gray-300"})]},u.id)),l.jsxs("button",{onClick:a,className:"h-80 w-40 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl flex flex-col items-center justify-center text-gray-400 hover:border-primary hover:text-primary transition bg-white/50",children:[l.jsx(or,{className:"w-8 h-8 mb-2"}),l.jsx("span",{children:" "})]})]})})]}):l.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 pb-20",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[l.jsx(bA,{className:"text-primary"}),"   "]}),l.jsxs("button",{onClick:i,className:"bg-primary text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[l.jsx(or,{className:"w-4 h-4"}),"  "]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(u=>l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 hover:shadow-md transition",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-blue-600",children:l.jsx(Gv,{className:"w-6 h-6"})}),l.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${u.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:u.isActive?"":""})]}),l.jsx("h3",{className:"font-bold text-lg mb-1",children:u.title}),l.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[": ",u.module]}),l.jsxs("p",{className:"text-xs text-gray-400 mb-4",children:[u.steps.length,"   "]}),l.jsx("button",{onClick:()=>n(u),className:"w-full py-2 border border-primary text-primary rounded-lg hover:bg-primary hover:text-white transition",children:" "})]},u.id))})]})},ele=()=>{const[t,e]=T.useState("LOGINS"),[r,n]=T.useState([]),[i,o]=T.useState([]),[a,s]=T.useState([]),[u,c]=T.useState(!1),[d,f]=T.useState(""),[h,g]=T.useState(!0),b={LOGINS:[{id:"user_name",label:" ",visible:!0},{id:"personnel_code",label:" ",visible:!0},{id:"action",label:" ",visible:!0},{id:"created_at",label:"  ",visible:!0},{id:"ip_address",label:" IP",visible:!0},{id:"details",label:"",visible:!1}],WORK_ORDERS:[{id:"tracking_code",label:" ",visible:!0},{id:"title",label:"",visible:!0},{id:"requester",label:" ",visible:!0},{id:"created_at",label:" ",visible:!0},{id:"status",label:"",visible:!0},{id:"equip_name",label:"",visible:!0},{id:"failure_desc",label:" ",visible:!1}],PARTS:[{id:"tracking_code",label:" ",visible:!0},{id:"requester_name",label:" ",visible:!0},{id:"request_date",label:" ",visible:!0},{id:"description",label:"/",visible:!0},{id:"work_order_code",label:" ",visible:!0},{id:"status",label:"",visible:!0}]};T.useEffect(()=>{v(),s(b[t])},[t]),T.useEffect(()=>{if(d){const w=d.toLowerCase();o(r.filter(E=>Object.values(E).some(S=>String(S).toLowerCase().includes(w))))}else o(r)},[d,r]);const v=async()=>{c(!0);let w=[];try{switch(t){case"LOGINS":const{data:E}=await Oe.from("system_logs").select("user_name, personnel_code, action, created_at, ip_address, details").order("created_at",{ascending:!1});w=(E||[]).map(k=>({...k,created_at:new Date(k.created_at).toLocaleString("fa-IR")}));break;case"WORK_ORDERS":const{data:S}=await Oe.from("cartable_items").select("tracking_code, title, created_at, status, data").eq("module","WORK_ORDER").order("created_at",{ascending:!1});w=(S||[]).map(k=>{const A=k.data||{};return{tracking_code:k.tracking_code,title:k.title,requester:A.requester||"-",created_at:new Date(k.created_at).toLocaleDateString("fa-IR"),status:k.status==="DONE"?" ":"  ",equip_name:A.equipName||A.equipLocalName||"-",failure_desc:A.failureDesc||"-"}});break;case"PARTS":const{data:N}=await Oe.from("part_requests").select("tracking_code, requester_name, request_date, description, work_order_code, status").order("created_at",{ascending:!1});w=(N||[]).map(k=>({...k,status:k.status==="PENDING"?"  ":" "}));break}}catch(E){console.error("Error fetching report data:",E)}finally{c(!1)}n(w),o(w)},y=w=>{s(E=>E.map(S=>S.id===w?{...S,visible:!S.visible}:S))},x=()=>{if(i.length===0)return alert("    ");const w=a.filter(A=>A.visible),E=w.map(A=>A.label),S=i.map(A=>w.map(C=>A[C.id]||"-")),N="data:text/csv;charset=utf-8,\uFEFF"+E.join(",")+`
`+S.map(A=>A.join(",")).join(`
`),k=document.createElement("a");k.setAttribute("href",encodeURI(N)),k.setAttribute("download",`report_${t}_${Date.now()}.csv`),document.body.appendChild(k),k.click(),document.body.removeChild(k)},_=()=>{if(i.length===0)return[];let w="";t==="LOGINS"?w="created_at":(t==="WORK_ORDERS"||t==="PARTS")&&(w="status");const E={};return i.forEach(S=>{let N=S[w]||"";(w==="created_at"||w==="request_date")&&(N=String(N).split(" ")[0]),E[N]=(E[N]||0)+1}),Object.keys(E).map(S=>({name:S,count:E[S]})).slice(0,10)};return l.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 pb-20",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 rounded-lg shadow-sm",children:l.jsx(SA,{className:"w-6 h-6 text-primary"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:" "}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"        "})]})]}),l.jsxs("button",{onClick:x,className:"bg-green-600 text-white px-4 py-2 rounded-xl shadow-lg flex items-center gap-2 hover:bg-green-700 transition",children:[l.jsx(xA,{className:"w-5 h-5"}),"  "]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-100 dark:border-gray-700",children:[l.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-200 mb-3 flex items-center gap-2",children:[l.jsx(Gv,{className:"w-4 h-4"}),"  "]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:" "}),l.jsxs("select",{value:t,onChange:w=>e(w.target.value),className:"w-full p-2.5 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg outline-none text-sm",children:[l.jsx("option",{value:"LOGINS",children:"   "}),l.jsx("option",{value:"WORK_ORDERS",children:" "}),l.jsx("option",{value:"PARTS",children:" "})]})]}),l.jsxs("div",{children:[l.jsxs("button",{onClick:()=>g(!h),className:"flex items-center justify-between w-full text-xs font-bold text-gray-500 mb-2 hover:text-primary transition",children:[" ",h?l.jsx(yA,{className:"w-3 h-3"}):l.jsx(Ih,{className:"w-3 h-3"})]}),h&&l.jsx("div",{className:"space-y-1 bg-gray-50 dark:bg-gray-700/50 p-2 rounded-lg max-h-60 overflow-y-auto",children:a.map(w=>l.jsxs("div",{onClick:()=>y(w.id),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 p-1 rounded",children:[w.visible?l.jsx(Za,{className:"w-4 h-4 text-primary"}):l.jsx(kA,{className:"w-4 h-4 text-gray-400"}),l.jsx("span",{className:"text-sm",children:w.label})]},w.id))})]}),l.jsxs("button",{onClick:v,className:"w-full py-2 bg-blue-50 text-blue-600 rounded-lg flex items-center justify-center gap-2 hover:bg-blue-100 transition text-sm font-bold",children:[l.jsx(EA,{className:`w-4 h-4 ${u?"animate-spin":""}`}),"  "]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-4 border border-gray-100 dark:border-gray-700 h-64",children:[l.jsx("h4",{className:"text-xs font-bold text-gray-500 mb-2 text-center",children:"  "}),l.jsx(Py,{width:"100%",height:"90%",children:l.jsxs(CI,{data:_(),children:[l.jsx(rh,{strokeDasharray:"3 3",vertical:!1}),l.jsx(Uo,{dataKey:"name",fontSize:10,angle:-45,textAnchor:"end",height:50}),l.jsx(Fo,{fontSize:10}),l.jsx(Br,{}),l.jsx(eo,{dataKey:"count",fill:"#800020",radius:[4,4,0,0]})]})})]})]}),l.jsx("div",{className:"lg:col-span-3",children:l.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden flex flex-col h-full min-h-[500px]",children:[l.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-900",children:[l.jsxs("h2",{className:"font-bold text-gray-700 dark:text-gray-200",children:["  (",i.length," )"]}),l.jsxs("div",{className:"relative w-64",children:[l.jsx(Rh,{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"  ...",value:d,onChange:w=>f(w.target.value),className:"w-full pr-9 pl-4 py-1.5 text-sm bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg outline-none focus:ring-1 focus:ring-primary"})]})]}),l.jsx("div",{className:"flex-1 overflow-auto",children:l.jsxs("table",{className:"w-full text-right text-sm",children:[l.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 sticky top-0 shadow-sm",children:l.jsx("tr",{children:a.filter(w=>w.visible).map(w=>l.jsx("th",{className:"p-4 whitespace-nowrap",children:w.label},w.id))})}),l.jsx("tbody",{className:"divide-y dark:divide-gray-600",children:i.length>0?i.map((w,E)=>l.jsx("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition",children:a.filter(S=>S.visible).map(S=>l.jsx("td",{className:"p-4 whitespace-nowrap text-gray-700 dark:text-gray-200",children:w[S.id]||"-"},S.id))},E)):l.jsx("tr",{children:l.jsx("td",{colSpan:a.filter(w=>w.visible).length,className:"p-10 text-center text-gray-400",children:u?"   ...":"  "})})})]})})]})})]})]})},lE=({title:t,selectedCloths:e,onChange:r})=>{const[n,i]=T.useState(!1),o=T.useRef(null);T.useEffect(()=>{const u=c=>{o.current&&!o.current.contains(c.target)&&i(!1)};return n&&document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[n]);const a=(u,c)=>{const d=`D${u}-C${c}`;e.includes(d)?r(e.filter(f=>f!==d)):r([...e,d])},s=u=>{const c=Array.from({length:20}).map((f,h)=>`D${u}-C${h+1}`);if(c.every(f=>e.includes(f)))r(e.filter(f=>!c.includes(f)));else{const f=[...new Set([...e,...c])];r(f)}};return l.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-4 bg-white dark:bg-gray-800 relative",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsxs("h4",{className:"font-bold text-sm flex items-center gap-2",children:[l.jsx(wD,{className:"w-4 h-4 text-primary"})," : ",t]}),l.jsx("button",{type:"button",onClick:()=>i(!n),className:"text-xs bg-blue-50 text-blue-600 px-3 py-1 rounded-lg hover:bg-blue-100 transition border border-blue-200",children:n?" ":"  "})]}),l.jsx("div",{className:"flex justify-between items-center text-xs text-gray-500 mb-2",children:l.jsxs("span",{children:["  : ",l.jsx("span",{className:"font-bold text-red-500 text-lg",children:e.length})," "]})}),n&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:l.jsxs("div",{ref:o,className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center sticky top-0 bg-white dark:bg-gray-900 z-10",children:[l.jsxs("h3",{className:"font-bold text-lg",children:["   - ",t]}),l.jsx("button",{onClick:()=>i(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full",children:l.jsx(ht,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"p-6 space-y-6",children:Array.from({length:6}).map((u,c)=>{const d=c+1,h=Array.from({length:20}).map((g,b)=>`D${d}-C${b+1}`).every(g=>e.includes(g));return l.jsxs("div",{className:"flex flex-col gap-2 border-b pb-4 last:border-0",children:[l.jsxs("div",{className:"flex justify-between items-center bg-gray-50 dark:bg-gray-800/50 p-2 rounded",children:[l.jsxs("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:["  ",d]}),l.jsx("button",{type:"button",onClick:()=>s(d),className:`p-1 rounded transition ${h?"text-primary":"text-gray-400 hover:text-gray-600"}`,title:"    ",children:h?l.jsx(Za,{className:"w-6 h-6"}):l.jsx(kA,{className:"w-6 h-6"})})]}),l.jsx("div",{className:"flex flex-wrap gap-1 justify-end",children:Array.from({length:20}).map((g,b)=>{const v=b+1,y=`D${d}-C${v}`,x=e.includes(y);return l.jsx("div",{onClick:()=>a(d,v),className:`
                                    w-8 h-8 flex items-center justify-center text-[10px] rounded cursor-pointer border transition-all select-none
                                    ${x?"bg-red-600 text-white border-red-700 shadow-sm font-bold scale-105":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 hover:border-primary text-gray-600 dark:text-gray-400"}
                                    `,title:` ${d} -  ${v}`,children:v},y)})})]},d)})}),l.jsx("div",{className:"p-4 border-t dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex justify-end sticky bottom-0",children:l.jsx("button",{onClick:()=>i(!1),className:"bg-primary text-white px-6 py-2 rounded-xl shadow hover:bg-red-800 transition",children:"  "})})]})})]})},ln=["07:30","08:30","09:30","10:30","11:30","12:30","01:30","02:30","03:30","04:30","05:30","06:30"],tle=["08:00","11:00","02:00","05:00"],uE=["","","","",""],rle=[25,30,40,50,60,70,80,90,100],nle={Day1:"  ",Day2:"  ",Night1:"  ",Night2:"  "},cE=t=>t.toString().replace(/\d/g,e=>""[parseInt(e)]),ile=({user:t})=>{var xb,bb,wb,_b;As();const[e,r]=T.useState("LIST"),[n,i]=T.useState(1),[o,a]=T.useState(!1),[s,u]=T.useState(null),[c,d]=T.useState([]),[f,h]=T.useState(!1),[g,b]=T.useState(!1),[v,y]=T.useState(null),[x,_]=T.useState([]),[w,E]=T.useState(null),[S,N]=T.useState([]),[k,A]=T.useState({name:"A",type:"Day1",date:at(),shiftDuration:"12:00",supervisor:t.id,supervisorName:t.fullName}),[C,R]=T.useState({}),[$,L]=T.useState({}),[M,O]=T.useState({lineA:{},lineB:{}}),[P,D]=T.useState({lineA:{},lineB:{}}),[B,U]=T.useState({lineA:{primary:{active:!1,amp08:"",amp02:"",dens08:"",dens02:"",ballSize:"",barrelCount:"",charges:[]},secondary:{active:!1,amp08:"",amp02:"",dens08:"",dens02:"",ballSize:"",barrelCount:"",charges:[]}},lineB:{primary:{active:!1,amp08:"",amp02:"",dens08:"",dens02:"",ballSize:"",barrelCount:"",charges:[]},secondary:{active:!1,amp08:"",amp02:"",dens08:"",dens02:"",ballSize:"",barrelCount:"",charges:[]}}}),[W,K]=T.useState({lineA:{primary:{active:!1,activeCyclones:[],pressure08:"",angle08:"",pressure02:"",angle02:""},secondary:{active:!1,activeCyclones:[],pressure08:"",angle08:"",pressure02:"",angle02:""}},lineB:{primary:{active:!1,activeCyclones:[],pressure08:"",angle08:"",pressure02:"",angle02:""},secondary:{active:!1,activeCyclones:[],pressure08:"",angle08:"",pressure02:"",angle02:""}}}),[re,Y]=T.useState({lineA:{active:!1,single:!1,upper:!1,middle:!1,lower:!1,description:""},lineB:{active:!1,single:!1,upper:!1,middle:!1,lower:!1,description:""}}),[ye,I]=T.useState({lineA:{active:!1,operator:"",hours:"",cloths:[]},lineB:{active:!1,operator:"",hours:"",cloths:[]},reserve:{active:!1,operator:"",hours:"",cloths:[]}}),[Z,ce]=T.useState({lineA:[{active:!1,hoursWorked:"",channelOutput:"",description:"",data:{}},{active:!1,hoursWorked:"",channelOutput:"",description:"",data:{}},{active:!1,hoursWorked:"",channelOutput:"",description:"",data:{}}],lineB:[{active:!1,hoursWorked:"",channelOutput:"",description:"",data:{}},{active:!1,hoursWorked:"",channelOutput:"",description:"",data:{}},{active:!1,hoursWorked:"",channelOutput:"",description:"",data:{}}]}),[ve,Ie]=T.useState({lineA:[{active:!1,operator:"",hours:"",cloths:[]},{active:!1,operator:"",hours:"",cloths:[]}],lineB:[{active:!1,operator:"",hours:"",cloths:[]},{active:!1,operator:"",hours:"",cloths:[]}]}),[se,Ne]=T.useState({process:[],cleanWater:[]}),[J,X]=T.useState({lineA:{workTime:"",stopTime:"",reason:""},lineB:{workTime:"",stopTime:"",reason:""},generalDescription:[""]}),[ke,Se]=T.useState({nextShiftActions:[""]});T.useEffect(()=>{Fe("personnel").then(j=>{N(j),R({})}),fe(),ee()},[]);const ee=async()=>{const{data:j}=await Oe.from("app_users").select("avatar").eq("role","ADMIN").limit(1).single();j&&E(j.avatar)},fe=async()=>{const F=(await L5()).map(H=>({...H,total_production_a:Number(H.total_production_a),total_production_b:Number(H.total_production_b)}));_(F)},te=e==="VIEW"&&!g,Re=()=>{A({name:"A",type:"Day1",date:at(),shiftDuration:"12:00",supervisor:t.id,supervisorName:t.fullName}),R({}),L({}),O({lineA:{},lineB:{}}),D({lineA:{},lineB:{}}),U({lineA:{primary:{active:!1,amp08:"",amp02:"",dens08:"",dens02:"",ballSize:"",barrelCount:"",charges:[]},secondary:{active:!1,amp08:"",amp02:"",dens08:"",dens02:"",ballSize:"",barrelCount:"",charges:[]}},lineB:{primary:{active:!1,amp08:"",amp02:"",dens08:"",dens02:"",ballSize:"",barrelCount:"",charges:[]},secondary:{active:!1,amp08:"",amp02:"",dens08:"",dens02:"",ballSize:"",barrelCount:"",charges:[]}}}),K({lineA:{primary:{active:!1,activeCyclones:[],pressure08:"",angle08:"",pressure02:"",angle02:""},secondary:{active:!1,activeCyclones:[],pressure08:"",angle08:"",pressure02:"",angle02:""}},lineB:{primary:{active:!1,activeCyclones:[],pressure08:"",angle08:"",pressure02:"",angle02:""},secondary:{active:!1,activeCyclones:[],pressure08:"",angle08:"",pressure02:"",angle02:""}}}),Y({lineA:{active:!1,single:!1,upper:!1,middle:!1,lower:!1,description:""},lineB:{active:!1,single:!1,upper:!1,middle:!1,lower:!1,description:""}}),I({lineA:{active:!1,operator:"",hours:"",cloths:[]},lineB:{active:!1,operator:"",hours:"",cloths:[]},reserve:{active:!1,operator:"",hours:"",cloths:[]}}),ce({lineA:[{active:!1,hoursWorked:"",channelOutput:"",description:"",data:{}},{active:!1,hoursWorked:"",channelOutput:"",description:"",data:{}},{active:!1,hoursWorked:"",channelOutput:"",description:"",data:{}}],lineB:[{active:!1,hoursWorked:"",channelOutput:"",description:"",data:{}},{active:!1,hoursWorked:"",channelOutput:"",description:"",data:{}},{active:!1,hoursWorked:"",channelOutput:"",description:"",data:{}}]}),Ie({lineA:[{active:!1,operator:"",hours:"",cloths:[]},{active:!1,operator:"",hours:"",cloths:[]}],lineB:[{active:!1,operator:"",hours:"",cloths:[]},{active:!1,operator:"",hours:"",cloths:[]}]}),Ne({process:[],cleanWater:[]}),X({lineA:{workTime:"",stopTime:"",reason:""},lineB:{workTime:"",stopTime:"",reason:""},generalDescription:[""]}),Se({nextShiftActions:[""]}),i(1)},qe=()=>{Re(),b(!1),r("FORM")},ie=j=>{A(j.shiftInfo),R(j.attendance.map);const F={};j.attendance.leave.forEach(H=>F[H.id]=H.type),L(F),O(j.production),D(j.feedInfo),U(j.ballMills),K(j.hydrocyclones),Y(j.drumMagnets),I(j.concentrateFilters),ce(j.thickeners),Ie(j.recoveryFilters),Ne(j.pumps),X(j.downtime),Se(j.footer||{nextShiftActions:[""]})},_e=j=>{j.full_data&&(ie(j.full_data),y(j.full_data),b(!0),r("VIEW"))},q=j=>{j.full_data&&(ie(j.full_data),y(j.full_data),b(!1),r("VIEW"),i(1))},V=j=>{if(!j||j==="00:00")return 0;const[F,H]=j.split(":").map(Number);return F*60+H},de=j=>{const F=V(k.shiftDuration);return V(j)>F?(alert(`    (${j})      (${k.shiftDuration})  .`),!1):!0},z=(j,F)=>{const H=V(k.shiftDuration),Q=V(j)+V(F);return Q>H?(alert(`     (${me(Q)})     (${k.shiftDuration})  .`),!1):!0},me=j=>{const F=Math.floor(j/60),H=j%60;return`${String(F).padStart(2,"0")}:${String(H).padStart(2,"0")}`},ge=(j,F,H)=>{if(te)return;const Q=Number(H);if(Q<0)return;const ae=ln.indexOf(F);O(oe=>{const he={...oe[j]};if(ae!==-1)for(let Ce=ae;Ce<ln.length;Ce++)he[ln[Ce]]=Q;return{...oe,[j]:he}})},Te=(j,F,H)=>{D(Q=>{const ae={...Q[j]};for(let oe=F;oe<ln.length;oe++)ae[ln[oe]]=[...H];return{...Q,[j]:ae}})},De=(j,F,H,Q)=>{if(te)return;const ae=ln[F],he=[...P[j][ae]||[{type:"",percent:0},{type:"",percent:0},{type:"",percent:0}]];Q===""?he[H]={...he[H],type:"",isCustom:!0}:he[H]={...he[H],type:Q,isCustom:!1};for(let Ce=H+1;Ce<3;Ce++)he[Ce]={type:"",percent:0};Te(j,F,he)},Vt=(j,F,H,Q)=>{if(te)return;const ae=ln[F],he=[...P[j][ae]||[{type:"",percent:0},{type:"",percent:0},{type:"",percent:0}]];he[H]={...he[H],type:Q,isCustom:!0},Te(j,F,he)},Xt=(j,F,H)=>{if(te)return;const Q=ln[F],oe=[...P[j][Q]||[{type:"",percent:0},{type:"",percent:0},{type:"",percent:0}]];oe[H]={...oe[H],type:"",isCustom:!1,percent:0},Te(j,F,oe)},_r=(j,F,H,Q)=>{if(te)return;const ae=ln[F],he=[...P[j][ae]||[{type:"",percent:0},{type:"",percent:0},{type:"",percent:0}]];let Ce=Number(Q);Ce<0&&(Ce=0);const bc=he[H===0?1:0].percent||0;if(Ce+bc>100){alert("          .");return}he[H]={...he[H],percent:Ce},Te(j,F,he)},jt=j=>Object.values(M[j]).reduce((F,H)=>F+H,0),Cn=(j,F)=>{!j||te||(R(H=>({...H,[j]:F})),F==="LEAVE"&&L(H=>({...H,[j]:"DAILY"})))},An=j=>{if(te)return;const F={...C};if(delete F[j],R(F),$[j]){const H={...$};delete H[j],L(H)}},mt=(j,F,H)=>{if(!te)if(j==="downtime"){const Q=[...J.generalDescription];Q[F]=H,X({...J,generalDescription:Q})}else{const Q=[...ke.nextShiftActions];Q[F]=H,Se({...ke,nextShiftActions:Q})}},Xo=j=>{te||(j==="downtime"?X({...J,generalDescription:[...J.generalDescription,""]}):Se({...ke,nextShiftActions:[...ke.nextShiftActions,""]}))},xc=(j,F)=>{if(!te)if(j==="downtime"){const H=J.generalDescription.filter((Q,ae)=>ae!==F);X({...J,generalDescription:H.length?H:[""]})}else{const H=ke.nextShiftActions.filter((Q,ae)=>ae!==F);Se({...ke,nextShiftActions:H.length?H:[""]})}},Dr=(j,F)=>{if(te)return;const H=window.SpeechRecognition||window.webkitSpeechRecognition;if(!H){alert("  ");return}const Q=new H;Q.lang="fa-IR",Q.onstart=()=>u({section:j,index:F}),Q.onend=()=>u(null),Q.onresult=ae=>{const oe=ae.results[0][0].transcript,he=j==="downtime"?J.generalDescription[F]:ke.nextShiftActions[F];mt(j,F,he?he+" "+oe:oe)},Q.start()},jn=(j,F)=>{if(te)return;const H=window.SpeechRecognition||window.webkitSpeechRecognition;if(!H){alert("  ");return}const Q=new H;Q.lang="fa-IR",Q.onresult=ae=>{const oe=ae.results[0][0].transcript;j(F?F+" "+oe:oe)},Q.start()},Mp=(j,F)=>{if(te)return;const H=window.SpeechRecognition||window.webkitSpeechRecognition;if(!H){alert("  ");return}const Q=new H;Q.lang="fa-IR",Q.onresult=ae=>{const oe=ae.results[0][0].transcript;j(F?F+`
`+oe:oe)},Q.start()},on=(j,F,H,Q,ae)=>{te||Number(ae)<0||ce(oe=>{const he=[...oe[j]],Ce={...he[F]},Zo={...Ce.data[H]||{pressure:"",jack:"",mudLine:""}};return Zo[Q]=ae,Ce.data={...Ce.data,[H]:Zo},he[F]=Ce,{...oe,[j]:he}})},Js=(j,F,H)=>{te||ce(Q=>{const ae=[...Q[j]];return ae[F]={...ae[F],description:H},{...Q,[j]:ae}})},Ys=(j,F,H,Q)=>{te||typeof Q=="string"&&(H==="hoursWorked"||H==="channelOutput")&&!de(Q)||ce(ae=>{const oe=[...ae[j]];return oe[F]={...oe[F],[H]:Q},{...ae,[j]:oe}})},_O=(j,F)=>{if(te)return;const H=B[j][F],Q=Number(H.ballSize),ae=Number(H.barrelCount);if(!Q||!ae||ae<1){alert("      ( )   .");return}if(H.charges.some(he=>he.size===Q)){alert("      .");return}const oe=[...H.charges,{size:Q,count:ae}];U(he=>({...he,[j]:{...he[j],[F]:{...he[j][F],charges:oe,ballSize:"",barrelCount:""}}}))},SO=(j,F,H)=>{if(te)return;const ae=B[j][F].charges.filter((oe,he)=>he!==H);U(oe=>({...oe,[j]:{...oe[j],[F]:{...oe[j][F],charges:ae}}}))},NO=j=>{const F=ns(j);return F?["","","","","","",""][F.getDay()]:""},gb=(j,F,H)=>{if(te)return;const Q=F==="workTime"?"stopTime":"workTime",ae=J[j][Q];z(F==="workTime"?H:ae,F==="stopTime"?H:ae)&&X(oe=>({...oe,[j]:{...oe[j],[F]:H}}))},yb=()=>!(!k.date||!k.name||!k.type||!k.shiftDuration),EO=async()=>{h(!1),a(!0);const j=jA("T"),F=Object.keys(C).filter(oe=>C[oe]==="PRESENT"),H=Object.keys(C).filter(oe=>C[oe]==="ABSENT"),Q=Object.keys(C).filter(oe=>C[oe]==="LEAVE"),ae={code:j,shiftInfo:k,attendance:{present:F,absent:H,leave:Q.map(oe=>({id:oe,type:$[oe]})),map:C},production:M,feedInfo:P,ballMills:B,concentrateFilters:ye,hydrocyclones:W,thickeners:Z,drumMagnets:re,recoveryFilters:ve,pumps:se,downtime:J,footer:ke,totalA:jt("lineA"),totalB:jt("lineB")};try{await U5(ae),alert("    ."),y(ae),b(!0),r("VIEW"),i(1),fe()}catch{alert("   .    .")}finally{a(!1)}},kO=j=>{j.preventDefault(),h(!0)},TO=async()=>{if(c.length!==0&&window.confirm(`   ${c.length}   `))try{const{error:j}=await Oe.from("shift_reports").delete().in("id",c);if(j)throw j;_(F=>F.filter(H=>!c.includes(H.id))),d([])}catch{alert("   .")}},CO=()=>{if(x.length===0){alert("  .");return}const j=["Tracking Code","Date","Shift","Type","Supervisor","Production A","Production B"],F=x.map(oe=>[oe.tracking_code,oe.shift_date,oe.shift_name,oe.shift_type,oe.supervisor_name,oe.total_production_a,oe.total_production_b]);let H="\uFEFF"+j.join(",")+`
`+F.map(oe=>oe.join(",")).join(`
`);const Q=new Blob([H],{type:"text/csv;charset=utf-8;"}),ae=document.createElement("a");ae.setAttribute("href",URL.createObjectURL(Q)),ae.setAttribute("download","shift_reports.csv"),document.body.appendChild(ae),ae.click(),document.body.removeChild(ae)},AO=l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:fe,className:"bg-gray-100 hover:bg-gray-200 text-gray-600 p-2 rounded-lg transition",title:"",children:l.jsx(EA,{className:"w-5 h-5"})}),c.length>0&&l.jsxs("button",{onClick:TO,className:"bg-red-50 text-red-600 hover:bg-red-100 px-3 py-2 rounded-lg flex items-center gap-2 text-sm transition",children:[l.jsx(Et,{className:"w-4 h-4"}),"  (",c.length,")"]}),l.jsxs("button",{onClick:CO,className:"bg-green-50 text-green-700 border border-green-200 px-3 py-2 rounded-lg flex items-center gap-2 text-sm hover:bg-green-100 transition",children:[l.jsx(qv,{className:"w-4 h-4"}),"  "]})]}),vb=({value:j,onChange:F})=>l.jsxs("select",{value:j,onChange:H=>F(H.target.value),disabled:te,className:`w-full p-2 border rounded-lg bg-white dark:bg-gray-700 text-sm ${te?"cursor-not-allowed bg-gray-100 dark:bg-gray-600":""}`,children:[l.jsx("option",{value:"",children:" ..."}),S.filter(H=>C[H.id]==="PRESENT").map(H=>l.jsx("option",{value:H.id,children:H.full_name},H.id))]}),$p=()=>S.filter(j=>!C[j.id]),Dp=j=>S.filter(F=>C[F.id]===j),Qo=({active:j,onClick:F})=>l.jsx("button",{type:"button",disabled:te,onClick:F,className:`p-2 rounded-full transition-all shadow-md ${j?"bg-cyan-500 text-white hover:bg-cyan-600":"bg-gray-200 text-gray-400 hover:bg-gray-300 dark:bg-gray-700"} ${te?"opacity-70 cursor-not-allowed":""}`,title:j?"":"",children:l.jsx(MD,{className:"w-5 h-5"})}),jO=()=>{window.print()},PO=()=>{navigator.share?navigator.share({title:`  ${v.shiftInfo.date}`,text:`   ${v.shiftInfo.name}  ${v.shiftInfo.date}`,url:window.location.href}).catch(console.error):alert("     .     .")},IO=[{id:1,label:" ",icon:Is},{id:2,label:"",icon:yD},{id:3,label:"",icon:mA},{id:4,label:"",icon:mD},{id:5,label:" ",icon:CD},{id:6,label:" ",icon:SD},{id:7,label:"",icon:pD},{id:8,label:" ",icon:DD},{id:9,label:"  ",icon:BD}];if(g&&v){const j=F=>{var H;return((H=S.find(Q=>Q.id===F))==null?void 0:H.full_name)||""};return(xb=v.production)!=null&&xb.lineA&&Object.values(v.production.lineA).some(F=>Number(F)>0),(bb=v.production)!=null&&bb.lineB&&Object.values(v.production.lineB).some(F=>Number(F)>0),l.jsxs("div",{className:"bg-gray-100 min-h-screen p-4 flex justify-center text-black",children:[l.jsx("style",{children:`
                  @media print {
                      @page { size: A4; margin: 0; }
                      body { background: white; -webkit-print-color-adjust: exact; }
                      .no-print { display: none !important; }
                      .print-container { width: 210mm; min-height: 297mm; padding: 10mm; margin: 0; box-shadow: none; overflow: hidden; }
                      .page-break { page-break-after: always; }
                      aside, header, footer { display: none !important; }
                  }
                  .print-table th, .print-table td { border: 1px solid #ccc; padding: 4px; font-size: 10px; text-align: center; }
                  .print-header { background-color: #f3f4f6; font-weight: bold; }
              `}),l.jsxs("div",{className:"print-container bg-white shadow-2xl relative text-sm font-sans box-border w-[210mm] mx-auto",children:[l.jsxs("div",{className:"page-break flex flex-col h-[297mm] p-[10mm]",children:[l.jsxs("div",{className:"flex justify-between items-center border-b-4 border-[#800020] pb-4 mb-4",children:[l.jsx("div",{className:"w-16",children:l.jsx(Xv,{})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-xl font-black text-[#800020]",children:"     "}),l.jsxs("h2",{className:"text-sm font-bold mt-1",children:["   ( ",v.shiftInfo.name,")"]})]}),l.jsxs("div",{className:"text-xs text-left",children:[l.jsxs("div",{children:[": ",l.jsx("span",{className:"font-bold",children:v.shiftInfo.date})]}),l.jsxs("div",{children:[": ",l.jsx("span",{className:"font-mono",children:v.code})]}),l.jsxs("div",{children:[": ",v.shiftInfo.supervisorName]})]})]}),l.jsxs("div",{className:"mb-4 border rounded p-2",children:[l.jsx("h3",{className:"font-bold text-xs bg-gray-100 p-1 mb-1",children:" "}),l.jsxs("div",{className:"flex text-xs gap-4",children:[l.jsxs("div",{className:"flex-1",children:[" (",v.attendance.present.length,"): ",v.attendance.present.map(F=>j(F)).join(" ")]}),l.jsxs("div",{className:"flex-1 text-red-600",children:[" (",v.attendance.absent.length,"): ",v.attendance.absent.map(F=>j(F)).join(" ")]}),l.jsxs("div",{className:"flex-1 text-yellow-600",children:[" (",v.attendance.leave.length,"): ",v.attendance.leave.map(F=>`${j(F.id)} (${F.type==="DAILY"?"":""})`).join(" ")]})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"font-bold text-xs mb-1",children:"   "}),l.jsxs("table",{className:"w-full print-table border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"print-header",children:[l.jsx("th",{children:""}),l.jsx("th",{children:" A"}),l.jsx("th",{children:" B"}),l.jsx("th",{children:" A"}),l.jsx("th",{children:" B"})]})}),l.jsxs("tbody",{children:[ln.map(F=>l.jsxs("tr",{children:[l.jsx("td",{className:"font-bold",children:F}),l.jsx("td",{children:v.production.lineA[F]||"-"}),l.jsx("td",{children:v.production.lineB[F]||"-"}),l.jsx("td",{children:"-"}),l.jsx("td",{children:"-"})]},F)),l.jsxs("tr",{className:"print-header font-bold",children:[l.jsx("td",{children:""}),l.jsx("td",{children:v.totalA}),l.jsx("td",{children:v.totalB}),l.jsx("td",{children:"-"}),l.jsx("td",{children:"-"})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{className:"border rounded p-2",children:[l.jsx("h3",{className:"font-bold text-xs text-center border-b mb-2",children:""}),l.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[l.jsx("span",{children:" A:"}),l.jsxs("span",{children:["P1: ",v.ballMills.lineA.primary.amp08,"A / P2: ",v.ballMills.lineA.secondary.amp08,"A"]})]}),l.jsxs("div",{className:"flex justify-between text-xs",children:[l.jsx("span",{children:" B:"}),l.jsxs("span",{children:["P1: ",v.ballMills.lineB.primary.amp08,"A / P2: ",v.ballMills.lineB.secondary.amp08,"A"]})]})]}),l.jsxs("div",{className:"border rounded p-2",children:[l.jsx("h3",{className:"font-bold text-xs text-center border-b mb-2",children:" ( 08:00)"}),l.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[l.jsx("span",{children:" A:"}),l.jsxs("span",{children:["P1: ",v.hydrocyclones.lineA.primary.pressure08,"Bar / P2: ",v.hydrocyclones.lineA.secondary.pressure08,"Bar"]})]}),l.jsxs("div",{className:"flex justify-between text-xs",children:[l.jsx("span",{children:" B:"}),l.jsxs("span",{children:["P1: ",v.hydrocyclones.lineB.primary.pressure08,"Bar / P2: ",v.hydrocyclones.lineB.secondary.pressure08,"Bar"]})]})]})]})]}),l.jsxs("div",{className:"flex flex-col h-[297mm] p-[10mm]",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"font-bold text-xs mb-1",children:"   "}),l.jsxs("table",{className:"w-full print-table border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"print-header",children:[l.jsx("th",{children:""}),l.jsx("th",{children:""}),l.jsx("th",{children:""}),l.jsx("th",{children:""})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:" A"}),l.jsx("td",{children:v.thickeners.lineA[0].active?"":""}),l.jsx("td",{children:v.thickeners.lineA[0].hoursWorked||"-"}),l.jsx("td",{children:v.thickeners.lineA[0].description})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"  A"}),l.jsx("td",{children:v.concentrateFilters.lineA.active?"":""}),l.jsx("td",{children:v.concentrateFilters.lineA.hours||"-"}),l.jsxs("td",{children:[": ",j(v.concentrateFilters.lineA.operator)]})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"  1 A"}),l.jsx("td",{children:v.recoveryFilters.lineA[0].active?"":""}),l.jsx("td",{children:v.recoveryFilters.lineA[0].hours||"-"}),l.jsx("td",{children:"-"})]})]})]})]}),l.jsxs("div",{className:"mb-4 border rounded p-2 flex-1",children:[l.jsx("h3",{className:"font-bold text-xs bg-gray-100 p-1 mb-2",children:"  "}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-2 text-xs",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-bold",children:" A:"})," : ",v.downtime.lineA.workTime," / : ",v.downtime.lineA.stopTime,l.jsx("div",{className:"mt-1 text-gray-600 pl-2 border-l-2",children:v.downtime.lineA.reason})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-bold",children:" B:"})," : ",v.downtime.lineB.workTime," / : ",v.downtime.lineB.stopTime,l.jsx("div",{className:"mt-1 text-gray-600 pl-2 border-l-2",children:v.downtime.lineB.reason})]})]}),l.jsx("h4",{className:"font-bold text-xs mt-4 mb-1",children:"  :"}),l.jsx("ul",{className:"list-decimal list-inside text-xs space-y-1",children:(wb=v.downtime.generalDescription)==null?void 0:wb.map((F,H)=>l.jsx("li",{children:F},H))}),l.jsx("h4",{className:"font-bold text-xs mt-4 mb-1",children:"  :"}),l.jsx("ul",{className:"list-decimal list-inside text-xs space-y-1",children:(_b=v.footer.nextShiftActions)==null?void 0:_b.map((F,H)=>l.jsx("li",{children:F},H))})]}),l.jsxs("div",{className:"mt-auto grid grid-cols-3 gap-8 text-center text-xs pt-8 border-t",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold mb-8",children:" "}),l.jsx("p",{children:v.shiftInfo.supervisorName})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold mb-8",children:" "}),l.jsx("p",{children:"_________________"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold mb-8",children:" "}),l.jsx("p",{children:"_________________"})]})]})]}),l.jsxs("div",{className:"no-print fixed bottom-0 left-0 right-0 p-4 bg-white border-t flex justify-center gap-4 shadow-lg z-50",children:[l.jsxs("button",{onClick:()=>{b(!1),r("LIST")},className:"bg-gray-100 text-gray-800 px-6 py-3 rounded-xl flex items-center gap-2 hover:bg-gray-200 font-bold transition",children:[l.jsx(Rl,{className:"w-5 h-5"})," "]}),l.jsxs("button",{onClick:PO,className:"bg-green-600 text-white px-8 py-3 rounded-xl flex items-center gap-2 hover:bg-green-700 shadow-xl font-bold",children:[l.jsx(Hv,{className:"w-5 h-5"}),"  "]}),l.jsxs("button",{onClick:jO,className:"bg-blue-600 text-white px-8 py-3 rounded-xl flex items-center gap-2 hover:bg-blue-700 shadow-xl font-bold",children:[l.jsx(NA,{className:"w-5 h-5"}),"  PDF"]})]})]})]})}return e==="LIST"?l.jsx("div",{className:"max-w-7xl mx-auto pb-20",children:l.jsx(gi,{title:" ",icon:Wg,data:x,onAdd:qe,columns:[{header:" ",accessor:j=>l.jsx("span",{className:"font-mono font-bold",children:j.tracking_code})},{header:"",accessor:j=>j.shift_date},{header:"",accessor:j=>j.shift_name},{header:" ",accessor:j=>nle[j.shift_type]||j.shift_type},{header:"",accessor:j=>j.supervisor_name||"---"},{header:"  A",accessor:j=>l.jsx("span",{className:"text-blue-600 font-bold bg-blue-50 px-2 py-1 rounded",children:j.total_production_a})},{header:"  B",accessor:j=>l.jsx("span",{className:"text-red-600 font-bold bg-red-50 px-2 py-1 rounded",children:j.total_production_b})}],onViewDetails:_e,onEdit:q,extraActions:AO,selectedIds:c,onSelect:d})}):l.jsxs("div",{className:"max-w-7xl mx-auto pb-24",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-gray-50 dark:bg-gray-900 z-20 py-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Wg,{className:"w-8 h-8 text-primary"}),l.jsx("div",{children:l.jsx("h1",{className:"text-2xl font-bold",children:te?`  ${k.date}`:"   "})})]}),l.jsx("div",{className:"flex gap-2",children:l.jsx("button",{onClick:()=>r("LIST"),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full",children:l.jsx(ht,{className:"w-6 h-6"})})})]}),l.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm mb-6 sticky top-16 z-10 border border-gray-200 dark:border-gray-700 overflow-x-auto",children:l.jsx("div",{className:"flex min-w-max",children:IO.map(j=>l.jsxs("button",{onClick:()=>i(j.id),className:`flex-1 py-4 px-6 flex items-center justify-center gap-2 text-sm font-bold transition-all border-b-4 
                        ${n===j.id?"border-primary text-primary bg-primary/5":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[l.jsx(j.icon,{className:"w-5 h-5"})," ",j.label]},j.id))})}),l.jsxs("form",{onSubmit:kO,className:"space-y-6",children:[n===1&&l.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[l.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold mb-1",children:""}),l.jsx("select",{value:k.name,onChange:j=>A({...k,name:j.target.value}),disabled:te,className:"w-full p-2.5 border rounded-xl dark:bg-gray-700 outline-none text-sm",children:["A","B","C"].map(j=>l.jsxs("option",{value:j,children:[" ",j]},j))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold mb-1",children:" "}),l.jsxs("select",{value:k.type,onChange:j=>A({...k,type:j.target.value}),disabled:te,className:"w-full p-2.5 border rounded-xl dark:bg-gray-700 outline-none text-sm",children:[l.jsx("option",{value:"Day1",children:"  "}),l.jsx("option",{value:"Day2",children:"  "}),l.jsx("option",{value:"Night1",children:"  "}),l.jsx("option",{value:"Night2",children:"  "})]})]}),l.jsx("div",{children:l.jsx("div",{className:"w-full",children:l.jsx(qr,{label:" ",value:k.shiftDuration,onChange:j=>A({...k,shiftDuration:j})})})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold mb-1",children:" "}),l.jsx("div",{className:"w-full p-2.5 border rounded-xl bg-gray-100 dark:bg-gray-600 text-center text-sm",children:NO(k.date)})]}),l.jsx("div",{children:l.jsx("div",{className:"w-full",children:l.jsx(Mn,{label:"",value:k.date,onChange:j=>!te&&A({...k,date:j})})})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-bold mb-1",children:" "}),l.jsx("div",{className:"w-full p-2.5 border rounded-xl bg-gray-100 dark:bg-gray-600 truncate text-sm",children:k.supervisorName})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/10 p-4 rounded-xl border border-green-100 dark:border-green-800",children:[l.jsxs("h4",{className:"font-bold text-green-700 mb-3 flex items-center gap-2",children:[l.jsx(Za,{className:"w-4 h-4"})," "]}),!te&&l.jsxs("select",{className:"w-full p-2 mb-2 text-sm border rounded outline-none",onChange:j=>{Cn(j.target.value,"PRESENT"),j.target.value=""},children:[l.jsx("option",{value:"",children:"+ ..."}),$p().map(j=>l.jsx("option",{value:j.id,children:j.full_name},j.id))]}),l.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:Dp("PRESENT").map(j=>l.jsxs("div",{className:"flex justify-between items-center bg-white p-2 rounded shadow-sm text-sm",children:[l.jsx("span",{children:j.full_name}),!te&&l.jsx("button",{onClick:()=>An(j.id),className:"text-red-500 hover:bg-red-50 rounded p-1",children:l.jsx(Et,{className:"w-4 h-4"})})]},j.id))})]}),l.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/10 p-4 rounded-xl border border-yellow-100 dark:border-yellow-800",children:[l.jsxs("h4",{className:"font-bold text-yellow-700 mb-3 flex items-center gap-2",children:[l.jsx(Ps,{className:"w-4 h-4"})," "]}),!te&&l.jsxs("select",{className:"w-full p-2 mb-2 text-sm border rounded outline-none",onChange:j=>{Cn(j.target.value,"LEAVE"),j.target.value=""},children:[l.jsx("option",{value:"",children:"+ ..."}),$p().map(j=>l.jsx("option",{value:j.id,children:j.full_name},j.id))]}),l.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:Dp("LEAVE").map(j=>l.jsxs("div",{className:"flex justify-between items-center bg-white p-2 rounded shadow-sm text-sm",children:[l.jsx("span",{className:"truncate w-24",children:j.full_name}),l.jsxs("div",{className:"flex gap-1",children:[l.jsxs("select",{value:$[j.id],onChange:F=>L({...$,[j.id]:F.target.value}),disabled:te,className:"text-xs p-1 border rounded",children:[l.jsx("option",{value:"DAILY",children:""}),l.jsx("option",{value:"HOURLY",children:""})]}),!te&&l.jsx("button",{onClick:()=>An(j.id),className:"text-red-500 hover:bg-red-50 rounded p-1",children:l.jsx(Et,{className:"w-4 h-4"})})]})]},j.id))})]}),l.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 p-4 rounded-xl border border-red-100 dark:border-red-800",children:[l.jsxs("h4",{className:"font-bold text-red-700 mb-3 flex items-center gap-2",children:[l.jsx(HD,{className:"w-4 h-4"})," "]}),!te&&l.jsxs("select",{className:"w-full p-2 mb-2 text-sm border rounded outline-none",onChange:j=>{Cn(j.target.value,"ABSENT"),j.target.value=""},children:[l.jsx("option",{value:"",children:"+ ..."}),$p().map(j=>l.jsx("option",{value:j.id,children:j.full_name},j.id))]}),l.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:Dp("ABSENT").map(j=>l.jsxs("div",{className:"flex justify-between items-center bg-white p-2 rounded shadow-sm text-sm",children:[l.jsx("span",{children:j.full_name}),!te&&l.jsx("button",{onClick:()=>An(j.id),className:"text-red-500 hover:bg-red-50 rounded p-1",children:l.jsx(Et,{className:"w-4 h-4"})})]},j.id))})]})]})]}),n===2&&l.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm",children:["lineA","lineB"].map(j=>l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:`font-bold mb-4 ${j==="lineA"?"text-blue-600":"text-red-600"}`,children:[" ",j==="lineA"?"A":"B"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-center text-xs",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-gray-100 dark:bg-gray-700",children:[l.jsx("th",{className:"p-2",children:""}),l.jsx("th",{className:"p-2",children:" "}),l.jsx("th",{className:"p-2",children:"  1"}),l.jsx("th",{className:"p-2",children:""}),l.jsx("th",{className:"p-2",children:"  2"}),l.jsx("th",{className:"p-2",children:""})]})}),l.jsx("tbody",{children:ln.map((F,H)=>{var Ce,Zo,bc,Sb,Nb;const Q=P[j][F]||[{type:"",percent:0},{type:"",percent:0}],ae=(((Ce=Q[0])==null?void 0:Ce.percent)||0)+(((Zo=Q[1])==null?void 0:Zo.percent)||0),oe=ae===100||ae===0,he=((bc=Q[0])==null?void 0:bc.percent)===100;return l.jsxs("tr",{className:`border-b dark:border-gray-700 ${oe?"":"bg-red-50 dark:bg-red-900/10"}`,children:[l.jsx("td",{className:"p-2 font-bold",children:F}),l.jsx("td",{className:"p-1",children:l.jsx("input",{type:"number",className:"w-24 p-1 text-center border rounded font-bold",value:M[j][F]||"",onChange:ut=>ge(j,F,ut.target.value),disabled:te})}),l.jsx("td",{className:"p-1",children:(Sb=Q[0])!=null&&Sb.isCustom?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"text",className:"w-24 p-1 border rounded text-xs",value:Q[0].type,onChange:ut=>Vt(j,H,0,ut.target.value),disabled:te,placeholder:" ...",autoFocus:!0}),l.jsx("button",{type:"button",onClick:()=>Xt(j,H,0),className:"text-red-500 hover:text-red-700",children:l.jsx(ht,{className:"w-3 h-3"})})]}):l.jsxs("select",{className:"w-24 p-1 border rounded",value:Q[0].type,onChange:ut=>De(j,H,0,ut.target.value),disabled:te,children:[l.jsx("option",{value:"",children:"-"}),uE.map(ut=>l.jsx("option",{value:ut,children:ut},ut))]})}),l.jsx("td",{className:"p-1",children:l.jsx("input",{type:"number",className:"w-12 p-1 text-center border rounded",value:Q[0].percent||"",onChange:ut=>_r(j,H,0,ut.target.value),disabled:te})}),l.jsx("td",{className:"p-1",children:(Nb=Q[1])!=null&&Nb.isCustom?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"text",className:"w-24 p-1 border rounded text-xs",value:Q[1].type,onChange:ut=>Vt(j,H,1,ut.target.value),disabled:te||he,placeholder:" ...",autoFocus:!0}),l.jsx("button",{type:"button",onClick:()=>Xt(j,H,1),className:"text-red-500 hover:text-red-700",children:l.jsx(ht,{className:"w-3 h-3"})})]}):l.jsxs("select",{className:"w-24 p-1 border rounded disabled:bg-gray-100",value:Q[1].type,onChange:ut=>De(j,H,1,ut.target.value),disabled:te||!Q[0].type||he,children:[l.jsx("option",{value:"",children:"-"}),uE.filter(ut=>ut!==Q[0].type).map(ut=>l.jsx("option",{value:ut,children:ut},ut))]})}),l.jsxs("td",{className:"p-1 relative",children:[l.jsx("input",{type:"number",className:"w-12 p-1 text-center border rounded disabled:bg-gray-100",value:Q[1].percent||"",onChange:ut=>_r(j,H,1,ut.target.value),disabled:te||!Q[0].type||he}),!oe&&(Q[0].percent||Q[1].percent)&&l.jsx("span",{className:"absolute right-full mr-1 top-2 text-red-500 text-[10px] w-max font-bold animate-pulse",children:"!= 100%"})]})]},F)})}),l.jsx("tfoot",{children:l.jsxs("tr",{className:`font-bold bg-gray-50 dark:bg-gray-700/50 ${j==="lineA"?"text-blue-600":"text-red-600"}`,children:[l.jsx("td",{className:"p-2",children:""}),l.jsxs("td",{className:"p-2 text-center text-sm",children:[Object.values(M[j]).reduce((F,H)=>F+(Number(H)||0),0)," "]}),l.jsx("td",{colSpan:4})]})})]})})]},j))}),n===3&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["lineA","lineB"].map(j=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h3",{className:`font-bold text-center ${j==="lineA"?"text-blue-600":"text-red-600"}`,children:["  ",j==="lineA"?"A":"B"]}),["primary","secondary"].map(F=>{const H=B[j][F],Q=F==="primary"?"  1":"  2",ae=rle.filter(oe=>!H.charges.some(he=>he.size===oe));return l.jsxs("div",{className:"border rounded-xl p-4 bg-white dark:bg-gray-800",children:[l.jsxs("div",{className:"flex justify-between mb-3",children:[l.jsx("h4",{className:"font-bold text-sm",children:Q}),l.jsx(Qo,{active:H.active,onClick:()=>U(oe=>({...oe,[j]:{...oe[j],[F]:{...oe[j][F],active:!H.active}}}))})]}),H.active&&l.jsxs("div",{className:"space-y-3 animate-fadeIn",children:[l.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[l.jsx("div",{className:"text-xs font-bold text-gray-500 text-center border-b pb-1 mb-2",children:" 08:00"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",min:"0",placeholder:"",className:`w-full p-2 pr-8 border rounded ${Number(H.amp08)>970?"text-red-600 font-bold":""}`,value:H.amp08,onChange:oe=>{const he=oe.target.value;U(Ce=>({...Ce,[j]:{...Ce[j],[F]:{...Ce[j][F],amp08:he}}}))},disabled:te}),l.jsx("span",{className:"absolute left-2 top-2 text-gray-400 font-sans",children:"A"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",min:"0",placeholder:"",className:"w-full p-2 pr-8 border rounded",value:H.dens08,onChange:oe=>{const he=oe.target.value;U(Ce=>({...Ce,[j]:{...Ce[j],[F]:{...Ce[j][F],dens08:he}}}))},disabled:te}),l.jsx("span",{className:"absolute left-2 top-2.5 text-[9px] text-gray-400 font-sans",children:"Gr/Lit"})]})]})]}),l.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[l.jsx("div",{className:"text-xs font-bold text-gray-500 text-center border-b pb-1 mb-2",children:" 02:00"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",min:"0",placeholder:"",className:`w-full p-2 pr-8 border rounded ${Number(H.amp02)>970?"text-red-600 font-bold":""}`,value:H.amp02,onChange:oe=>{const he=oe.target.value;U(Ce=>({...Ce,[j]:{...Ce[j],[F]:{...Ce[j][F],amp02:he}}}))},disabled:te}),l.jsx("span",{className:"absolute left-2 top-2 text-gray-400 font-sans",children:"A"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",min:"0",placeholder:"",className:"w-full p-2 pr-8 border rounded",value:H.dens02,onChange:oe=>{const he=oe.target.value;U(Ce=>({...Ce,[j]:{...Ce[j],[F]:{...Ce[j][F],dens02:he}}}))},disabled:te}),l.jsx("span",{className:"absolute left-2 top-2.5 text-[9px] text-gray-400 font-sans",children:"Gr/Lit"})]})]})]}),l.jsxs("div",{className:"bg-gray-50 p-2 rounded text-xs mt-2",children:[l.jsx("label",{className:"block mb-1 font-bold text-gray-500",children:" "}),l.jsxs("div",{className:"flex gap-1 mb-2",children:[l.jsxs("select",{className:"flex-1 p-1 border rounded",value:H.ballSize,onChange:oe=>{const he=oe.target.value;U(Ce=>({...Ce,[j]:{...Ce[j],[F]:{...Ce[j][F],ballSize:he}}}))},disabled:te,children:[l.jsx("option",{value:"",children:""}),ae.map(oe=>l.jsx("option",{value:oe,children:oe},oe))]}),l.jsx("input",{type:"number",min:"1",className:"w-16 p-1 border rounded text-center",placeholder:"",value:H.barrelCount,onChange:oe=>{const he=oe.target.value;U(Ce=>({...Ce,[j]:{...Ce[j],[F]:{...Ce[j][F],barrelCount:he}}}))},disabled:te}),l.jsx("button",{type:"button",onClick:()=>_O(j,F),className:"bg-green-500 text-white p-1 rounded",disabled:te,children:l.jsx(or,{className:"w-4 h-4"})})]}),H.charges.map((oe,he)=>l.jsxs("div",{className:"flex justify-between bg-white px-2 py-1 rounded mb-1 border border-gray-100 shadow-sm",children:[l.jsxs("span",{children:[" ",oe.size,": ",oe.count," "]}),!te&&l.jsx("button",{onClick:()=>SO(j,F,he),className:"text-red-500 hover:bg-red-50 rounded",children:l.jsx(Et,{className:"w-3 h-3"})})]},he))]})]})]},F)})]},j))}),n===4&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["lineA","lineB"].map(j=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h3",{className:`font-bold text-center mb-4 ${j==="lineA"?"text-blue-600":"text-red-600"}`,children:["  ",j==="lineA"?"A":"B"]}),["primary","secondary"].map(F=>{const H=W[j][F],Q=F==="primary"?"  1":"  2";return l.jsxs("div",{className:"border rounded-xl p-4 bg-white dark:bg-gray-800",children:[l.jsxs("div",{className:"flex justify-between mb-3",children:[l.jsx("h4",{className:"font-bold text-sm",children:Q}),l.jsx(Qo,{active:H.active,onClick:()=>K(ae=>({...ae,[j]:{...ae[j],[F]:{...ae[j][F],active:!H.active}}}))})]}),H.active&&l.jsxs("div",{className:"space-y-3 animate-fadeIn",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs items-center bg-gray-50 p-2 rounded",children:[l.jsx("span",{className:"font-bold text-gray-500 col-span-2 text-center border-b pb-1 mb-1",children:" 08:00"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",min:"0",placeholder:"",className:"w-full p-2 pr-8 border rounded text-center",value:H.pressure08,onChange:ae=>{const oe=ae.target.value;K(he=>({...he,[j]:{...he[j],[F]:{...he[j][F],pressure08:oe}}}))},disabled:te}),l.jsx("span",{className:"absolute left-2 top-2 text-[9px] text-gray-400 font-sans",children:"Bar"})]}),l.jsx("input",{type:"number",placeholder:" ",className:"w-full p-2 border rounded text-center",value:H.angle08,onChange:ae=>{const oe=ae.target.value;K(he=>({...he,[j]:{...he[j],[F]:{...he[j][F],angle08:oe}}}))},disabled:te})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs items-center bg-gray-50 p-2 rounded",children:[l.jsx("span",{className:"font-bold text-gray-500 col-span-2 text-center border-b pb-1 mb-1",children:" 02:00"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",min:"0",placeholder:"",className:"w-full p-2 pr-8 border rounded text-center",value:H.pressure02,onChange:ae=>{const oe=ae.target.value;K(he=>({...he,[j]:{...he[j],[F]:{...he[j][F],pressure02:oe}}}))},disabled:te}),l.jsx("span",{className:"absolute left-2 top-2 text-[9px] text-gray-400 font-sans",children:"Bar"})]}),l.jsx("input",{type:"number",placeholder:" ",className:"w-full p-2 border rounded text-center",value:H.angle02,onChange:ae=>{const oe=ae.target.value;K(he=>({...he,[j]:{...he[j],[F]:{...he[j][F],angle02:oe}}}))},disabled:te})]}),l.jsxs("div",{className:"pt-2",children:[l.jsx("p",{className:"text-xs font-bold text-gray-500 mb-2 text-center",children:" "}),l.jsx("div",{className:"grid grid-cols-6 md:grid-cols-12 gap-1 justify-items-center",children:Array.from({length:12},(ae,oe)=>oe+1).map(ae=>l.jsx("button",{type:"button",disabled:te,onClick:()=>{const he=H.activeCyclones.includes(ae)?H.activeCyclones.filter(Ce=>Ce!==ae):[...H.activeCyclones,ae];K(Ce=>({...Ce,[j]:{...Ce[j],[F]:{...Ce[j][F],activeCyclones:he}}}))},className:`w-7 h-7 rounded-full border text-[10px] font-bold transition-all ${H.activeCyclones.includes(ae)?"bg-cyan-500 text-white shadow-md transform scale-110 border-cyan-600":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:ae},ae))})]})]})]},F)})]},j))}),n===5&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["lineA","lineB"].map(j=>{const F=re[j],H={single:" ",upper:"  ",middle:"  ",lower:"  "};return l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[l.jsxs("div",{className:"flex justify-between mb-4",children:[l.jsxs("h3",{className:`font-bold text-center ${j==="lineA"?"text-blue-600":"text-red-600"}`,children:["    ",j==="lineA"?"A":"B"]}),l.jsx(Qo,{active:F.active,onClick:()=>Y(Q=>({...Q,[j]:{...Q[j],active:!F.active}}))})]}),F.active&&l.jsxs("div",{className:"animate-fadeIn",children:[l.jsx("div",{className:"grid grid-cols-1 gap-3 mb-4",children:["single","upper","middle","lower"].map(Q=>l.jsx("button",{type:"button",disabled:te,onClick:()=>Y(ae=>({...ae,[j]:{...ae[j],[Q]:!ae[j][Q]}})),className:`p-3 rounded-lg border text-sm font-bold transition-all ${re[j][Q]?"bg-cyan-500 text-white border-cyan-600 shadow-md":"bg-gray-50 text-gray-600 hover:bg-gray-100"}`,children:H[Q]},Q))}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{className:"w-full p-3 border rounded-xl bg-gray-50 dark:bg-gray-700 outline-none focus:ring-2 focus:ring-primary",placeholder:"...",rows:3,value:re[j].description,onChange:Q=>{const ae=Q.target.value;Y(oe=>({...oe,[j]:{...oe[j],description:ae}}))},disabled:te}),!te&&l.jsx(Hr,{className:"absolute bottom-3 left-3 w-5 h-5 text-gray-400 cursor-pointer hover:text-primary",onClick:()=>jn(Q=>Y(ae=>({...ae,[j]:{...ae[j],description:Q}})),re[j].description)})]})]})]},j)})}),n===6&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:["lineA","lineB","reserve"].map(j=>{const F=ye[j],H=j==="lineA"?"   A":j==="lineB"?"   B":"  ";return l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("h4",{className:"font-bold text-sm",children:H}),l.jsx(Qo,{active:F.active,onClick:()=>I(Q=>({...Q,[j]:{...Q[j],active:!F.active}}))})]}),F.active&&l.jsxs("div",{className:"animate-fadeIn space-y-3",children:[l.jsx(vb,{value:F.operator,onChange:Q=>I(ae=>({...ae,[j]:{...ae[j],operator:Q}}))}),l.jsx("div",{children:l.jsx(qr,{label:"  (HH:MM)",value:F.hours,onChange:Q=>{if(V(Q)>V(k.shiftDuration)){alert("        .");return}I(ae=>({...ae,[j]:{...ae[j],hours:Q}}))}})}),l.jsx("div",{className:"mt-2",children:l.jsx(lE,{title:H,selectedCloths:F.cloths,onChange:Q=>I(ae=>({...ae,[j]:{...ae[j],cloths:Q}}))})})]})]},j)})}),n===7&&l.jsx("div",{className:"space-y-6",children:["lineA","lineB"].map(j=>l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl",children:[l.jsxs("h3",{className:`font-bold text-center mb-4 ${j==="lineA"?"text-blue-600":"text-red-600"}`,children:["  ",j==="lineA"?"A":"B"]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[0,1,2].map(F=>{const H=Z[j][F];return l.jsxs("div",{className:"border rounded-xl p-4 bg-white dark:bg-gray-800 shadow-sm",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"font-bold text-sm",children:["  ",F+1]}),l.jsx(Qo,{active:H.active,onClick:()=>Ys(j,F,"active",!H.active)})]}),H.active&&l.jsxs("div",{className:"animate-fadeIn space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx(qr,{label:" ",value:H.hoursWorked,onChange:Q=>{if(V(Q)>V(k.shiftDuration)){alert("        .");return}Ys(j,F,"hoursWorked",Q)}}),l.jsx(qr,{label:"  ",value:H.channelOutput,onChange:Q=>{if(V(Q)>V(k.shiftDuration)){alert("        .");return}Ys(j,F,"channelOutput",Q)}})]}),l.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-2 rounded-lg",children:[l.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-2 text-center text-[10px] text-gray-500 font-bold",children:[l.jsx("div",{children:""}),l.jsx("div",{children:" (Bar)"}),l.jsx("div",{children:"  (cm)"}),l.jsx("div",{children:"  (cm)"})]}),tle.map(Q=>{var ae,oe,he;return l.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-2 items-center",children:[l.jsx("span",{className:"font-bold bg-white dark:bg-gray-600 p-1.5 rounded text-center text-xs shadow-sm",children:Q}),l.jsx("input",{type:"number",min:"0",className:"border rounded p-1.5 text-center text-xs w-full",value:((ae=H.data[Q])==null?void 0:ae.pressure)||"",onChange:Ce=>on(j,F,Q,"pressure",Ce.target.value),disabled:te}),l.jsx("input",{type:"number",min:"0",className:"border rounded p-1.5 text-center text-xs w-full",value:((oe=H.data[Q])==null?void 0:oe.jack)||"",onChange:Ce=>on(j,F,Q,"jack",Ce.target.value),disabled:te}),l.jsx("input",{type:"number",min:"0",className:"border rounded p-1.5 text-center text-xs w-full",value:((he=H.data[Q])==null?void 0:he.mudLine)||"",onChange:Ce=>on(j,F,Q,"mudLine",Ce.target.value),disabled:te})]},Q)})]}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{className:"w-full p-2 border rounded-lg text-xs min-h-[60px]",placeholder:"...",value:H.description,onChange:Q=>Js(j,F,Q.target.value)}),!te&&l.jsx(Hr,{className:"absolute bottom-2 left-2 w-4 h-4 text-gray-400 cursor-pointer hover:text-primary",onClick:()=>jn(Q=>Js(j,F,Q),H.description)})]})]})]},F)})})]},j))}),n===8&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["lineA","lineB"].map(j=>l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl",children:[l.jsxs("h3",{className:`font-bold text-center mb-4 ${j==="lineA"?"text-blue-600":"text-red-600"}`,children:["   ",j==="lineA"?"A":"B"]}),[0,1].map(F=>{const H=ve[j][F],Q=`   ${F+1}`;return l.jsxs("div",{className:"bg-white dark:bg-gray-900 border rounded-xl p-4 mb-4 last:mb-0 shadow-sm",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("h4",{className:"font-bold text-sm",children:Q}),l.jsx(Qo,{active:H.active,onClick:()=>{const ae=[...ve[j]];ae[F].active=!H.active,Ie(oe=>({...oe,[j]:ae}))}})]}),H.active&&l.jsxs("div",{className:"animate-fadeIn space-y-3",children:[l.jsx(vb,{value:H.operator,onChange:ae=>{const oe=[...ve[j]];oe[F].operator=ae,Ie(he=>({...he,[j]:oe}))}}),l.jsx("div",{children:l.jsx(qr,{label:"  (HH:MM)",value:H.hours,onChange:ae=>{if(V(ae)>V(k.shiftDuration)){alert("        .");return}const oe=[...ve[j]];oe[F].hours=ae,Ie(he=>({...he,[j]:oe}))}})}),l.jsx("div",{className:"mt-2",children:l.jsx(lE,{title:`${Q}  ${j==="lineA"?"A":"B"}`,selectedCloths:H.cloths,onChange:ae=>{const oe=[...ve[j]];oe[F].cloths=ae,Ie(he=>({...he,[j]:oe}))}})})]})]},F)})]},j))}),n===9&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["lineA","lineB"].map(j=>{const F=J[j].stopTime,H=V(F)>0;return l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[l.jsxs("h3",{className:`font-bold text-center mb-4 ${j==="lineA"?"text-blue-600":"text-red-600"}`,children:["  /   ",j==="lineA"?"A":"B"]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[l.jsx("div",{children:l.jsx(qr,{label:" ",value:J[j].workTime,onChange:Q=>gb(j,"workTime",Q)})}),l.jsx("div",{children:l.jsx(qr,{label:" ",value:J[j].stopTime,onChange:Q=>gb(j,"stopTime",Q)})})]}),H&&l.jsxs("div",{className:"animate-fadeIn",children:[l.jsx("label",{className:"block text-sm font-bold mb-1 text-gray-500",children:" "}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{className:"w-full p-3 border rounded-lg bg-gray-50 dark:bg-gray-700 min-h-[80px]",placeholder:"...",value:J[j].reason,onChange:Q=>X(ae=>({...ae,[j]:{...ae[j],reason:Q.target.value}})),disabled:te}),!te&&l.jsx(Hr,{className:"absolute bottom-3 left-3 w-5 h-5 text-gray-400 cursor-pointer hover:text-primary",onClick:()=>Mp(Q=>X(ae=>({...ae,[j]:{...ae[j],reason:Q}})),J[j].reason)})]})]})]},j)})}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[l.jsx("h3",{className:"font-bold mb-6 text-center text-lg",children:"  "}),l.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h4",{className:"text-sm font-bold mb-3 text-gray-600 dark:text-gray-300",children:" "}),l.jsx("div",{className:"flex justify-center gap-3",children:["1","2","3"].map(j=>l.jsx("button",{type:"button",disabled:te,onClick:()=>{const F=se.process.includes(j);Ne(H=>({...H,process:F?H.process.filter(Q=>Q!==j):[...H.process,j]}))},className:`w-12 h-12 rounded-xl border font-bold text-lg transition-all transform hover:scale-105 ${se.process.includes(j)?"bg-cyan-600 text-white border-cyan-700 shadow-lg":"bg-gray-100 text-gray-500 border-gray-200 hover:bg-gray-200"}`,children:j},j))})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("h4",{className:"text-sm font-bold mb-3 text-gray-600 dark:text-gray-300",children:"  "}),l.jsx("div",{className:"flex justify-center gap-3",children:["1","2","3"].map(j=>l.jsx("button",{type:"button",disabled:te,onClick:()=>{const F=se.cleanWater.includes(j);Ne(H=>({...H,cleanWater:F?H.cleanWater.filter(Q=>Q!==j):[...H.cleanWater,j]}))},className:`w-12 h-12 rounded-xl border font-bold text-lg transition-all transform hover:scale-105 ${se.cleanWater.includes(j)?"bg-cyan-400 text-white border-cyan-500 shadow-lg":"bg-gray-100 text-gray-500 border-gray-200 hover:bg-gray-200"}`,children:j},j))})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"font-bold text-lg",children:" "}),!te&&l.jsx("button",{onClick:()=>Xo("downtime"),className:"bg-blue-600 text-white w-8 h-8 rounded-full flex items-center justify-center hover:bg-blue-700 transition",children:l.jsx(or,{className:"w-5 h-5"})})]}),J.generalDescription.map((j,F)=>l.jsxs("div",{className:"flex gap-2 mb-3",children:[l.jsxs("span",{className:"font-bold text-gray-400 w-6 pt-2",children:[cE(F+1),"."]}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("textarea",{value:j,onChange:H=>mt("downtime",F,H.target.value),className:"w-full p-3 border rounded-xl bg-gray-50 dark:bg-gray-700 min-h-[60px]",disabled:te}),!te&&l.jsx(Hr,{className:"absolute bottom-3 left-3 w-4 h-4 text-gray-400 cursor-pointer hover:text-primary",onClick:()=>Dr("downtime",F)})]}),!te&&l.jsx("button",{onClick:()=>xc("downtime",F),className:"text-red-500 self-center hover:bg-red-50 p-2 rounded-full",children:l.jsx(Et,{className:"w-5 h-5"})})]},F)),J.generalDescription.length===0&&l.jsx("p",{className:"text-center text-gray-400 text-sm py-4",children:"   ."})]}),l.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"font-bold text-lg",children:"   "}),!te&&l.jsx("button",{onClick:()=>Xo("footer"),className:"bg-green-600 text-white w-8 h-8 rounded-full flex items-center justify-center hover:bg-green-700 transition",children:l.jsx(or,{className:"w-5 h-5"})})]}),ke.nextShiftActions.map((j,F)=>l.jsxs("div",{className:"flex gap-2 mb-3",children:[l.jsxs("span",{className:"font-bold text-gray-400 w-6 pt-2",children:[cE(F+1),"."]}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("textarea",{value:j,onChange:H=>mt("footer",F,H.target.value),className:"w-full p-3 border rounded-xl bg-gray-50 dark:bg-gray-700 min-h-[60px]",disabled:te}),!te&&l.jsx(Hr,{className:"absolute bottom-3 left-3 w-4 h-4 text-gray-400 cursor-pointer hover:text-primary",onClick:()=>Dr("footer",F)})]}),!te&&l.jsx("button",{onClick:()=>xc("footer",F),className:"text-red-500 self-center hover:bg-red-50 p-2 rounded-full",children:l.jsx(Et,{className:"w-5 h-5"})})]},F)),ke.nextShiftActions.length===0&&l.jsx("p",{className:"text-center text-gray-400 text-sm py-4",children:"   ."})]})]}),l.jsxs("div",{className:"flex items-center justify-between pt-6 border-t dark:border-gray-700 pb-20",children:[l.jsx("button",{type:"button",onClick:()=>i(j=>Math.max(1,j-1)),disabled:n===1,className:"px-6 py-3 rounded-xl border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 transition",children:" "}),n===9?!te&&l.jsxs("button",{type:"submit",disabled:o||!yb(),className:`bg-primary text-white px-8 py-3 rounded-xl shadow-lg hover:bg-red-800 transition flex items-center gap-2 transform active:scale-95 font-bold text-lg ${!yb()||o?"opacity-50 cursor-not-allowed bg-gray-400":""}`,children:[o?l.jsx(Ct,{className:"w-6 h-6 animate-spin"}):l.jsx(En,{className:"w-6 h-6"}),"  "]}):l.jsxs("button",{type:"button",onClick:()=>i(j=>Math.min(9,j+1)),className:"bg-blue-600 text-white px-8 py-3 rounded-xl shadow hover:bg-blue-700 transition flex items-center gap-2 font-bold",children:["  ",l.jsx(Rl,{className:"w-5 h-5 rotate-180"})]})]})]}),f&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fadeIn",children:l.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden transform scale-100 transition-all",children:l.jsxs("div",{className:"p-6 text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce",children:l.jsx(es,{className:"w-10 h-10 text-green-600"})}),l.jsx("h3",{className:"text-2xl font-bold mb-2",children:"  "}),l.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:["       ",l.jsx("br",{}),"         ."]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>h(!1),className:"flex-1 py-3 border border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition font-bold text-gray-700 dark:text-gray-300",children:"  "}),l.jsx("button",{onClick:EO,className:"flex-1 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 shadow-lg transition font-bold",children:"  "})]})]})})})]})},ole=({enabled:t})=>{const[e,r]=T.useState([]);return T.useEffect(()=>{if(t){const n=Array.from({length:40}).map((i,o)=>({id:o,left:Math.random()*100+"vw",animationDuration:Math.random()*3+5+"s",animationDelay:Math.random()*5+"s",opacity:Math.random()*.5+.3,size:Math.random()*4+2+"px"}));r(n)}else r([])},[t]),t?l.jsxs("div",{className:"fixed inset-0 pointer-events-none z-[60] overflow-hidden",children:[l.jsx("style",{children:`
          @keyframes snowfall {
            0% { transform: translateY(-10px) translateX(0); }
            100% { transform: translateY(110vh) translateX(20px); }
          }
        `}),e.map(n=>l.jsx("div",{className:"absolute bg-white rounded-full drop-shadow-sm",style:{left:n.left,top:"-10px",width:n.size,height:n.size,opacity:n.opacity,animation:`snowfall ${n.animationDuration} linear infinite`,animationDelay:n.animationDelay}},n.id))]}):null};var ale={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let sle,lle;function ule(){return{geminiUrl:sle,vertexUrl:lle}}function cle(t,e,r,n){var i,o;if(!(t!=null&&t.baseUrl)){const a=ule();return e?(i=a.vertexUrl)!==null&&i!==void 0?i:r:(o=a.geminiUrl)!==null&&o!==void 0?o:n}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yi{}function xe(t,e){const r=/\{([^}]+)\}/g;return t.replace(r,(n,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function m(t,e,r){for(let o=0;o<e.length-1;o++){const a=e[o];if(a.endsWith("[]")){const s=a.slice(0,-2);if(!(s in t))if(Array.isArray(r))t[s]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[s])){const u=t[s];if(Array.isArray(r))for(let c=0;c<u.length;c++){const d=u[c];m(d,e.slice(o+1),r[c])}else for(const c of u)m(c,e.slice(o+1),r)}return}else if(a.endsWith("[0]")){const s=a.slice(0,-3);s in t||(t[s]=[{}]);const u=t[s];m(u[0],e.slice(o+1),r);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const n=e[e.length-1],i=t[n];if(i!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===i)return;if(typeof i=="object"&&typeof r=="object"&&i!==null&&r!==null)Object.assign(i,r);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else n==="_self"&&typeof r=="object"&&r!==null&&!Array.isArray(r)?Object.assign(t,r):t[n]=r}function p(t,e,r=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return r;const i=e[n];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const a=t[o];return Array.isArray(a)?a.map(s=>p(s,e.slice(n+1),r)):r}else return r}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return r;throw n}}function dle(t,e){for(const[r,n]of Object.entries(e)){const i=r.split("."),o=n.split("."),a=new Set;let s=-1;for(let u=0;u<i.length;u++)if(i[u]==="*"){s=u;break}if(s!==-1&&o.length>s)for(let u=s;u<o.length;u++){const c=o[u];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&a.add(c)}I0(t,i,o,0,a)}}function I0(t,e,r,n,i){if(n>=e.length||typeof t!="object"||t===null)return;const o=e[n];if(o.endsWith("[]")){const a=o.slice(0,-2),s=t;if(a in s&&Array.isArray(s[a]))for(const u of s[a])I0(u,e,r,n+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,s=Object.keys(a).filter(c=>!c.startsWith("_")&&!i.has(c)),u={};for(const c of s)u[c]=a[c];for(const[c,d]of Object.entries(u)){const f=[];for(const h of r.slice(n))h==="*"?f.push(c):f.push(h);m(a,f,d)}for(const c of s)delete a[c]}}else{const a=t;o in a&&I0(a[o],e,r,n+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ab(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fle(t){const e={},r=p(t,["operationName"]);r!=null&&m(e,["operationName"],r);const n=p(t,["resourceName"]);return n!=null&&m(e,["_url","resourceName"],n),e}function hle(t){const e={},r=p(t,["name"]);r!=null&&m(e,["name"],r);const n=p(t,["metadata"]);n!=null&&m(e,["metadata"],n);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);o!=null&&m(e,["error"],o);const a=p(t,["response","generateVideoResponse"]);return a!=null&&m(e,["response"],mle(a)),e}function ple(t){const e={},r=p(t,["name"]);r!=null&&m(e,["name"],r);const n=p(t,["metadata"]);n!=null&&m(e,["metadata"],n);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);o!=null&&m(e,["error"],o);const a=p(t,["response"]);return a!=null&&m(e,["response"],gle(a)),e}function mle(t){const e={},r=p(t,["generatedSamples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>yle(a))),m(e,["generatedVideos"],o)}const n=p(t,["raiMediaFilteredCount"]);n!=null&&m(e,["raiMediaFilteredCount"],n);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function gle(t){const e={},r=p(t,["videos"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>vle(a))),m(e,["generatedVideos"],o)}const n=p(t,["raiMediaFilteredCount"]);n!=null&&m(e,["raiMediaFilteredCount"],n);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function yle(t){const e={},r=p(t,["video"]);return r!=null&&m(e,["video"],Nle(r)),e}function vle(t){const e={},r=p(t,["_self"]);return r!=null&&m(e,["video"],Ele(r)),e}function xle(t){const e={},r=p(t,["operationName"]);return r!=null&&m(e,["_url","operationName"],r),e}function ble(t){const e={},r=p(t,["operationName"]);return r!=null&&m(e,["_url","operationName"],r),e}function wle(t){const e={},r=p(t,["name"]);r!=null&&m(e,["name"],r);const n=p(t,["metadata"]);n!=null&&m(e,["metadata"],n);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);o!=null&&m(e,["error"],o);const a=p(t,["response"]);return a!=null&&m(e,["response"],_le(a)),e}function _le(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["parent"]);n!=null&&m(e,["parent"],n);const i=p(t,["documentName"]);return i!=null&&m(e,["documentName"],i),e}function AI(t){const e={},r=p(t,["name"]);r!=null&&m(e,["name"],r);const n=p(t,["metadata"]);n!=null&&m(e,["metadata"],n);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);o!=null&&m(e,["error"],o);const a=p(t,["response"]);return a!=null&&m(e,["response"],Sle(a)),e}function Sle(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["parent"]);n!=null&&m(e,["parent"],n);const i=p(t,["documentName"]);return i!=null&&m(e,["documentName"],i),e}function Nle(t){const e={},r=p(t,["uri"]);r!=null&&m(e,["uri"],r);const n=p(t,["encodedVideo"]);n!=null&&m(e,["videoBytes"],ab(n));const i=p(t,["encoding"]);return i!=null&&m(e,["mimeType"],i),e}function Ele(t){const e={},r=p(t,["gcsUri"]);r!=null&&m(e,["uri"],r);const n=p(t,["bytesBase64Encoded"]);n!=null&&m(e,["videoBytes"],ab(n));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var dE;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(dE||(dE={}));var fE;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(fE||(fE={}));var hE;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(hE||(hE={}));var Ii;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ii||(Ii={}));var pE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(pE||(pE={}));var mE;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(mE||(mE={}));var gE;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(gE||(gE={}));var yE;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(yE||(yE={}));var vE;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(vE||(vE={}));var xE;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(xE||(xE={}));var bE;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(bE||(bE={}));var wE;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(wE||(wE={}));var _E;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(_E||(_E={}));var SE;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(SE||(SE={}));var NE;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(NE||(NE={}));var EE;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(EE||(EE={}));var kE;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(kE||(kE={}));var TE;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(TE||(TE={}));var CE;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(CE||(CE={}));var sh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(sh||(sh={}));var AE;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(AE||(AE={}));var jE;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(jE||(jE={}));var PE;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(PE||(PE={}));var O0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(O0||(O0={}));var IE;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(IE||(IE={}));var OE;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(OE||(OE={}));var RE;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(RE||(RE={}));var ME;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(ME||(ME={}));var $E;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})($E||($E={}));var DE;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(DE||(DE={}));var LE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(LE||(LE={}));var UE;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(UE||(UE={}));var FE;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(FE||(FE={}));var BE;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(BE||(BE={}));var qE;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(qE||(qE={}));var VE;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(VE||(VE={}));var GE;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(GE||(GE={}));var HE;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(HE||(HE={}));var zE;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(zE||(zE={}));var WE;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(WE||(WE={}));var KE;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(KE||(KE={}));var JE;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(JE||(JE={}));var YE;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(YE||(YE={}));var XE;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(XE||(XE={}));var QE;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(QE||(QE={}));var ZE;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(ZE||(ZE={}));var ek;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(ek||(ek={}));var tk;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(tk||(tk={}));var rk;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(rk||(rk={}));var nk;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(nk||(nk={}));var ik;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ik||(ik={}));var ok;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(ok||(ok={}));var ak;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ak||(ak={}));var sk;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(sk||(sk={}));var lk;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(lk||(lk={}));var Pa;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Pa||(Pa={}));class R0{constructor(e){const r={};for(const n of e.headers.entries())r[n[0]]=n[1];this.headers=r,this.responseInternal=e}json(){return this.responseInternal.json()}}class ml{get text(){var e,r,n,i,o,a,s,u;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1;const f=[];for(const h of(u=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)!==null&&u!==void 0?u:[]){for(const[g,b]of Object.entries(h))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(b!==null||b!==void 0)&&f.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;d=!0,c+=h.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,r,n,i,o,a,s,u;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const d=[];for(const f of(u=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)!==null&&u!==void 0?u:[]){for(const[h,g]of Object.entries(f))h!=="inlineData"&&(g!==null||g!==void 0)&&d.push(h);f.inlineData&&typeof f.inlineData.data=="string"&&(c+=atob(f.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,r,n,i,o,a,s,u;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(u=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||u===void 0?void 0:u.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,r,n,i,o,a,s,u,c;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(u=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||u===void 0?void 0:u.filter(f=>f.executableCode).map(f=>f.executableCode).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,r,n,i,o,a,s,u,c;if(((i=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(u=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||u===void 0?void 0:u.filter(f=>f.codeExecutionResult).map(f=>f.codeExecutionResult).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.output}}class uk{}class ck{}class kle{}class Tle{}class Cle{}class Ale{}class dk{}class fk{}class hk{}class jle{}class lh{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const n=new lh;let i;const o=e;return r?i=ple(o):i=hle(o),Object.assign(n,i),n}}class pk{}class mk{}class gk{}class yk{}class Ple{}class Ile{}class Ole{}class sb{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const n=new sb,o=wle(e);return Object.assign(n,o),n}}class Rle{}class Mle{}class $le{}class vk{}class Dle{get text(){var e,r,n;let i="",o=!1;const a=[];for(const s of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[u,c]of Object.entries(s))u!=="text"&&u!=="thought"&&c!==null&&a.push(u);if(typeof s.text=="string"){if(typeof s.thought=="boolean"&&s.thought)continue;o=!0,i+=s.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,r,n;let i="";const o=[];for(const a of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[s,u]of Object.entries(a))s!=="inlineData"&&u!==null&&o.push(s);a.inlineData&&typeof a.inlineData.data=="string"&&(i+=atob(a.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Lle{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class lb{_fromAPIResponse({apiResponse:e,_isVertexAI:r}){const n=new lb,o=AI(e);return Object.assign(n,o),n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ze(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const r=e.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function jI(t,e){const r=ze(t,e);return r?r.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}`:r.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${r}`:r:""}function PI(t){return Array.isArray(t)?t.map(e=>uh(e)):[uh(t)]}function uh(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function II(t){const e=uh(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function OI(t){const e=uh(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function xk(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function RI(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>xk(e)):[xk(t)]}function M0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function bk(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function wk(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ir(t){if(t==null)throw new Error("ContentUnion is required");return M0(t)?t:{role:"user",parts:RI(t)}}function ub(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(r=>{const n=ir(r);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(t.isVertexAI()){const r=ir(e);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(e)?e.map(r=>ir(r)):[ir(e)]}function Xr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(bk(t)||wk(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ir(t)]}const e=[],r=[],n=M0(t[0]);for(const i of t){const o=M0(i);if(o!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(bk(i)||wk(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(i)}}return n||e.push({role:"user",parts:RI(r)}),e}function Ule(t,e){t.includes("null")&&(e.nullable=!0);const r=t.filter(n=>n!=="null");if(r.length===1)e.type=Object.values(Ii).includes(r[0].toUpperCase())?r[0].toUpperCase():Ii.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of r)e.anyOf.push({type:Object.values(Ii).includes(n.toUpperCase())?n.toUpperCase():Ii.TYPE_UNSPECIFIED})}}function Ga(t){const e={},r=["items"],n=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&Ule(t.type,e);for(const[a,s]of Object.entries(t))if(s!=null)if(a=="type"){if(s==="null")throw new Error("type: null can not be the only possible type for the field.");if(s instanceof Array)continue;e.type=Object.values(Ii).includes(s.toUpperCase())?s.toUpperCase():Ii.TYPE_UNSPECIFIED}else if(r.includes(a))e[a]=Ga(s);else if(n.includes(a)){const u=[];for(const c of s){if(c.type=="null"){e.nullable=!0;continue}u.push(Ga(c))}e[a]=u}else if(i.includes(a)){const u={};for(const[c,d]of Object.entries(s))u[c]=Ga(d);e[a]=u}else{if(a==="additionalProperties")continue;e[a]=s}return e}function cb(t){return Ga(t)}function db(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function fb(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function zs(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ga(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ga(e.response));return t}function Ws(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const r of t)e.push(r);return e}function Fle(t,e,r,n=1){const i=!e.startsWith(`${r}/`)&&e.split("/").length===n;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${r}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}/${e}`:e:i?`${r}/${e}`:e}function vi(t,e){if(typeof e!="string")throw new Error("name must be a string");return Fle(t,e,"cachedContents")}function MI(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function to(t){return ab(t)}function Ble(t){return t!=null&&typeof t=="object"&&"name"in t}function qle(t){return t!=null&&typeof t=="object"&&"video"in t}function Vle(t){return t!=null&&typeof t=="object"&&"uri"in t}function $I(t){var e;let r;if(Ble(t)&&(r=t.name),!(Vle(t)&&(r=t.uri,r===void 0))&&!(qle(t)&&(r=(e=t.video)===null||e===void 0?void 0:e.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const i=r.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${r}`);r=i[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function DI(t,e){let r;return t.isVertexAI()?r=e?"publishers/google/models":"models":r=e?"models":"tunedModels",r}function LI(t){for(const e of["models","tunedModels","publisherModels"])if(Gle(t,e))return t[e];return[]}function Gle(t,e){return t!==null&&typeof t=="object"&&e in t}function Hle(t,e={}){const r=t,n={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return r.outputSchema&&(n.responseJsonSchema=r.outputSchema),e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function zle(t,e={}){const r=[],n=new Set;for(const i of t){const o=i.name;if(n.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);n.add(o);const a=Hle(i,e);a.functionDeclarations&&r.push(...a.functionDeclarations)}return{functionDeclarations:r}}function UI(t,e){let r;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))r={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))r={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))r={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");r={inlinedRequests:e}}else r=e;const n=[r.gcsUri,r.bigqueryUri].filter(Boolean).length,i=[r.inlinedRequests,r.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||n!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(n>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return r}function Wle(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function FI(t){if(typeof t!="object"||t===null)return{};const e=t,r=e.inlinedResponses;if(typeof r!="object"||r===null)return t;const i=r.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const a of i){if(typeof a!="object"||a===null)continue;const u=a.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ks(t,e){const r=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function BI(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kle(t){const e={},r=p(t,["responsesFile"]);r!=null&&m(e,["fileName"],r);const n=p(t,["inlinedResponses","inlinedResponses"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Cue(a))),m(e,["inlinedResponses"],o)}const i=p(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["inlinedEmbedContentResponses"],o)}return e}function Jle(t){const e={},r=p(t,["predictionsFormat"]);r!=null&&m(e,["format"],r);const n=p(t,["gcsDestination","outputUriPrefix"]);n!=null&&m(e,["gcsUri"],n);const i=p(t,["bigqueryDestination","outputUri"]);return i!=null&&m(e,["bigqueryUri"],i),e}function Yle(t){const e={},r=p(t,["format"]);r!=null&&m(e,["predictionsFormat"],r);const n=p(t,["gcsUri"]);n!=null&&m(e,["gcsDestination","outputUriPrefix"],n);const i=p(t,["bigqueryUri"]);if(i!=null&&m(e,["bigqueryDestination","outputUri"],i),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function wd(t){const e={},r=p(t,["name"]);r!=null&&m(e,["name"],r);const n=p(t,["metadata","displayName"]);n!=null&&m(e,["displayName"],n);const i=p(t,["metadata","state"]);i!=null&&m(e,["state"],BI(i));const o=p(t,["metadata","createTime"]);o!=null&&m(e,["createTime"],o);const a=p(t,["metadata","endTime"]);a!=null&&m(e,["endTime"],a);const s=p(t,["metadata","updateTime"]);s!=null&&m(e,["updateTime"],s);const u=p(t,["metadata","model"]);u!=null&&m(e,["model"],u);const c=p(t,["metadata","output"]);return c!=null&&m(e,["dest"],Kle(FI(c))),e}function $0(t){const e={},r=p(t,["name"]);r!=null&&m(e,["name"],r);const n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=p(t,["state"]);i!=null&&m(e,["state"],BI(i));const o=p(t,["error"]);o!=null&&m(e,["error"],o);const a=p(t,["createTime"]);a!=null&&m(e,["createTime"],a);const s=p(t,["startTime"]);s!=null&&m(e,["startTime"],s);const u=p(t,["endTime"]);u!=null&&m(e,["endTime"],u);const c=p(t,["updateTime"]);c!=null&&m(e,["updateTime"],c);const d=p(t,["model"]);d!=null&&m(e,["model"],d);const f=p(t,["inputConfig"]);f!=null&&m(e,["src"],Xle(f));const h=p(t,["outputConfig"]);h!=null&&m(e,["dest"],Jle(FI(h)));const g=p(t,["completionStats"]);return g!=null&&m(e,["completionStats"],g),e}function Xle(t){const e={},r=p(t,["instancesFormat"]);r!=null&&m(e,["format"],r);const n=p(t,["gcsSource","uris"]);n!=null&&m(e,["gcsUri"],n);const i=p(t,["bigquerySource","inputUri"]);return i!=null&&m(e,["bigqueryUri"],i),e}function Qle(t,e){const r={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=p(e,["fileName"]);n!=null&&m(r,["fileName"],n);const i=p(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Tue(t,a))),m(r,["requests","requests"],o)}return r}function Zle(t){const e={},r=p(t,["format"]);r!=null&&m(e,["instancesFormat"],r);const n=p(t,["gcsUri"]);n!=null&&m(e,["gcsSource","uris"],n);const i=p(t,["bigqueryUri"]);if(i!=null&&m(e,["bigquerySource","inputUri"],i),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function eue(t){const e={},r=p(t,["data"]);if(r!=null&&m(e,["data"],r),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["mimeType"]);return n!=null&&m(e,["mimeType"],n),e}function tue(t,e){const r={},n=p(e,["name"]);return n!=null&&m(r,["_url","name"],Ks(t,n)),r}function rue(t,e){const r={},n=p(e,["name"]);return n!=null&&m(r,["_url","name"],Ks(t,n)),r}function nue(t){const e={},r=p(t,["content"]);r!=null&&m(e,["content"],r);const n=p(t,["citationMetadata"]);n!=null&&m(e,["citationMetadata"],iue(n));const i=p(t,["tokenCount"]);i!=null&&m(e,["tokenCount"],i);const o=p(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const a=p(t,["avgLogprobs"]);a!=null&&m(e,["avgLogprobs"],a);const s=p(t,["groundingMetadata"]);s!=null&&m(e,["groundingMetadata"],s);const u=p(t,["index"]);u!=null&&m(e,["index"],u);const c=p(t,["logprobsResult"]);c!=null&&m(e,["logprobsResult"],c);const d=p(t,["safetyRatings"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>g)),m(e,["safetyRatings"],h)}const f=p(t,["urlContextMetadata"]);return f!=null&&m(e,["urlContextMetadata"],f),e}function iue(t){const e={},r=p(t,["citationSources"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>i)),m(e,["citations"],n)}return e}function qI(t){const e={},r=p(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Mue(o))),m(e,["parts"],i)}const n=p(t,["role"]);return n!=null&&m(e,["role"],n),e}function oue(t,e){const r={},n=p(t,["displayName"]);if(e!==void 0&&n!=null&&m(e,["batch","displayName"],n),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function aue(t,e){const r={},n=p(t,["displayName"]);e!==void 0&&n!=null&&m(e,["displayName"],n);const i=p(t,["dest"]);return e!==void 0&&i!=null&&m(e,["outputConfig"],Yle(Wle(i))),r}function _k(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["src"]);i!=null&&m(r,["batch","inputConfig"],Qle(t,UI(t,i)));const o=p(e,["config"]);return o!=null&&oue(o,r),r}function sue(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["model"],ze(t,n));const i=p(e,["src"]);i!=null&&m(r,["inputConfig"],Zle(UI(t,i)));const o=p(e,["config"]);return o!=null&&aue(o,r),r}function lue(t,e){const r={},n=p(t,["displayName"]);return e!==void 0&&n!=null&&m(e,["batch","displayName"],n),r}function uue(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["src"]);i!=null&&m(r,["batch","inputConfig"],gue(t,i));const o=p(e,["config"]);return o!=null&&lue(o,r),r}function cue(t,e){const r={},n=p(e,["name"]);return n!=null&&m(r,["_url","name"],Ks(t,n)),r}function due(t,e){const r={},n=p(e,["name"]);return n!=null&&m(r,["_url","name"],Ks(t,n)),r}function fue(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["name"]);n!=null&&m(e,["name"],n);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);return o!=null&&m(e,["error"],o),e}function hue(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["name"]);n!=null&&m(e,["name"],n);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);return o!=null&&m(e,["error"],o),e}function pue(t,e){const r={},n=p(e,["contents"]);if(n!=null){let o=ub(t,n);Array.isArray(o)&&(o=o.map(a=>a)),m(r,["requests[]","request","content"],o)}const i=p(e,["config"]);return i!=null&&(m(r,["_self"],mue(i,r)),dle(r,{"requests[].*":"requests[].request.*"})),r}function mue(t,e){const r={},n=p(t,["taskType"]);e!==void 0&&n!=null&&m(e,["requests[]","taskType"],n);const i=p(t,["title"]);e!==void 0&&i!=null&&m(e,["requests[]","title"],i);const o=p(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&m(e,["requests[]","outputDimensionality"],o),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function gue(t,e){const r={},n=p(e,["fileName"]);n!=null&&m(r,["file_name"],n);const i=p(e,["inlinedRequests"]);return i!=null&&m(r,["requests"],pue(t,i)),r}function yue(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const n=p(t,["mimeType"]);return n!=null&&m(e,["mimeType"],n),e}function vue(t){const e={},r=p(t,["id"]);r!=null&&m(e,["id"],r);const n=p(t,["args"]);n!=null&&m(e,["args"],n);const i=p(t,["name"]);if(i!=null&&m(e,["name"],i),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function xue(t){const e={},r=p(t,["mode"]);r!=null&&m(e,["mode"],r);const n=p(t,["allowedFunctionNames"]);if(n!=null&&m(e,["allowedFunctionNames"],n),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function bue(t,e,r){const n={},i=p(e,["systemInstruction"]);r!==void 0&&i!=null&&m(r,["systemInstruction"],qI(ir(i)));const o=p(e,["temperature"]);o!=null&&m(n,["temperature"],o);const a=p(e,["topP"]);a!=null&&m(n,["topP"],a);const s=p(e,["topK"]);s!=null&&m(n,["topK"],s);const u=p(e,["candidateCount"]);u!=null&&m(n,["candidateCount"],u);const c=p(e,["maxOutputTokens"]);c!=null&&m(n,["maxOutputTokens"],c);const d=p(e,["stopSequences"]);d!=null&&m(n,["stopSequences"],d);const f=p(e,["responseLogprobs"]);f!=null&&m(n,["responseLogprobs"],f);const h=p(e,["logprobs"]);h!=null&&m(n,["logprobs"],h);const g=p(e,["presencePenalty"]);g!=null&&m(n,["presencePenalty"],g);const b=p(e,["frequencyPenalty"]);b!=null&&m(n,["frequencyPenalty"],b);const v=p(e,["seed"]);v!=null&&m(n,["seed"],v);const y=p(e,["responseMimeType"]);y!=null&&m(n,["responseMimeType"],y);const x=p(e,["responseSchema"]);x!=null&&m(n,["responseSchema"],cb(x));const _=p(e,["responseJsonSchema"]);if(_!=null&&m(n,["responseJsonSchema"],_),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=p(e,["safetySettings"]);if(r!==void 0&&w!=null){let M=w;Array.isArray(M)&&(M=M.map(O=>$ue(O))),m(r,["safetySettings"],M)}const E=p(e,["tools"]);if(r!==void 0&&E!=null){let M=Ws(E);Array.isArray(M)&&(M=M.map(O=>Lue(zs(O)))),m(r,["tools"],M)}const S=p(e,["toolConfig"]);if(r!==void 0&&S!=null&&m(r,["toolConfig"],Due(S)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=p(e,["cachedContent"]);r!==void 0&&N!=null&&m(r,["cachedContent"],vi(t,N));const k=p(e,["responseModalities"]);k!=null&&m(n,["responseModalities"],k);const A=p(e,["mediaResolution"]);A!=null&&m(n,["mediaResolution"],A);const C=p(e,["speechConfig"]);if(C!=null&&m(n,["speechConfig"],db(C)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=p(e,["thinkingConfig"]);R!=null&&m(n,["thinkingConfig"],R);const $=p(e,["imageConfig"]);$!=null&&m(n,["imageConfig"],kue($));const L=p(e,["enableEnhancedCivicAnswers"]);return L!=null&&m(n,["enableEnhancedCivicAnswers"],L),n}function wue(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>nue(c))),m(e,["candidates"],u)}const i=p(t,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const o=p(t,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const a=p(t,["responseId"]);a!=null&&m(e,["responseId"],a);const s=p(t,["usageMetadata"]);return s!=null&&m(e,["usageMetadata"],s),e}function _ue(t,e){const r={},n=p(e,["name"]);return n!=null&&m(r,["_url","name"],Ks(t,n)),r}function Sue(t,e){const r={},n=p(e,["name"]);return n!=null&&m(r,["_url","name"],Ks(t,n)),r}function Nue(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=p(t,["enableWidget"]);return r!=null&&m(e,["enableWidget"],r),e}function Eue(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=p(t,["timeRangeFilter"]);return r!=null&&m(e,["timeRangeFilter"],r),e}function kue(t){const e={},r=p(t,["aspectRatio"]);r!=null&&m(e,["aspectRatio"],r);const n=p(t,["imageSize"]);if(n!=null&&m(e,["imageSize"],n),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Tue(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["request","model"],ze(t,n));const i=p(e,["contents"]);if(i!=null){let s=Xr(i);Array.isArray(s)&&(s=s.map(u=>qI(u))),m(r,["request","contents"],s)}const o=p(e,["metadata"]);o!=null&&m(r,["metadata"],o);const a=p(e,["config"]);return a!=null&&m(r,["request","generationConfig"],bue(t,a,p(r,["request"],{}))),r}function Cue(t){const e={},r=p(t,["response"]);r!=null&&m(e,["response"],wue(r));const n=p(t,["error"]);return n!=null&&m(e,["error"],n),e}function Aue(t,e){const r={},n=p(t,["pageSize"]);e!==void 0&&n!=null&&m(e,["_query","pageSize"],n);const i=p(t,["pageToken"]);if(e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function jue(t,e){const r={},n=p(t,["pageSize"]);e!==void 0&&n!=null&&m(e,["_query","pageSize"],n);const i=p(t,["pageToken"]);e!==void 0&&i!=null&&m(e,["_query","pageToken"],i);const o=p(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),r}function Pue(t){const e={},r=p(t,["config"]);return r!=null&&Aue(r,e),e}function Iue(t){const e={},r=p(t,["config"]);return r!=null&&jue(r,e),e}function Oue(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["nextPageToken"]);n!=null&&m(e,["nextPageToken"],n);const i=p(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>wd(a))),m(e,["batchJobs"],o)}return e}function Rue(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["nextPageToken"]);n!=null&&m(e,["nextPageToken"],n);const i=p(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>$0(a))),m(e,["batchJobs"],o)}return e}function Mue(t){const e={},r=p(t,["mediaResolution"]);r!=null&&m(e,["mediaResolution"],r);const n=p(t,["codeExecutionResult"]);n!=null&&m(e,["codeExecutionResult"],n);const i=p(t,["executableCode"]);i!=null&&m(e,["executableCode"],i);const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],yue(o));const a=p(t,["functionCall"]);a!=null&&m(e,["functionCall"],vue(a));const s=p(t,["functionResponse"]);s!=null&&m(e,["functionResponse"],s);const u=p(t,["inlineData"]);u!=null&&m(e,["inlineData"],eue(u));const c=p(t,["text"]);c!=null&&m(e,["text"],c);const d=p(t,["thought"]);d!=null&&m(e,["thought"],d);const f=p(t,["thoughtSignature"]);f!=null&&m(e,["thoughtSignature"],f);const h=p(t,["videoMetadata"]);return h!=null&&m(e,["videoMetadata"],h),e}function $ue(t){const e={},r=p(t,["category"]);if(r!=null&&m(e,["category"],r),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=p(t,["threshold"]);return n!=null&&m(e,["threshold"],n),e}function Due(t){const e={},r=p(t,["functionCallingConfig"]);r!=null&&m(e,["functionCallingConfig"],xue(r));const n=p(t,["retrievalConfig"]);return n!=null&&m(e,["retrievalConfig"],n),e}function Lue(t){const e={},r=p(t,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>f)),m(e,["functionDeclarations"],d)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["googleSearchRetrieval"]);n!=null&&m(e,["googleSearchRetrieval"],n);const i=p(t,["computerUse"]);i!=null&&m(e,["computerUse"],i);const o=p(t,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const a=p(t,["codeExecution"]);if(a!=null&&m(e,["codeExecution"],a),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=p(t,["googleMaps"]);s!=null&&m(e,["googleMaps"],Nue(s));const u=p(t,["googleSearch"]);u!=null&&m(e,["googleSearch"],Eue(u));const c=p(t,["urlContext"]);return c!=null&&m(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ci;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(ci||(ci={}));class Yo{constructor(e,r,n,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(e,n,i)}init(e,r,n){var i,o;this.nameInternal=e,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r==null?void 0:r.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!n||Object.keys(n).length===0?a={config:{}}:typeof n=="object"?a=Object.assign({},n):a=n,a.config&&(a.config.pageToken=r.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(o=(i=a.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uue extends yi{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Yo(ci.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.create=async r=>(this.apiClient.isVertexAI()&&(r.config=this.formatDestination(r.src,r.config)),this.createInternal(r)),this.createEmbeddings=async r=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(r)}}createInlinedGenerateContentRequest(e){const r=_k(this.apiClient,e),n=r._url,i=xe("{model}:batchGenerateContent",n),s=r.batch.inputConfig.requests,u=s.requests,c=[];for(const d of u){const f=Object.assign({},d);if(f.systemInstruction){const h=f.systemInstruction;delete f.systemInstruction;const g=f.request;g.systemInstruction=h,f.request=g}c.push(f)}return s.requests=c,delete r.config,delete r._url,delete r._query,{path:i,body:r}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,r){const n=r?Object.assign({},r):{},i=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${i}`),n.dest===void 0){const o=this.getGcsUri(e),a=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?n.dest=`${o.slice(0,-6)}/dest`:n.dest=`${o}_dest_${i}`;else if(a)n.dest=`${a}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=sue(this.apiClient,e);return s=xe("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),a.then(d=>$0(d))}else{const c=_k(this.apiClient,e);return s=xe("{model}:batchGenerateContent",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>wd(d))}}async createEmbeddingsInternal(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=uue(this.apiClient,e);return o=xe("{model}:asyncBatchEmbedContent",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>wd(u))}}async get(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=Sue(this.apiClient,e);return s=xe("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),a.then(d=>$0(d))}else{const c=_ue(this.apiClient,e);return s=xe("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>wd(d))}}async cancel(e){var r,n,i,o;let a="",s={};if(this.apiClient.isVertexAI()){const u=rue(this.apiClient,e);a=xe("batchPredictionJobs/{name}:cancel",u._url),s=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{const u=tue(this.apiClient,e);a=xe("batches/{name}:cancel",u._url),s=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=Iue(e);return s=xe("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=Rue(d),h=new vk;return Object.assign(h,f),h})}else{const c=Pue(e);return s=xe("batches",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=Oue(d),h=new vk;return Object.assign(h,f),h})}}async delete(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=due(this.apiClient,e);return s=xe("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>hue(d))}else{const c=cue(this.apiClient,e);return s=xe("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>fue(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fue(t){const e={},r=p(t,["data"]);if(r!=null&&m(e,["data"],r),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["mimeType"]);return n!=null&&m(e,["mimeType"],n),e}function Sk(t){const e={},r=p(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>uce(o))),m(e,["parts"],i)}const n=p(t,["role"]);return n!=null&&m(e,["role"],n),e}function Bue(t,e){const r={},n=p(t,["ttl"]);e!==void 0&&n!=null&&m(e,["ttl"],n);const i=p(t,["expireTime"]);e!==void 0&&i!=null&&m(e,["expireTime"],i);const o=p(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const a=p(t,["contents"]);if(e!==void 0&&a!=null){let d=Xr(a);Array.isArray(d)&&(d=d.map(f=>Sk(f))),m(e,["contents"],d)}const s=p(t,["systemInstruction"]);e!==void 0&&s!=null&&m(e,["systemInstruction"],Sk(ir(s)));const u=p(t,["tools"]);if(e!==void 0&&u!=null){let d=u;Array.isArray(d)&&(d=d.map(f=>dce(f))),m(e,["tools"],d)}const c=p(t,["toolConfig"]);if(e!==void 0&&c!=null&&m(e,["toolConfig"],cce(c)),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function que(t,e){const r={},n=p(t,["ttl"]);e!==void 0&&n!=null&&m(e,["ttl"],n);const i=p(t,["expireTime"]);e!==void 0&&i!=null&&m(e,["expireTime"],i);const o=p(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const a=p(t,["contents"]);if(e!==void 0&&a!=null){let f=Xr(a);Array.isArray(f)&&(f=f.map(h=>h)),m(e,["contents"],f)}const s=p(t,["systemInstruction"]);e!==void 0&&s!=null&&m(e,["systemInstruction"],ir(s));const u=p(t,["tools"]);if(e!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(h=>fce(h))),m(e,["tools"],f)}const c=p(t,["toolConfig"]);e!==void 0&&c!=null&&m(e,["toolConfig"],c);const d=p(t,["kmsKeyName"]);return e!==void 0&&d!=null&&m(e,["encryption_spec","kmsKeyName"],d),r}function Vue(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["model"],jI(t,n));const i=p(e,["config"]);return i!=null&&Bue(i,r),r}function Gue(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["model"],jI(t,n));const i=p(e,["config"]);return i!=null&&que(i,r),r}function Hue(t,e){const r={},n=p(e,["name"]);return n!=null&&m(r,["_url","name"],vi(t,n)),r}function zue(t,e){const r={},n=p(e,["name"]);return n!=null&&m(r,["_url","name"],vi(t,n)),r}function Wue(t){const e={},r=p(t,["sdkHttpResponse"]);return r!=null&&m(e,["sdkHttpResponse"],r),e}function Kue(t){const e={},r=p(t,["sdkHttpResponse"]);return r!=null&&m(e,["sdkHttpResponse"],r),e}function Jue(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const n=p(t,["mimeType"]);return n!=null&&m(e,["mimeType"],n),e}function Yue(t){const e={},r=p(t,["id"]);r!=null&&m(e,["id"],r);const n=p(t,["args"]);n!=null&&m(e,["args"],n);const i=p(t,["name"]);if(i!=null&&m(e,["name"],i),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Xue(t){const e={},r=p(t,["mode"]);r!=null&&m(e,["mode"],r);const n=p(t,["allowedFunctionNames"]);if(n!=null&&m(e,["allowedFunctionNames"],n),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Que(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=p(t,["description"]);r!=null&&m(e,["description"],r);const n=p(t,["name"]);n!=null&&m(e,["name"],n);const i=p(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const a=p(t,["response"]);a!=null&&m(e,["response"],a);const s=p(t,["responseJsonSchema"]);return s!=null&&m(e,["responseJsonSchema"],s),e}function Zue(t,e){const r={},n=p(e,["name"]);return n!=null&&m(r,["_url","name"],vi(t,n)),r}function ece(t,e){const r={},n=p(e,["name"]);return n!=null&&m(r,["_url","name"],vi(t,n)),r}function tce(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=p(t,["enableWidget"]);return r!=null&&m(e,["enableWidget"],r),e}function rce(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=p(t,["timeRangeFilter"]);return r!=null&&m(e,["timeRangeFilter"],r),e}function nce(t,e){const r={},n=p(t,["pageSize"]);e!==void 0&&n!=null&&m(e,["_query","pageSize"],n);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),r}function ice(t,e){const r={},n=p(t,["pageSize"]);e!==void 0&&n!=null&&m(e,["_query","pageSize"],n);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),r}function oce(t){const e={},r=p(t,["config"]);return r!=null&&nce(r,e),e}function ace(t){const e={},r=p(t,["config"]);return r!=null&&ice(r,e),e}function sce(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["nextPageToken"]);n!=null&&m(e,["nextPageToken"],n);const i=p(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["cachedContents"],o)}return e}function lce(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["nextPageToken"]);n!=null&&m(e,["nextPageToken"],n);const i=p(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["cachedContents"],o)}return e}function uce(t){const e={},r=p(t,["mediaResolution"]);r!=null&&m(e,["mediaResolution"],r);const n=p(t,["codeExecutionResult"]);n!=null&&m(e,["codeExecutionResult"],n);const i=p(t,["executableCode"]);i!=null&&m(e,["executableCode"],i);const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],Jue(o));const a=p(t,["functionCall"]);a!=null&&m(e,["functionCall"],Yue(a));const s=p(t,["functionResponse"]);s!=null&&m(e,["functionResponse"],s);const u=p(t,["inlineData"]);u!=null&&m(e,["inlineData"],Fue(u));const c=p(t,["text"]);c!=null&&m(e,["text"],c);const d=p(t,["thought"]);d!=null&&m(e,["thought"],d);const f=p(t,["thoughtSignature"]);f!=null&&m(e,["thoughtSignature"],f);const h=p(t,["videoMetadata"]);return h!=null&&m(e,["videoMetadata"],h),e}function cce(t){const e={},r=p(t,["functionCallingConfig"]);r!=null&&m(e,["functionCallingConfig"],Xue(r));const n=p(t,["retrievalConfig"]);return n!=null&&m(e,["retrievalConfig"],n),e}function dce(t){const e={},r=p(t,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>f)),m(e,["functionDeclarations"],d)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["googleSearchRetrieval"]);n!=null&&m(e,["googleSearchRetrieval"],n);const i=p(t,["computerUse"]);i!=null&&m(e,["computerUse"],i);const o=p(t,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const a=p(t,["codeExecution"]);if(a!=null&&m(e,["codeExecution"],a),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=p(t,["googleMaps"]);s!=null&&m(e,["googleMaps"],tce(s));const u=p(t,["googleSearch"]);u!=null&&m(e,["googleSearch"],rce(u));const c=p(t,["urlContext"]);return c!=null&&m(e,["urlContext"],c),e}function fce(t){const e={},r=p(t,["functionDeclarations"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(h=>Que(h))),m(e,["functionDeclarations"],f)}const n=p(t,["retrieval"]);n!=null&&m(e,["retrieval"],n);const i=p(t,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=p(t,["computerUse"]);if(o!=null&&m(e,["computerUse"],o),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=p(t,["codeExecution"]);a!=null&&m(e,["codeExecution"],a);const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],s);const u=p(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],u);const c=p(t,["googleSearch"]);c!=null&&m(e,["googleSearch"],c);const d=p(t,["urlContext"]);return d!=null&&m(e,["urlContext"],d),e}function hce(t,e){const r={},n=p(t,["ttl"]);e!==void 0&&n!=null&&m(e,["ttl"],n);const i=p(t,["expireTime"]);return e!==void 0&&i!=null&&m(e,["expireTime"],i),r}function pce(t,e){const r={},n=p(t,["ttl"]);e!==void 0&&n!=null&&m(e,["ttl"],n);const i=p(t,["expireTime"]);return e!==void 0&&i!=null&&m(e,["expireTime"],i),r}function mce(t,e){const r={},n=p(e,["name"]);n!=null&&m(r,["_url","name"],vi(t,n));const i=p(e,["config"]);return i!=null&&hce(i,r),r}function gce(t,e){const r={},n=p(e,["name"]);n!=null&&m(r,["_url","name"],vi(t,n));const i=p(e,["config"]);return i!=null&&pce(i,r),r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yce extends yi{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Yo(ci.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(r),r)}async create(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=Gue(this.apiClient,e);return s=xe("cachedContents",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),a.then(d=>d)}else{const c=Vue(this.apiClient,e);return s=xe("cachedContents",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>d)}}async get(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=ece(this.apiClient,e);return s=xe("{name}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),a.then(d=>d)}else{const c=Zue(this.apiClient,e);return s=xe("{name}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>d)}}async delete(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=zue(this.apiClient,e);return s=xe("{name}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=Kue(d),h=new gk;return Object.assign(h,f),h})}else{const c=Hue(this.apiClient,e);return s=xe("{name}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=Wue(d),h=new gk;return Object.assign(h,f),h})}}async update(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=gce(this.apiClient,e);return s=xe("{name}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),a.then(d=>d)}else{const c=mce(this.apiClient,e);return s=xe("{name}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>d)}}async listInternal(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=ace(e);return s=xe("cachedContents",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=lce(d),h=new yk;return Object.assign(h,f),h})}else{const c=oce(e);return s=xe("cachedContents",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=sce(d),h=new yk;return Object.assign(h,f),h})}}}function ch(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Nk(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Me(t){return this instanceof Me?(this.v=t,this):new Me(t)}function _n(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(g){return function(b){return Promise.resolve(b).then(g,f)}}function s(g,b){n[g]&&(i[g]=function(v){return new Promise(function(y,x){o.push([g,v,y,x])>1||u(g,v)})},b&&(i[g]=b(i[g])))}function u(g,b){try{c(n[g](b))}catch(v){h(o[0][3],v)}}function c(g){g.value instanceof Me?Promise.resolve(g.value.v).then(d,f):h(o[0][2],g)}function d(g){u("next",g)}function f(g){u("throw",g)}function h(g,b){g(b),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Sn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Nk=="function"?Nk(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(a){return new Promise(function(s,u){a=t[o](a),i(s,u,a.done,a.value)})}}function i(o,a,s,u){Promise.resolve(u).then(function(c){o({value:c,done:s})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vce(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return r===void 0?!1:VI(r)}function VI(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function xce(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Ek(t){if(t===void 0||t.length===0)return[];const e=[],r=t.length;let n=0;for(;n<r;)if(t[n].role==="user")e.push(t[n]),n++;else{const i=[];let o=!0;for(;n<r&&t[n].role==="model";)i.push(t[n]),o&&!VI(t[n])&&(o=!1),n++;o?e.push(...i):e.pop()}return e}class bce{constructor(e,r){this.modelsModule=e,this.apiClient=r}create(e){return new wce(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class wce{constructor(e,r,n,i={},o=[]){this.apiClient=e,this.modelsModule=r,this.model=n,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),xce(o)}async sendMessage(e){var r;await this.sendPromise;const n=ir(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var o,a,s;const u=await i,c=(a=(o=u.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content,d=u.automaticFunctionCallingHistory,f=this.getHistory(!0).length;let h=[];d!=null&&(h=(s=d.slice(f))!==null&&s!==void 0?s:[]);const g=c?[c]:[];this.recordHistory(n,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var r;await this.sendPromise;const n=ir(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,n)}getHistory(e=!1){const r=e?Ek(this.history):this.history;return structuredClone(r)}processStreamResponse(e,r){return _n(this,arguments,function*(){var i,o,a,s,u,c;const d=[];try{for(var f=!0,h=Sn(e),g;g=yield Me(h.next()),i=g.done,!i;f=!0){s=g.value,f=!1;const b=s;if(vce(b)){const v=(c=(u=b.candidates)===null||u===void 0?void 0:u[0])===null||c===void 0?void 0:c.content;v!==void 0&&d.push(v)}yield yield Me(b)}}catch(b){o={error:b}}finally{try{!f&&!i&&(a=h.return)&&(yield Me(a.call(h)))}finally{if(o)throw o.error}}this.recordHistory(r,d)})}recordHistory(e,r,n){let i=[];r.length>0&&r.every(o=>o.role!==void 0)?i=r:i.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...Ek(n)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cp extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Cp.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _ce(t){const e={},r=p(t,["file"]);return r!=null&&m(e,["file"],r),e}function Sce(t){const e={},r=p(t,["sdkHttpResponse"]);return r!=null&&m(e,["sdkHttpResponse"],r),e}function Nce(t){const e={},r=p(t,["name"]);return r!=null&&m(e,["_url","file"],$I(r)),e}function Ece(t){const e={},r=p(t,["sdkHttpResponse"]);return r!=null&&m(e,["sdkHttpResponse"],r),e}function kce(t){const e={},r=p(t,["name"]);return r!=null&&m(e,["_url","file"],$I(r)),e}function Tce(t,e){const r={},n=p(t,["pageSize"]);e!==void 0&&n!=null&&m(e,["_query","pageSize"],n);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),r}function Cce(t){const e={},r=p(t,["config"]);return r!=null&&Tce(r,e),e}function Ace(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["nextPageToken"]);n!=null&&m(e,["nextPageToken"],n);const i=p(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jce extends yi{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Yo(ci.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(r),r)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(r=>r)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Cce(e);return o=xe("files",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),i.then(u=>{const c=Ace(u),d=new Rle;return Object.assign(d,c),d})}}async createInternal(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=_ce(e);return o=xe("upload/v1beta/files",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{const c=Sce(u),d=new Mle;return Object.assign(d,c),d})}}async get(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=kce(e);return o=xe("files/{file}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Nce(e);return o=xe("files/{file}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),i.then(u=>{const c=Ece(u),d=new $le;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _d(t){const e={},r=p(t,["data"]);if(r!=null&&m(e,["data"],r),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["mimeType"]);return n!=null&&m(e,["mimeType"],n),e}function Pce(t){const e={},r=p(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Wce(o))),m(e,["parts"],i)}const n=p(t,["role"]);return n!=null&&m(e,["role"],n),e}function Ice(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const n=p(t,["mimeType"]);return n!=null&&m(e,["mimeType"],n),e}function Oce(t){const e={},r=p(t,["id"]);r!=null&&m(e,["id"],r);const n=p(t,["args"]);n!=null&&m(e,["args"],n);const i=p(t,["name"]);if(i!=null&&m(e,["name"],i),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Rce(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=p(t,["description"]);r!=null&&m(e,["description"],r);const n=p(t,["name"]);n!=null&&m(e,["name"],n);const i=p(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const a=p(t,["response"]);a!=null&&m(e,["response"],a);const s=p(t,["responseJsonSchema"]);return s!=null&&m(e,["responseJsonSchema"],s),e}function Mce(t){const e={},r=p(t,["modelSelectionConfig"]);r!=null&&m(e,["modelConfig"],r);const n=p(t,["responseJsonSchema"]);n!=null&&m(e,["responseJsonSchema"],n);const i=p(t,["audioTimestamp"]);i!=null&&m(e,["audioTimestamp"],i);const o=p(t,["candidateCount"]);o!=null&&m(e,["candidateCount"],o);const a=p(t,["enableAffectiveDialog"]);a!=null&&m(e,["enableAffectiveDialog"],a);const s=p(t,["frequencyPenalty"]);s!=null&&m(e,["frequencyPenalty"],s);const u=p(t,["logprobs"]);u!=null&&m(e,["logprobs"],u);const c=p(t,["maxOutputTokens"]);c!=null&&m(e,["maxOutputTokens"],c);const d=p(t,["mediaResolution"]);d!=null&&m(e,["mediaResolution"],d);const f=p(t,["presencePenalty"]);f!=null&&m(e,["presencePenalty"],f);const h=p(t,["responseLogprobs"]);h!=null&&m(e,["responseLogprobs"],h);const g=p(t,["responseMimeType"]);g!=null&&m(e,["responseMimeType"],g);const b=p(t,["responseModalities"]);b!=null&&m(e,["responseModalities"],b);const v=p(t,["responseSchema"]);v!=null&&m(e,["responseSchema"],v);const y=p(t,["routingConfig"]);y!=null&&m(e,["routingConfig"],y);const x=p(t,["seed"]);x!=null&&m(e,["seed"],x);const _=p(t,["speechConfig"]);_!=null&&m(e,["speechConfig"],_);const w=p(t,["stopSequences"]);w!=null&&m(e,["stopSequences"],w);const E=p(t,["temperature"]);E!=null&&m(e,["temperature"],E);const S=p(t,["thinkingConfig"]);S!=null&&m(e,["thinkingConfig"],S);const N=p(t,["topK"]);N!=null&&m(e,["topK"],N);const k=p(t,["topP"]);if(k!=null&&m(e,["topP"],k),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function $ce(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=p(t,["enableWidget"]);return r!=null&&m(e,["enableWidget"],r),e}function Dce(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=p(t,["timeRangeFilter"]);return r!=null&&m(e,["timeRangeFilter"],r),e}function Lce(t,e){const r={},n=p(t,["generationConfig"]);e!==void 0&&n!=null&&m(e,["setup","generationConfig"],n);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const a=p(t,["topP"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topP"],a);const s=p(t,["topK"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topK"],s);const u=p(t,["maxOutputTokens"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","maxOutputTokens"],u);const c=p(t,["mediaResolution"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","mediaResolution"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","seed"],d);const f=p(t,["speechConfig"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","speechConfig"],fb(f));const h=p(t,["thinkingConfig"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","thinkingConfig"],h);const g=p(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],g);const b=p(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],Pce(ir(b)));const v=p(t,["tools"]);if(e!==void 0&&v!=null){let N=Ws(v);Array.isArray(N)&&(N=N.map(k=>Jce(zs(k)))),m(e,["setup","tools"],N)}const y=p(t,["sessionResumption"]);e!==void 0&&y!=null&&m(e,["setup","sessionResumption"],Kce(y));const x=p(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&m(e,["setup","inputAudioTranscription"],x);const _=p(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&m(e,["setup","outputAudioTranscription"],_);const w=p(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&m(e,["setup","realtimeInputConfig"],w);const E=p(t,["contextWindowCompression"]);e!==void 0&&E!=null&&m(e,["setup","contextWindowCompression"],E);const S=p(t,["proactivity"]);if(e!==void 0&&S!=null&&m(e,["setup","proactivity"],S),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return r}function Uce(t,e){const r={},n=p(t,["generationConfig"]);e!==void 0&&n!=null&&m(e,["setup","generationConfig"],Mce(n));const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const a=p(t,["topP"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topP"],a);const s=p(t,["topK"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topK"],s);const u=p(t,["maxOutputTokens"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","maxOutputTokens"],u);const c=p(t,["mediaResolution"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","mediaResolution"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","seed"],d);const f=p(t,["speechConfig"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","speechConfig"],fb(f));const h=p(t,["thinkingConfig"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","thinkingConfig"],h);const g=p(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],g);const b=p(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],ir(b));const v=p(t,["tools"]);if(e!==void 0&&v!=null){let k=Ws(v);Array.isArray(k)&&(k=k.map(A=>Yce(zs(A)))),m(e,["setup","tools"],k)}const y=p(t,["sessionResumption"]);e!==void 0&&y!=null&&m(e,["setup","sessionResumption"],y);const x=p(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&m(e,["setup","inputAudioTranscription"],x);const _=p(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&m(e,["setup","outputAudioTranscription"],_);const w=p(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&m(e,["setup","realtimeInputConfig"],w);const E=p(t,["contextWindowCompression"]);e!==void 0&&E!=null&&m(e,["setup","contextWindowCompression"],E);const S=p(t,["proactivity"]);e!==void 0&&S!=null&&m(e,["setup","proactivity"],S);const N=p(t,["explicitVadSignal"]);return e!==void 0&&N!=null&&m(e,["setup","explicitVadSignal"],N),r}function Fce(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["setup","model"],ze(t,n));const i=p(e,["config"]);return i!=null&&m(r,["config"],Lce(i,r)),r}function Bce(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["setup","model"],ze(t,n));const i=p(e,["config"]);return i!=null&&m(r,["config"],Uce(i,r)),r}function qce(t){const e={},r=p(t,["musicGenerationConfig"]);return r!=null&&m(e,["musicGenerationConfig"],r),e}function Vce(t){const e={},r=p(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>i)),m(e,["weightedPrompts"],n)}return e}function Gce(t){const e={},r=p(t,["media"]);if(r!=null){let c=PI(r);Array.isArray(c)&&(c=c.map(d=>_d(d))),m(e,["mediaChunks"],c)}const n=p(t,["audio"]);n!=null&&m(e,["audio"],_d(OI(n)));const i=p(t,["audioStreamEnd"]);i!=null&&m(e,["audioStreamEnd"],i);const o=p(t,["video"]);o!=null&&m(e,["video"],_d(II(o)));const a=p(t,["text"]);a!=null&&m(e,["text"],a);const s=p(t,["activityStart"]);s!=null&&m(e,["activityStart"],s);const u=p(t,["activityEnd"]);return u!=null&&m(e,["activityEnd"],u),e}function Hce(t){const e={},r=p(t,["media"]);if(r!=null){let c=PI(r);Array.isArray(c)&&(c=c.map(d=>d)),m(e,["mediaChunks"],c)}const n=p(t,["audio"]);n!=null&&m(e,["audio"],OI(n));const i=p(t,["audioStreamEnd"]);i!=null&&m(e,["audioStreamEnd"],i);const o=p(t,["video"]);o!=null&&m(e,["video"],II(o));const a=p(t,["text"]);a!=null&&m(e,["text"],a);const s=p(t,["activityStart"]);s!=null&&m(e,["activityStart"],s);const u=p(t,["activityEnd"]);return u!=null&&m(e,["activityEnd"],u),e}function zce(t){const e={},r=p(t,["setupComplete"]);r!=null&&m(e,["setupComplete"],r);const n=p(t,["serverContent"]);n!=null&&m(e,["serverContent"],n);const i=p(t,["toolCall"]);i!=null&&m(e,["toolCall"],i);const o=p(t,["toolCallCancellation"]);o!=null&&m(e,["toolCallCancellation"],o);const a=p(t,["usageMetadata"]);a!=null&&m(e,["usageMetadata"],Xce(a));const s=p(t,["goAway"]);s!=null&&m(e,["goAway"],s);const u=p(t,["sessionResumptionUpdate"]);u!=null&&m(e,["sessionResumptionUpdate"],u);const c=p(t,["voiceActivityDetectionSignal"]);return c!=null&&m(e,["voiceActivityDetectionSignal"],c),e}function Wce(t){const e={},r=p(t,["mediaResolution"]);r!=null&&m(e,["mediaResolution"],r);const n=p(t,["codeExecutionResult"]);n!=null&&m(e,["codeExecutionResult"],n);const i=p(t,["executableCode"]);i!=null&&m(e,["executableCode"],i);const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],Ice(o));const a=p(t,["functionCall"]);a!=null&&m(e,["functionCall"],Oce(a));const s=p(t,["functionResponse"]);s!=null&&m(e,["functionResponse"],s);const u=p(t,["inlineData"]);u!=null&&m(e,["inlineData"],_d(u));const c=p(t,["text"]);c!=null&&m(e,["text"],c);const d=p(t,["thought"]);d!=null&&m(e,["thought"],d);const f=p(t,["thoughtSignature"]);f!=null&&m(e,["thoughtSignature"],f);const h=p(t,["videoMetadata"]);return h!=null&&m(e,["videoMetadata"],h),e}function Kce(t){const e={},r=p(t,["handle"]);if(r!=null&&m(e,["handle"],r),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Jce(t){const e={},r=p(t,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>f)),m(e,["functionDeclarations"],d)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["googleSearchRetrieval"]);n!=null&&m(e,["googleSearchRetrieval"],n);const i=p(t,["computerUse"]);i!=null&&m(e,["computerUse"],i);const o=p(t,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const a=p(t,["codeExecution"]);if(a!=null&&m(e,["codeExecution"],a),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=p(t,["googleMaps"]);s!=null&&m(e,["googleMaps"],$ce(s));const u=p(t,["googleSearch"]);u!=null&&m(e,["googleSearch"],Dce(u));const c=p(t,["urlContext"]);return c!=null&&m(e,["urlContext"],c),e}function Yce(t){const e={},r=p(t,["functionDeclarations"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(h=>Rce(h))),m(e,["functionDeclarations"],f)}const n=p(t,["retrieval"]);n!=null&&m(e,["retrieval"],n);const i=p(t,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=p(t,["computerUse"]);if(o!=null&&m(e,["computerUse"],o),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=p(t,["codeExecution"]);a!=null&&m(e,["codeExecution"],a);const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],s);const u=p(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],u);const c=p(t,["googleSearch"]);c!=null&&m(e,["googleSearch"],c);const d=p(t,["urlContext"]);return d!=null&&m(e,["urlContext"],d),e}function Xce(t){const e={},r=p(t,["promptTokenCount"]);r!=null&&m(e,["promptTokenCount"],r);const n=p(t,["cachedContentTokenCount"]);n!=null&&m(e,["cachedContentTokenCount"],n);const i=p(t,["candidatesTokenCount"]);i!=null&&m(e,["responseTokenCount"],i);const o=p(t,["toolUsePromptTokenCount"]);o!=null&&m(e,["toolUsePromptTokenCount"],o);const a=p(t,["thoughtsTokenCount"]);a!=null&&m(e,["thoughtsTokenCount"],a);const s=p(t,["totalTokenCount"]);s!=null&&m(e,["totalTokenCount"],s);const u=p(t,["promptTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(b=>b)),m(e,["promptTokensDetails"],g)}const c=p(t,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(b=>b)),m(e,["cacheTokensDetails"],g)}const d=p(t,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(b=>b)),m(e,["responseTokensDetails"],g)}const f=p(t,["toolUsePromptTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(b=>b)),m(e,["toolUsePromptTokensDetails"],g)}const h=p(t,["trafficType"]);return h!=null&&m(e,["trafficType"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qce(t){const e={},r=p(t,["data"]);if(r!=null&&m(e,["data"],r),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["mimeType"]);return n!=null&&m(e,["mimeType"],n),e}function Zce(t){const e={},r=p(t,["content"]);r!=null&&m(e,["content"],r);const n=p(t,["citationMetadata"]);n!=null&&m(e,["citationMetadata"],ede(n));const i=p(t,["tokenCount"]);i!=null&&m(e,["tokenCount"],i);const o=p(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const a=p(t,["avgLogprobs"]);a!=null&&m(e,["avgLogprobs"],a);const s=p(t,["groundingMetadata"]);s!=null&&m(e,["groundingMetadata"],s);const u=p(t,["index"]);u!=null&&m(e,["index"],u);const c=p(t,["logprobsResult"]);c!=null&&m(e,["logprobsResult"],c);const d=p(t,["safetyRatings"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>g)),m(e,["safetyRatings"],h)}const f=p(t,["urlContextMetadata"]);return f!=null&&m(e,["urlContextMetadata"],f),e}function ede(t){const e={},r=p(t,["citationSources"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>i)),m(e,["citations"],n)}return e}function tde(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["contents"]);if(i!=null){let o=Xr(i);Array.isArray(o)&&(o=o.map(a=>a)),m(r,["contents"],o)}return r}function rde(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["tokensInfo"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["tokensInfo"],i)}return e}function nde(t){const e={},r=p(t,["values"]);r!=null&&m(e,["values"],r);const n=p(t,["statistics"]);return n!=null&&m(e,["statistics"],ide(n)),e}function ide(t){const e={},r=p(t,["truncated"]);r!=null&&m(e,["truncated"],r);const n=p(t,["token_count"]);return n!=null&&m(e,["tokenCount"],n),e}function Ap(t){const e={},r=p(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>hfe(o))),m(e,["parts"],i)}const n=p(t,["role"]);return n!=null&&m(e,["role"],n),e}function ode(t){const e={},r=p(t,["controlType"]);r!=null&&m(e,["controlType"],r);const n=p(t,["enableControlImageComputation"]);return n!=null&&m(e,["computeControl"],n),e}function ade(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function sde(t,e){const r={},n=p(t,["systemInstruction"]);e!==void 0&&n!=null&&m(e,["systemInstruction"],ir(n));const i=p(t,["tools"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>WI(s))),m(e,["tools"],a)}const o=p(t,["generationConfig"]);return e!==void 0&&o!=null&&m(e,["generationConfig"],Qde(o)),r}function lde(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["contents"]);if(i!=null){let a=Xr(i);Array.isArray(a)&&(a=a.map(s=>Ap(s))),m(r,["contents"],a)}const o=p(e,["config"]);return o!=null&&ade(o),r}function ude(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["contents"]);if(i!=null){let a=Xr(i);Array.isArray(a)&&(a=a.map(s=>s)),m(r,["contents"],a)}const o=p(e,["config"]);return o!=null&&sde(o,r),r}function cde(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["totalTokens"]);n!=null&&m(e,["totalTokens"],n);const i=p(t,["cachedContentTokenCount"]);return i!=null&&m(e,["cachedContentTokenCount"],i),e}function dde(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["totalTokens"]);return n!=null&&m(e,["totalTokens"],n),e}function fde(t,e){const r={},n=p(e,["model"]);return n!=null&&m(r,["_url","name"],ze(t,n)),r}function hde(t,e){const r={},n=p(e,["model"]);return n!=null&&m(r,["_url","name"],ze(t,n)),r}function pde(t){const e={},r=p(t,["sdkHttpResponse"]);return r!=null&&m(e,["sdkHttpResponse"],r),e}function mde(t){const e={},r=p(t,["sdkHttpResponse"]);return r!=null&&m(e,["sdkHttpResponse"],r),e}function gde(t,e){const r={},n=p(t,["outputGcsUri"]);e!==void 0&&n!=null&&m(e,["parameters","storageUri"],n);const i=p(t,["negativePrompt"]);e!==void 0&&i!=null&&m(e,["parameters","negativePrompt"],i);const o=p(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const a=p(t,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const s=p(t,["guidanceScale"]);e!==void 0&&s!=null&&m(e,["parameters","guidanceScale"],s);const u=p(t,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const c=p(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&m(e,["parameters","safetySetting"],c);const d=p(t,["personGeneration"]);e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d);const f=p(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&m(e,["parameters","includeSafetyAttributes"],f);const h=p(t,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const g=p(t,["language"]);e!==void 0&&g!=null&&m(e,["parameters","language"],g);const b=p(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const v=p(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&m(e,["parameters","outputOptions","compressionQuality"],v);const y=p(t,["addWatermark"]);e!==void 0&&y!=null&&m(e,["parameters","addWatermark"],y);const x=p(t,["labels"]);e!==void 0&&x!=null&&m(e,["labels"],x);const _=p(t,["editMode"]);e!==void 0&&_!=null&&m(e,["parameters","editMode"],_);const w=p(t,["baseSteps"]);return e!==void 0&&w!=null&&m(e,["parameters","editConfig","baseSteps"],w),r}function yde(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["prompt"]);i!=null&&m(r,["instances[0]","prompt"],i);const o=p(e,["referenceImages"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>xfe(u))),m(r,["instances[0]","referenceImages"],s)}const a=p(e,["config"]);return a!=null&&gde(a,r),r}function vde(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>jp(o))),m(e,["generatedImages"],i)}return e}function xde(t,e){const r={},n=p(t,["taskType"]);e!==void 0&&n!=null&&m(e,["requests[]","taskType"],n);const i=p(t,["title"]);e!==void 0&&i!=null&&m(e,["requests[]","title"],i);const o=p(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&m(e,["requests[]","outputDimensionality"],o),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function bde(t,e){const r={},n=p(t,["taskType"]);e!==void 0&&n!=null&&m(e,["instances[]","task_type"],n);const i=p(t,["title"]);e!==void 0&&i!=null&&m(e,["instances[]","title"],i);const o=p(t,["outputDimensionality"]);e!==void 0&&o!=null&&m(e,["parameters","outputDimensionality"],o);const a=p(t,["mimeType"]);e!==void 0&&a!=null&&m(e,["instances[]","mimeType"],a);const s=p(t,["autoTruncate"]);return e!==void 0&&s!=null&&m(e,["parameters","autoTruncate"],s),r}function wde(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["contents"]);if(i!=null){let s=ub(t,i);Array.isArray(s)&&(s=s.map(u=>u)),m(r,["requests[]","content"],s)}const o=p(e,["config"]);o!=null&&xde(o,r);const a=p(e,["model"]);return a!==void 0&&m(r,["requests[]","model"],ze(t,a)),r}function _de(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["contents"]);if(i!=null){let a=ub(t,i);Array.isArray(a)&&(a=a.map(s=>s)),m(r,["instances[]","content"],a)}const o=p(e,["config"]);return o!=null&&bde(o,r),r}function Sde(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["embeddings"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["embeddings"],o)}const i=p(t,["metadata"]);return i!=null&&m(e,["metadata"],i),e}function Nde(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["predictions[]","embeddings"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>nde(a))),m(e,["embeddings"],o)}const i=p(t,["metadata"]);return i!=null&&m(e,["metadata"],i),e}function Ede(t){const e={},r=p(t,["endpoint"]);r!=null&&m(e,["name"],r);const n=p(t,["deployedModelId"]);return n!=null&&m(e,["deployedModelId"],n),e}function kde(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const n=p(t,["mimeType"]);return n!=null&&m(e,["mimeType"],n),e}function Tde(t){const e={},r=p(t,["id"]);r!=null&&m(e,["id"],r);const n=p(t,["args"]);n!=null&&m(e,["args"],n);const i=p(t,["name"]);if(i!=null&&m(e,["name"],i),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Cde(t){const e={},r=p(t,["mode"]);r!=null&&m(e,["mode"],r);const n=p(t,["allowedFunctionNames"]);if(n!=null&&m(e,["allowedFunctionNames"],n),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Ade(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=p(t,["description"]);r!=null&&m(e,["description"],r);const n=p(t,["name"]);n!=null&&m(e,["name"],n);const i=p(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=p(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const a=p(t,["response"]);a!=null&&m(e,["response"],a);const s=p(t,["responseJsonSchema"]);return s!=null&&m(e,["responseJsonSchema"],s),e}function jde(t,e,r){const n={},i=p(e,["systemInstruction"]);r!==void 0&&i!=null&&m(r,["systemInstruction"],Ap(ir(i)));const o=p(e,["temperature"]);o!=null&&m(n,["temperature"],o);const a=p(e,["topP"]);a!=null&&m(n,["topP"],a);const s=p(e,["topK"]);s!=null&&m(n,["topK"],s);const u=p(e,["candidateCount"]);u!=null&&m(n,["candidateCount"],u);const c=p(e,["maxOutputTokens"]);c!=null&&m(n,["maxOutputTokens"],c);const d=p(e,["stopSequences"]);d!=null&&m(n,["stopSequences"],d);const f=p(e,["responseLogprobs"]);f!=null&&m(n,["responseLogprobs"],f);const h=p(e,["logprobs"]);h!=null&&m(n,["logprobs"],h);const g=p(e,["presencePenalty"]);g!=null&&m(n,["presencePenalty"],g);const b=p(e,["frequencyPenalty"]);b!=null&&m(n,["frequencyPenalty"],b);const v=p(e,["seed"]);v!=null&&m(n,["seed"],v);const y=p(e,["responseMimeType"]);y!=null&&m(n,["responseMimeType"],y);const x=p(e,["responseSchema"]);x!=null&&m(n,["responseSchema"],cb(x));const _=p(e,["responseJsonSchema"]);if(_!=null&&m(n,["responseJsonSchema"],_),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=p(e,["safetySettings"]);if(r!==void 0&&w!=null){let M=w;Array.isArray(M)&&(M=M.map(O=>bfe(O))),m(r,["safetySettings"],M)}const E=p(e,["tools"]);if(r!==void 0&&E!=null){let M=Ws(E);Array.isArray(M)&&(M=M.map(O=>Tfe(zs(O)))),m(r,["tools"],M)}const S=p(e,["toolConfig"]);if(r!==void 0&&S!=null&&m(r,["toolConfig"],kfe(S)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=p(e,["cachedContent"]);r!==void 0&&N!=null&&m(r,["cachedContent"],vi(t,N));const k=p(e,["responseModalities"]);k!=null&&m(n,["responseModalities"],k);const A=p(e,["mediaResolution"]);A!=null&&m(n,["mediaResolution"],A);const C=p(e,["speechConfig"]);if(C!=null&&m(n,["speechConfig"],db(C)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=p(e,["thinkingConfig"]);R!=null&&m(n,["thinkingConfig"],R);const $=p(e,["imageConfig"]);$!=null&&m(n,["imageConfig"],nfe($));const L=p(e,["enableEnhancedCivicAnswers"]);return L!=null&&m(n,["enableEnhancedCivicAnswers"],L),n}function Pde(t,e,r){const n={},i=p(e,["systemInstruction"]);r!==void 0&&i!=null&&m(r,["systemInstruction"],ir(i));const o=p(e,["temperature"]);o!=null&&m(n,["temperature"],o);const a=p(e,["topP"]);a!=null&&m(n,["topP"],a);const s=p(e,["topK"]);s!=null&&m(n,["topK"],s);const u=p(e,["candidateCount"]);u!=null&&m(n,["candidateCount"],u);const c=p(e,["maxOutputTokens"]);c!=null&&m(n,["maxOutputTokens"],c);const d=p(e,["stopSequences"]);d!=null&&m(n,["stopSequences"],d);const f=p(e,["responseLogprobs"]);f!=null&&m(n,["responseLogprobs"],f);const h=p(e,["logprobs"]);h!=null&&m(n,["logprobs"],h);const g=p(e,["presencePenalty"]);g!=null&&m(n,["presencePenalty"],g);const b=p(e,["frequencyPenalty"]);b!=null&&m(n,["frequencyPenalty"],b);const v=p(e,["seed"]);v!=null&&m(n,["seed"],v);const y=p(e,["responseMimeType"]);y!=null&&m(n,["responseMimeType"],y);const x=p(e,["responseSchema"]);x!=null&&m(n,["responseSchema"],cb(x));const _=p(e,["responseJsonSchema"]);_!=null&&m(n,["responseJsonSchema"],_);const w=p(e,["routingConfig"]);w!=null&&m(n,["routingConfig"],w);const E=p(e,["modelSelectionConfig"]);E!=null&&m(n,["modelConfig"],E);const S=p(e,["safetySettings"]);if(r!==void 0&&S!=null){let D=S;Array.isArray(D)&&(D=D.map(B=>B)),m(r,["safetySettings"],D)}const N=p(e,["tools"]);if(r!==void 0&&N!=null){let D=Ws(N);Array.isArray(D)&&(D=D.map(B=>WI(zs(B)))),m(r,["tools"],D)}const k=p(e,["toolConfig"]);r!==void 0&&k!=null&&m(r,["toolConfig"],k);const A=p(e,["labels"]);r!==void 0&&A!=null&&m(r,["labels"],A);const C=p(e,["cachedContent"]);r!==void 0&&C!=null&&m(r,["cachedContent"],vi(t,C));const R=p(e,["responseModalities"]);R!=null&&m(n,["responseModalities"],R);const $=p(e,["mediaResolution"]);$!=null&&m(n,["mediaResolution"],$);const L=p(e,["speechConfig"]);L!=null&&m(n,["speechConfig"],db(L));const M=p(e,["audioTimestamp"]);M!=null&&m(n,["audioTimestamp"],M);const O=p(e,["thinkingConfig"]);O!=null&&m(n,["thinkingConfig"],O);const P=p(e,["imageConfig"]);if(P!=null&&m(n,["imageConfig"],ife(P)),p(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function kk(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["contents"]);if(i!=null){let a=Xr(i);Array.isArray(a)&&(a=a.map(s=>Ap(s))),m(r,["contents"],a)}const o=p(e,["config"]);return o!=null&&m(r,["generationConfig"],jde(t,o,r)),r}function Tk(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["contents"]);if(i!=null){let a=Xr(i);Array.isArray(a)&&(a=a.map(s=>s)),m(r,["contents"],a)}const o=p(e,["config"]);return o!=null&&m(r,["generationConfig"],Pde(t,o,r)),r}function Ck(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(c=>Zce(c))),m(e,["candidates"],u)}const i=p(t,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const o=p(t,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const a=p(t,["responseId"]);a!=null&&m(e,["responseId"],a);const s=p(t,["usageMetadata"]);return s!=null&&m(e,["usageMetadata"],s),e}function Ak(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["candidates"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>d)),m(e,["candidates"],c)}const i=p(t,["createTime"]);i!=null&&m(e,["createTime"],i);const o=p(t,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const a=p(t,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const s=p(t,["responseId"]);s!=null&&m(e,["responseId"],s);const u=p(t,["usageMetadata"]);return u!=null&&m(e,["usageMetadata"],u),e}function Ide(t,e){const r={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=p(t,["numberOfImages"]);e!==void 0&&n!=null&&m(e,["parameters","sampleCount"],n);const i=p(t,["aspectRatio"]);e!==void 0&&i!=null&&m(e,["parameters","aspectRatio"],i);const o=p(t,["guidanceScale"]);if(e!==void 0&&o!=null&&m(e,["parameters","guidanceScale"],o),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=p(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&m(e,["parameters","safetySetting"],a);const s=p(t,["personGeneration"]);e!==void 0&&s!=null&&m(e,["parameters","personGeneration"],s);const u=p(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&m(e,["parameters","includeSafetyAttributes"],u);const c=p(t,["includeRaiReason"]);e!==void 0&&c!=null&&m(e,["parameters","includeRaiReason"],c);const d=p(t,["language"]);e!==void 0&&d!=null&&m(e,["parameters","language"],d);const f=p(t,["outputMimeType"]);e!==void 0&&f!=null&&m(e,["parameters","outputOptions","mimeType"],f);const h=p(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&m(e,["parameters","outputOptions","compressionQuality"],h),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=p(t,["imageSize"]);if(e!==void 0&&g!=null&&m(e,["parameters","sampleImageSize"],g),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function Ode(t,e){const r={},n=p(t,["outputGcsUri"]);e!==void 0&&n!=null&&m(e,["parameters","storageUri"],n);const i=p(t,["negativePrompt"]);e!==void 0&&i!=null&&m(e,["parameters","negativePrompt"],i);const o=p(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const a=p(t,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const s=p(t,["guidanceScale"]);e!==void 0&&s!=null&&m(e,["parameters","guidanceScale"],s);const u=p(t,["seed"]);e!==void 0&&u!=null&&m(e,["parameters","seed"],u);const c=p(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&m(e,["parameters","safetySetting"],c);const d=p(t,["personGeneration"]);e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d);const f=p(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&m(e,["parameters","includeSafetyAttributes"],f);const h=p(t,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const g=p(t,["language"]);e!==void 0&&g!=null&&m(e,["parameters","language"],g);const b=p(t,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const v=p(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&m(e,["parameters","outputOptions","compressionQuality"],v);const y=p(t,["addWatermark"]);e!==void 0&&y!=null&&m(e,["parameters","addWatermark"],y);const x=p(t,["labels"]);e!==void 0&&x!=null&&m(e,["labels"],x);const _=p(t,["imageSize"]);e!==void 0&&_!=null&&m(e,["parameters","sampleImageSize"],_);const w=p(t,["enhancePrompt"]);return e!==void 0&&w!=null&&m(e,["parameters","enhancePrompt"],w),r}function Rde(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["prompt"]);i!=null&&m(r,["instances[0]","prompt"],i);const o=p(e,["config"]);return o!=null&&Ide(o,r),r}function Mde(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["prompt"]);i!=null&&m(r,["instances[0]","prompt"],i);const o=p(e,["config"]);return o!=null&&Ode(o,r),r}function $de(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Kde(a))),m(e,["generatedImages"],o)}const i=p(t,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],HI(i)),e}function Dde(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>jp(a))),m(e,["generatedImages"],o)}const i=p(t,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],zI(i)),e}function Lde(t,e){const r={},n=p(t,["numberOfVideos"]);if(e!==void 0&&n!=null&&m(e,["parameters","sampleCount"],n),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=p(t,["durationSeconds"]);if(e!==void 0&&i!=null&&m(e,["parameters","durationSeconds"],i),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=p(t,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const a=p(t,["resolution"]);e!==void 0&&a!=null&&m(e,["parameters","resolution"],a);const s=p(t,["personGeneration"]);if(e!==void 0&&s!=null&&m(e,["parameters","personGeneration"],s),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=p(t,["negativePrompt"]);e!==void 0&&u!=null&&m(e,["parameters","negativePrompt"],u);const c=p(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&m(e,["parameters","enhancePrompt"],c),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const d=p(t,["lastFrame"]);e!==void 0&&d!=null&&m(e,["instances[0]","lastFrame"],Pp(d));const f=p(t,["referenceImages"]);if(e!==void 0&&f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>Ffe(g))),m(e,["instances[0]","referenceImages"],h)}if(p(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function Ude(t,e){const r={},n=p(t,["numberOfVideos"]);e!==void 0&&n!=null&&m(e,["parameters","sampleCount"],n);const i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=p(t,["fps"]);e!==void 0&&o!=null&&m(e,["parameters","fps"],o);const a=p(t,["durationSeconds"]);e!==void 0&&a!=null&&m(e,["parameters","durationSeconds"],a);const s=p(t,["seed"]);e!==void 0&&s!=null&&m(e,["parameters","seed"],s);const u=p(t,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const c=p(t,["resolution"]);e!==void 0&&c!=null&&m(e,["parameters","resolution"],c);const d=p(t,["personGeneration"]);e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d);const f=p(t,["pubsubTopic"]);e!==void 0&&f!=null&&m(e,["parameters","pubsubTopic"],f);const h=p(t,["negativePrompt"]);e!==void 0&&h!=null&&m(e,["parameters","negativePrompt"],h);const g=p(t,["enhancePrompt"]);e!==void 0&&g!=null&&m(e,["parameters","enhancePrompt"],g);const b=p(t,["generateAudio"]);e!==void 0&&b!=null&&m(e,["parameters","generateAudio"],b);const v=p(t,["lastFrame"]);e!==void 0&&v!=null&&m(e,["instances[0]","lastFrame"],Tn(v));const y=p(t,["referenceImages"]);if(e!==void 0&&y!=null){let w=y;Array.isArray(w)&&(w=w.map(E=>Bfe(E))),m(e,["instances[0]","referenceImages"],w)}const x=p(t,["mask"]);e!==void 0&&x!=null&&m(e,["instances[0]","mask"],Ufe(x));const _=p(t,["compressionQuality"]);return e!==void 0&&_!=null&&m(e,["parameters","compressionQuality"],_),r}function Fde(t){const e={},r=p(t,["name"]);r!=null&&m(e,["name"],r);const n=p(t,["metadata"]);n!=null&&m(e,["metadata"],n);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);o!=null&&m(e,["error"],o);const a=p(t,["response","generateVideoResponse"]);return a!=null&&m(e,["response"],Gde(a)),e}function Bde(t){const e={},r=p(t,["name"]);r!=null&&m(e,["name"],r);const n=p(t,["metadata"]);n!=null&&m(e,["metadata"],n);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);o!=null&&m(e,["error"],o);const a=p(t,["response"]);return a!=null&&m(e,["response"],Hde(a)),e}function qde(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["prompt"]);i!=null&&m(r,["instances[0]","prompt"],i);const o=p(e,["image"]);o!=null&&m(r,["instances[0]","image"],Pp(o));const a=p(e,["video"]);a!=null&&m(r,["instances[0]","video"],KI(a));const s=p(e,["source"]);s!=null&&zde(s,r);const u=p(e,["config"]);return u!=null&&Lde(u,r),r}function Vde(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["prompt"]);i!=null&&m(r,["instances[0]","prompt"],i);const o=p(e,["image"]);o!=null&&m(r,["instances[0]","image"],Tn(o));const a=p(e,["video"]);a!=null&&m(r,["instances[0]","video"],JI(a));const s=p(e,["source"]);s!=null&&Wde(s,r);const u=p(e,["config"]);return u!=null&&Ude(u,r),r}function Gde(t){const e={},r=p(t,["generatedSamples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Yde(a))),m(e,["generatedVideos"],o)}const n=p(t,["raiMediaFilteredCount"]);n!=null&&m(e,["raiMediaFilteredCount"],n);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function Hde(t){const e={},r=p(t,["videos"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Xde(a))),m(e,["generatedVideos"],o)}const n=p(t,["raiMediaFilteredCount"]);n!=null&&m(e,["raiMediaFilteredCount"],n);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function zde(t,e){const r={},n=p(t,["prompt"]);e!==void 0&&n!=null&&m(e,["instances[0]","prompt"],n);const i=p(t,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],Pp(i));const o=p(t,["video"]);return e!==void 0&&o!=null&&m(e,["instances[0]","video"],KI(o)),r}function Wde(t,e){const r={},n=p(t,["prompt"]);e!==void 0&&n!=null&&m(e,["instances[0]","prompt"],n);const i=p(t,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],Tn(i));const o=p(t,["video"]);return e!==void 0&&o!=null&&m(e,["instances[0]","video"],JI(o)),r}function Kde(t){const e={},r=p(t,["_self"]);r!=null&&m(e,["image"],ofe(r));const n=p(t,["raiFilteredReason"]);n!=null&&m(e,["raiFilteredReason"],n);const i=p(t,["_self"]);return i!=null&&m(e,["safetyAttributes"],HI(i)),e}function jp(t){const e={},r=p(t,["_self"]);r!=null&&m(e,["image"],GI(r));const n=p(t,["raiFilteredReason"]);n!=null&&m(e,["raiFilteredReason"],n);const i=p(t,["_self"]);i!=null&&m(e,["safetyAttributes"],zI(i));const o=p(t,["prompt"]);return o!=null&&m(e,["enhancedPrompt"],o),e}function Jde(t){const e={},r=p(t,["_self"]);r!=null&&m(e,["mask"],GI(r));const n=p(t,["labels"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["labels"],i)}return e}function Yde(t){const e={},r=p(t,["video"]);return r!=null&&m(e,["video"],Dfe(r)),e}function Xde(t){const e={},r=p(t,["_self"]);return r!=null&&m(e,["video"],Lfe(r)),e}function Qde(t){const e={},r=p(t,["modelSelectionConfig"]);r!=null&&m(e,["modelConfig"],r);const n=p(t,["responseJsonSchema"]);n!=null&&m(e,["responseJsonSchema"],n);const i=p(t,["audioTimestamp"]);i!=null&&m(e,["audioTimestamp"],i);const o=p(t,["candidateCount"]);o!=null&&m(e,["candidateCount"],o);const a=p(t,["enableAffectiveDialog"]);a!=null&&m(e,["enableAffectiveDialog"],a);const s=p(t,["frequencyPenalty"]);s!=null&&m(e,["frequencyPenalty"],s);const u=p(t,["logprobs"]);u!=null&&m(e,["logprobs"],u);const c=p(t,["maxOutputTokens"]);c!=null&&m(e,["maxOutputTokens"],c);const d=p(t,["mediaResolution"]);d!=null&&m(e,["mediaResolution"],d);const f=p(t,["presencePenalty"]);f!=null&&m(e,["presencePenalty"],f);const h=p(t,["responseLogprobs"]);h!=null&&m(e,["responseLogprobs"],h);const g=p(t,["responseMimeType"]);g!=null&&m(e,["responseMimeType"],g);const b=p(t,["responseModalities"]);b!=null&&m(e,["responseModalities"],b);const v=p(t,["responseSchema"]);v!=null&&m(e,["responseSchema"],v);const y=p(t,["routingConfig"]);y!=null&&m(e,["routingConfig"],y);const x=p(t,["seed"]);x!=null&&m(e,["seed"],x);const _=p(t,["speechConfig"]);_!=null&&m(e,["speechConfig"],_);const w=p(t,["stopSequences"]);w!=null&&m(e,["stopSequences"],w);const E=p(t,["temperature"]);E!=null&&m(e,["temperature"],E);const S=p(t,["thinkingConfig"]);S!=null&&m(e,["thinkingConfig"],S);const N=p(t,["topK"]);N!=null&&m(e,["topK"],N);const k=p(t,["topP"]);if(k!=null&&m(e,["topP"],k),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Zde(t,e){const r={},n=p(e,["model"]);return n!=null&&m(r,["_url","name"],ze(t,n)),r}function efe(t,e){const r={},n=p(e,["model"]);return n!=null&&m(r,["_url","name"],ze(t,n)),r}function tfe(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=p(t,["enableWidget"]);return r!=null&&m(e,["enableWidget"],r),e}function rfe(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=p(t,["timeRangeFilter"]);return r!=null&&m(e,["timeRangeFilter"],r),e}function nfe(t){const e={},r=p(t,["aspectRatio"]);r!=null&&m(e,["aspectRatio"],r);const n=p(t,["imageSize"]);if(n!=null&&m(e,["imageSize"],n),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ife(t){const e={},r=p(t,["aspectRatio"]);r!=null&&m(e,["aspectRatio"],r);const n=p(t,["imageSize"]);n!=null&&m(e,["imageSize"],n);const i=p(t,["outputMimeType"]);i!=null&&m(e,["imageOutputOptions","mimeType"],i);const o=p(t,["outputCompressionQuality"]);return o!=null&&m(e,["imageOutputOptions","compressionQuality"],o),e}function ofe(t){const e={},r=p(t,["bytesBase64Encoded"]);r!=null&&m(e,["imageBytes"],to(r));const n=p(t,["mimeType"]);return n!=null&&m(e,["mimeType"],n),e}function GI(t){const e={},r=p(t,["gcsUri"]);r!=null&&m(e,["gcsUri"],r);const n=p(t,["bytesBase64Encoded"]);n!=null&&m(e,["imageBytes"],to(n));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Pp(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=p(t,["imageBytes"]);r!=null&&m(e,["bytesBase64Encoded"],to(r));const n=p(t,["mimeType"]);return n!=null&&m(e,["mimeType"],n),e}function Tn(t){const e={},r=p(t,["gcsUri"]);r!=null&&m(e,["gcsUri"],r);const n=p(t,["imageBytes"]);n!=null&&m(e,["bytesBase64Encoded"],to(n));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function afe(t,e,r){const n={},i=p(e,["pageSize"]);r!==void 0&&i!=null&&m(r,["_query","pageSize"],i);const o=p(e,["pageToken"]);r!==void 0&&o!=null&&m(r,["_query","pageToken"],o);const a=p(e,["filter"]);r!==void 0&&a!=null&&m(r,["_query","filter"],a);const s=p(e,["queryBase"]);return r!==void 0&&s!=null&&m(r,["_url","models_url"],DI(t,s)),n}function sfe(t,e,r){const n={},i=p(e,["pageSize"]);r!==void 0&&i!=null&&m(r,["_query","pageSize"],i);const o=p(e,["pageToken"]);r!==void 0&&o!=null&&m(r,["_query","pageToken"],o);const a=p(e,["filter"]);r!==void 0&&a!=null&&m(r,["_query","filter"],a);const s=p(e,["queryBase"]);return r!==void 0&&s!=null&&m(r,["_url","models_url"],DI(t,s)),n}function lfe(t,e){const r={},n=p(e,["config"]);return n!=null&&afe(t,n,r),r}function ufe(t,e){const r={},n=p(e,["config"]);return n!=null&&sfe(t,n,r),r}function cfe(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["nextPageToken"]);n!=null&&m(e,["nextPageToken"],n);const i=p(t,["_self"]);if(i!=null){let o=LI(i);Array.isArray(o)&&(o=o.map(a=>D0(a))),m(e,["models"],o)}return e}function dfe(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["nextPageToken"]);n!=null&&m(e,["nextPageToken"],n);const i=p(t,["_self"]);if(i!=null){let o=LI(i);Array.isArray(o)&&(o=o.map(a=>L0(a))),m(e,["models"],o)}return e}function ffe(t){const e={},r=p(t,["maskMode"]);r!=null&&m(e,["maskMode"],r);const n=p(t,["segmentationClasses"]);n!=null&&m(e,["maskClasses"],n);const i=p(t,["maskDilation"]);return i!=null&&m(e,["dilation"],i),e}function D0(t){const e={},r=p(t,["name"]);r!=null&&m(e,["name"],r);const n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["version"]);o!=null&&m(e,["version"],o);const a=p(t,["_self"]);a!=null&&m(e,["tunedModelInfo"],Cfe(a));const s=p(t,["inputTokenLimit"]);s!=null&&m(e,["inputTokenLimit"],s);const u=p(t,["outputTokenLimit"]);u!=null&&m(e,["outputTokenLimit"],u);const c=p(t,["supportedGenerationMethods"]);c!=null&&m(e,["supportedActions"],c);const d=p(t,["temperature"]);d!=null&&m(e,["temperature"],d);const f=p(t,["maxTemperature"]);f!=null&&m(e,["maxTemperature"],f);const h=p(t,["topP"]);h!=null&&m(e,["topP"],h);const g=p(t,["topK"]);g!=null&&m(e,["topK"],g);const b=p(t,["thinking"]);return b!=null&&m(e,["thinking"],b),e}function L0(t){const e={},r=p(t,["name"]);r!=null&&m(e,["name"],r);const n=p(t,["displayName"]);n!=null&&m(e,["displayName"],n);const i=p(t,["description"]);i!=null&&m(e,["description"],i);const o=p(t,["versionId"]);o!=null&&m(e,["version"],o);const a=p(t,["deployedModels"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>Ede(h))),m(e,["endpoints"],f)}const s=p(t,["labels"]);s!=null&&m(e,["labels"],s);const u=p(t,["_self"]);u!=null&&m(e,["tunedModelInfo"],Afe(u));const c=p(t,["defaultCheckpointId"]);c!=null&&m(e,["defaultCheckpointId"],c);const d=p(t,["checkpoints"]);if(d!=null){let f=d;Array.isArray(f)&&(f=f.map(h=>h)),m(e,["checkpoints"],f)}return e}function hfe(t){const e={},r=p(t,["mediaResolution"]);r!=null&&m(e,["mediaResolution"],r);const n=p(t,["codeExecutionResult"]);n!=null&&m(e,["codeExecutionResult"],n);const i=p(t,["executableCode"]);i!=null&&m(e,["executableCode"],i);const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],kde(o));const a=p(t,["functionCall"]);a!=null&&m(e,["functionCall"],Tde(a));const s=p(t,["functionResponse"]);s!=null&&m(e,["functionResponse"],s);const u=p(t,["inlineData"]);u!=null&&m(e,["inlineData"],Qce(u));const c=p(t,["text"]);c!=null&&m(e,["text"],c);const d=p(t,["thought"]);d!=null&&m(e,["thought"],d);const f=p(t,["thoughtSignature"]);f!=null&&m(e,["thoughtSignature"],f);const h=p(t,["videoMetadata"]);return h!=null&&m(e,["videoMetadata"],h),e}function pfe(t){const e={},r=p(t,["productImage"]);return r!=null&&m(e,["image"],Tn(r)),e}function mfe(t,e){const r={},n=p(t,["numberOfImages"]);e!==void 0&&n!=null&&m(e,["parameters","sampleCount"],n);const i=p(t,["baseSteps"]);e!==void 0&&i!=null&&m(e,["parameters","baseSteps"],i);const o=p(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const a=p(t,["seed"]);e!==void 0&&a!=null&&m(e,["parameters","seed"],a);const s=p(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&m(e,["parameters","safetySetting"],s);const u=p(t,["personGeneration"]);e!==void 0&&u!=null&&m(e,["parameters","personGeneration"],u);const c=p(t,["addWatermark"]);e!==void 0&&c!=null&&m(e,["parameters","addWatermark"],c);const d=p(t,["outputMimeType"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","mimeType"],d);const f=p(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&m(e,["parameters","outputOptions","compressionQuality"],f);const h=p(t,["enhancePrompt"]);e!==void 0&&h!=null&&m(e,["parameters","enhancePrompt"],h);const g=p(t,["labels"]);return e!==void 0&&g!=null&&m(e,["labels"],g),r}function gfe(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["source"]);i!=null&&vfe(i,r);const o=p(e,["config"]);return o!=null&&mfe(o,r),r}function yfe(t){const e={},r=p(t,["predictions"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>jp(i))),m(e,["generatedImages"],n)}return e}function vfe(t,e){const r={},n=p(t,["prompt"]);e!==void 0&&n!=null&&m(e,["instances[0]","prompt"],n);const i=p(t,["personImage"]);e!==void 0&&i!=null&&m(e,["instances[0]","personImage","image"],Tn(i));const o=p(t,["productImages"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>pfe(s))),m(e,["instances[0]","productImages"],a)}return r}function xfe(t){const e={},r=p(t,["referenceImage"]);r!=null&&m(e,["referenceImage"],Tn(r));const n=p(t,["referenceId"]);n!=null&&m(e,["referenceId"],n);const i=p(t,["referenceType"]);i!=null&&m(e,["referenceType"],i);const o=p(t,["maskImageConfig"]);o!=null&&m(e,["maskImageConfig"],ffe(o));const a=p(t,["controlImageConfig"]);a!=null&&m(e,["controlImageConfig"],ode(a));const s=p(t,["styleImageConfig"]);s!=null&&m(e,["styleImageConfig"],s);const u=p(t,["subjectImageConfig"]);return u!=null&&m(e,["subjectImageConfig"],u),e}function HI(t){const e={},r=p(t,["safetyAttributes","categories"]);r!=null&&m(e,["categories"],r);const n=p(t,["safetyAttributes","scores"]);n!=null&&m(e,["scores"],n);const i=p(t,["contentType"]);return i!=null&&m(e,["contentType"],i),e}function zI(t){const e={},r=p(t,["safetyAttributes","categories"]);r!=null&&m(e,["categories"],r);const n=p(t,["safetyAttributes","scores"]);n!=null&&m(e,["scores"],n);const i=p(t,["contentType"]);return i!=null&&m(e,["contentType"],i),e}function bfe(t){const e={},r=p(t,["category"]);if(r!=null&&m(e,["category"],r),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=p(t,["threshold"]);return n!=null&&m(e,["threshold"],n),e}function wfe(t){const e={},r=p(t,["image"]);return r!=null&&m(e,["image"],Tn(r)),e}function _fe(t,e){const r={},n=p(t,["mode"]);e!==void 0&&n!=null&&m(e,["parameters","mode"],n);const i=p(t,["maxPredictions"]);e!==void 0&&i!=null&&m(e,["parameters","maxPredictions"],i);const o=p(t,["confidenceThreshold"]);e!==void 0&&o!=null&&m(e,["parameters","confidenceThreshold"],o);const a=p(t,["maskDilation"]);e!==void 0&&a!=null&&m(e,["parameters","maskDilation"],a);const s=p(t,["binaryColorThreshold"]);e!==void 0&&s!=null&&m(e,["parameters","binaryColorThreshold"],s);const u=p(t,["labels"]);return e!==void 0&&u!=null&&m(e,["labels"],u),r}function Sfe(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["source"]);i!=null&&Efe(i,r);const o=p(e,["config"]);return o!=null&&_fe(o,r),r}function Nfe(t){const e={},r=p(t,["predictions"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(i=>Jde(i))),m(e,["generatedMasks"],n)}return e}function Efe(t,e){const r={},n=p(t,["prompt"]);e!==void 0&&n!=null&&m(e,["instances[0]","prompt"],n);const i=p(t,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],Tn(i));const o=p(t,["scribbleImage"]);return e!==void 0&&o!=null&&m(e,["instances[0]","scribble"],wfe(o)),r}function kfe(t){const e={},r=p(t,["functionCallingConfig"]);r!=null&&m(e,["functionCallingConfig"],Cde(r));const n=p(t,["retrievalConfig"]);return n!=null&&m(e,["retrievalConfig"],n),e}function Tfe(t){const e={},r=p(t,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>f)),m(e,["functionDeclarations"],d)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["googleSearchRetrieval"]);n!=null&&m(e,["googleSearchRetrieval"],n);const i=p(t,["computerUse"]);i!=null&&m(e,["computerUse"],i);const o=p(t,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const a=p(t,["codeExecution"]);if(a!=null&&m(e,["codeExecution"],a),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=p(t,["googleMaps"]);s!=null&&m(e,["googleMaps"],tfe(s));const u=p(t,["googleSearch"]);u!=null&&m(e,["googleSearch"],rfe(u));const c=p(t,["urlContext"]);return c!=null&&m(e,["urlContext"],c),e}function WI(t){const e={},r=p(t,["functionDeclarations"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(h=>Ade(h))),m(e,["functionDeclarations"],f)}const n=p(t,["retrieval"]);n!=null&&m(e,["retrieval"],n);const i=p(t,["googleSearchRetrieval"]);i!=null&&m(e,["googleSearchRetrieval"],i);const o=p(t,["computerUse"]);if(o!=null&&m(e,["computerUse"],o),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=p(t,["codeExecution"]);a!=null&&m(e,["codeExecution"],a);const s=p(t,["enterpriseWebSearch"]);s!=null&&m(e,["enterpriseWebSearch"],s);const u=p(t,["googleMaps"]);u!=null&&m(e,["googleMaps"],u);const c=p(t,["googleSearch"]);c!=null&&m(e,["googleSearch"],c);const d=p(t,["urlContext"]);return d!=null&&m(e,["urlContext"],d),e}function Cfe(t){const e={},r=p(t,["baseModel"]);r!=null&&m(e,["baseModel"],r);const n=p(t,["createTime"]);n!=null&&m(e,["createTime"],n);const i=p(t,["updateTime"]);return i!=null&&m(e,["updateTime"],i),e}function Afe(t){const e={},r=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&m(e,["baseModel"],r);const n=p(t,["createTime"]);n!=null&&m(e,["createTime"],n);const i=p(t,["updateTime"]);return i!=null&&m(e,["updateTime"],i),e}function jfe(t,e){const r={},n=p(t,["displayName"]);e!==void 0&&n!=null&&m(e,["displayName"],n);const i=p(t,["description"]);e!==void 0&&i!=null&&m(e,["description"],i);const o=p(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&m(e,["defaultCheckpointId"],o),r}function Pfe(t,e){const r={},n=p(t,["displayName"]);e!==void 0&&n!=null&&m(e,["displayName"],n);const i=p(t,["description"]);e!==void 0&&i!=null&&m(e,["description"],i);const o=p(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&m(e,["defaultCheckpointId"],o),r}function Ife(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","name"],ze(t,n));const i=p(e,["config"]);return i!=null&&jfe(i,r),r}function Ofe(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["config"]);return i!=null&&Pfe(i,r),r}function Rfe(t,e){const r={},n=p(t,["outputGcsUri"]);e!==void 0&&n!=null&&m(e,["parameters","storageUri"],n);const i=p(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&m(e,["parameters","safetySetting"],i);const o=p(t,["personGeneration"]);e!==void 0&&o!=null&&m(e,["parameters","personGeneration"],o);const a=p(t,["includeRaiReason"]);e!==void 0&&a!=null&&m(e,["parameters","includeRaiReason"],a);const s=p(t,["outputMimeType"]);e!==void 0&&s!=null&&m(e,["parameters","outputOptions","mimeType"],s);const u=p(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&m(e,["parameters","outputOptions","compressionQuality"],u);const c=p(t,["enhanceInputImage"]);e!==void 0&&c!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],c);const d=p(t,["imagePreservationFactor"]);e!==void 0&&d!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],d);const f=p(t,["labels"]);e!==void 0&&f!=null&&m(e,["labels"],f);const h=p(t,["numberOfImages"]);e!==void 0&&h!=null&&m(e,["parameters","sampleCount"],h);const g=p(t,["mode"]);return e!==void 0&&g!=null&&m(e,["parameters","mode"],g),r}function Mfe(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["_url","model"],ze(t,n));const i=p(e,["image"]);i!=null&&m(r,["instances[0]","image"],Tn(i));const o=p(e,["upscaleFactor"]);o!=null&&m(r,["parameters","upscaleConfig","upscaleFactor"],o);const a=p(e,["config"]);return a!=null&&Rfe(a,r),r}function $fe(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>jp(o))),m(e,["generatedImages"],i)}return e}function Dfe(t){const e={},r=p(t,["uri"]);r!=null&&m(e,["uri"],r);const n=p(t,["encodedVideo"]);n!=null&&m(e,["videoBytes"],to(n));const i=p(t,["encoding"]);return i!=null&&m(e,["mimeType"],i),e}function Lfe(t){const e={},r=p(t,["gcsUri"]);r!=null&&m(e,["uri"],r);const n=p(t,["bytesBase64Encoded"]);n!=null&&m(e,["videoBytes"],to(n));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Ufe(t){const e={},r=p(t,["image"]);r!=null&&m(e,["_self"],Tn(r));const n=p(t,["maskMode"]);return n!=null&&m(e,["maskMode"],n),e}function Ffe(t){const e={},r=p(t,["image"]);r!=null&&m(e,["image"],Pp(r));const n=p(t,["referenceType"]);return n!=null&&m(e,["referenceType"],n),e}function Bfe(t){const e={},r=p(t,["image"]);r!=null&&m(e,["image"],Tn(r));const n=p(t,["referenceType"]);return n!=null&&m(e,["referenceType"],n),e}function KI(t){const e={},r=p(t,["uri"]);r!=null&&m(e,["uri"],r);const n=p(t,["videoBytes"]);n!=null&&m(e,["encodedVideo"],to(n));const i=p(t,["mimeType"]);return i!=null&&m(e,["encoding"],i),e}function JI(t){const e={},r=p(t,["uri"]);r!=null&&m(e,["gcsUri"],r);const n=p(t,["videoBytes"]);n!=null&&m(e,["bytesBase64Encoded"],to(n));const i=p(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qfe(t,e){const r={},n=p(t,["displayName"]);return e!==void 0&&n!=null&&m(e,["displayName"],n),r}function Vfe(t){const e={},r=p(t,["config"]);return r!=null&&qfe(r,e),e}function Gfe(t,e){const r={},n=p(t,["force"]);return e!==void 0&&n!=null&&m(e,["_query","force"],n),r}function Hfe(t){const e={},r=p(t,["name"]);r!=null&&m(e,["_url","name"],r);const n=p(t,["config"]);return n!=null&&Gfe(n,e),e}function zfe(t){const e={},r=p(t,["name"]);return r!=null&&m(e,["_url","name"],r),e}function Wfe(t,e){const r={},n=p(t,["customMetadata"]);if(e!==void 0&&n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["customMetadata"],o)}const i=p(t,["chunkingConfig"]);return e!==void 0&&i!=null&&m(e,["chunkingConfig"],i),r}function Kfe(t){const e={},r=p(t,["name"]);r!=null&&m(e,["name"],r);const n=p(t,["metadata"]);n!=null&&m(e,["metadata"],n);const i=p(t,["done"]);i!=null&&m(e,["done"],i);const o=p(t,["error"]);o!=null&&m(e,["error"],o);const a=p(t,["response"]);return a!=null&&m(e,["response"],Yfe(a)),e}function Jfe(t){const e={},r=p(t,["fileSearchStoreName"]);r!=null&&m(e,["_url","file_search_store_name"],r);const n=p(t,["fileName"]);n!=null&&m(e,["fileName"],n);const i=p(t,["config"]);return i!=null&&Wfe(i,e),e}function Yfe(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["parent"]);n!=null&&m(e,["parent"],n);const i=p(t,["documentName"]);return i!=null&&m(e,["documentName"],i),e}function Xfe(t,e){const r={},n=p(t,["pageSize"]);e!==void 0&&n!=null&&m(e,["_query","pageSize"],n);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),r}function Qfe(t){const e={},r=p(t,["config"]);return r!=null&&Xfe(r,e),e}function Zfe(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["nextPageToken"]);n!=null&&m(e,["nextPageToken"],n);const i=p(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["fileSearchStores"],o)}return e}function YI(t,e){const r={},n=p(t,["mimeType"]);e!==void 0&&n!=null&&m(e,["mimeType"],n);const i=p(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=p(t,["customMetadata"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>u)),m(e,["customMetadata"],s)}const a=p(t,["chunkingConfig"]);return e!==void 0&&a!=null&&m(e,["chunkingConfig"],a),r}function ehe(t){const e={},r=p(t,["fileSearchStoreName"]);r!=null&&m(e,["_url","file_search_store_name"],r);const n=p(t,["config"]);return n!=null&&YI(n,e),e}function the(t){const e={},r=p(t,["sdkHttpResponse"]);return r!=null&&m(e,["sdkHttpResponse"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rhe="Content-Type",nhe="X-Server-Timeout",ihe="User-Agent",U0="x-goog-api-client",ohe="1.34.0",ahe=`google-genai-sdk/${ohe}`,she="v1beta1",lhe="v1beta";class uhe{constructor(e){var r,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:she,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:lhe,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),r=new URL(e);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,r,n){const i=[this.getRequestUrlInternal(r)];return n&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,r,n);if(e.queryParams)for(const[a,s]of Object.entries(e.queryParams))i.searchParams.append(a,String(s));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,r,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,r){const n=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(r))typeof o=="object"?n[i]=Object.assign(Object.assign({},n[i]),o):o!==void 0&&(n[i]=o);return n}async requestStream(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,r,n);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,r,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,r,n,i){if(r&&r.timeout||i){const o=new AbortController,a=o.signal;if(r.timeout&&(r==null?void 0:r.timeout)>0){const s=setTimeout(()=>o.abort(),r.timeout);s&&typeof s.unref=="function"&&s.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=a}return r&&r.extraBody!==null&&che(e,r.extraBody),e.headers=await this.getHeadersInternal(r,n),e}async unaryApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async i=>(await jk(i),new R0(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async i=>(await jk(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return _n(this,arguments,function*(){var n;const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let a="";const s="data:",u=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:c,value:d}=yield Me(i.read());if(c){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(d,{stream:!0});try{const b=JSON.parse(f);if("error"in b){const v=JSON.parse(JSON.stringify(b.error)),y=v.status,x=v.code,_=`got status: ${y}. ${JSON.stringify(b)}`;if(x>=400&&x<600)throw new Cp({message:_,status:x})}}catch(b){if(b.name==="ApiError")throw b}a+=f;let h=-1,g=0;for(;;){h=-1,g=0;for(const y of u){const x=a.indexOf(y);x!==-1&&(h===-1||x<h)&&(h=x,g=y.length)}if(h===-1)break;const b=a.substring(0,h);a=a.substring(h+g);const v=b.trim();if(v.startsWith(s)){const y=v.substring(s.length).trim();try{const x=new Response(y,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Me(new R0(x))}catch(x){throw new Error(`exception parsing stream chunk ${y}. ${x}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,r){return fetch(e,r).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},r=ahe+" "+this.clientOptions.userAgentExtra;return e[ihe]=r,e[U0]=r,e[rhe]="application/json",e}async getHeadersInternal(e,r){const n=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))n.append(i,o);e.timeout&&e.timeout>0&&n.append(nhe,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,r),n}getFileName(e){var r;let n="";return typeof e=="string"&&(n=e.replace(/[/\\]+$/,""),n=(r=n.split(/[/\\]/).pop())!==null&&r!==void 0?r:""),n}async uploadFile(e,r){var n;const i={};r!=null&&(i.mimeType=r.mimeType,i.name=r.name,i.displayName=r.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,a=await o.stat(e);i.sizeBytes=String(a.size);const s=(n=r==null?void 0:r.mimeType)!==null&&n!==void 0?n:a.type;if(s===void 0||s==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=s;const u={file:i},c=this.getFileName(e),d=xe("upload/v1beta/files",u._url),f=await this.fetchUploadUrl(d,i.sizeBytes,i.mimeType,c,u,r==null?void 0:r.httpOptions);return o.upload(e,f,this)}async uploadFileToFileSearchStore(e,r,n){var i;const o=this.clientOptions.uploader,a=await o.stat(r),s=String(a.size),u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,d=this.getFileName(r),f={};n!=null&&YI(n,f);const h=await this.fetchUploadUrl(c,s,u,d,f,n==null?void 0:n.httpOptions);return o.uploadToFileSearchStore(r,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,r,n,i,o,a){var s;let u={};a?u=a:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r}`,"X-Goog-Upload-Header-Content-Type":`${n}`},i?{"X-Goog-Upload-File-Name":i}:{})};const c=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:u});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(s=c==null?void 0:c.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function jk(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const r=t.status;let n;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await t.json():n={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(n);throw r>=400&&r<600?new Cp({message:i,status:r}):new Error(i)}}function che(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))r=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(o,a){const s=Object.assign({},o);for(const u in a)if(Object.prototype.hasOwnProperty.call(a,u)){const c=a[u],d=s[u];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?s[u]=n(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),s[u]=c)}return s}const i=n(r,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dhe="mcp_used/unknown";let fhe=!1;function XI(t){for(const e of t)if(hhe(e)||typeof e=="object"&&"inputSchema"in e)return!0;return fhe}function QI(t){var e;const r=(e=t[U0])!==null&&e!==void 0?e:"";t[U0]=(r+` ${dhe}`).trimStart()}function hhe(t){return t!==null&&typeof t=="object"&&t instanceof hb}function phe(t){return _n(this,arguments,function*(r,n=100){let i,o=0;for(;o<n;){const a=yield Me(r.listTools({cursor:i}));for(const s of a.tools)yield yield Me(s),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class hb{constructor(e=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=r}static create(e,r){return new hb(e,r)}async initialize(){var e,r,n,i;if(this.mcpTools.length>0)return;const o={},a=[];for(const d of this.mcpClients)try{for(var s=!0,u=(r=void 0,Sn(phe(d))),c;c=await u.next(),e=c.done,!e;s=!0){i=c.value,s=!1;const f=i;a.push(f);const h=f.name;if(o[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);o[h]=d}}catch(f){r={error:f}}finally{try{!s&&!e&&(n=u.return)&&await n.call(u)}finally{if(r)throw r.error}}this.mcpTools=a,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),zle(this.mcpTools,this.config)}async callTool(e){await this.initialize();const r=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[n.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const a=await i.callTool({name:n.name,arguments:n.args},void 0,o);r.push({functionResponse:{name:n.name,response:a.isError?{error:a}:a}})}return r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function mhe(t,e,r){const n=new Lle;let i;r.data instanceof Blob?i=JSON.parse(await r.data.text()):i=JSON.parse(r.data),Object.assign(n,i),e(n)}class ghe{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n}async connect(e){var r,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),a=xhe(this.apiClient.getDefaultHeaders()),s=this.apiClient.getApiKey(),u=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${s}`;let c=()=>{};const d=new Promise(w=>{c=w}),f=e.callbacks,h=function(){c({})},g=this.apiClient,b={onopen:h,onmessage:w=>{mhe(g,f.onmessage,w)},onerror:(r=f==null?void 0:f.onerror)!==null&&r!==void 0?r:function(w){},onclose:(n=f==null?void 0:f.onclose)!==null&&n!==void 0?n:function(w){}},v=this.webSocketFactory.create(u,vhe(a),b);v.connect(),await d;const _={setup:{model:ze(this.apiClient,e.model)}};return v.send(JSON.stringify(_)),new yhe(v,this.apiClient)}}class yhe{constructor(e,r){this.conn=e,this.apiClient=r}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const r=Vce(e);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const r=qce(e);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const r={playbackControl:e};this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl(Pa.PLAY)}pause(){this.sendPlaybackControl(Pa.PAUSE)}stop(){this.sendPlaybackControl(Pa.STOP)}resetContext(){this.sendPlaybackControl(Pa.RESET_CONTEXT)}close(){this.conn.close()}}function vhe(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function xhe(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bhe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function whe(t,e,r){const n=new Dle;let i;r.data instanceof Blob?i=await r.data.text():r.data instanceof ArrayBuffer?i=new TextDecoder().decode(r.data):i=r.data;const o=JSON.parse(i);if(t.isVertexAI()){const a=zce(o);Object.assign(n,a)}else Object.assign(n,o);e(n)}class _he{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n,this.music=new ghe(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var r,n,i,o,a,s;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let d;const f=this.apiClient.getHeaders();e.config&&e.config.tools&&XI(e.config.tools)&&QI(f);const h=khe(f);if(this.apiClient.isVertexAI())d=`${u}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,d);else{const C=this.apiClient.getApiKey();let R="BidiGenerateContent",$="key";C!=null&&C.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",$="access_token"),d=`${u}/ws/google.ai.generativelanguage.${c}.GenerativeService.${R}?${$}=${C}`}let g=()=>{};const b=new Promise(C=>{g=C}),v=e.callbacks,y=function(){var C;(C=v==null?void 0:v.onopen)===null||C===void 0||C.call(v),g({})},x=this.apiClient,_={onopen:y,onmessage:C=>{whe(x,v.onmessage,C)},onerror:(r=v==null?void 0:v.onerror)!==null&&r!==void 0?r:function(C){},onclose:(n=v==null?void 0:v.onclose)!==null&&n!==void 0?n:function(C){}},w=this.webSocketFactory.create(d,Ehe(h),_);w.connect(),await b;let E=ze(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const C=this.apiClient.getProject(),R=this.apiClient.getLocation();E=`projects/${C}/locations/${R}/`+E}let S={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[sh.AUDIO]}:e.config.responseModalities=[sh.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const N=(s=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&s!==void 0?s:[],k=[];for(const C of N)if(this.isCallableTool(C)){const R=C;k.push(await R.tool())}else k.push(C);k.length>0&&(e.config.tools=k);const A={model:E,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?S=Bce(this.apiClient,A):S=Fce(this.apiClient,A),delete S.config,w.send(JSON.stringify(S)),new Nhe(w,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const She={turnComplete:!0};class Nhe{constructor(e,r){this.conn=e,this.apiClient=r}tLiveClientContent(e,r){if(r.turns!==null&&r.turns!==void 0){let n=[];try{n=Xr(r.turns),e.isVertexAI()||(n=n.map(i=>Ap(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:n,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(e,r){let n=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?n=r.functionResponses:n=[r.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const o of n){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(bhe)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},She),e);const r=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(r))}sendRealtimeInput(e){let r={};this.apiClient.isVertexAI()?r={realtimeInput:Hce(e)}:r={realtimeInput:Gce(e)},this.conn.send(JSON.stringify(r))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const r=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}}function Ehe(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function khe(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pk=10;function Ik(t){var e,r,n;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const a of(r=t==null?void 0:t.tools)!==null&&r!==void 0?r:[])if(Ha(a)){i=!0;break}if(!i)return!0;const o=(n=t==null?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Ha(t){return"callTool"in t&&typeof t.callTool=="function"}function The(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(i=>Ha(i)))!==null&&n!==void 0?n:!1}function Ok(t){var e;const r=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((n,i)=>{if(Ha(n))return;const o=n;o.functionDeclarations&&o.functionDeclarations.length>0&&r.push(i)}),r}function Rk(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Che extends yi{constructor(e){super(),this.apiClient=e,this.generateContent=async r=>{var n,i,o,a,s;const u=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!The(r)||Ik(r.config))return await this.generateContentInternal(u);const c=Ok(r);if(c.length>0){const v=c.map(y=>`tools[${y}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${v}.`)}let d,f;const h=Xr(u.contents),g=(o=(i=(n=u.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Pk;let b=0;for(;b<g&&(d=await this.generateContentInternal(u),!(!d.functionCalls||d.functionCalls.length===0));){const v=d.candidates[0].content,y=[];for(const x of(s=(a=r.config)===null||a===void 0?void 0:a.tools)!==null&&s!==void 0?s:[])if(Ha(x)){const w=await x.callTool(d.functionCalls);y.push(...w)}b++,f={role:"user",parts:y},u.contents=Xr(u.contents),u.contents.push(v),u.contents.push(f),Rk(u.config)&&(h.push(v),h.push(f))}return Rk(u.config)&&(d.automaticFunctionCallingHistory=h),d},this.generateContentStream=async r=>{var n,i,o,a,s;if(this.maybeMoveToResponseJsonSchem(r),Ik(r.config)){const f=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(f)}const u=Ok(r);if(u.length>0){const f=u.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${f}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(o=(i=(n=r==null?void 0:r.config)===null||n===void 0?void 0:n.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,d=(s=(a=r==null?void 0:r.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||s===void 0?void 0:s.disable;if(c&&!d)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(n=>{var i;let o;const a=[];if(n!=null&&n.generatedImages)for(const u of n.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((i=u==null?void 0:u.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=u==null?void 0:u.safetyAttributes:a.push(u);let s;return o?s={generatedImages:a,positivePromptSafetyAttributes:o,sdkHttpResponse:n.sdkHttpResponse}:s={generatedImages:a,sdkHttpResponse:n.sdkHttpResponse},s}),this.list=async r=>{var n;const a={config:Object.assign(Object.assign({},{queryBase:!0}),r==null?void 0:r.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((n=a.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Yo(ci.PAGED_ITEM_MODELS,s=>this.listInternal(s),await this.listInternal(a),a)},this.editImage=async r=>{const n={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(n.referenceImages=r.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async r=>{let n={numberOfImages:1,mode:"upscale"};r.config&&(n=Object.assign(Object.assign({},n),r.config));const i={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:n};return await this.upscaleImageInternal(i)},this.generateVideos=async r=>{var n,i,o,a,s,u;if((r.prompt||r.image||r.video)&&r.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((n=r.video)===null||n===void 0)&&n.uri&&(!((i=r.video)===null||i===void 0)&&i.videoBytes)?r.video={uri:r.video.uri,mimeType:r.video.mimeType}:!((a=(o=r.source)===null||o===void 0?void 0:o.video)===null||a===void 0)&&a.uri&&(!((u=(s=r.source)===null||s===void 0?void 0:s.video)===null||u===void 0)&&u.videoBytes)&&(r.source.video={uri:r.source.video.uri,mimeType:r.source.video.mimeType})),await this.generateVideosInternal(r)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var r,n,i;const o=(r=e.config)===null||r===void 0?void 0:r.tools;if(!o)return e;const a=await Promise.all(o.map(async u=>Ha(u)?await u.tool():u)),s={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(s.config.tools=a,e.config&&e.config.tools&&XI(e.config.tools)){const u=(i=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&i!==void 0?i:{};let c=Object.assign({},u);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),QI(c),s.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return s}async initAfcToolsMap(e){var r,n,i;const o=new Map;for(const a of(n=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&n!==void 0?n:[])if(Ha(a)){const s=a,u=await s.tool();for(const c of(i=u.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,s)}}return o}async processAfcStream(e){var r,n,i;const o=(i=(n=(r=e.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&i!==void 0?i:Pk;let a=!1,s=0;const u=await this.initAfcToolsMap(e);return function(c,d,f){return _n(this,arguments,function*(){for(var h,g,b,v,y,x;s<o;){a&&(s++,a=!1);const S=yield Me(c.processParamsMaybeAddMcpUsage(f)),N=yield Me(c.generateContentStreamInternal(S)),k=[],A=[];try{for(var _=!0,w=(g=void 0,Sn(N)),E;E=yield Me(w.next()),h=E.done,!h;_=!0){v=E.value,_=!1;const C=v;if(yield yield Me(C),C.candidates&&(!((y=C.candidates[0])===null||y===void 0)&&y.content)){A.push(C.candidates[0].content);for(const R of(x=C.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(s<o&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(R.functionCall.name)){const $=yield Me(d.get(R.functionCall.name).callTool([R.functionCall]));k.push(...$)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(C){g={error:C}}finally{try{!_&&!h&&(b=w.return)&&(yield Me(b.call(w)))}finally{if(g)throw g.error}}if(k.length>0){a=!0;const C=new ml;C.candidates=[{content:{role:"user",parts:k}}],yield yield Me(C);const R=[];R.push(...A),R.push({role:"user",parts:k});const $=Xr(f.contents).concat(R);f.contents=$}else break}})}(this,u,e)}async generateContentInternal(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=Tk(this.apiClient,e);return s=xe("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=Ak(d),h=new ml;return Object.assign(h,f),h})}else{const c=kk(this.apiClient,e);return s=xe("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=Ck(d),h=new ml;return Object.assign(h,f),h})}}async generateContentStreamInternal(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=Tk(this.apiClient,e);return s=xe("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.requestStream({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),a.then(function(f){return _n(this,arguments,function*(){var h,g,b,v;try{for(var y=!0,x=Sn(f),_;_=yield Me(x.next()),h=_.done,!h;y=!0){v=_.value,y=!1;const w=v,E=Ak(yield Me(w.json()));E.sdkHttpResponse={headers:w.headers};const S=new ml;Object.assign(S,E),yield yield Me(S)}}catch(w){g={error:w}}finally{try{!y&&!h&&(b=x.return)&&(yield Me(b.call(x)))}finally{if(g)throw g.error}}})})}else{const c=kk(this.apiClient,e);return s=xe("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.requestStream({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(f){return _n(this,arguments,function*(){var h,g,b,v;try{for(var y=!0,x=Sn(f),_;_=yield Me(x.next()),h=_.done,!h;y=!0){v=_.value,y=!1;const w=v,E=Ck(yield Me(w.json()));E.sdkHttpResponse={headers:w.headers};const S=new ml;Object.assign(S,E),yield yield Me(S)}}catch(w){g={error:w}}finally{try{!y&&!h&&(b=x.return)&&(yield Me(b.call(x)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=_de(this.apiClient,e);return s=xe("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=Nde(d),h=new uk;return Object.assign(h,f),h})}else{const c=wde(this.apiClient,e);return s=xe("{model}:batchEmbedContents",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=Sde(d),h=new uk;return Object.assign(h,f),h})}}async generateImagesInternal(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=Mde(this.apiClient,e);return s=xe("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=Dde(d),h=new ck;return Object.assign(h,f),h})}else{const c=Rde(this.apiClient,e);return s=xe("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=$de(d),h=new ck;return Object.assign(h,f),h})}}async editImageInternal(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=yde(this.apiClient,e);return o=xe("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),i.then(u=>{const c=vde(u),d=new kle;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=Mfe(this.apiClient,e);return o=xe("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),i.then(u=>{const c=$fe(u),d=new Tle;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=gfe(this.apiClient,e);return o=xe("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{const c=yfe(u),d=new Cle;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=Sfe(this.apiClient,e);return o=xe("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{const c=Nfe(u),d=new Ale;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=efe(this.apiClient,e);return s=xe("{name}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),a.then(d=>L0(d))}else{const c=Zde(this.apiClient,e);return s=xe("{name}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>D0(d))}}async listInternal(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=ufe(this.apiClient,e);return s=xe("{models_url}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=dfe(d),h=new dk;return Object.assign(h,f),h})}else{const c=lfe(this.apiClient,e);return s=xe("{models_url}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=cfe(d),h=new dk;return Object.assign(h,f),h})}}async update(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=Ofe(this.apiClient,e);return s=xe("{model}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),a.then(d=>L0(d))}else{const c=Ife(this.apiClient,e);return s=xe("{name}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>D0(d))}}async delete(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=hde(this.apiClient,e);return s=xe("{name}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=mde(d),h=new fk;return Object.assign(h,f),h})}else{const c=fde(this.apiClient,e);return s=xe("{name}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=pde(d),h=new fk;return Object.assign(h,f),h})}}async countTokens(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=ude(this.apiClient,e);return s=xe("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=dde(d),h=new hk;return Object.assign(h,f),h})}else{const c=lde(this.apiClient,e);return s=xe("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=cde(d),h=new hk;return Object.assign(h,f),h})}}async computeTokens(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=tde(this.apiClient,e);return o=xe("{model}:computeTokens",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),i.then(u=>{const c=rde(u),d=new jle;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=Vde(this.apiClient,e);return s=xe("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),a.then(d=>{const f=Bde(d),h=new lh;return Object.assign(h,f),h})}else{const c=qde(this.apiClient,e);return s=xe("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>{const f=Fde(d),h=new lh;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ahe extends yi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=r.name.split("/operations/")[0];let o;n&&"httpOptions"in n&&(o=n.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:i,config:{httpOptions:o}});return r._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=r.name.split("/operations/")[0];let o;n&&"httpOptions"in n&&(o=n.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:i,config:{httpOptions:o}});return r._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=ble(e);return s=xe("{operationName}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),a}else{const c=xle(e);return s=xe("{operationName}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a}}async fetchPredictVideosOperationInternal(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=fle(e);return o=xe("{resourceName}:fetchPredictOperation",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jhe(t){const e={},r=p(t,["data"]);if(r!=null&&m(e,["data"],r),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["mimeType"]);return n!=null&&m(e,["mimeType"],n),e}function Phe(t){const e={},r=p(t,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Fhe(o))),m(e,["parts"],i)}const n=p(t,["role"]);return n!=null&&m(e,["role"],n),e}function Ihe(t,e,r){const n={},i=p(e,["expireTime"]);r!==void 0&&i!=null&&m(r,["expireTime"],i);const o=p(e,["newSessionExpireTime"]);r!==void 0&&o!=null&&m(r,["newSessionExpireTime"],o);const a=p(e,["uses"]);r!==void 0&&a!=null&&m(r,["uses"],a);const s=p(e,["liveConnectConstraints"]);r!==void 0&&s!=null&&m(r,["bidiGenerateContentSetup"],Uhe(t,s));const u=p(e,["lockAdditionalFields"]);return r!==void 0&&u!=null&&m(r,["fieldMask"],u),n}function Ohe(t,e){const r={},n=p(e,["config"]);return n!=null&&m(r,["config"],Ihe(t,n,r)),r}function Rhe(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=p(t,["fileUri"]);r!=null&&m(e,["fileUri"],r);const n=p(t,["mimeType"]);return n!=null&&m(e,["mimeType"],n),e}function Mhe(t){const e={},r=p(t,["id"]);r!=null&&m(e,["id"],r);const n=p(t,["args"]);n!=null&&m(e,["args"],n);const i=p(t,["name"]);if(i!=null&&m(e,["name"],i),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $he(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=p(t,["enableWidget"]);return r!=null&&m(e,["enableWidget"],r),e}function Dhe(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=p(t,["timeRangeFilter"]);return r!=null&&m(e,["timeRangeFilter"],r),e}function Lhe(t,e){const r={},n=p(t,["generationConfig"]);e!==void 0&&n!=null&&m(e,["setup","generationConfig"],n);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=p(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const a=p(t,["topP"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topP"],a);const s=p(t,["topK"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topK"],s);const u=p(t,["maxOutputTokens"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","maxOutputTokens"],u);const c=p(t,["mediaResolution"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","mediaResolution"],c);const d=p(t,["seed"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","seed"],d);const f=p(t,["speechConfig"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","speechConfig"],fb(f));const h=p(t,["thinkingConfig"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","thinkingConfig"],h);const g=p(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],g);const b=p(t,["systemInstruction"]);e!==void 0&&b!=null&&m(e,["setup","systemInstruction"],Phe(ir(b)));const v=p(t,["tools"]);if(e!==void 0&&v!=null){let N=Ws(v);Array.isArray(N)&&(N=N.map(k=>qhe(zs(k)))),m(e,["setup","tools"],N)}const y=p(t,["sessionResumption"]);e!==void 0&&y!=null&&m(e,["setup","sessionResumption"],Bhe(y));const x=p(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&m(e,["setup","inputAudioTranscription"],x);const _=p(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&m(e,["setup","outputAudioTranscription"],_);const w=p(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&m(e,["setup","realtimeInputConfig"],w);const E=p(t,["contextWindowCompression"]);e!==void 0&&E!=null&&m(e,["setup","contextWindowCompression"],E);const S=p(t,["proactivity"]);if(e!==void 0&&S!=null&&m(e,["setup","proactivity"],S),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return r}function Uhe(t,e){const r={},n=p(e,["model"]);n!=null&&m(r,["setup","model"],ze(t,n));const i=p(e,["config"]);return i!=null&&m(r,["config"],Lhe(i,r)),r}function Fhe(t){const e={},r=p(t,["mediaResolution"]);r!=null&&m(e,["mediaResolution"],r);const n=p(t,["codeExecutionResult"]);n!=null&&m(e,["codeExecutionResult"],n);const i=p(t,["executableCode"]);i!=null&&m(e,["executableCode"],i);const o=p(t,["fileData"]);o!=null&&m(e,["fileData"],Rhe(o));const a=p(t,["functionCall"]);a!=null&&m(e,["functionCall"],Mhe(a));const s=p(t,["functionResponse"]);s!=null&&m(e,["functionResponse"],s);const u=p(t,["inlineData"]);u!=null&&m(e,["inlineData"],jhe(u));const c=p(t,["text"]);c!=null&&m(e,["text"],c);const d=p(t,["thought"]);d!=null&&m(e,["thought"],d);const f=p(t,["thoughtSignature"]);f!=null&&m(e,["thoughtSignature"],f);const h=p(t,["videoMetadata"]);return h!=null&&m(e,["videoMetadata"],h),e}function Bhe(t){const e={},r=p(t,["handle"]);if(r!=null&&m(e,["handle"],r),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function qhe(t){const e={},r=p(t,["functionDeclarations"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>f)),m(e,["functionDeclarations"],d)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["googleSearchRetrieval"]);n!=null&&m(e,["googleSearchRetrieval"],n);const i=p(t,["computerUse"]);i!=null&&m(e,["computerUse"],i);const o=p(t,["fileSearch"]);o!=null&&m(e,["fileSearch"],o);const a=p(t,["codeExecution"]);if(a!=null&&m(e,["codeExecution"],a),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=p(t,["googleMaps"]);s!=null&&m(e,["googleMaps"],$he(s));const u=p(t,["googleSearch"]);u!=null&&m(e,["googleSearch"],Dhe(u));const c=p(t,["urlContext"]);return c!=null&&m(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vhe(t){const e=[];for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const n=t[r];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const i=Object.keys(n).map(o=>`${r}.${o}`);e.push(...i)}else e.push(r)}return e.join(",")}function Ghe(t,e){let r=null;const n=t.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const o=n.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,r=o):delete t.bidiGenerateContentSetup}else n!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(r){const o=Vhe(r);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let s=[];i.length>0&&(s=i.map(c=>a.includes(c)?`generationConfig.${c}`:c));const u=[];o&&u.push(o),s.length>0&&u.push(...s),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class Hhe extends yi{constructor(e){super(),this.apiClient=e}async create(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const s=Ohe(this.apiClient,e);o=xe("auth_tokens",s._url),a=s._query,delete s.config,delete s._url,delete s._query;const u=Ghe(s,e.config);return i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(c=>c.json()),i.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zhe(t,e){const r={},n=p(t,["force"]);return e!==void 0&&n!=null&&m(e,["_query","force"],n),r}function Whe(t){const e={},r=p(t,["name"]);r!=null&&m(e,["_url","name"],r);const n=p(t,["config"]);return n!=null&&zhe(n,e),e}function Khe(t){const e={},r=p(t,["name"]);return r!=null&&m(e,["_url","name"],r),e}function Jhe(t,e){const r={},n=p(t,["pageSize"]);e!==void 0&&n!=null&&m(e,["_query","pageSize"],n);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),r}function Yhe(t){const e={},r=p(t,["parent"]);r!=null&&m(e,["_url","parent"],r);const n=p(t,["config"]);return n!=null&&Jhe(n,e),e}function Xhe(t){const e={},r=p(t,["sdkHttpResponse"]);r!=null&&m(e,["sdkHttpResponse"],r);const n=p(t,["nextPageToken"]);n!=null&&m(e,["nextPageToken"],n);const i=p(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qhe extends yi{constructor(e){super(),this.apiClient=e,this.list=async r=>new Yo(ci.PAGED_ITEM_DOCUMENTS,n=>this.listInternal({parent:r.parent,config:n.config}),await this.listInternal(r),r)}async get(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Khe(e);return o=xe("{name}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var r,n;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Whe(e);i=xe("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Yhe(e);return o=xe("{parent}/documents",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{const c=Xhe(u),d=new Ple;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zhe extends yi{constructor(e,r=new Qhe(e)){super(),this.apiClient=e,this.documents=r,this.list=async(n={})=>new Yo(ci.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(n),n)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Vfe(e);return o=xe("fileSearchStores",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async get(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=zfe(e);return o=xe("{name}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var r,n;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Hfe(e);i=xe("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Qfe(e);return o=xe("fileSearchStores",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{const c=Zfe(u),d=new Ile;return Object.assign(d,c),d})}}async uploadToFileSearchStoreInternal(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=ehe(e);return o=xe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{const c=the(u),d=new Ole;return Object.assign(d,c),d})}}async importFile(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Jfe(e);return o=xe("{file_search_store_name}:importFile",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),i.then(u=>{const c=Kfe(u),d=new sb;return Object.assign(d,c),d})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ZI=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return ZI=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),r=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^r()&15>>+n/4).toString(16))};const epe=()=>ZI();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F0(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const B0=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tn extends Error{}class dr extends tn{constructor(e,r,n,i){super(`${dr.makeMessage(e,r,n)}`),this.status=e,this.headers=i,this.error=r}static makeMessage(e,r,n){const i=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,r,n,i){if(!e||!i)return new Ip({message:n,cause:B0(r)});const o=r;return e===400?new tO(e,o,n,i):e===401?new rO(e,o,n,i):e===403?new nO(e,o,n,i):e===404?new iO(e,o,n,i):e===409?new oO(e,o,n,i):e===422?new aO(e,o,n,i):e===429?new sO(e,o,n,i):e>=500?new lO(e,o,n,i):new dr(e,o,n,i)}}class q0 extends dr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ip extends dr{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}}class eO extends Ip{constructor({message:e}={}){super({message:e??"Request timed out."})}}class tO extends dr{}class rO extends dr{}class nO extends dr{}class iO extends dr{}class oO extends dr{}class aO extends dr{}class sO extends dr{}class lO extends dr{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tpe=/^[a-z][a-z0-9+.-]*:/i,rpe=t=>tpe.test(t);let V0=t=>(V0=Array.isArray,V0(t));const npe=V0;let ipe=npe;const Mk=ipe;function ope(t){if(!t)return!0;for(const e in t)return!1;return!0}function ape(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const spe=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new tn(`${t} must be an integer`);if(e<0)throw new tn(`${t} must be a positive integer`);return e},lpe=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const upe=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pa="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cpe(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const dpe=()=>{var t,e,r,n,i;const o=cpe();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pa,"X-Stainless-OS":Dk(Deno.build.os),"X-Stainless-Arch":$k(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pa,"X-Stainless-OS":Dk((r=globalThis.process.platform)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Arch":$k((n=globalThis.process.arch)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const a=fpe();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":pa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function fpe(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:r}of t){const n=r.exec(navigator.userAgent);if(n){const i=n[1]||0,o=n[2]||0,a=n[3]||0;return{browser:e,version:`${i}.${o}.${a}`}}}return null}const $k=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Dk=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let id;const hpe=()=>id??(id=dpe());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ppe(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function uO(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function mpe(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return uO({start(){},async pull(r){const{done:n,value:i}=await e.next();n?r.close():r.enqueue(i)},async cancel(){var r;await((r=e.return)===null||r===void 0?void 0:r.call(e))}})}function cO(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const r=await e.read();return r!=null&&r.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){const r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function gpe(t){var e,r;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((r=(e=t[Symbol.asyncIterator]()).return)===null||r===void 0?void 0:r.call(e));return}const n=t.getReader(),i=n.cancel();n.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ype=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dO=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,r=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(r?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ym(t,e,r){return dO(),new File(t,e??"unknown_file",r)}function vpe(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const xpe=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fO=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",bpe=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&fO(t),wpe=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function _pe(t,e,r){if(dO(),t=await t,bpe(t))return t instanceof File?t:Ym([await t.arrayBuffer()],t.name);if(wpe(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Ym(await G0(i),e,r)}const n=await G0(t);if(e||(e=vpe(t)),!(r!=null&&r.type)){const i=n.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(r=Object.assign(Object.assign({},r),{type:i}))}return Ym(n,e,r)}async function G0(t){var e,r,n,i,o;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(fO(t))a.push(t instanceof Blob?t:await t.arrayBuffer());else if(xpe(t))try{for(var s=!0,u=Sn(t),c;c=await u.next(),e=c.done,!e;s=!0){i=c.value,s=!1;const d=i;a.push(...await G0(d))}}catch(d){r={error:d}}finally{try{!s&&!e&&(n=u.return)&&await n.call(u)}finally{if(r)throw r.error}}else{const d=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${d?`; constructor: ${d}`:""}${Spe(t)}`)}return a}function Spe(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hO{constructor(e){this._client=e}}hO._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pO(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Lk=Object.freeze(Object.create(null)),Npe=(t=pO)=>function(r,...n){if(r.length===1)return r[0];let i=!1;const o=[],a=r.reduce((d,f,h)=>{var g,b,v;/[?#]/.test(f)&&(i=!0);const y=n[h];let x=(i?encodeURIComponent:t)(""+y);return h!==n.length&&(y==null||typeof y=="object"&&y.toString===((v=Object.getPrototypeOf((b=Object.getPrototypeOf((g=y.hasOwnProperty)!==null&&g!==void 0?g:Lk))!==null&&b!==void 0?b:Lk))===null||v===void 0?void 0:v.toString))&&(x=y+"",o.push({start:d.length+f.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),d+f+(h===n.length?"":x)},""),s=a.split(/[?#]/,1)[0],u=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let c;for(;(c=u.exec(s))!==null;)o.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(o.sort((d,f)=>d.start-f.start),o.length>0){let d=0;const f=o.reduce((h,g)=>{const b=" ".repeat(g.start-d),v="^".repeat(g.length);return d=g.start+g.length,h+b+v},"");throw new tn(`Path parameters result in path with invalid segments:
${o.map(h=>h.error).join(`
`)}
${a}
${f}`)}return a},od=Npe(pO);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mO extends hO{create(e,r){var n;const{api_version:i=this._client.apiVersion}=e,o=ch(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new tn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new tn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(od`/${i}/interactions`,Object.assign(Object.assign({body:o},r),{stream:(n=e.stream)!==null&&n!==void 0?n:!1}))}delete(e,r={},n){const{api_version:i=this._client.apiVersion}=r??{};return this._client.delete(od`/${i}/interactions/${e}`,n)}cancel(e,r={},n){const{api_version:i=this._client.apiVersion}=r??{};return this._client.post(od`/${i}/interactions/${e}/cancel`,n)}get(e,r={},n){var i;const o=r??{},{api_version:a=this._client.apiVersion}=o,s=ch(o,["api_version"]);return this._client.get(od`/${a}/interactions/${e}`,Object.assign(Object.assign({query:s},n),{stream:(i=r==null?void 0:r.stream)!==null&&i!==void 0?i:!1}))}}mO._key=Object.freeze(["interactions"]);class gO extends mO{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Epe(t){let e=0;for(const i of t)e+=i.length;const r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}let ad;function pb(t){let e;return(ad??(e=new globalThis.TextEncoder,ad=e.encode.bind(e)))(t)}let sd;function Uk(t){let e;return(sd??(e=new globalThis.TextDecoder,sd=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Op{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?pb(e):e;this.buffer=Epe([this.buffer,r]);const n=[];let i;for(;(i=kpe(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){n.push(Uk(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,a=Uk(this.buffer.subarray(0,o));n.push(a),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return n}flush(){return this.buffer.length?this.decode(`
`):[]}}Op.NEWLINE_CHARS=new Set([`
`,"\r"]);Op.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function kpe(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Tpe(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dh={off:0,error:200,warn:300,info:400,debug:500},Fk=(t,e,r)=>{if(t){if(ape(dh,t))return t;sr(r).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(dh))}`)}};function Sl(){}function ld(t,e,r){return!e||dh[t]>dh[r]?Sl:e[t].bind(e)}const Cpe={error:Sl,warn:Sl,info:Sl,debug:Sl};let Bk=new WeakMap;function sr(t){var e;const r=t.logger,n=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!r)return Cpe;const i=Bk.get(r);if(i&&i[0]===n)return i[1];const o={error:ld("error",r,n),warn:ld("warn",r,n),info:ld("info",r,n),debug:ld("debug",r,n)};return Bk.set(r,[n,o]),o}const fo=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,r])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ia{constructor(e,r,n){this.iterator=e,this.controller=r,this.client=n}static fromSSEResponse(e,r,n){let i=!1;const o=n?sr(n):console;function a(){return _n(this,arguments,function*(){var u,c,d,f;if(i)throw new tn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let h=!1;try{try{for(var g=!0,b=Sn(Ape(e,r)),v;v=yield Me(b.next()),u=v.done,!u;g=!0){f=v.value,g=!1;const y=f;if(!h)if(y.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield Me(JSON.parse(y.data))}catch(x){throw o.error("Could not parse message into JSON:",y.data),o.error("From chunk:",y.raw),x}}}catch(y){c={error:y}}finally{try{!g&&!u&&(d=b.return)&&(yield Me(d.call(b)))}finally{if(c)throw c.error}}h=!0}catch(y){if(F0(y))return yield Me(void 0);throw y}finally{h||r.abort()}})}return new Ia(a,r,n)}static fromReadableStream(e,r,n){let i=!1;function o(){return _n(this,arguments,function*(){var u,c,d,f;const h=new Op,g=cO(e);try{for(var b=!0,v=Sn(g),y;y=yield Me(v.next()),u=y.done,!u;b=!0){f=y.value,b=!1;const x=f;for(const _ of h.decode(x))yield yield Me(_)}}catch(x){c={error:x}}finally{try{!b&&!u&&(d=v.return)&&(yield Me(d.call(v)))}finally{if(c)throw c.error}}for(const x of h.flush())yield yield Me(x)})}function a(){return _n(this,arguments,function*(){var u,c,d,f;if(i)throw new tn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let h=!1;try{try{for(var g=!0,b=Sn(o()),v;v=yield Me(b.next()),u=v.done,!u;g=!0){f=v.value,g=!1;const y=f;h||y&&(yield yield Me(JSON.parse(y)))}}catch(y){c={error:y}}finally{try{!g&&!u&&(d=b.return)&&(yield Me(d.call(b)))}finally{if(c)throw c.error}}h=!0}catch(y){if(F0(y))return yield Me(void 0);throw y}finally{h||r.abort()}})}return new Ia(a,r,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],r=[],n=this.iterator(),i=o=>({next:()=>{if(o.length===0){const a=n.next();e.push(a),r.push(a)}return o.shift()}});return[new Ia(()=>i(e),this.controller,this.client),new Ia(()=>i(r),this.controller,this.client)]}toReadableStream(){const e=this;let r;return uO({async start(){r=e[Symbol.asyncIterator]()},async pull(n){try{const{value:i,done:o}=await r.next();if(o)return n.close();const a=pb(JSON.stringify(i)+`
`);n.enqueue(a)}catch(i){n.error(i)}},async cancel(){var n;await((n=r.return)===null||n===void 0?void 0:n.call(r))}})}}function Ape(t,e){return _n(this,arguments,function*(){var n,i,o,a;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new tn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new tn("Attempted to iterate over a response with no body");const s=new Ppe,u=new Op,c=cO(t.body);try{for(var d=!0,f=Sn(jpe(c)),h;h=yield Me(f.next()),n=h.done,!n;d=!0){a=h.value,d=!1;const g=a;for(const b of u.decode(g)){const v=s.decode(b);v&&(yield yield Me(v))}}}catch(g){i={error:g}}finally{try{!d&&!n&&(o=f.return)&&(yield Me(o.call(f)))}finally{if(i)throw i.error}}for(const g of u.flush()){const b=s.decode(g);b&&(yield yield Me(b))}})}function jpe(t){return _n(this,arguments,function*(){var r,n,i,o;let a=new Uint8Array;try{for(var s=!0,u=Sn(t),c;c=yield Me(u.next()),r=c.done,!r;s=!0){o=c.value,s=!1;const d=o;if(d==null)continue;const f=d instanceof ArrayBuffer?new Uint8Array(d):typeof d=="string"?pb(d):d;let h=new Uint8Array(a.length+f.length);h.set(a),h.set(f,a.length),a=h;let g;for(;(g=Tpe(a))!==-1;)yield yield Me(a.slice(0,g)),a=a.slice(g)}}catch(d){n={error:d}}finally{try{!s&&!r&&(i=u.return)&&(yield Me(i.call(u)))}finally{if(n)throw n.error}}a.length>0&&(yield yield Me(a))})}class Ppe{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,i]=Ipe(e,":");return i.startsWith(" ")&&(i=i.substring(1)),r==="event"?this.event=i:r==="data"&&this.data.push(i),null}}function Ipe(t,e){const r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Ope(t,e){const{response:r,requestLogID:n,retryOfRequestLogID:i,startTime:o}=e,a=await(async()=>{var s;if(e.options.stream)return sr(t).debug("response",r.status,r.url,r.headers,r.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(r,e.controller,t):Ia.fromSSEResponse(r,e.controller,t);if(r.status===204)return null;if(e.options.__binaryResponse)return r;const u=r.headers.get("content-type"),c=(s=u==null?void 0:u.split(";")[0])===null||s===void 0?void 0:s.trim();return(c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))?await r.json():await r.text()})();return sr(t).debug(`[${n}] response parsed`,fo({retryOfRequestLogID:i,url:r.url,status:r.status,body:a,durationMs:Date.now()-o})),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mb extends Promise{constructor(e,r,n=Ope){super(i=>{i(null)}),this.responsePromise=r,this.parseResponse=n,this.client=e}_thenUnwrap(e){return new mb(this.client,this.responsePromise,async(r,n)=>e(await this.parseResponse(r,n),n))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yO=Symbol("brand.privateNullableHeaders");function*Rpe(t){if(!t)return;if(yO in t){const{values:n,nulls:i}=t;yield*n.entries();for(const o of i)yield[o,null];return}let e=!1,r;t instanceof Headers?r=t.entries():Mk(t)?r=t:(e=!0,r=Object.entries(t??{}));for(let n of r){const i=n[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=Mk(n[1])?n[1]:[n[1]];let a=!1;for(const s of o)s!==void 0&&(e&&!a&&(a=!0,yield[i,null]),yield[i,s])}}const gl=t=>{const e=new Headers,r=new Set;for(const n of t){const i=new Set;for(const[o,a]of Rpe(n)){const s=o.toLowerCase();i.has(s)||(e.delete(o),i.add(s)),a===null?(e.delete(o),r.add(s)):(e.append(o,a),r.delete(s))}}return{[yO]:!0,values:e,nulls:r}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xm=t=>{var e,r,n,i,o,a;if(typeof globalThis.process<"u")return(n=(r=(e=ale)===null||e===void 0?void 0:e[t])===null||r===void 0?void 0:r.trim())!==null&&n!==void 0?n:void 0;if(typeof globalThis.Deno<"u")return(a=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,t))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vO;class Rp{constructor(e){var r,n,i,o,a,s,u,{baseURL:c=Xm("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:d=(r=Xm("GEMINI_API_KEY"))!==null&&r!==void 0?r:null,apiVersion:f="v1beta"}=e,h=ch(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:d,apiVersion:f},h),{baseURL:c||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(n=g.timeout)!==null&&n!==void 0?n:Rp.DEFAULT_TIMEOUT,this.logger=(i=g.logger)!==null&&i!==void 0?i:console;const b="warn";this.logLevel=b,this.logLevel=(a=(o=Fk(g.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:Fk(Xm("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:b,this.fetchOptions=g.fetchOptions,this.maxRetries=(s=g.maxRetries)!==null&&s!==void 0?s:2,this.fetch=(u=g.fetch)!==null&&u!==void 0?u:ppe(),this.encoder=ype,this._options=g,this.apiKey=d,this.apiVersion=f,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:r}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!r.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const r=gl([e.headers]);if(!(r.values.has("authorization")||r.values.has("x-goog-api-key"))){if(this.apiKey)return gl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return gl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new tn(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${pa}`}defaultIdempotencyKey(){return`stainless-node-retry-${epe()}`}makeStatusError(e,r,n,i){return dr.generate(e,r,n,i)}buildURL(e,r,n){const i=!this.baseURLOverridden()&&n||this.baseURL,o=rpe(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return ope(a)||(r=Object.assign(Object.assign({},a),r)),typeof r=="object"&&r&&!Array.isArray(r)&&(o.search=this.stringifyQuery(r)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const r=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${r}`}}async prepareRequest(e,{url:r,options:n}){}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(i=>Object.assign({method:e,path:r},i)))}request(e,r=null){return new mb(this,this.makeRequest(e,r,void 0))}async makeRequest(e,r,n){var i,o,a;const s=await e,u=(i=s.maxRetries)!==null&&i!==void 0?i:this.maxRetries;r==null&&(r=u),await this.prepareOptions(s);const{req:c,url:d,timeout:f}=await this.buildRequest(s,{retryCount:u-r});await this.prepareRequest(c,{url:d,options:s});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=n===void 0?"":`, retryOf: ${n}`,b=Date.now();if(sr(this).debug(`[${h}] sending request`,fo({retryOfRequestLogID:n,method:s.method,url:d,options:s,headers:c.headers})),!((o=s.signal)===null||o===void 0)&&o.aborted)throw new q0;const v=new AbortController,y=await this.fetchWithTimeout(d,c,f,v).catch(B0),x=Date.now();if(y instanceof globalThis.Error){const w=`retrying, ${r} attempts remaining`;if(!((a=s.signal)===null||a===void 0)&&a.aborted)throw new q0;const E=F0(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(r)return sr(this).info(`[${h}] connection ${E?"timed out":"failed"} - ${w}`),sr(this).debug(`[${h}] connection ${E?"timed out":"failed"} (${w})`,fo({retryOfRequestLogID:n,url:d,durationMs:x-b,message:y.message})),this.retryRequest(s,r,n??h);throw sr(this).info(`[${h}] connection ${E?"timed out":"failed"} - error; no more retries left`),sr(this).debug(`[${h}] connection ${E?"timed out":"failed"} (error; no more retries left)`,fo({retryOfRequestLogID:n,url:d,durationMs:x-b,message:y.message})),E?new eO:new Ip({cause:y})}const _=`[${h}${g}] ${c.method} ${d} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${x-b}ms`;if(!y.ok){const w=await this.shouldRetry(y);if(r&&w){const C=`retrying, ${r} attempts remaining`;return await gpe(y.body),sr(this).info(`${_} - ${C}`),sr(this).debug(`[${h}] response error (${C})`,fo({retryOfRequestLogID:n,url:y.url,status:y.status,headers:y.headers,durationMs:x-b})),this.retryRequest(s,r,n??h,y.headers)}const E=w?"error; no more retries left":"error; not retryable";sr(this).info(`${_} - ${E}`);const S=await y.text().catch(C=>B0(C).message),N=lpe(S),k=N?void 0:S;throw sr(this).debug(`[${h}] response error (${E})`,fo({retryOfRequestLogID:n,url:y.url,status:y.status,headers:y.headers,message:k,durationMs:Date.now()-b})),this.makeStatusError(y.status,N,k,y.headers)}return sr(this).info(_),sr(this).debug(`[${h}] response start`,fo({retryOfRequestLogID:n,url:y.url,status:y.status,headers:y.headers,durationMs:x-b})),{response:y,options:s,controller:v,requestLogID:h,retryOfRequestLogID:n,startTime:b}}async fetchWithTimeout(e,r,n,i){const o=r||{},{signal:a,method:s}=o,u=ch(o,["signal","method"]);a&&a.addEventListener("abort",()=>i.abort());const c=setTimeout(()=>i.abort(),n),d=globalThis.ReadableStream&&u.body instanceof globalThis.ReadableStream||typeof u.body=="object"&&u.body!==null&&Symbol.asyncIterator in u.body,f=Object.assign(Object.assign(Object.assign({signal:i.signal},d?{duplex:"half"}:{}),{method:"GET"}),u);s&&(f.method=s.toUpperCase());try{return await this.fetch.call(void 0,e,f)}finally{clearTimeout(c)}}async shouldRetry(e){const r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n,i){var o;let a;const s=i==null?void 0:i.get("retry-after-ms");if(s){const c=parseFloat(s);Number.isNaN(c)||(a=c)}const u=i==null?void 0:i.get("retry-after");if(u&&!a){const c=parseFloat(u);Number.isNaN(c)?a=Date.parse(u)-Date.now():a=c*1e3}if(!(a&&0<=a&&a<60*1e3)){const c=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(r,c)}return await upe(a),this.makeRequest(e,r-1,n)}calculateDefaultRetryTimeoutMillis(e,r){const o=r-e,a=Math.min(.5*Math.pow(2,o),8),s=1-Math.random()*.25;return a*s*1e3}async buildRequest(e,{retryCount:r=0}={}){var n,i,o;const a=Object.assign({},e),{method:s,path:u,query:c,defaultBaseURL:d}=a,f=this.buildURL(u,c,d);"timeout"in a&&spe("timeout",a.timeout),a.timeout=(n=a.timeout)!==null&&n!==void 0?n:this.timeout;const{bodyHeaders:h,body:g}=this.buildBody({options:a}),b=await this.buildHeaders({options:e,method:s,bodyHeaders:h,retryCount:r});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:s,headers:b},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=a.fetchOptions)!==null&&o!==void 0?o:{}),url:f,timeout:a.timeout}}async buildHeaders({options:e,method:r,bodyHeaders:n,retryCount:i}){let o={};this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const a=await this.authHeaders(e);let s=gl([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),hpe()),this._options.defaultHeaders,n,e.headers,a]);return this.validateHeaders(s),s.values}buildBody({options:{body:e,headers:r}}){if(!e)return{bodyHeaders:void 0,body:void 0};const n=gl([r]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:mpe(e)}:this.encoder({body:e,headers:n})}}Rp.DEFAULT_TIMEOUT=6e4;class qt extends Rp{constructor(){super(...arguments),this.interactions=new gO(this)}}vO=qt;qt.GeminiNextGenAPIClient=vO;qt.GeminiNextGenAPIClientError=tn;qt.APIError=dr;qt.APIConnectionError=Ip;qt.APIConnectionTimeoutError=eO;qt.APIUserAbortError=q0;qt.NotFoundError=iO;qt.ConflictError=oO;qt.RateLimitError=sO;qt.BadRequestError=tO;qt.AuthenticationError=rO;qt.InternalServerError=lO;qt.PermissionDeniedError=nO;qt.UnprocessableEntityError=aO;qt.toFile=_pe;qt.Interactions=gO;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mpe(t,e){const r={},n=p(t,["name"]);return n!=null&&m(r,["_url","name"],n),r}function $pe(t,e){const r={},n=p(t,["name"]);return n!=null&&m(r,["_url","name"],n),r}function Dpe(t,e){const r={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(r,["sdkHttpResponse"],n),r}function Lpe(t,e){const r={},n=p(t,["sdkHttpResponse"]);return n!=null&&m(r,["sdkHttpResponse"],n),r}function Upe(t,e,r){const n={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=p(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&m(e,["displayName"],i),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=p(t,["epochCount"]);e!==void 0&&o!=null&&m(e,["tuningTask","hyperparameters","epochCount"],o);const a=p(t,["learningRateMultiplier"]);if(a!=null&&m(n,["tuningTask","hyperparameters","learningRateMultiplier"],a),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=p(t,["batchSize"]);e!==void 0&&s!=null&&m(e,["tuningTask","hyperparameters","batchSize"],s);const u=p(t,["learningRate"]);if(e!==void 0&&u!=null&&m(e,["tuningTask","hyperparameters","learningRate"],u),p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return n}function Fpe(t,e,r){const n={};let i=p(r,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const g=p(t,["validationDataset"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec"],qk(g))}else if(i==="PREFERENCE_TUNING"){const g=p(t,["validationDataset"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec"],qk(g))}const o=p(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&m(e,["tunedModelDisplayName"],o);const a=p(t,["description"]);e!==void 0&&a!=null&&m(e,["description"],a);let s=p(r,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const g=p(t,["epochCount"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(s==="PREFERENCE_TUNING"){const g=p(t,["epochCount"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let u=p(r,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=p(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(u==="PREFERENCE_TUNING"){const g=p(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let c=p(r,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=p(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(c==="PREFERENCE_TUNING"){const g=p(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let d=p(r,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const g=p(t,["adapterSize"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(d==="PREFERENCE_TUNING"){const g=p(t,["adapterSize"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const f=p(t,["labels"]);e!==void 0&&f!=null&&m(e,["labels"],f);const h=p(t,["beta"]);return e!==void 0&&h!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],h),n}function Bpe(t,e){const r={},n=p(t,["baseModel"]);n!=null&&m(r,["baseModel"],n);const i=p(t,["preTunedModel"]);i!=null&&m(r,["preTunedModel"],i);const o=p(t,["trainingDataset"]);o!=null&&Qpe(o);const a=p(t,["config"]);return a!=null&&Upe(a,r),r}function qpe(t,e){const r={},n=p(t,["baseModel"]);n!=null&&m(r,["baseModel"],n);const i=p(t,["preTunedModel"]);i!=null&&m(r,["preTunedModel"],i);const o=p(t,["trainingDataset"]);o!=null&&Zpe(o,r,e);const a=p(t,["config"]);return a!=null&&Fpe(a,r,e),r}function Vpe(t,e){const r={},n=p(t,["name"]);return n!=null&&m(r,["_url","name"],n),r}function Gpe(t,e){const r={},n=p(t,["name"]);return n!=null&&m(r,["_url","name"],n),r}function Hpe(t,e,r){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=p(t,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const a=p(t,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),n}function zpe(t,e,r){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=p(t,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const a=p(t,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),n}function Wpe(t,e){const r={},n=p(t,["config"]);return n!=null&&Hpe(n,r),r}function Kpe(t,e){const r={},n=p(t,["config"]);return n!=null&&zpe(n,r),r}function Jpe(t,e){const r={},n=p(t,["sdkHttpResponse"]);n!=null&&m(r,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&m(r,["nextPageToken"],i);const o=p(t,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>xO(s))),m(r,["tuningJobs"],a)}return r}function Ype(t,e){const r={},n=p(t,["sdkHttpResponse"]);n!=null&&m(r,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&m(r,["nextPageToken"],i);const o=p(t,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>H0(s))),m(r,["tuningJobs"],a)}return r}function Xpe(t,e){const r={},n=p(t,["name"]);n!=null&&m(r,["model"],n);const i=p(t,["name"]);return i!=null&&m(r,["endpoint"],i),r}function Qpe(t,e){const r={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=p(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),m(r,["examples","examples"],i)}return r}function Zpe(t,e,r){const n={};let i=p(r,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const a=p(t,["gcsUri"]);e!==void 0&&a!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(i==="PREFERENCE_TUNING"){const a=p(t,["gcsUri"]);e!==void 0&&a!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let o=p(r,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const a=p(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(o==="PREFERENCE_TUNING"){const a=p(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function xO(t,e){const r={},n=p(t,["sdkHttpResponse"]);n!=null&&m(r,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&m(r,["name"],i);const o=p(t,["state"]);o!=null&&m(r,["state"],MI(o));const a=p(t,["createTime"]);a!=null&&m(r,["createTime"],a);const s=p(t,["tuningTask","startTime"]);s!=null&&m(r,["startTime"],s);const u=p(t,["tuningTask","completeTime"]);u!=null&&m(r,["endTime"],u);const c=p(t,["updateTime"]);c!=null&&m(r,["updateTime"],c);const d=p(t,["description"]);d!=null&&m(r,["description"],d);const f=p(t,["baseModel"]);f!=null&&m(r,["baseModel"],f);const h=p(t,["_self"]);return h!=null&&m(r,["tunedModel"],Xpe(h)),r}function H0(t,e){const r={},n=p(t,["sdkHttpResponse"]);n!=null&&m(r,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&m(r,["name"],i);const o=p(t,["state"]);o!=null&&m(r,["state"],MI(o));const a=p(t,["createTime"]);a!=null&&m(r,["createTime"],a);const s=p(t,["startTime"]);s!=null&&m(r,["startTime"],s);const u=p(t,["endTime"]);u!=null&&m(r,["endTime"],u);const c=p(t,["updateTime"]);c!=null&&m(r,["updateTime"],c);const d=p(t,["error"]);d!=null&&m(r,["error"],d);const f=p(t,["description"]);f!=null&&m(r,["description"],f);const h=p(t,["baseModel"]);h!=null&&m(r,["baseModel"],h);const g=p(t,["tunedModel"]);g!=null&&m(r,["tunedModel"],g);const b=p(t,["preTunedModel"]);b!=null&&m(r,["preTunedModel"],b);const v=p(t,["supervisedTuningSpec"]);v!=null&&m(r,["supervisedTuningSpec"],v);const y=p(t,["preferenceOptimizationSpec"]);y!=null&&m(r,["preferenceOptimizationSpec"],y);const x=p(t,["tuningDataStats"]);x!=null&&m(r,["tuningDataStats"],x);const _=p(t,["encryptionSpec"]);_!=null&&m(r,["encryptionSpec"],_);const w=p(t,["partnerModelTuningSpec"]);w!=null&&m(r,["partnerModelTuningSpec"],w);const E=p(t,["customBaseModel"]);E!=null&&m(r,["customBaseModel"],E);const S=p(t,["experiment"]);S!=null&&m(r,["experiment"],S);const N=p(t,["labels"]);N!=null&&m(r,["labels"],N);const k=p(t,["outputUri"]);k!=null&&m(r,["outputUri"],k);const A=p(t,["pipelineJob"]);A!=null&&m(r,["pipelineJob"],A);const C=p(t,["serviceAccount"]);C!=null&&m(r,["serviceAccount"],C);const R=p(t,["tunedModelDisplayName"]);R!=null&&m(r,["tunedModelDisplayName"],R);const $=p(t,["veoTuningSpec"]);return $!=null&&m(r,["veoTuningSpec"],$),r}function eme(t,e){const r={},n=p(t,["sdkHttpResponse"]);n!=null&&m(r,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&m(r,["name"],i);const o=p(t,["metadata"]);o!=null&&m(r,["metadata"],o);const a=p(t,["done"]);a!=null&&m(r,["done"],a);const s=p(t,["error"]);return s!=null&&m(r,["error"],s),r}function qk(t,e){const r={},n=p(t,["gcsUri"]);n!=null&&m(r,["validationDatasetUri"],n);const i=p(t,["vertexDatasetResource"]);return i!=null&&m(r,["validationDatasetUri"],i),r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tme extends yi{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new Yo(ci.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.get=async r=>await this.getInternal(r),this.tune=async r=>{var n;if(this.apiClient.isVertexAI())if(r.baseModel.startsWith("projects/")){const i={tunedModelName:r.baseModel};!((n=r.config)===null||n===void 0)&&n.preTunedModelCheckpointId&&(i.checkpointId=r.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},r),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},r);return await this.tuneInternal(i)}else{const i=Object.assign({},r),o=await this.tuneMldevInternal(i);let a="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?a=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(a=o.name.split("/operations/")[0]),{name:a,state:O0.JOB_STATE_QUEUED}}}}async getInternal(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=Gpe(e);return s=xe("{name}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>H0(d))}else{const c=Vpe(e);return s=xe("{name}",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>xO(d))}}async listInternal(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=Kpe(e);return s=xe("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=Ype(d),h=new pk;return Object.assign(h,f),h})}else{const c=Wpe(e);return s=xe("tunedModels",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=Jpe(d),h=new pk;return Object.assign(h,f),h})}}async cancel(e){var r,n,i,o;let a,s="",u={};if(this.apiClient.isVertexAI()){const c=$pe(e);return s=xe("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=Lpe(d),h=new mk;return Object.assign(h,f),h})}else{const c=Mpe(e);return s=xe("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,a=this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:d.headers},h})),a.then(d=>{const f=Dpe(d),h=new mk;return Object.assign(h,f),h})}}async tuneInternal(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=qpe(e,e);return o=xe("tuningJobs",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),i.then(u=>H0(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var r,n;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Bpe(e);return o=xe("tunedModels",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:u.headers},d})),i.then(u=>eme(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rme{async download(e,r){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const nme=1024*1024*8,ime=3,ome=1e3,ame=2,fh="x-goog-upload-status";async function sme(t,e,r){var n;const i=await bO(t,e,r),o=await(i==null?void 0:i.json());if(((n=i==null?void 0:i.headers)===null||n===void 0?void 0:n[fh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function lme(t,e,r){var n;const i=await bO(t,e,r),o=await(i==null?void 0:i.json());if(((n=i==null?void 0:i.headers)===null||n===void 0?void 0:n[fh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=AI(o),s=new lb;return Object.assign(s,a),s}async function bO(t,e,r){var n,i;let o=0,a=0,s=new R0(new Response),u="upload";for(o=t.size;a<o;){const c=Math.min(nme,o-a),d=t.slice(a,a+c);a+c>=o&&(u+=", finalize");let f=0,h=ome;for(;f<ime&&(s=await r.request({path:"",body:d,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(a),"Content-Length":String(c)}}}),!(!((n=s==null?void 0:s.headers)===null||n===void 0)&&n[fh]));)f++,await cme(h),h=h*ame;if(a+=c,((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[fh])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return s}async function ume(t){return{size:t.size,type:t.type}}function cme(t){return new Promise(e=>setTimeout(e,t))}class dme{async upload(e,r,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sme(e,r,n)}async uploadToFileSearchStore(e,r,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await lme(e,r,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ume(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fme{create(e,r,n){return new hme(e,r,n)}}class hme{constructor(e,r,n){this.url=e,this.headers=r,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vk="x-goog-api-key";class pme{constructor(e){this.apiKey=e}async addAuthHeaders(e,r){if(e.get(Vk)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Vk,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mme="gl-node/";class gme{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const r=new qt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=r.interactions,this._interactions}constructor(e){var r;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(r=e.vertexai)!==null&&r!==void 0?r:!1,this.apiKey=e.apiKey;const n=cle(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new pme(this.apiKey);this.apiClient=new uhe({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:mme+"web",uploader:new dme,downloader:new rme}),this.models=new Che(this.apiClient),this.live=new _he(this.apiClient,i,new fme),this.batches=new Uue(this.apiClient),this.chats=new bce(this.models,this.apiClient),this.caches=new yce(this.apiClient),this.files=new jce(this.apiClient),this.operations=new Ahe(this.apiClient),this.authTokens=new Hhe(this.apiClient),this.tunings=new tme(this.apiClient),this.fileSearchStores=new Zhe(this.apiClient)}}const yme=({user:t})=>{const[e,r]=T.useState(!1),[n,i]=T.useState(""),[o,a]=T.useState([{id:"1",role:"model",text:` ${t.fullName} 
  .           .`}]),[s,u]=T.useState(!1),c=T.useRef(null);T.useEffect(()=>{var h;(h=c.current)==null||h.scrollIntoView({behavior:"smooth"})},[o]);const d=async()=>{try{const{data:h}=await Oe.from("cartable_items").select("*").eq("module","WORK_ORDER").order("created_at",{ascending:!1}).limit(20),g=(h||[]).map(x=>{const _=x.data||{};return{code:x.tracking_code,title:x.title,status:_.status||x.status,equipment:_.equipName||"",failure:_.failureDesc,date:x.created_at,requester:_.requester}}),{data:b}=await Oe.from("cartable_items").select("*").eq("module","PART_REQUEST").limit(10),v=(b||[]).map(x=>{const _=x.data||{};return{part:_.partName,qty:_.qty,requester:x.description}});return`
          You are an intelligent assistant for a Factory Maintenance Management System (CMMS).
          Your goal is to help the maintenance manager by analyzing the provided data.
          
          HERE IS THE LIVE DATA FROM THE DATABASE (Supabase):
          ${JSON.stringify({currentTime:new Date().toLocaleString("fa-IR"),currentUser:t.fullName,recentWorkOrders:g,activePartsRequests:v})}

          INSTRUCTIONS:
          1. Answer solely based on the data provided above.
          2. If asked for "Top Failures" or similar, count the occurrences of equipment names in the workOrdersSummary.
          3. Respond in Persian (Farsi).
          4. Be concise and professional.
          5. Use formatting (bullet points, bold text) to make it readable.
          6. If the data is empty, say so.
          7. For "Most frequent failures", calculate the frequency of equipment names in the work orders list and show the top 10.
        `}catch(h){return console.error("Error collecting context:",h),"Error loading system data. Please answer generally."}},f=async h=>{if(h.preventDefault(),!n.trim())return;const g={id:Date.now().toString(),role:"user",text:n};a(b=>[...b,g]),i(""),u(!0);try{const b=new gme({apiKey:"AIzaSyBbrl8wKH28MYJn0yx2AZO6fqQUyhlm-KI"}),v=await d(),x=(await b.models.generateContent({model:"gemini-3-flash-preview",contents:[{role:"user",parts:[{text:v+`

User Question: `+n}]}],config:{temperature:.3}})).text||"    .";a(_=>[..._,{id:(Date.now()+1).toString(),role:"model",text:x}])}catch(b){console.error("AI Error:",b);let v=`: ${b.message||"      ."}`;b.message&&b.message.toLowerCase().includes("failed to fetch")?v=`        .

         (VPN)        .`:b.message&&(b.message.includes("403")||b.message.includes("400"))&&(v="  API        ."),a(y=>[...y,{id:(Date.now()+1).toString(),role:"model",text:v}])}finally{u(!1)}};return l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>r(!e),className:`fixed bottom-6 left-6 z-50 p-4 rounded-full shadow-2xl transition-all duration-300 transform hover:scale-110 flex items-center gap-2
            ${e?"bg-red-500 rotate-90":"bg-gradient-to-r from-blue-600 to-purple-600 animate-pulse"} text-white`,children:e?l.jsx(ht,{className:"w-6 h-6"}):l.jsx(cD,{className:"w-7 h-7"})}),e&&l.jsxs("div",{className:"fixed bottom-24 left-6 z-50 w-full max-w-sm md:max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col h-[500px] animate-slideUp",children:[l.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-4 flex items-center gap-3 text-white",children:[l.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:l.jsx(FD,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold",children:" "}),l.jsx("p",{className:"text-xs opacity-80",children:"  "})]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-gray-900/50",children:[o.map(h=>l.jsx("div",{className:`flex ${h.role==="user"?"justify-start":"justify-end"}`,children:l.jsx("div",{className:`max-w-[85%] p-3 rounded-2xl text-sm leading-relaxed whitespace-pre-wrap shadow-sm
                        ${h.role==="user"?"bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 rounded-br-none border border-gray-100 dark:border-gray-600":"bg-blue-600 text-white rounded-bl-none"}
                     `,children:h.text})},h.id)),s&&l.jsx("div",{className:"flex justify-end",children:l.jsxs("div",{className:"bg-blue-600/10 text-blue-600 p-3 rounded-2xl rounded-bl-none flex items-center gap-2 text-xs font-bold",children:[l.jsx(Ct,{className:"w-4 h-4 animate-spin"}),"   ..."]})}),l.jsx("div",{ref:c})]}),l.jsxs("form",{onSubmit:f,className:"p-3 bg-white dark:bg-gray-800 border-t dark:border-gray-700 flex gap-2",children:[l.jsx("input",{type:"text",value:n,onChange:h=>i(h.target.value),placeholder:"   ...",className:"flex-1 bg-gray-100 dark:bg-gray-700 border-none rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-blue-500 outline-none"}),l.jsx("button",{type:"submit",disabled:s||!n.trim(),className:"bg-blue-600 text-white p-3 rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:l.jsx(Zd,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"px-4 py-1 bg-gray-50 dark:bg-gray-900 text-[10px] text-center text-gray-400 border-t dark:border-gray-700",children:"           ."})]})]})},vme=()=>{const[t,e]=T.useState(0),[r,n]=T.useState(!1);return T.useEffect(()=>{setTimeout(()=>n(!0),2500);const i=4e3,o=30,s=100/(i/o),u=setInterval(()=>{e(c=>c>=100?(clearInterval(u),100):Math.min(c+s,100))},o);return()=>{clearInterval(u)}},[]),l.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-gray-50 dark:bg-gray-900 transition-colors overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute -top-[20%] -right-[10%] w-[70vw] h-[70vw] rounded-full bg-[#800020]/5 blur-3xl animate-pulse"}),l.jsx("div",{className:"absolute top-[40%] -left-[10%] w-[50vw] h-[50vw] rounded-full bg-blue-500/5 blur-3xl animate-pulse",style:{animationDelay:"1s"}})]}),l.jsxs("div",{className:"flex flex-col items-center z-10 relative",children:[l.jsx("div",{className:"w-48 h-48 mb-6 relative",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 200",fill:"none",className:"w-full h-full drop-shadow-xl",children:[l.jsx("defs",{children:l.jsxs("filter",{id:"softGlow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[l.jsx("feGaussianBlur",{stdDeviation:"2",result:"blur"}),l.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]})}),l.jsx("path",{d:"M100 25 L175 165 H25 L100 25 Z",stroke:"#7f1d1d",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",className:"logo-part-triangle"}),l.jsxs("g",{strokeLinejoin:"round",strokeLinecap:"round",children:[l.jsx("path",{d:"M100 180 L150 155 L100 130 L50 155 Z",fill:"#7f1d1d",stroke:"#7f1d1d",strokeWidth:"4",className:"logo-part-rhombus-bottom"}),l.jsx("path",{d:"M100 145 L140 120 L100 95 L60 120 Z",fill:"#991b1b",stroke:"#991b1b",strokeWidth:"4",className:"logo-part-rhombus-middle"}),l.jsx("path",{d:"M100 110 L130 90 L100 70 L70 90 Z",fill:"#b91c1c",stroke:"#b91c1c",strokeWidth:"4",className:"logo-part-rhombus-top"})]}),l.jsx("circle",{cx:"100",cy:"40",r:"8",fill:"#7f1d1d",className:"logo-part-dot"})]})}),l.jsxs("div",{className:`text-center transition-all duration-1000 transform ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[l.jsx("h1",{className:"text-3xl font-black text-[#800020] dark:text-red-400 mb-2 tracking-wide",children:"  "}),l.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium mb-10",children:"    "})]}),l.jsx("div",{className:"w-48 h-1 bg-gray-200 dark:bg-gray-800 rounded-full overflow-hidden relative",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-[#800020] to-red-500 rounded-full transition-all duration-100 ease-linear shadow-[0_0_10px_rgba(128,0,32,0.5)]",style:{width:`${t}%`}})})]}),l.jsx("style",{children:`
        /* 1. Triangle Drawing Animation */
        .logo-part-triangle {
            stroke-dasharray: 600;
            stroke-dashoffset: 600;
            opacity: 0.3;
            animation: drawTriangle 2.5s ease-out forwards;
        }
        @keyframes drawTriangle {
            0% { stroke-dashoffset: 600; opacity: 0; }
            100% { stroke-dashoffset: 0; opacity: 0.3; }
        }

        /* 2. Rhombus Assembly Animations */
        /* Staggered to complete by approx 3.8s */
        .logo-part-rhombus-bottom {
            opacity: 0;
            transform-origin: center;
            animation: assemblePart 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
            animation-delay: 0.8s;
        }
        .logo-part-rhombus-middle {
            opacity: 0;
            transform-origin: center;
            animation: assemblePart 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
            animation-delay: 1.6s;
        }
        .logo-part-rhombus-top {
            opacity: 0;
            transform-origin: center;
            animation: assemblePart 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
            animation-delay: 2.4s;
        }

        @keyframes assemblePart {
            0% { opacity: 0; transform: translateY(25px) scale(0.8); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* 3. Dot Pop In (Last piece) */
        .logo-part-dot {
            opacity: 0;
            transform-origin: center;
            animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            animation-delay: 3.2s;
        }
        @keyframes popIn {
            0% { opacity: 0; transform: scale(0); }
            100% { opacity: 1; transform: scale(1); }
        }
      `})]})},Gk=300*1e3,xme=()=>{const[t,e]=T.useState(!0),[r,n]=T.useState(()=>{try{const g=localStorage.getItem("lastActivityTime");if(g&&Date.now()-parseInt(g,10)>Gk)return localStorage.removeItem("currentUser"),null;const b=localStorage.getItem("currentUser");return b?JSON.parse(b):null}catch(g){return console.error("Failed to parse user from local storage",g),localStorage.removeItem("currentUser"),null}}),[i,o]=T.useState(()=>localStorage.getItem("theme")==="dark"),[a,s]=T.useState(()=>localStorage.getItem("snowMode")==="true"),u=T.useRef(null);T.useEffect(()=>{const g=setTimeout(()=>{e(!1)},6e3);return()=>clearTimeout(g)},[]);const c=T.useCallback(async(g=!1)=>{if(r){const b=await Hw();try{await Oe.from("system_logs").insert([{user_id:r.id,user_name:r.fullName,personnel_code:r.personnelCode||"---",action:g?"  ( )":"  ",ip_address:b,details:`Logout Time: ${at()} ${rs()}`}])}catch(x){console.error("Logout logging failed:",x)}const v=localStorage.getItem("theme"),y=localStorage.getItem("snowMode");localStorage.clear(),v&&localStorage.setItem("theme",v),y&&localStorage.setItem("snowMode",y)}n(null),g&&alert("               .")},[r]),d=T.useCallback(()=>{r&&(localStorage.setItem("lastActivityTime",Date.now().toString()),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{c(!0)},Gk))},[r,c]);T.useEffect(()=>{if(!r)return;const g=["mousedown","mousemove","keydown","scroll","touchstart"],b=()=>d();return g.forEach(v=>document.addEventListener(v,b)),d(),()=>{g.forEach(v=>document.removeEventListener(v,b)),u.current&&clearTimeout(u.current)}},[r,d]),T.useEffect(()=>{i?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[i]),T.useEffect(()=>{localStorage.setItem("snowMode",String(a))},[a]);const f=async g=>{n(g),localStorage.setItem("currentUser",JSON.stringify(g)),localStorage.setItem("lastActivityTime",Date.now().toString());try{const b=await Hw();await Oe.from("system_logs").insert([{user_id:g.id,user_name:g.fullName,personnel_code:g.personnelCode||(g.username==="admin"?"9999":"0000"),action:"  ",ip_address:b,details:`Role: ${g.role}`}])}catch(b){console.error("Login logging failed:",b)}},h=g=>{n(g),localStorage.setItem("currentUser",JSON.stringify(g))};return t?l.jsx(vme,{}):l.jsxs(eD,{children:[l.jsx(ole,{enabled:a}),r&&l.jsx(yme,{user:r}),l.jsx(G5,{user:r,onLogout:()=>c(!1),darkMode:i,toggleDarkMode:()=>o(!i),children:l.jsxs(X$,{children:[l.jsx(gt,{path:"/login",element:r?l.jsx(bt,{to:"/"}):l.jsx(z5,{onLogin:f})}),l.jsx(gt,{path:"/",element:r?l.jsx($se,{}):l.jsx(bt,{to:"/login"})}),l.jsx(gt,{path:"/inbox",element:r?l.jsx(Yse,{user:r}):l.jsx(bt,{to:"/login"})}),l.jsx(gt,{path:"/messages",element:r?l.jsx(Xse,{user:r}):l.jsx(bt,{to:"/login"})}),l.jsx(gt,{path:"/notes",element:r?l.jsx(Qse,{user:r}):l.jsx(bt,{to:"/login"})}),l.jsx(gt,{path:"/reports",element:r?l.jsx(ele,{}):l.jsx(bt,{to:"/login"})}),l.jsx(gt,{path:"/shift-report",element:r?l.jsx(ile,{user:r}):l.jsx(bt,{to:"/login"})}),l.jsx(gt,{path:"/work-orders",element:r?l.jsx(Use,{}):l.jsx(bt,{to:"/login"})}),l.jsx(gt,{path:"/work-orders/new",element:r?l.jsx(ob,{}):l.jsx(bt,{to:"/login"})}),l.jsx(gt,{path:"/projects",element:r?l.jsx(Kse,{user:r}):l.jsx(bt,{to:"/login"})}),l.jsx(gt,{path:"/performance",element:r?l.jsx(Jse,{user:r}):l.jsx(bt,{to:"/login"})}),l.jsx(gt,{path:"/part-requests",element:r?l.jsx(qse,{user:r}):l.jsx(bt,{to:"/login"})}),l.jsx(gt,{path:"/inspections",element:r?l.jsx(Bse,{user:r}):l.jsx(bt,{to:"/login"})}),l.jsx(gt,{path:"/documents",element:r?l.jsx(Vse,{}):l.jsx(bt,{to:"/login"})}),l.jsx(gt,{path:"/meetings",element:r?l.jsx(Gse,{user:r}):l.jsx(bt,{to:"/login"})}),l.jsx(gt,{path:"/suggestions",element:r?l.jsx(Hse,{user:r}):l.jsx(bt,{to:"/login"})}),l.jsx(gt,{path:"/purchases",element:r?l.jsx(zse,{user:r}):l.jsx(bt,{to:"/login"})}),l.jsx(gt,{path:"/workflow-designer",element:(r==null?void 0:r.role)===gr.ADMIN?l.jsx(Zse,{}):l.jsx(bt,{to:"/"})}),l.jsx(gt,{path:"/admin",element:(r==null?void 0:r.role)===gr.ADMIN?l.jsx(Lse,{}):l.jsx(bt,{to:"/"})}),l.jsx(gt,{path:"/settings",element:r?l.jsx(Wse,{user:r,onUpdateUser:h,snowMode:a,setSnowMode:s}):l.jsx(bt,{to:"/login"})}),l.jsx(gt,{path:"*",element:l.jsx(bt,{to:"/"})})]})})]})};class bme extends G.Component{constructor(e){super(e),this.state={hasError:!1,error:null},this.props=e}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("Uncaught error:",e,r)}render(){var e;return this.state.hasError?l.jsxs("div",{style:{padding:"20px",fontFamily:"sans-serif",textAlign:"center",direction:"rtl",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[l.jsx("h1",{style:{color:"#800020",marginBottom:"10px"},children:"    "}),l.jsx("p",{style:{marginBottom:"20px"},children:"            ."}),l.jsx("div",{style:{marginBottom:"20px",padding:"10px",background:"#f3f4f6",borderRadius:"8px",textAlign:"left",direction:"ltr",overflow:"auto",maxHeight:"200px",fontSize:"12px",maxWidth:"100%",width:"400px"},children:(e=this.state.error)==null?void 0:e.toString()}),l.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},style:{padding:"12px 24px",backgroundColor:"#800020",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:"    "})]}):this.props.children||null}}const wO=document.getElementById("root");if(!wO)throw new Error("Failed to find the root element");const wme=Qm.createRoot(wO);wme.render(l.jsx(G.StrictMode,{children:l.jsx(bme,{children:l.jsx(xme,{})})}));
